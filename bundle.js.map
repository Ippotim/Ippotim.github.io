{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap f7e68757d83bdee43cd0","webpack:///./node_modules/preact/dist/preact.min.js","webpack:///./src/modules/helper.js","webpack:///./src/modules/shims/electron.js","webpack:///./node_modules/classnames/index.js","webpack:///./src/modules/gametree.js","webpack:///./src/modules/shims/fs.js","webpack:///./src/modules/shims/noop.js","webpack:///./src/modules/fileformats/index.js","webpack:///./src/modules/board.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/process/browser.js","webpack:///./src/components/bars/Bar.js","webpack:///./src/modules/fileformats/sgf.js","webpack:///./src/modules/shims/buffer.js","webpack:///./src/modules/shims/iconv-lite.js","webpack:///./src/modules/shims/jschardet.js","webpack:///./src/modules/shims/empty.js","webpack:///./src/components/drawers/Drawer.js","webpack:///./node_modules/events/events.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/modules/boardmatcher.js","webpack:///./src/modules/dialog.js","webpack:///./src/modules/deadstones.js","webpack:///./src/components/App.js","webpack:///./src/modules/marked.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/copy-text-to-clipboard/index.js","webpack:///./src/setting.js","webpack:///./src/modules/shims/Menu.js","webpack:///./src/components/MainView.js","webpack:///./src/components/Goban.js","webpack:///./src/components/bars/PlayBar.js","webpack:///./src/components/bars/EditBar.js","webpack:///./src/components/bars/ScoringBar.js","webpack:///./src/components/bars/FindBar.js","webpack:///./src/modules/fileformats/ngf.js","webpack:///./src/modules/fileformats/gib.js","webpack:///./src/components/Sidebar.js","webpack:///./src/components/Slider.js","webpack:///./src/components/GameGraph.js","webpack:///./src/components/CommentBox.js","webpack:///./src/components/ContentDisplay.js","webpack:///./data/shapes.sgf","webpack:///./src/components/DrawerManager.js","webpack:///./src/components/drawers/InfoDrawer.js","webpack:///./node_modules/pikaday/pikaday.js","webpack:///./node_modules/pikaday","webpack:///./src/components/drawers/ScoreDrawer.js","webpack:///./src/components/drawers/GameChooserDrawer.js","webpack:///./src/components/MiniGoban.js","webpack:///./node_modules/natsort/index.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/components/InputBox.js","webpack:///./src/components/BusyScreen.js","webpack:///./src/components/InfoOverlay.js","webpack:///./src/modules/sound.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_typeof","Symbol","iterator","obj","constructor","e","t","r","a","E","arguments","length","W","push","children","pop","u","nodeName","attributes","key","S","vnode","slice","__d","A","debounceRendering","P","k","splitText","_componentConstructor","__n","toLowerCase","defaultProps","_","document","createElementNS","createElement","parentNode","removeChild","style","cssText","V","test","innerHTML","__html","replace","substring","addEventListener","f","removeEventListener","__l","removeAttribute","removeAttributeNS","setAttributeNS","setAttribute","className","this","type","event","D","afterMount","componentDidMount","h","H","R","ownerSVGElement","j","appendChild","_component","nodeValue","createTextNode","replaceChild","b","__preactattr_","U","firstChild","value","nextSibling","v","dangerouslySetInnerHTML","g","childNodes","y","w","C","x","N","__k","trim","insertBefore","L","ref","lastChild","previousSibling","I","render","T","__b","splice","__x","__r","base","componentWillMount","componentWillReceiveProps","context","__c","__p","props","syncComponentUpdates","state","__s","shouldComponentUpdate","componentWillUpdate","getChildContext","M","__u","unshift","componentDidUpdate","afterUpdate","__h","beforeUnmount","componentWillUnmount","Promise","resolve","then","bind","setTimeout","setState","forceUpdate","$","cloneElement","Component","rerender","options","process","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","Array","isArray","TypeError","id","linebreak","platform","noop","getId","hash","str","chr","charCodeAt","floorEven","float","Math","floor","equals","toString","aa","ao","kk","keys","shallowEquals","every","vertexEquals","_ref","_ref2","_ref4","_ref3","lexicalCompare","normalizeEndings","input","markdown","htmlify","urlRegex","coordRegex","totalRegex","join","RegExp","match","popupMenu","template","_require","remote","setting","require","zoomFactor","Menu","buildFromTemplate","popup","getCurrentWindow","round","async","copy","_require2","hiddenStyle","opacity","pointerEvents","app","getName","getVersion","getPath","ipcRenderer","on","send","clipboard","readText","prompt","writeText","content","element","href","onClick","evt","preventDefault","body","click","remove","shell","openExternal","target","_x","_require3","apply","show","close","isMaximized","isMinimized","isFullScreen","setFullScreen","setMenuBarVisibility","setAutoHideMenuBar","setProgressBar","setContentSize","getContentSize","webContents","setAudioMuted","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","classNames","classes","arg","argType","hasOwn","window","_toConsumableArray","arr2","from","Board","helper","sgf","new","nodes","subtrees","current","parent","clone","tree","assign","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","node","cn","concat","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","subtree","getRoot","getRootProperty","fallback","result","getHeight","height","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","max","getCurrentHeight","getTreesRecursive","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","getLevel","index","getSection","level","sections","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","navigate","step","prev","newstep","makeHorizontalNavigator","root","map","indexOf","split","newnodes","newtree","reduce","_tree$nodes","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","onCurrentTrack","onMainTrack","getMatrixDict","matrix","dict","xshift","yshift","hasCollisions","min","getMatrixWidth","filter","padding","getBoard","baseboard","vertex","board","_exports","size","SZ","includes","data","B","prop","point2vertex","makeMove","AW","AE","AB","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","compressed2list","hasVertex","set","markups","CR","MA","SQ","TR","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","LB","composed","sep","point","label","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","_map","_map2","v1","v2","lines","addOverlay","sign","ghosts","types","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","getJson","JSON","stringify","val","fromJson","json","parse","addInformation","getHash","getMatrixHash","readFile","file","callback","reader","FileReader","onload","readAsText","readFileSync","writeFileSync","mkdirSync","accessSync","fs","extname","ngf","gib","extensions","meta","combinedExtensions","acc","getModuleByExtension","extension","find","parseFile","onProgress","trees","_classCallCheck","instance","Constructor","_createClass","defineProperties","descriptor","writable","protoProps","staticProps","alpha","width","arrangement","captures","fill","_ref5","_ref6","_this","abs","getCanonicalVertex","boardSize","sort","_this2","ignoreBoard","_vertex","allNeighbors","func","_this3","signs","getNeighbors","some","getConnectedComponent","_this4","visited","neighbors","hasLiberties","_this5","chain","getChain","liberties","added","freeNeighbors","forEach","_this6","_this7","indicator","_ref7","_ref8","_this8","getAreaMap","pnnmap","getNearestNeighborMap","nnnmap","pimap","getInfluenceMap","nimap","_neighbors$","_ref9","_ref10","_this9","Infinity","old","ny","_this10","getVertex","z","castInfluence","distance","queue","_queue$shift","shift","_queue$shift2","_getVertex","_getVertex2","areaMap","score","area","territory","coord","toUpperCase","substr","move","deadNeighbors","count","nearX","nearY","farX","farY","middleX","middleY","_this11","lb","getIndexFromVertex","_ref11","_ref12","rowLength","getHandicapPlacement","plain","circle","square","triangle","cross","_markups$_v","isNaN","parseFloat","_ref13","_ref14","start","end","arrow","vertex2coord","getPositionHash","normalizeArray","parts","allowAboveRoot","up","last","xs","res","splitPathRe","splitPath","filename","exec","resolvedPath","resolvedAbsolute","path","cwd","charAt","normalize","isAbsolute","trailingSlash","paths","relative","to","fromParts","toParts","samePartsLength","outputParts","delimiter","dirname","dir","basename","ext","len","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","timeout","run","Item","array","nextTick","args","title","browser","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","chdir","umask","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","Bar","_Component","getPrototypeOf","onCloseButtonClick","sabaki","setMode","nextProps","mode","_ref$class","class","bar","_parseTokens","tokens","encoding","defaultEncoding","depth","iconv","gametree","_tokens$i","unescapeString","encodingExists","encodedProperties","decode","Buffer","decodedValue","_tokens$i2","progress","tokenize","contents","rules","ignore","parenthesis","semicolon","prop_ident","c_value_type","token","matches","parseTokens","ignoreEncoding","foundEncoding","jschardet","detected","detect","confidence","string2dates","dates","date","dates2string","datesCopy","vertex2point","compressed","colon","list","output","escapeString","inBackslash","Drawer","drawer","EventEmitter","_events","_maxListeners","isFunction","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","er","handler","error","listener","newListener","warned","console","trace","fired","position","listenerCount","evlistener","emitter","__webpack_amd_options__","_shapes","getSymmetries","getBoardSymmetries","mx","my","mod","readShapes","anchors","vertices","cornerMatch","hypotheses","hypothesesInvert","representatives","shapeMatch","shape","equalsVertex","anchor","diff","symm","getMoveInterpretation","_ref13$shapes","shapes","getLiberties","friendly","fileInput","showMessageBox","message","buttons","cancelId","alert","confirm","showOpenDialog","cloneNode","multiple","properties","currentTarget","files","showSaveDialog","encodeURIComponent","download","showInputBox","onSubmit","onCancel","inputBoxText","onInputBoxSubmit","onInputBoxCancel","closeInputBox","_sabaki$state$onInput","isPointChain","equalsSign","friendlyNeighbors","makePseudoMove","checkCapture","checkMultipleDeadChains","dead","deadChains","fixHoles","fix","_len","_key","guess","scoring","iterations","boardClone","getFloatingStones","getProbabilityMap","probability","sum","newSign","updatedResult","related","getRelatedChains","isNegative","isPositive","markAsDone","posArea","negArea","posDead","negDead","posDiff","negDiff","actualArea","actualDead","playTillEnd","freeVertices","illegalVertices","finished","madeMove","randomIndex","random","freedVertices","pmap","nmap","_defineProperty","ThemeManager","MainView","LeftSidebar","Sidebar","DrawerManager","InputBox","BusyScreen","InfoOverlay","boardmatcher","deadstones","dialog","fileformats","gtp","sound","App","emptyTree","openDrawer","busy","fullScreen","showMenuBar","representedFilename","gameTrees","treePosition","undoable","undoText","selectedTool","scoringMethod","findText","findVertex","deadStones","blockedGuesses","highlightVertices","showCoordinates","showMoveColorization","showNextMoves","showSiblings","fuzzyStonePlacement","animatedStonePlacement","animatedVertex","consoleLog","showConsole","leftSidebarWidth","showGameGraph","showCommentBox","sidebarWidth","graphGridSize","graphNodeSize","engines","attachedEngines","engineCommands","generatingMoves","preferencesTab","infoOverlayText","showInfoOverlay","events","appName","treeHash","generateTreeHash","attachedEngineControllers","engineBoards","updateSettingState","loadFile","askForReload","resizeId","_window$getContentSiz","_window$getContentSiz2","menuData","handleMenuClicks","menu","item","submenu","querySelectorAll","residueDeltaY","deltaY","goStep","dataTransfer","keyCode","stopGeneratingMoves","closeDrawer","activeElement","tagName","goToBeginning","goToEnd","goToSiblingVariation","returnValue","newFile","prevState","_state","_state$treePosition","inferredState","gameIndex","flashInfoOverlay","showLeftSidebar","showSidebar","_window$getContentSiz3","_window$getContentSiz4","widthDiff","setZoomFactor","app.zoom_factor","view.show_menubar","view.show_coordinates","view.show_move_colorization","view.show_next_moves","view.show_siblings","view.fuzzy_stone_placement","view.animated_stone_placement","graph.grid_size","graph.node_size","engines.list","scoring.method","dispatchEvent","Event","stateChange","_require4","blur","text","hideInfoOverlay","handicap","handicapStones","sizeInfo","handicapInfo","Date","dateInfo","getFullYear","getMonth","getDate","_ref3$playSound","playSound","_ref3$showInfo","showInfo","_ref3$suppressAskForS","suppressAskForSave","askForSave","clearUndoPoint","detachEngines","getEmptyGameTree","fileHash","generateFileHash","playNewGame","_ref4$suppressAskForS","filters","_require5","loadContent","_ref6$suppressAskForS","_ref6$ignoreEncoding","_ref6$callback","setBusy","lastProgress","getSGF","AP","CA","answer","_ref7$button","button","_ref7$ctrlKey","ctrlKey","_ref7$x","_ref7$y","_state$treePosition2","coord2vertex","sendToEngine","removeNode","openCommentMenu","commentText","tool","useTool","editVertexData","_state2","stones","findMove","tp","nextNode","nextVertex","player","blocked","_vertex$map$reduce","_vertex$map$reduce2","_ref11$player","_ref11$clearUndoPoint","_ref11$sendToEngine","_state$treePosition3","pass","currentPlayer","color","capture","suicide","ko","createNode","vertexNeighbors","nextTreePosition","variations","updateRoot","splitted","newTree","setCurrentTreePosition","playPass","delay","playCapture","playPachi","enterScoring","prevNode","prevColor","passPlayer","startGeneratingMoves","_ref12$player","_ref12$setUndoPoint","setUndoPoint","_inferredState","rootTree","rootNode","RE","makeMainVariation","argument","_state$treePosition4","_inferredState2","number","PL","oldSign","endVertex","toDelete","findIndex","LN","AR","p1","p2","letterIndex","_state$treePosition5","undoData","_undoData","undoRoot","undoLevel","_state3","_ref15","_ref15$clearUndoPoint","_state$treePosition6","_state$treePosition7","_state$treePosition8","_tp","_state4","_treePosition","newIndex","condition","findPosition","_ref16","_ref16$vertex","_ref16$text","cond","komi","playerNames","playerRanks","blackName","blackRank","whiteName","whiteRank","gameName","eventName","HA","comment","hotspot","moveAnnotation","positionAnnotation","_ref17","_ref18","HO","clearProperties","moveProps","BM","DO","IT","TE","positionProps","UC","GW","GB","DM","copyVariationData","_ref19","_ref19$setUndoPoint","copyVariation","suppressConfirmation","_ref20","_ref20$setUndoPoint","oldLength","copied","_ref21","_ref21$setUndoPoint","_inferredState3","inherit","_ref22","_ref22$setUndoPoint","_t$subtrees$splice","_t$subtrees$splice2","_ref23","_ref23$setUndoPoint","iNew","_ref24","_ref24$suppressConfir","_ref24$setUndoPoint","_ref25","_ref25$suppressConfir","_ref25$setUndoPoint","_this12","cutVariation","pasteVariation","shiftVariation","flattenVariation","removeOtherVariations","_this13","setComment","_Object$keys","_Object$keys2","checked","_this14","_len2","_key2","_state5","reverse","command","Command","stop","controller","Controller","sendGTPCommand","_ref26","response","_ref27","_ref28","Response","syncEngines","_ref29","_ref30","followUp","scoreBoard","getAreaEstimateMap","gameInfo","getGameInfo","getPlayer","leftsidebar","sidebar","global","Lexer","links","marked","defaults","block","normal","gfm","tables","InlineLexer","inline","renderer","Renderer","breaks","pedantic","Parser","escape","html","encode","unescape","String","fromCharCode","parseInt","regex","opt","source","merge","src","pending","highlight","lex","out","lang","code","escaped","silent","newline","fences","hr","heading","nptable","lheading","blockquote","def","table","paragraph","bullet","_tag","top","bq","loose","cap","bull","space","header","align","cells","ordered","smartLists","sanitize","pre","sanitizer","autolink","url","tag","link","reflink","nolink","strong","em","br","del","_inside","_href","mangle","inLink","outputLink","codespan","smartypants","image","ch","langPrefix","quote","raw","headerPrefix","xhtml","listitem","tablerow","tablecell","flags","prot","decodeURIComponent","tok","peek","parseText","row","cell","setOptions","parser","lexer","inlineLexer","Function","eval","el","contain","left","fontSize","selection","getSelection","originalRange","rangeCount","getRangeAt","select","selectionStart","selectionEnd","success","execCommand","removeAllRanges","addRange","settings","app.startup_check_updates","app.startup_check_updates_delay","app.loadgame_delay","app.hide_busy_delay","autoplay.sec_per_move","autoplay.max_sec_per_move","autoscroll.max_interval","autoscroll.min_interval","autoscroll.diff","cleanmarkup.cross","cleanmarkup.triangle","cleanmarkup.square","cleanmarkup.circle","cleanmarkup.line","cleanmarkup.arrow","cleanmarkup.label","cleanmarkup.comments","cleanmarkup.annotations","cleanmarkup.hotspots","comments.show_move_interpretation","console.blocked_commands","console.max_history_count","debug.dev_tools","edit.click_currentvertex_to_remove","edit.show_removenode_warning","edit.show_removeothervariations_warning","edit.undo_delay","file.show_reload_warning","find.delay","game.default_board_size","game.default_komi","game.default_handicap","game.goto_end_after_loading","game.navigation_sensitivity","game.show_ko_warning","game.show_suicide_warning","gamechooser.show_delay","gamechooser.thumbnail_size","graph.delay","graph.edge_color","graph.edge_inactive_color","graph.edge_size","graph.edge_inactive_size","graph.node_active_color","graph.node_bookmark_color","graph.node_color","graph.node_inactive_color","graph.node_comment_color","graph.node_inactive_bookmark_color","graph.node_inactive_comment_color","gtp.attach_delay","gtp.move_delay","score.estimator_iterations","setting.overwrite.v0.16.0","setting.overwrite.v0.17.1","setting.overwrite.v0.19.0_1","setting.overwrite.v0.19.1","setting.overwrite.v0.19.3","setting.overwrite.v0.30.0-beta","sgf.comment_properties","sound.capture_delay_max","sound.capture_delay_min","sound.enable","theme.custom_whitestones","theme.custom_blackstones","theme.custom_background","theme.current","view.properties_height","view.properties_minheight","view.show_leftsidebar","view.show_comments","view.show_graph","view.leftsidebar_width","view.leftsidebar_minwidth","view.sidebar_width","view.sidebar_minwidth","infooverlay.duration","window.height","window.minheight","window.minwidth","window.width","load","localStorage","overwriteKey","overwrites","save","loadThemes","getThemes","hide","getElementById","velement","_element$getBoundingC","getBoundingClientRect","_document$body$getBou","bodyWidth","bodyHeight","Goban","PlayBar","EditBar","GuessBar","AutoplayBar","ScoringBar","FindBar","handleTogglePlayer","_sabaki","setPlayer","handleToolButtonClick","handleFindButtonClick","handleGobanResize","handleGobanVertexClick","handleGobanLineDraw","gobanCrosshair","mainElement","_window$getComputedSt","getComputedStyle","clickVertex","_evt$line","line","paintMap","right","dimmedStones","crosshair","drawLineMode","onBeforeResize","onVertexClick","onLineDraw","playerCaptures","showHotspot","onCurrentPlayerClick","onToolButtonClick","method","onButtonClick","range","GobanVertex","hoshi","paint","dimmed","animate","markupType","ghostTypes","_classes","_ref2$position","_ref2$onMouseDown","onMouseDown","_ref2$onMouseUp","onMouseUp","_ref2$onMouseMove","onMouseMove","data-vertex","GobanLine","_Component2","_classNames","temporary","fieldSize","pos1","pos2","_pos1$map","_pos1$map2","dx","dy","_pos1$map3","_pos1$map4","angle","atan2","PI","sqrt","transform","CoordX","_Component3","rangeX","CoordY","_Component4","rangeY","_Component5","handleVertexMouseUp","handleVertexMouseDown","handleVertexMouseMove","mouseDown","temporaryLine","borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth","paddingLeft","paddingTop","paddingRight","paddingBottom","resize","nextState","dim","_animatedVertex","shifts","readjustShifts","hoshis","__","randomizer","parentElement","_props","_props$onBeforeResize","_window$getComputedSt2","outerWidth","outerHeight","boardWidth","boardHeight","minX","minY","marginLeft","marginTop","innerWidth","innerHeight","innerMarginLeft","innerMarginTop","movedVertices","_movedVertices","direction","directions","_ref11$","qx","qy","removeShifts","startVertex","dataset","_props2","_props2$onVertexClick","_props2$onLineDraw","clientX","clientY","_props3","_props3$onVertexMouse","onVertexMouseMove","_ref12$highlightVerti","_ref12$dimmedStones","_ref12$crosshair","_ref12$showCoordinate","_ref12$showMoveColori","_ref12$showNextMoves","_ref12$showSiblings","_ref12$fuzzyStonePlac","_ref12$animatedStoneP","_ref12$drawLineMode","animatedVertices","drawTemporaryLine","goban","coordinates","movecolorization","siblings","fuzzy","animation","smalllabel","toggleSetting","handleCurrentPlayerClick","handleUndoButtonClick","undo","handleMenuClick","saveFile","makeResign","_this$menuButtonEleme","menuButtonElement","_ref$onCurrentPlayerC","captureStyle","isEngine","engine","stoneTool","_props$onToolButtonCl","toolId","selected","data-id","isSelected","renderButton","handleButtonClick","getScore","resultString","handleChange","classList","contains","_this$props$onButtonC","placeholder","onInput","alt","rawlines","FF","GM","boardsize","pw","pb","rawdate","Number","line2","whiterank","WR","line3","blackrank","BR","winner","margin","strings","tmp","points","_p2","KM","ok","DT","PW","PB","makeResult","grlt","zipsu","easycases","3","4","7","8","getResult","grltRegex","zipsuRegex","parsePlayerName","rank","foo","startsWith","endsWith","_parsePlayerName","_parsePlayerName2","_parsePlayerName3","_parsePlayerName4","setup","elements","Slider","GameGraph","CommentBox","sidebarMinWidth","sidebarMinSplit","sidebarSplit","sidebarSplitTransition","handleGraphNodeClick","_sabaki2","openNodeMenu","handleVerticalResizerMouseDown","oldSidebarWidth","oldMousePosition","verticalResizerMouseDown","handleHorizontalResizerMouseDown","horizontalResizerMouseDown","handleSliderChange","percent","moveNumber","treeHeight","goToMoveNumber","handleStartAutoscrolling","minDelay","scroll","autoscrollId","handleStopAutoscrolling","handleCommentInput","_sabaki3","setSidebarWidth","offsetHeight","showSlider","onChange","onStartAutoscrolling","onStopAutoscrolling","viewportWidth","gridSize","nodeSize","onNodeClick","onResizerMouseDown","onCommentInput","handleSliderAreaMouseDown","sliderAreaMouseDown","MouseEvent","handleButtonMouseDown","_this$props$onStartAu","buttonMouseDown","_props$onStopAutoscro","_props$onChange","_slidingAreaElement","slidingAreaElement","offsetTop","dirty","renderId","commentProperties","edgeColor","edgeInactiveColor","edgeSize","edgeInactiveSize","nodeColor","nodeInactiveColor","nodeActiveColor","nodeBookmarkColor","nodeCommentColor","nodeInactiveBookmarkColor","nodeInactiveCommentColor","GameGraphNode","hover","handleMouseMove","_this$props","_this$props$mouseShif","mouseShift","sx","sy","mousePosition","ceil","_ref3$position","nodeSize2","diamondSide","GameGraphEdge","positionAbove","positionBelow","_ref6$positionAbove","left1","top1","_ref6$positionBelow","left2","top2","stroke","stroke-width","cameraPosition","viewportSize","viewportPosition","matrixDict","matrixDictHash","matrixDictCache","handleNodeClick","handleGraphMouseDown","svgElement","movementX","movementY","_state$cameraPosition","cx","cy","_state$viewportPositi","vx","vy","drag","remeasureId","remeasure","updateCameraPosition","_props$treePosition","_getMatrixDict","_getMatrixDict2","_dict$id","_gametree$getMatrixWi","_gametree$getMatrixWi2","relX","_props2$onNodeClick","_state2$matrixDict","_state2$cameraPositio","_mousePosition","_map3","_map4","nearestX","nearestY","_ref11$matrixDict","_ref11$cameraPosition","_ref11$viewportSize","_ref11$viewportPositi","nodeColumns","edges","_map5","_map6","_map7","_map8","maxX","maxY","doneTreeBones","currentTracks","notCurrentTracks","column","_matrix$y$x","_gametree$navigate","_gametree$navigate2","prevTree","prevIndex","_dict","px","py","_dict2","_dict3","nx","_ref13$cameraPosition","onContextMenu","handleGraphMouseUp","renderNodes","ContentDisplay","CommentTitle","handleEditButtonClick","EV","GN","today","ptp","prevBoard","_ref2$moveAnnotation","ma","mv","_ref2$positionAnnotat","pa","pv","moveData","-1","0","1","2","positionData","-2","showMoveInterpretation","movestatus","positionstatus","getCurrentMoveInterpretation","CommentText","_this4$props$onCommen","titleInputElement","textareaElement","handleMenuButtonClick","_this4$menuButtonElem","bottom","treePositionChanged","updateId","scrollTop","_ref7$onResizerMouseD","_ref7$onLinkClick","onLinkClick","_ref7$onCoordinateMou","onCoordinateMouseEnter","_ref7$onCoordinateMou2","onCoordinateMouseLeave","transition","linkElement","innerText","goToMainVariation","InfoDrawer","ScoreDrawer","PreferencesDrawer","GameChooserDrawer","CleanMarkupDrawer","handleScoreSubmit","handleGameSelect","selectedTree","handleGameTreesChange","newGameTrees","newTreePosition","tab","onItemClick","estimating","onSubmitButtonClick","Pikaday","InfoDrawerItem","handleSubmitButtonClick","_this2$props$treePosi","setGameInfo","attachEngines","handleCancelButtonClick","handleBoardWidthFocus","combinedSizeFields","handleBoardWidthChange","_ref2$size","handleBoardHeightChange","handleSizeSwapButtonClick","handleSwapPlayers","handleDateInputChange","markDates","handleDateInputFocus","pikaday","handleDateInputBlur","elementInPikaday","handleShowResultClick","showResult","handleInputChange","handleEngineMenuClick","nameKey","autoName","_evt$currentTarget$ge","preparePikaday","year","pikaYear","month","pikaMonth","day","pikaDay","toggle","_dateInputElement$get","dateInputElement","_el$getBoundingClient","firstDay","yearRange","keyboardInput","onOpen","setDate","gotoToday","adjustPikadayPosition","onDraw","isVisible","focus","onSelect","_onKeyChange","_ref10$showResult","_ref10$blackName","_ref10$blackRank","_ref10$whiteName","_ref10$whiteRank","_ref10$gameName","_ref10$eventName","_ref10$date","_ref10$result","_ref10$komi","_ref10$handicap","_ref10$size","onFocus","onBlur","selectedIndex","disabled","cursor","factory","moment","req","hasMoment","hasEventListeners","sto","addEvent","attachEvent","removeEvent","detachEvent","hasClass","addClass","removeClass","isDate","getTime","isWeekend","getDay","isLeapYear","getDaysInMonth","setToStartOfDay","setHours","compareDates","extend","overwrite","hasProp","fireEvent","ev","createEvent","initEvent","createEventObject","adjustCalendar","calendar","field","bound","reposition","format","defaultDate","setDefaultDate","formatStrict","minDate","maxDate","showWeekNumber","pickWholeWeek","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","showDaysInNextAndPreviousMonths","enableSelectionDaysInNextAndPreviousMonths","numberOfMonths","mainCalendar","container","blurFieldOnSelect","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","theme","onClose","renderDayName","opts","abbr","renderDay","ariaSelected","isEmpty","isDisabled","isToday","hasEvent","isInRange","isStartRange","isEndRange","renderWeek","onejan","renderRow","days","isRowSelected","renderBody","rows","renderHead","renderTitle","refYear","randId","monthHtml","yearHtml","_o","isMinYear","isMaxYear","renderTable","config","_onMouseDown","_v","srcElement","prevMonth","getAttribute","_c","_onChange","gotoMonth","gotoYear","adjustDate","_onInputChange","firedBy","isValid","toDate","_onInputFocus","_onInputClick","_onInputBlur","pEl","_b","_onClick","onchange","trigger","defDate","gotoDate","disableWeekends","disableDayFn","nom","setMinDate","setMaxDate","toDateString","getMoment","setMoment","preventOnSelect","isMoment","draw","newCalendar","calendars","firstVisibleDate","lastVisibleDate","visibleDate","setMonth","adjustCalendars","newDay","difference","valueOf","setStartRange","setEndRange","force","_y","_m","adjustPosition","viewportHeight","clientRect","offsetWidth","documentElement","clientWidth","clientHeight","pageYOffset","pageXOffset","offsetLeft","offsetParent","now","before","yearOfPreviousMonth","yearOfNextMonth","daysInPreviousMonth","after","isWeekSelected","dayNumber","monthNumber","yearNumber","dayConfig","destroy","webpackEmptyContext","ScoreRow","total","handleTerritoryButtonClick","handleAreaButtonClick","handleCloseButtonClick","_this2$props$onSubmit","MiniGoban","thumbnailSize","itemMinWidth","getPreviewBoard","GameListItem","draggable","showThumbnail","insertAfter","insertbefore","insertafter","handleClick","handleContextMenu","onDragStart","handleDragStart","onDragOver","handleDragOver","maxSize","visible","itemElements","filterText","handleFilterTextChange","handleListScroll","handleItemContextMenu","_this3$props","_this3$props$onChange","_this3$props$onChange2","handleItemDragStart","dragData","handleItemDragOver","middle","handleItemDrop","_this3$props2","_this3$props2$onChang","_newGameTrees$splice","_newGameTrees$splice2","handleCancelDrag","handleItemClick","_this3$props$onItemCl","handleAddButtonClick","_this3$props3","_this3$props3$onChang","_this3$props$onChange3","_element$getBoundingC2","handleSortButtonClick","natsort","_this3$props4","_this3$props4$onChang","t1","i1","t2","i2","x1","x2","_map$map","_map$map2","_map$map3","_map$map4","insensitive","_element$getBoundingC3","prevProps","gamesListElement","scrollHeight","shownGameTrees","getRowFromIndex","gobanRect","drawerRect","itemElement","querySelector","_itemElement$querySel","miniGobanRect","rowCount","itemWidth","onDrop","onScroll","itemTop","itemLeft","itemHeight","_ref2$visible","radius","visibility","lowerCase","toLocaleLowerCase","nre","ore","sre","tre","GREATER","desc","SMALLER","ure","hre","dre","xArr","yArr","xD","yD","xL","yL","xF","yF","localeCompare","comp","webpackPolyfill","deprecate","handleInput","stopPropagation","handleKeyUp","cancel","_this$props$onSubmit","inputElement","_props$onCancel","onKeyUp","busyId","display","lastPachiIndex","lastCaptureIndex","captureSounds","Int8Array","Audio","pachiSounds","newGameSound","passSound","play"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 23);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n!function () {\n  \"use strict\";\n  function e() {}function t(t, n) {\n    var o,\n        r,\n        i,\n        l,\n        a = E;for (l = arguments.length; l-- > 2;) {\n      W.push(arguments[l]);\n    }n && null != n.children && (W.length || W.push(n.children), delete n.children);while (W.length) {\n      if ((r = W.pop()) && void 0 !== r.pop) for (l = r.length; l--;) {\n        W.push(r[l]);\n      } else \"boolean\" == typeof r && (r = null), (i = \"function\" != typeof t) && (null == r ? r = \"\" : \"number\" == typeof r ? r += \"\" : \"string\" != typeof r && (i = !1)), i && o ? a[a.length - 1] += r : a === E ? a = [r] : a.push(r), o = i;\n    }var u = new e();return u.nodeName = t, u.children = a, u.attributes = null == n ? void 0 : n, u.key = null == n ? void 0 : n.key, void 0 !== S.vnode && S.vnode(u), u;\n  }function n(e, t) {\n    for (var n in t) {\n      e[n] = t[n];\n    }return e;\n  }function o(e, o) {\n    return t(e.nodeName, n(n({}, e.attributes), o), arguments.length > 2 ? [].slice.call(arguments, 2) : e.children);\n  }function r(e) {\n    !e.__d && (e.__d = !0) && 1 == A.push(e) && (S.debounceRendering || P)(i);\n  }function i() {\n    var e,\n        t = A;A = [];while (e = t.pop()) {\n      e.__d && k(e);\n    }\n  }function l(e, t, n) {\n    return \"string\" == typeof t || \"number\" == typeof t ? void 0 !== e.splitText : \"string\" == typeof t.nodeName ? !e._componentConstructor && a(e, t.nodeName) : n || e._componentConstructor === t.nodeName;\n  }function a(e, t) {\n    return e.__n === t || e.nodeName.toLowerCase() === t.toLowerCase();\n  }function u(e) {\n    var t = n({}, e.attributes);t.children = e.children;var o = e.nodeName.defaultProps;if (void 0 !== o) for (var r in o) {\n      void 0 === t[r] && (t[r] = o[r]);\n    }return t;\n  }function _(e, t) {\n    var n = t ? document.createElementNS(\"http://www.w3.org/2000/svg\", e) : document.createElement(e);return n.__n = e, n;\n  }function p(e) {\n    var t = e.parentNode;t && t.removeChild(e);\n  }function c(e, t, n, o, r) {\n    if (\"className\" === t && (t = \"class\"), \"key\" === t) ;else if (\"ref\" === t) n && n(null), o && o(e);else if (\"class\" !== t || r) {\n      if (\"style\" === t) {\n        if (o && \"string\" != typeof o && \"string\" != typeof n || (e.style.cssText = o || \"\"), o && \"object\" == (typeof o === \"undefined\" ? \"undefined\" : _typeof(o))) {\n          if (\"string\" != typeof n) for (var i in n) {\n            i in o || (e.style[i] = \"\");\n          }for (var i in o) {\n            e.style[i] = \"number\" == typeof o[i] && !1 === V.test(i) ? o[i] + \"px\" : o[i];\n          }\n        }\n      } else if (\"dangerouslySetInnerHTML\" === t) o && (e.innerHTML = o.__html || \"\");else if (\"o\" == t[0] && \"n\" == t[1]) {\n        var l = t !== (t = t.replace(/Capture$/, \"\"));t = t.toLowerCase().substring(2), o ? n || e.addEventListener(t, f, l) : e.removeEventListener(t, f, l), (e.__l || (e.__l = {}))[t] = o;\n      } else if (\"list\" !== t && \"type\" !== t && !r && t in e) s(e, t, null == o ? \"\" : o), null != o && !1 !== o || e.removeAttribute(t);else {\n        var a = r && t !== (t = t.replace(/^xlink\\:?/, \"\"));null == o || !1 === o ? a ? e.removeAttributeNS(\"http://www.w3.org/1999/xlink\", t.toLowerCase()) : e.removeAttribute(t) : \"function\" != typeof o && (a ? e.setAttributeNS(\"http://www.w3.org/1999/xlink\", t.toLowerCase(), o) : e.setAttribute(t, o));\n      }\n    } else e.className = o || \"\";\n  }function s(e, t, n) {\n    try {\n      e[t] = n;\n    } catch (e) {}\n  }function f(e) {\n    return this.__l[e.type](S.event && S.event(e) || e);\n  }function d() {\n    var e;while (e = D.pop()) {\n      S.afterMount && S.afterMount(e), e.componentDidMount && e.componentDidMount();\n    }\n  }function h(e, t, n, o, r, i) {\n    H++ || (R = null != r && void 0 !== r.ownerSVGElement, j = null != e && !(\"__preactattr_\" in e));var l = m(e, t, n, o, i);return r && l.parentNode !== r && r.appendChild(l), --H || (j = !1, i || d()), l;\n  }function m(e, t, n, o, r) {\n    var i = e,\n        l = R;if (null != t && \"boolean\" != typeof t || (t = \"\"), \"string\" == typeof t || \"number\" == typeof t) return e && void 0 !== e.splitText && e.parentNode && (!e._component || r) ? e.nodeValue != t && (e.nodeValue = t) : (i = document.createTextNode(t), e && (e.parentNode && e.parentNode.replaceChild(i, e), b(e, !0))), i.__preactattr_ = !0, i;var u = t.nodeName;if (\"function\" == typeof u) return U(e, t, n, o);if (R = \"svg\" === u || \"foreignObject\" !== u && R, u += \"\", (!e || !a(e, u)) && (i = _(u, R), e)) {\n      while (e.firstChild) {\n        i.appendChild(e.firstChild);\n      }e.parentNode && e.parentNode.replaceChild(i, e), b(e, !0);\n    }var p = i.firstChild,\n        c = i.__preactattr_,\n        s = t.children;if (null == c) {\n      c = i.__preactattr_ = {};for (var f = i.attributes, d = f.length; d--;) {\n        c[f[d].name] = f[d].value;\n      }\n    }return !j && s && 1 === s.length && \"string\" == typeof s[0] && null != p && void 0 !== p.splitText && null == p.nextSibling ? p.nodeValue != s[0] && (p.nodeValue = s[0]) : (s && s.length || null != p) && v(i, s, n, o, j || null != c.dangerouslySetInnerHTML), g(i, t.attributes, c), R = l, i;\n  }function v(e, t, n, o, r) {\n    var i,\n        a,\n        u,\n        _,\n        c,\n        s = e.childNodes,\n        f = [],\n        d = {},\n        h = 0,\n        v = 0,\n        y = s.length,\n        g = 0,\n        w = t ? t.length : 0;if (0 !== y) for (var C = 0; C < y; C++) {\n      var x = s[C],\n          N = x.__preactattr_,\n          k = w && N ? x._component ? x._component.__k : N.key : null;null != k ? (h++, d[k] = x) : (N || (void 0 !== x.splitText ? !r || x.nodeValue.trim() : r)) && (f[g++] = x);\n    }if (0 !== w) for (var C = 0; C < w; C++) {\n      _ = t[C], c = null;var k = _.key;if (null != k) h && void 0 !== d[k] && (c = d[k], d[k] = void 0, h--);else if (!c && v < g) for (i = v; i < g; i++) {\n        if (void 0 !== f[i] && l(a = f[i], _, r)) {\n          c = a, f[i] = void 0, i === g - 1 && g--, i === v && v++;break;\n        }\n      }c = m(c, _, n, o), u = s[C], c && c !== e && c !== u && (null == u ? e.appendChild(c) : c === u.nextSibling ? p(u) : e.insertBefore(c, u));\n    }if (h) for (var C in d) {\n      void 0 !== d[C] && b(d[C], !1);\n    }while (v <= g) {\n      void 0 !== (c = f[g--]) && b(c, !1);\n    }\n  }function b(e, t) {\n    var n = e._component;n ? L(n) : (null != e.__preactattr_ && e.__preactattr_.ref && e.__preactattr_.ref(null), !1 !== t && null != e.__preactattr_ || p(e), y(e));\n  }function y(e) {\n    e = e.lastChild;while (e) {\n      var t = e.previousSibling;b(e, !0), e = t;\n    }\n  }function g(e, t, n) {\n    var o;for (o in n) {\n      t && null != t[o] || null == n[o] || c(e, o, n[o], n[o] = void 0, R);\n    }for (o in t) {\n      \"children\" === o || \"innerHTML\" === o || o in n && t[o] === (\"value\" === o || \"checked\" === o ? e[o] : n[o]) || c(e, o, n[o], n[o] = t[o], R);\n    }\n  }function w(e) {\n    var t = e.constructor.name;(I[t] || (I[t] = [])).push(e);\n  }function C(e, t, n) {\n    var o,\n        r = I[e.name];if (e.prototype && e.prototype.render ? (o = new e(t, n), T.call(o, t, n)) : (o = new T(t, n), o.constructor = e, o.render = x), r) for (var i = r.length; i--;) {\n      if (r[i].constructor === e) {\n        o.__b = r[i].__b, r.splice(i, 1);break;\n      }\n    }return o;\n  }function x(e, t, n) {\n    return this.constructor(e, n);\n  }function N(e, t, n, o, i) {\n    e.__x || (e.__x = !0, (e.__r = t.ref) && delete t.ref, (e.__k = t.key) && delete t.key, !e.base || i ? e.componentWillMount && e.componentWillMount() : e.componentWillReceiveProps && e.componentWillReceiveProps(t, o), o && o !== e.context && (e.__c || (e.__c = e.context), e.context = o), e.__p || (e.__p = e.props), e.props = t, e.__x = !1, 0 !== n && (1 !== n && !1 === S.syncComponentUpdates && e.base ? r(e) : k(e, 1, i)), e.__r && e.__r(e));\n  }function k(e, t, o, r) {\n    if (!e.__x) {\n      var i,\n          l,\n          a,\n          _ = e.props,\n          p = e.state,\n          c = e.context,\n          s = e.__p || _,\n          f = e.__s || p,\n          m = e.__c || c,\n          v = e.base,\n          y = e.__b,\n          g = v || y,\n          w = e._component,\n          x = !1;if (v && (e.props = s, e.state = f, e.context = m, 2 !== t && e.shouldComponentUpdate && !1 === e.shouldComponentUpdate(_, p, c) ? x = !0 : e.componentWillUpdate && e.componentWillUpdate(_, p, c), e.props = _, e.state = p, e.context = c), e.__p = e.__s = e.__c = e.__b = null, e.__d = !1, !x) {\n        i = e.render(_, p, c), e.getChildContext && (c = n(n({}, c), e.getChildContext()));var U,\n            T,\n            M = i && i.nodeName;if (\"function\" == typeof M) {\n          var W = u(i);l = w, l && l.constructor === M && W.key == l.__k ? N(l, W, 1, c, !1) : (U = l, e._component = l = C(M, W, c), l.__b = l.__b || y, l.__u = e, N(l, W, 0, c, !1), k(l, 1, o, !0)), T = l.base;\n        } else a = g, U = w, U && (a = e._component = null), (g || 1 === t) && (a && (a._component = null), T = h(a, i, c, o || !v, g && g.parentNode, !0));if (g && T !== g && l !== w) {\n          var E = g.parentNode;E && T !== E && (E.replaceChild(T, g), U || (g._component = null, b(g, !1)));\n        }if (U && L(U), e.base = T, T && !r) {\n          var P = e,\n              V = e;while (V = V.__u) {\n            (P = V).base = T;\n          }T._component = P, T._componentConstructor = P.constructor;\n        }\n      }if (!v || o ? D.unshift(e) : x || (e.componentDidUpdate && e.componentDidUpdate(s, f, m), S.afterUpdate && S.afterUpdate(e)), null != e.__h) while (e.__h.length) {\n        e.__h.pop().call(e);\n      }H || r || d();\n    }\n  }function U(e, t, n, o) {\n    var r = e && e._component,\n        i = r,\n        l = e,\n        a = r && e._componentConstructor === t.nodeName,\n        _ = a,\n        p = u(t);while (r && !_ && (r = r.__u)) {\n      _ = r.constructor === t.nodeName;\n    }return r && _ && (!o || r._component) ? (N(r, p, 3, n, o), e = r.base) : (i && !a && (L(i), e = l = null), r = C(t.nodeName, p, n), e && !r.__b && (r.__b = e, l = null), N(r, p, 1, n, o), e = r.base, l && e !== l && (l._component = null, b(l, !1))), e;\n  }function L(e) {\n    S.beforeUnmount && S.beforeUnmount(e);var t = e.base;e.__x = !0, e.componentWillUnmount && e.componentWillUnmount(), e.base = null;var n = e._component;n ? L(n) : t && (t.__preactattr_ && t.__preactattr_.ref && t.__preactattr_.ref(null), e.__b = t, p(t), w(e), y(t)), e.__r && e.__r(null);\n  }function T(e, t) {\n    this.__d = !0, this.context = t, this.props = e, this.state = this.state || {};\n  }function M(e, t, n) {\n    return h(n, e, {}, !1, t, !1);\n  }var S = {},\n      W = [],\n      E = [],\n      P = \"function\" == typeof Promise ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout,\n      V = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,\n      A = [],\n      D = [],\n      H = 0,\n      R = !1,\n      j = !1,\n      I = {};n(T.prototype, { setState: function setState(e, t) {\n      var o = this.state;this.__s || (this.__s = n({}, o)), n(o, \"function\" == typeof e ? e(o, this.props) : e), t && (this.__h = this.__h || []).push(t), r(this);\n    }, forceUpdate: function forceUpdate(e) {\n      e && (this.__h = this.__h || []).push(e), k(this, 2);\n    }, render: function render() {} });var $ = { h: t, createElement: t, cloneElement: o, Component: T, render: M, rerender: i, options: S }; true ? module.exports = $ : self.preact = $;\n}();\n//# sourceMappingURL=preact.min.js.map\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process) {var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar id = 0;\n\nexports.linebreak = process.platform === 'win32' ? '\\r\\n' : '\\n';\nexports.noop = function () {};\n\nexports.getId = function () {\n    return ++id;\n};\n\nexports.hash = function (str) {\n    var hash = 0,\n        chr = void 0;\n    if (str.length == 0) return hash;\n\n    for (var i = 0; i < str.length; i++) {\n        chr = str.charCodeAt(i);\n        hash = (hash << 5) - hash + chr;\n        hash = hash & hash;\n    }\n\n    return hash;\n};\n\nexports.floorEven = function (float) {\n    var value = Math.floor(float);\n    return value % 2 === 0 ? value : value - 1;\n};\n\nexports.equals = function (a, b) {\n    if (a === b) return true;\n    if (a == null || b == null) return a == b;\n\n    var t = Object.prototype.toString.call(a);\n    if (t !== Object.prototype.toString.call(b)) return false;\n\n    var aa = t === '[object Array]';\n    var ao = t === '[object Object]';\n\n    if (aa) {\n        if (a.length !== b.length) return false;\n        for (var i = 0; i < a.length; i++) {\n            if (!exports.equals(a[i], b[i])) return false;\n        }return true;\n    } else if (ao) {\n        var kk = Object.keys(a);\n        if (kk.length !== Object.keys(b).length) return false;\n        for (var _i = 0; _i < kk.length; _i++) {\n            var k = kk[_i];\n            if (!(k in b)) return false;\n            if (!exports.equals(a[k], b[k])) return false;\n        }\n        return true;\n    }\n\n    return false;\n};\n\nexports.shallowEquals = function (a, b) {\n    return a == null || b == null ? a === b : a === b || a.length === b.length && a.every(function (x, i) {\n        return x == b[i];\n    });\n};\n\nexports.vertexEquals = function (_ref, _ref2) {\n    var _ref4 = _slicedToArray(_ref, 2),\n        a = _ref4[0],\n        b = _ref4[1];\n\n    var _ref3 = _slicedToArray(_ref2, 2),\n        c = _ref3[0],\n        d = _ref3[1];\n\n    return a === c && b === d;\n};\n\nexports.lexicalCompare = function (a, b) {\n    if (!a.length || !b.length) return a.length - b.length;\n    return a[0] < b[0] ? -1 : a[0] > b[0] ? 1 : exports.lexicalCompare(a.slice(1), b.slice(1));\n};\n\nexports.normalizeEndings = function (input) {\n    return input.replace(/\\r\\n|\\n\\r|\\r/g, '\\n');\n};\n\nexports.markdown = function (input) {\n    var marked = __webpack_require__(24);\n    return marked(exports.normalizeEndings(input.trim()).replace(/\\n/g, '  \\n'));\n};\n\nexports.htmlify = function (input) {\n    var urlRegex = '\\\\b(https?|ftps?):\\\\/\\\\/[^\\\\s<]+[^<.,:;\"\\')\\\\]\\\\s](\\\\/\\\\B|\\\\b)';\n    var emailRegex = '\\\\b[^\\\\s@<]+@[^\\\\s@<]+\\\\b';\n    var coordRegex = '\\\\b[a-hj-zA-HJ-Z][1-9][0-9]?\\\\b';\n    var movenumberRegex = '\\\\B#\\\\d+\\\\b';\n    var totalRegex = '(' + [urlRegex, emailRegex, coordRegex, movenumberRegex].join('|') + ')';\n\n    input = input.replace(new RegExp(totalRegex, 'g'), function (match) {\n        if (new RegExp(urlRegex).test(match)) return '<a href=\"' + match + '\" class=\"external\">' + match + '</a>';\n        if (new RegExp(emailRegex).test(match)) return '<a href=\"mailto:' + match + '\" class=\"external\">' + match + '</a>';\n        if (new RegExp(movenumberRegex).test(match)) return '<a href=\"#\" class=\"movenumber\">' + match + '</a>';\n        if (new RegExp(coordRegex).test(match)) return '<span class=\"coord\">' + match + '</span>';\n    });\n\n    return input;\n};\n\nexports.popupMenu = function (template, x, y) {\n    var _require = __webpack_require__(2),\n        remote = _require.remote;\n\n    var setting = remote.require('./setting');\n    var zoomFactor = +setting.get('app.zoom_factor');\n\n    remote.Menu.buildFromTemplate(template).popup(remote.getCurrentWindow(), {\n        x: Math.round(x * zoomFactor),\n        y: Math.round(y * zoomFactor),\n        async: true\n    });\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(10)))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar copy = __webpack_require__(26);\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    render = _require.render;\n\nvar _require2 = __webpack_require__(1),\n    noop = _require2.noop;\n\nvar hiddenStyle = { opacity: 0, pointerEvents: 'none' };\n\nvar app = {\n    getName: function getName() {\n        return 'Sabaki';\n    },\n    getVersion: function getVersion() {\n        return 'web';\n    },\n    getPath: function getPath() {\n        return '';\n    }\n};\n\nmodule.exports = {\n    app: app,\n    ipcRenderer: { on: noop, send: noop },\n\n    clipboard: {\n        readText: function readText() {\n            return prompt('Please paste contents here:');\n        },\n\n        writeText: function writeText(content) {\n            var element = render(h('a', {\n                href: '#',\n                style: hiddenStyle,\n\n                onClick: function onClick(evt) {\n                    evt.preventDefault();\n                    copy(content);\n                }\n            }), document.body);\n\n            element.click();\n            element.remove();\n        }\n    },\n\n    shell: {\n        openExternal: function openExternal(href) {\n            var element = render(h('a', {\n                href: href,\n                target: '_blank',\n                style: hiddenStyle\n            }), document.body);\n\n            element.click();\n            element.remove();\n        }\n    },\n\n    remote: {\n        app: app,\n        require: function (_require3) {\n            function require(_x) {\n                return _require3.apply(this, arguments);\n            }\n\n            require.toString = function () {\n                return _require3.toString();\n            };\n\n            return require;\n        }(function (x) {\n            return x === './setting' ? __webpack_require__(27) : {};\n        }),\n\n        getCurrentWindow: function getCurrentWindow() {\n            return {\n                show: noop,\n                close: noop,\n                on: noop,\n                isMaximized: noop,\n                isMinimized: noop,\n                isFullScreen: noop,\n                setFullScreen: noop,\n                setMenuBarVisibility: noop,\n                setAutoHideMenuBar: noop,\n                setProgressBar: noop,\n                setContentSize: noop,\n                getContentSize: function getContentSize() {\n                    return [0, 0];\n                },\n                webContents: { setAudioMuted: noop }\n            };\n        },\n\n        Menu: __webpack_require__(28)\n    }\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg === 'undefined' ? 'undefined' : _typeof(arg);\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (\"function\" === 'function' && _typeof(__webpack_require__(19)) === 'object' && __webpack_require__(19)) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn classNames;\n\t\t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n})();\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar Board = __webpack_require__(8);\n\nvar helper = __webpack_require__(1);\n\nvar _require = __webpack_require__(7),\n    sgf = _require.sgf;\n\nvar alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\nexports.new = function () {\n    return {\n        id: helper.getId(),\n        nodes: [],\n        subtrees: [],\n        current: null,\n        parent: null\n    };\n};\n\nexports.clone = function (tree) {\n    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    var c = Object.assign(exports.new(), {\n        current: tree.current,\n        parent: parent\n    });\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = tree.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var node = _step.value;\n\n            var cn = {};\n\n            for (var key in node) {\n                if (key === 'board') continue;\n\n                if (Array.isArray(node[key])) {\n                    cn[key] = [].concat(_toConsumableArray(node[key]));\n                } else {\n                    cn[key] = node[key];\n                }\n            }\n\n            c.nodes.push(cn);\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n        for (var _iterator2 = tree.subtrees[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var subtree = _step2.value;\n\n            c.subtrees.push(exports.clone(subtree, c));\n        }\n    } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n            }\n        } finally {\n            if (_didIteratorError2) {\n                throw _iteratorError2;\n            }\n        }\n    }\n\n    return c;\n};\n\nexports.getRoot = function (tree) {\n    while (tree.parent !== null) {\n        tree = tree.parent;\n    }return tree;\n};\n\nexports.getRootProperty = function (tree, property) {\n    var fallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    var node = exports.getRoot(tree).nodes[0];\n    if (!node) return fallback;\n\n    var result = '';\n    if (property in node) result = node[property][0];\n\n    return result === '' ? fallback : result;\n};\n\nexports.getHeight = function (tree) {\n    var height = 0;\n\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n        for (var _iterator3 = tree.subtrees[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var subtree = _step3.value;\n\n            height = Math.max(exports.getHeight(subtree), height);\n        }\n    } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                _iterator3.return();\n            }\n        } finally {\n            if (_didIteratorError3) {\n                throw _iteratorError3;\n            }\n        }\n    }\n\n    return height + tree.nodes.length;\n};\n\nexports.getCurrentHeight = function (tree) {\n    var height = tree.nodes.length;\n\n    if (tree.subtrees.length !== 0) height += exports.getCurrentHeight(tree.subtrees[tree.current]);\n\n    return height;\n};\n\nexports.getTreesRecursive = function (tree) {\n    var result = [tree];\n\n    var _iteratorNormalCompletion4 = true;\n    var _didIteratorError4 = false;\n    var _iteratorError4 = undefined;\n\n    try {\n        for (var _iterator4 = tree.subtrees[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var subtree = _step4.value;\n\n            result.push.apply(result, _toConsumableArray(exports.getTreesRecursive(subtree)));\n        }\n    } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                _iterator4.return();\n            }\n        } finally {\n            if (_didIteratorError4) {\n                throw _iteratorError4;\n            }\n        }\n    }\n\n    return result;\n};\n\nexports.getLevel = function (tree, index) {\n    return index + (tree.parent ? exports.getLevel(tree.parent, tree.parent.nodes.length) : 0);\n};\n\nexports.getSection = function (tree, level) {\n    if (level < 0) return [];\n    if (level < tree.nodes.length) return [[tree, level]];\n\n    var sections = [];\n\n    var _iteratorNormalCompletion5 = true;\n    var _didIteratorError5 = false;\n    var _iteratorError5 = undefined;\n\n    try {\n        for (var _iterator5 = tree.subtrees[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n            var subtree = _step5.value;\n\n            sections.push.apply(sections, _toConsumableArray(exports.getSection(subtree, level - tree.nodes.length)));\n        }\n    } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                _iterator5.return();\n            }\n        } finally {\n            if (_didIteratorError5) {\n                throw _iteratorError5;\n            }\n        }\n    }\n\n    return sections;\n};\n\nexports.navigate = function (tree, index, step) {\n    if (index + step >= 0 && index + step < tree.nodes.length) {\n        return [tree, index + step];\n    } else if (index + step < 0 && tree.parent != null) {\n        var prev = tree.parent;\n        var newstep = index + step + 1;\n\n        return exports.navigate(prev, prev.nodes.length - 1, newstep);\n    } else if (index + step >= tree.nodes.length && tree.subtrees.length !== 0) {\n        var next = tree.subtrees[tree.current];\n        var _newstep = index + step - tree.nodes.length;\n\n        return exports.navigate(next, 0, _newstep);\n    }\n\n    return null;\n};\n\nexports.makeHorizontalNavigator = function (tree, index) {\n    var root = exports.getRoot(tree);\n    var level = exports.getLevel(tree, index, root);\n    var sections = exports.getSection(root, level);\n    var j = sections.map(function (x) {\n        return x[0];\n    }).indexOf(tree);\n\n    return {\n        navigate: function navigate(step) {\n            if (j + step >= 0 && j + step < sections.length) {\n                j = j + step;\n            } else if (j + step >= sections.length) {\n                step = j + step - sections.length;\n                sections = exports.getSection(root, ++level);\n                j = 0;\n                if (sections.length != 0) this.navigate(step);\n            } else if (j + step < 0) {\n                step = j + step + 1;\n                sections = exports.getSection(root, --level);\n                j = sections.length - 1;\n                if (sections.length != 0) this.navigate(step);\n            }\n        },\n        value: function value() {\n            return j < sections.length && j >= 0 ? sections[j] : null;\n        },\n        next: function next() {\n            this.navigate(1);\n            return this.value();\n        },\n        prev: function prev() {\n            this.navigate(-1);\n            return this.value();\n        }\n    };\n};\n\nexports.split = function (tree, index) {\n    if (index < 0 || index >= tree.nodes.length - 1) return tree;\n\n    var newnodes = tree.nodes.slice(0, index + 1);\n    tree.nodes = tree.nodes.slice(index + 1);\n\n    var newtree = exports.new();\n    newtree.nodes = newnodes;\n    newtree.subtrees = [tree];\n    newtree.parent = tree.parent;\n    newtree.current = 0;\n    tree.parent = newtree;\n\n    if (newtree.parent) {\n        newtree.parent.subtrees[newtree.parent.subtrees.indexOf(tree)] = newtree;\n    }\n\n    return newtree;\n};\n\nexports.reduce = function (tree) {\n    var _tree$nodes;\n\n    if (tree.subtrees.length != 1) return tree;\n\n    (_tree$nodes = tree.nodes).push.apply(_tree$nodes, _toConsumableArray(tree.subtrees[0].nodes));\n    tree.current = tree.subtrees[0].current;\n    tree.subtrees = tree.subtrees[0].subtrees;\n\n    var _iteratorNormalCompletion6 = true;\n    var _didIteratorError6 = false;\n    var _iteratorError6 = undefined;\n\n    try {\n        for (var _iterator6 = tree.subtrees[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n            var subtree = _step6.value;\n\n            subtree.parent = tree;\n        }\n    } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion6 && _iterator6.return) {\n                _iterator6.return();\n            }\n        } finally {\n            if (_didIteratorError6) {\n                throw _iteratorError6;\n            }\n        }\n    }\n\n    return tree;\n};\n\nexports.onCurrentTrack = function (tree) {\n    return !tree.parent || tree.parent.subtrees[tree.parent.current] == tree && exports.onCurrentTrack(tree.parent);\n};\n\nexports.onMainTrack = function (tree) {\n    return !tree.parent || tree.parent.subtrees[0] == tree && exports.onMainTrack(tree.parent);\n};\n\nexports.getMatrixDict = function (tree) {\n    var matrix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var dict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var xshift = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var yshift = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n\n    if (!matrix) matrix = [].concat(_toConsumableArray(Array(exports.getHeight(tree)))).map(function (_) {\n        return [];\n    });\n\n    var hasCollisions = true;\n    while (hasCollisions) {\n        hasCollisions = false;\n\n        for (var y = 0; y < Math.min(tree.nodes.length + 1, matrix.length - yshift); y++) {\n            if (xshift >= matrix[yshift + y].length - (y === tree.nodes.length)) continue;\n\n            hasCollisions = true;\n            xshift++;\n            break;\n        }\n    }\n\n    for (var _y = 0; _y < tree.nodes.length; _y++) {\n        matrix[yshift + _y].length = xshift + 1;\n        matrix[yshift + _y][xshift] = [tree, _y];\n        dict[tree.id + '-' + _y] = [xshift, yshift + _y];\n    }\n\n    for (var k = 0; k < tree.subtrees.length; k++) {\n        var subtree = tree.subtrees[k];\n        exports.getMatrixDict(subtree, matrix, dict, xshift + k, yshift + tree.nodes.length);\n    }\n\n    return [matrix, dict];\n};\n\nexports.getMatrixWidth = function (y, matrix) {\n    var keys = [].concat(_toConsumableArray(Array(10))).map(function (_, i) {\n        return i + y - 4;\n    }).filter(function (i) {\n        return i >= 0 && i < matrix.length;\n    });\n\n    var padding = Math.min.apply(Math, _toConsumableArray(keys.map(function (i) {\n        for (var j = 0; j < matrix[i].length; j++) {\n            if (matrix[i][j] != null) return j;\n        }return 0;\n    })));\n\n    var width = Math.max.apply(Math, _toConsumableArray(keys.map(function (i) {\n        return matrix[i].length;\n    }))) - padding;\n\n    return [width, padding];\n};\n\nexports.getBoard = function (tree, index) {\n    var baseboard = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    if (index >= tree.nodes.length) return null;\n\n    var node = tree.nodes[index];\n    var vertex = null;\n    var board = null;\n\n    // Get base board\n\n    if (!baseboard) {\n        var prev = exports.navigate(tree, index, -1);\n\n        if (!prev) {\n            var size = [19, 19];\n\n            if ('SZ' in node) {\n                size = node.SZ[0].toString();\n\n                if (size.includes(':')) size = size.split(':');else size = [size, size];\n\n                size = size.map(function (x) {\n                    return +x;\n                });\n            }\n\n            baseboard = new (Function.prototype.bind.apply(Board, [null].concat(_toConsumableArray(size))))();\n        } else {\n            var _exports;\n\n            var prevNode = prev[0].nodes[prev[1]];\n            baseboard = prevNode.board || (_exports = exports).getBoard.apply(_exports, _toConsumableArray(prev));\n        }\n    }\n\n    // Make move\n\n    var data = { B: 1, W: -1 };\n\n    for (var prop in data) {\n        if (!(prop in node)) continue;\n\n        vertex = sgf.point2vertex(node[prop][0]);\n        board = baseboard.makeMove(data[prop], vertex);\n        break;\n    }\n\n    if (!board) board = baseboard.clone();\n\n    // Add markup\n\n    data = { AW: -1, AE: 0, AB: 1 };\n\n    for (var _prop in data) {\n        if (!(_prop in node)) continue;\n\n        var _iteratorNormalCompletion7 = true;\n        var _didIteratorError7 = false;\n        var _iteratorError7 = undefined;\n\n        try {\n            for (var _iterator7 = node[_prop][Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n                var value = _step7.value;\n                var _iteratorNormalCompletion8 = true;\n                var _didIteratorError8 = false;\n                var _iteratorError8 = undefined;\n\n                try {\n                    for (var _iterator8 = sgf.compressed2list(value)[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n                        var _vertex = _step8.value;\n\n                        if (!board.hasVertex(_vertex)) continue;\n                        board.set(_vertex, data[_prop]);\n                    }\n                } catch (err) {\n                    _didIteratorError8 = true;\n                    _iteratorError8 = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion8 && _iterator8.return) {\n                            _iterator8.return();\n                        }\n                    } finally {\n                        if (_didIteratorError8) {\n                            throw _iteratorError8;\n                        }\n                    }\n                }\n            }\n        } catch (err) {\n            _didIteratorError7 = true;\n            _iteratorError7 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion7 && _iterator7.return) {\n                    _iterator7.return();\n                }\n            } finally {\n                if (_didIteratorError7) {\n                    throw _iteratorError7;\n                }\n            }\n        }\n    }\n\n    if (vertex != null) {\n        board.markups[vertex] = ['point', ''];\n    }\n\n    data = { CR: 'circle', MA: 'cross', SQ: 'square', TR: 'triangle' };\n\n    for (var _prop2 in data) {\n        if (!(_prop2 in node)) continue;\n\n        var _iteratorNormalCompletion9 = true;\n        var _didIteratorError9 = false;\n        var _iteratorError9 = undefined;\n\n        try {\n            for (var _iterator9 = node[_prop2][Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n                var _value = _step9.value;\n                var _iteratorNormalCompletion10 = true;\n                var _didIteratorError10 = false;\n                var _iteratorError10 = undefined;\n\n                try {\n                    for (var _iterator10 = sgf.compressed2list(_value)[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n                        var _vertex2 = _step10.value;\n\n                        board.markups[_vertex2] = [data[_prop2], ''];\n                    }\n                } catch (err) {\n                    _didIteratorError10 = true;\n                    _iteratorError10 = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion10 && _iterator10.return) {\n                            _iterator10.return();\n                        }\n                    } finally {\n                        if (_didIteratorError10) {\n                            throw _iteratorError10;\n                        }\n                    }\n                }\n            }\n        } catch (err) {\n            _didIteratorError9 = true;\n            _iteratorError9 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion9 && _iterator9.return) {\n                    _iterator9.return();\n                }\n            } finally {\n                if (_didIteratorError9) {\n                    throw _iteratorError9;\n                }\n            }\n        }\n    }\n\n    if ('LB' in node) {\n        var _iteratorNormalCompletion11 = true;\n        var _didIteratorError11 = false;\n        var _iteratorError11 = undefined;\n\n        try {\n            for (var _iterator11 = node.LB[Symbol.iterator](), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {\n                var composed = _step11.value;\n\n                var sep = composed.indexOf(':');\n                var point = composed.slice(0, sep);\n                var label = composed.slice(sep + 1);\n\n                board.markups[sgf.point2vertex(point)] = ['label', label];\n            }\n        } catch (err) {\n            _didIteratorError11 = true;\n            _iteratorError11 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion11 && _iterator11.return) {\n                    _iterator11.return();\n                }\n            } finally {\n                if (_didIteratorError11) {\n                    throw _iteratorError11;\n                }\n            }\n        }\n    }\n\n    if ('L' in node) {\n        for (var i = 0; i < node.L.length; i++) {\n            var _point = node.L[i];\n            var _label = alpha[i];\n            if (_label == null) return;\n\n            board.markups[sgf.point2vertex(_point)] = ['label', _label];\n        }\n    }\n\n    var _arr = ['AR', 'LN'];\n    for (var _i = 0; _i < _arr.length; _i++) {\n        var type = _arr[_i];\n        if (!(type in node)) continue;\n\n        var _iteratorNormalCompletion14 = true;\n        var _didIteratorError14 = false;\n        var _iteratorError14 = undefined;\n\n        try {\n            for (var _iterator14 = node[type][Symbol.iterator](), _step14; !(_iteratorNormalCompletion14 = (_step14 = _iterator14.next()).done); _iteratorNormalCompletion14 = true) {\n                var _composed = _step14.value;\n\n                var _sep = _composed.indexOf(':');\n\n                var _map = [_composed.slice(0, _sep), _composed.slice(_sep + 1)].map(sgf.point2vertex),\n                    _map2 = _slicedToArray(_map, 2),\n                    v1 = _map2[0],\n                    v2 = _map2[1];\n\n                board.lines.push([v1, v2, type === 'AR']);\n            }\n        } catch (err) {\n            _didIteratorError14 = true;\n            _iteratorError14 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion14 && _iterator14.return) {\n                    _iterator14.return();\n                }\n            } finally {\n                if (_didIteratorError14) {\n                    throw _iteratorError14;\n                }\n            }\n        }\n    }\n\n    // Add variation overlays\n\n    var addOverlay = function addOverlay(node, type) {\n        var v = void 0,\n            sign = void 0;\n\n        if ('B' in node) {\n            v = sgf.point2vertex(node.B[0]);\n            sign = 1;\n        } else if ('W' in node) {\n            v = sgf.point2vertex(node.W[0]);\n            sign = -1;\n        } else {\n            return;\n        }\n\n        if (!board.hasVertex(v) || v in board.ghosts) return;\n\n        var types = [];\n\n        if (type === 'child') {\n            types.push('ghost_' + sign);\n\n            if ('BM' in node) {\n                types.push('badmove');\n            } else if ('DO' in node) {\n                types.push('doubtfulmove');\n            } else if ('IT' in node) {\n                types.push('interestingmove');\n            } else if ('TE' in node) {\n                types.push('goodmove');\n            }\n        } else if (type === 'sibling') {\n            types.push('siblingghost_' + sign);\n        }\n\n        board.ghosts[v] = types;\n    };\n\n    if (index === tree.nodes.length - 1) {\n        var _iteratorNormalCompletion12 = true;\n        var _didIteratorError12 = false;\n        var _iteratorError12 = undefined;\n\n        try {\n            for (var _iterator12 = tree.subtrees[Symbol.iterator](), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {\n                var subtree = _step12.value;\n\n                if (subtree.nodes.length === 0) continue;\n                addOverlay(subtree.nodes[0], 'child');\n            }\n        } catch (err) {\n            _didIteratorError12 = true;\n            _iteratorError12 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion12 && _iterator12.return) {\n                    _iterator12.return();\n                }\n            } finally {\n                if (_didIteratorError12) {\n                    throw _iteratorError12;\n                }\n            }\n        }\n    } else if (index < tree.nodes.length - 1) {\n        addOverlay(tree.nodes[index + 1], 'child');\n    }\n\n    if (index === 0 && tree.parent) {\n        var _iteratorNormalCompletion13 = true;\n        var _didIteratorError13 = false;\n        var _iteratorError13 = undefined;\n\n        try {\n            for (var _iterator13 = tree.parent.subtrees[Symbol.iterator](), _step13; !(_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done); _iteratorNormalCompletion13 = true) {\n                var _subtree = _step13.value;\n\n                if (_subtree.nodes.length == 0) continue;\n                addOverlay(_subtree.nodes[0], 'sibling');\n            }\n        } catch (err) {\n            _didIteratorError13 = true;\n            _iteratorError13 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion13 && _iterator13.return) {\n                    _iterator13.return();\n                }\n            } finally {\n                if (_didIteratorError13) {\n                    throw _iteratorError13;\n                }\n            }\n        }\n    }\n\n    node.board = board;\n    return board;\n};\n\nexports.getJson = function (tree) {\n    return JSON.stringify(tree, function (name, val) {\n        var list = ['id', 'board', 'parent', 'current'];\n        return list.includes(name) ? undefined : val;\n    });\n};\n\nexports.fromJson = function (json) {\n    var addInformation = function addInformation(tree) {\n        tree.id = helper.getId();\n\n        if (tree.subtrees.length > 0) tree.current = 0;\n\n        for (var i = 0; i < tree.subtrees.length; i++) {\n            tree.subtrees[i].parent = tree;\n            addInformation(tree.subtrees[i]);\n        }\n\n        return tree;\n    };\n\n    var tree = JSON.parse(json);\n    tree.parent = null;\n    return addInformation(tree);\n};\n\nexports.getHash = function (tree) {\n    return helper.hash(tree.nodes.map(exports.getJson).join('-') + '-' + tree.subtrees.map(exports.getHash).join('-'));\n};\n\nexports.getMatrixHash = function (tree) {\n    return helper.hash(tree.id + '-' + tree.nodes.length + '-' + tree.subtrees.map(exports.getMatrixHash).join('-'));\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _require = __webpack_require__(1),\n    noop = _require.noop;\n\nmodule.exports = {\n    readFile: function readFile(file) {\n        var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n        var reader = new FileReader();\n        reader.onload = function (evt) {\n            return callback(null, evt.target.result);\n        };\n        reader.readAsText(file);\n    },\n\n    readFileSync: function readFileSync() {\n        return '';\n    },\n    writeFileSync: noop,\n    mkdirSync: noop,\n    accessSync: noop\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nmodule.exports = function () {};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar fs = __webpack_require__(5);\n\nvar _require = __webpack_require__(9),\n    extname = _require.extname;\n\nvar sgf = __webpack_require__(12);\nvar ngf = __webpack_require__(35);\nvar gib = __webpack_require__(36);\n\nvar modules = { sgf: sgf, ngf: ngf, gib: gib };\n\nexports = module.exports = modules;\n\nvar extensions = Object.keys(modules).map(function (key) {\n    return modules[key].meta;\n});\nvar combinedExtensions = extensions.map(function (x) {\n    return x.extensions;\n}).reduce(function (acc, x) {\n    return [].concat(_toConsumableArray(acc), _toConsumableArray(x));\n}, []);\n\nexports.meta = [{ name: 'Game Records', extensions: combinedExtensions }].concat(_toConsumableArray(extensions));\n\nexports.getModuleByExtension = function (extension) {\n    return modules[Object.keys(modules).find(function (key) {\n        return modules[key].meta.extensions.includes(extension.toLowerCase());\n    })] || sgf;\n};\n\nexports.parseFile = function (file, onProgress, callback) {\n    var extension = extname(file.name).slice(1);\n    var m = exports.getModuleByExtension(extension);\n\n    fs.readFile(file, function (err, content) {\n        callback({ trees: m.parse(content, onProgress) });\n    });\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar helper = __webpack_require__(1);\nvar alpha = 'ABCDEFGHJKLMNOPQRSTUVWXYZ';\n\nvar Board = function () {\n    function Board() {\n        var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 19;\n        var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 19;\n        var arrangement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        var captures = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n        _classCallCheck(this, Board);\n\n        this.width = width;\n        this.height = height;\n        this.captures = captures ? captures.slice() : [0, 0];\n        this.arrangement = [];\n        this.markups = {};\n        this.ghosts = {};\n        this.lines = [];\n\n        // Initialize arrangement\n\n        for (var y = 0; y < this.height; y++) {\n            this.arrangement[y] = y in arrangement ? [].concat(_toConsumableArray(arrangement[y])) : Array(this.width).fill(0);\n        }\n    }\n\n    _createClass(Board, [{\n        key: 'get',\n        value: function get(_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                x = _ref2[0],\n                y = _ref2[1];\n\n            return this.arrangement[y] ? this.arrangement[y][x] : undefined;\n        }\n    }, {\n        key: 'set',\n        value: function set(_ref3, sign) {\n            var _ref4 = _slicedToArray(_ref3, 2),\n                x = _ref4[0],\n                y = _ref4[1];\n\n            this.arrangement[y][x] = sign;\n            return this;\n        }\n    }, {\n        key: 'clone',\n        value: function clone() {\n            return new Board(this.width, this.height, this.arrangement, this.captures);\n        }\n    }, {\n        key: 'diff',\n        value: function diff(board) {\n            var result = [];\n\n            for (var x = 0; x < this.width; x++) {\n                for (var y = 0; y < this.height; y++) {\n                    var sign = board.get([x, y]);\n                    if (this.get([x, y]) === sign) continue;\n\n                    result.push([x, y]);\n                }\n            }\n\n            return result;\n        }\n    }, {\n        key: 'hasVertex',\n        value: function hasVertex(_ref5) {\n            var _ref6 = _slicedToArray(_ref5, 2),\n                x = _ref6[0],\n                y = _ref6[1];\n\n            return 0 <= x && x < this.width && 0 <= y && y < this.height;\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            var _this = this;\n\n            this.arrangement = this.arrangement.map(function (_) {\n                return Array(_this.width).fill(0);\n            });\n        }\n    }, {\n        key: 'isSquare',\n        value: function isSquare() {\n            return this.width === this.height;\n        }\n    }, {\n        key: 'getDistance',\n        value: function getDistance(v, w) {\n            return Math.abs(v[0] - w[0]) + Math.abs(v[1] - w[1]);\n        }\n    }, {\n        key: 'getDistanceToGround',\n        value: function getDistanceToGround(vertex) {\n            return this.getCanonicalVertex(vertex)[0];\n        }\n    }, {\n        key: 'getCanonicalVertex',\n        value: function getCanonicalVertex(vertex) {\n            if (!this.hasVertex(vertex)) return [-1, -1];\n\n            var boardSize = [this.width, this.height];\n\n            return vertex.map(function (x, i) {\n                return Math.min(x, boardSize[i] - x - 1);\n            }).sort(function (x, y) {\n                return x - y;\n            });\n        }\n    }, {\n        key: 'getNeighbors',\n        value: function getNeighbors(vertex) {\n            var _this2 = this;\n\n            var ignoreBoard = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n            if (!ignoreBoard && !this.hasVertex(vertex)) return [];\n\n            var _vertex = _slicedToArray(vertex, 2),\n                x = _vertex[0],\n                y = _vertex[1];\n\n            var allNeighbors = [[x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]];\n\n            return ignoreBoard ? allNeighbors : allNeighbors.filter(function (v) {\n                return _this2.hasVertex(v);\n            });\n        }\n    }, {\n        key: 'getConnectedComponent',\n        value: function getConnectedComponent(vertex, func) {\n            var _this3 = this;\n\n            var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n            if (func instanceof Array) {\n                var signs = func;\n                func = function func(v) {\n                    return signs.includes(_this3.get(v));\n                };\n            } else if (typeof func === 'number') {\n                var sign = func;\n                func = function func(v) {\n                    return _this3.get(v) === sign;\n                };\n            }\n\n            if (!this.hasVertex(vertex)) return [];\n            if (!result) result = [vertex];\n\n            // Recursive depth-first search\n\n            var _loop = function _loop(v) {\n                if (!func(v)) return 'continue';\n                if (result.some(function (w) {\n                    return helper.vertexEquals(v, w);\n                })) return 'continue';\n\n                result.push(v);\n                _this3.getConnectedComponent(v, func, result);\n            };\n\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = this.getNeighbors(vertex)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var v = _step.value;\n\n                    var _ret = _loop(v);\n\n                    if (_ret === 'continue') continue;\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            return result;\n        }\n    }, {\n        key: 'getChain',\n        value: function getChain(vertex) {\n            return this.getConnectedComponent(vertex, this.get(vertex));\n        }\n    }, {\n        key: 'hasLiberties',\n        value: function hasLiberties(vertex) {\n            var _this4 = this;\n\n            var visited = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n            var sign = this.get(vertex);\n            if (!this.hasVertex(vertex) || sign === 0) return false;\n\n            if (vertex in visited) return false;\n            var neighbors = this.getNeighbors(vertex);\n\n            if (neighbors.some(function (n) {\n                return _this4.get(n) === 0;\n            })) return true;\n\n            visited[vertex] = true;\n\n            return neighbors.filter(function (n) {\n                return _this4.get(n) === sign;\n            }).some(function (n) {\n                return _this4.hasLiberties(n, visited);\n            });\n        }\n    }, {\n        key: 'getLiberties',\n        value: function getLiberties(vertex) {\n            var _this5 = this;\n\n            if (!this.hasVertex(vertex) || this.get(vertex) === 0) return [];\n\n            var chain = this.getChain(vertex);\n            var liberties = [];\n            var added = {};\n\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n                for (var _iterator2 = chain[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                    var c = _step2.value;\n\n                    var freeNeighbors = this.getNeighbors(c).filter(function (n) {\n                        return _this5.get(n) === 0;\n                    });\n\n                    liberties.push.apply(liberties, _toConsumableArray(freeNeighbors.filter(function (n) {\n                        return !(n in added);\n                    })));\n                    freeNeighbors.forEach(function (n) {\n                        return added[n] = true;\n                    });\n                }\n            } catch (err) {\n                _didIteratorError2 = true;\n                _iteratorError2 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                        _iterator2.return();\n                    }\n                } finally {\n                    if (_didIteratorError2) {\n                        throw _iteratorError2;\n                    }\n                }\n            }\n\n            return liberties;\n        }\n    }, {\n        key: 'getRelatedChains',\n        value: function getRelatedChains(vertex) {\n            var _this6 = this;\n\n            if (!this.hasVertex(vertex) || this.get(vertex) === 0) return [];\n\n            var area = this.getConnectedComponent(vertex, [this.get(vertex), 0]);\n            return area.filter(function (v) {\n                return _this6.get(v) === _this6.get(vertex);\n            });\n        }\n    }, {\n        key: 'getAreaMap',\n        value: function getAreaMap() {\n            var _this7 = this;\n\n            var map = [].concat(_toConsumableArray(Array(this.height))).map(function (_) {\n                return Array(_this7.width).fill(null);\n            });\n\n            for (var x = 0; x < this.width; x++) {\n                for (var y = 0; y < this.height; y++) {\n                    var vertex = [x, y];\n\n                    if (map[y][x] != null) continue;\n                    if (this.get(vertex) !== 0) {\n                        map[y][x] = this.get(vertex);\n                        continue;\n                    }\n\n                    var chain = this.getChain(vertex);\n                    var sign = 0;\n                    var indicator = 1;\n\n                    var _iteratorNormalCompletion3 = true;\n                    var _didIteratorError3 = false;\n                    var _iteratorError3 = undefined;\n\n                    try {\n                        for (var _iterator3 = chain[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                            var c = _step3.value;\n\n                            if (indicator === 0) break;\n\n                            var _iteratorNormalCompletion5 = true;\n                            var _didIteratorError5 = false;\n                            var _iteratorError5 = undefined;\n\n                            try {\n                                for (var _iterator5 = this.getNeighbors(c)[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                                    var n = _step5.value;\n\n                                    if (indicator === 0) break;\n                                    if (this.get(n) === 0) continue;\n\n                                    var _n = _slicedToArray(n, 2),\n                                        _i = _n[0],\n                                        _j = _n[1];\n\n                                    if (sign === 0) sign = map[_j][_i] = this.get(n);else if (sign !== this.get(n)) indicator = 0;\n                                }\n                            } catch (err) {\n                                _didIteratorError5 = true;\n                                _iteratorError5 = err;\n                            } finally {\n                                try {\n                                    if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                                        _iterator5.return();\n                                    }\n                                } finally {\n                                    if (_didIteratorError5) {\n                                        throw _iteratorError5;\n                                    }\n                                }\n                            }\n                        }\n                    } catch (err) {\n                        _didIteratorError3 = true;\n                        _iteratorError3 = err;\n                    } finally {\n                        try {\n                            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                                _iterator3.return();\n                            }\n                        } finally {\n                            if (_didIteratorError3) {\n                                throw _iteratorError3;\n                            }\n                        }\n                    }\n\n                    var _iteratorNormalCompletion4 = true;\n                    var _didIteratorError4 = false;\n                    var _iteratorError4 = undefined;\n\n                    try {\n                        for (var _iterator4 = chain[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                            var _ref7 = _step4.value;\n\n                            var _ref8 = _slicedToArray(_ref7, 2);\n\n                            var i = _ref8[0];\n                            var j = _ref8[1];\n\n                            map[j][i] = sign * indicator;\n                        }\n                    } catch (err) {\n                        _didIteratorError4 = true;\n                        _iteratorError4 = err;\n                    } finally {\n                        try {\n                            if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                                _iterator4.return();\n                            }\n                        } finally {\n                            if (_didIteratorError4) {\n                                throw _iteratorError4;\n                            }\n                        }\n                    }\n                }\n            }\n\n            return map;\n        }\n    }, {\n        key: 'getAreaEstimateMap',\n        value: function getAreaEstimateMap() {\n            var _this8 = this;\n\n            var map = this.getAreaMap();\n\n            var pnnmap = this.getNearestNeighborMap(1);\n            var nnnmap = this.getNearestNeighborMap(-1);\n            var pimap = this.getInfluenceMap(1);\n            var nimap = this.getInfluenceMap(-1);\n\n            for (var x = 0; x < this.width; x++) {\n                for (var y = 0; y < this.height; y++) {\n                    if (map[y][x] !== 0) continue;\n\n                    var s = Math.sign(nnnmap[y][x] - pnnmap[y][x]);\n                    if (s > 0 && pnnmap[y][x] > 6 || s < 0 && nnnmap[y][x] > 6 || s > 0 && Math.round(pimap[y][x]) < 2 || s < 0 && Math.round(nimap[y][x]) < 2) s = 0;\n\n                    map[y][x] = s;\n                }\n            }\n\n            // Fix holes and prevent single point areas\n\n            for (var _x8 = 0; _x8 < this.width; _x8++) {\n                var _loop2 = function _loop2(_y) {\n                    var neighbors = _this8.getNeighbors([_x8, _y]);\n                    if (neighbors.length === 0) return 'continue';\n\n                    var _neighbors$ = _slicedToArray(neighbors[0], 2),\n                        i = _neighbors$[0],\n                        j = _neighbors$[1];\n\n                    var s = map[_y][_x8] === 0 ? map[j][i] : 0;\n\n                    if (neighbors.every(function (_ref9) {\n                        var _ref10 = _slicedToArray(_ref9, 2),\n                            i = _ref10[0],\n                            j = _ref10[1];\n\n                        return map[j][i] === s;\n                    })) map[_y][_x8] = s;\n                };\n\n                for (var _y = 0; _y < this.height; _y++) {\n                    var _ret2 = _loop2(_y);\n\n                    if (_ret2 === 'continue') continue;\n                }\n            }\n\n            return map;\n        }\n    }, {\n        key: 'getNearestNeighborMap',\n        value: function getNearestNeighborMap(sign) {\n            var _this9 = this;\n\n            var map = [].concat(_toConsumableArray(Array(this.height))).map(function (_) {\n                return Array(_this9.width).fill(Infinity);\n            });\n            var min = Infinity;\n\n            var f = function f(x, y) {\n                var v = [x, y];\n                if (_this9.get(v) === sign) min = 0;else if (_this9.get(v) === 0) min++;else min = Infinity;\n\n                map[y][x] = min = Math.min(min, map[y][x]);\n            };\n\n            for (var y = 0; y < this.height; y++) {\n                min = Infinity;\n\n                for (var x = 0; x < this.width; x++) {\n                    var old = Infinity;\n\n                    f(x, y);\n                    old = min;\n\n                    for (var ny = y + 1; ny < this.height; ny++) {\n                        f(x, ny);\n                    }min = old;\n\n                    for (var _ny = y - 1; _ny >= 0; _ny--) {\n                        f(x, _ny);\n                    }min = old;\n                }\n            }\n\n            for (var _y2 = this.height - 1; _y2 >= 0; _y2--) {\n                min = Infinity;\n\n                for (var _x9 = this.width - 1; _x9 >= 0; _x9--) {\n                    var _old = Infinity;\n\n                    f(_x9, _y2);\n                    _old = min;\n\n                    for (var _ny2 = _y2 + 1; _ny2 < this.height; _ny2++) {\n                        f(_x9, _ny2);\n                    }min = _old;\n\n                    for (var _ny3 = _y2 - 1; _ny3 >= 0; _ny3--) {\n                        f(_x9, _ny3);\n                    }min = _old;\n                }\n            }\n\n            return map;\n        }\n    }, {\n        key: 'getInfluenceMap',\n        value: function getInfluenceMap(sign) {\n            var _this10 = this;\n\n            var map = [].concat(_toConsumableArray(Array(this.height))).map(function (_) {\n                return Array(_this10.width).fill(0);\n            });\n            var size = [this.width, this.height];\n            var done = [];\n\n            // Cast influence\n\n            var getVertex = function getVertex(v) {\n                if (_this10.hasVertex(v)) return v;\n                return v.map(function (z, i) {\n                    return z < 0 ? -z - 1 : z >= size[i] ? 2 * size[i] - z - 1 : z;\n                });\n            };\n\n            var castInfluence = function castInfluence(chain, distance) {\n                var queue = chain.map(function (x) {\n                    return [x, 0];\n                });\n                var visited = [];\n\n                while (queue.length > 0) {\n                    var _queue$shift = queue.shift(),\n                        _queue$shift2 = _slicedToArray(_queue$shift, 2),\n                        v = _queue$shift2[0],\n                        d = _queue$shift2[1];\n\n                    var _getVertex = getVertex(v),\n                        _getVertex2 = _slicedToArray(_getVertex, 2),\n                        x = _getVertex2[0],\n                        y = _getVertex2[1];\n\n                    map[y][x] += !_this10.hasVertex(v) ? 2 : 1.5 / (d / distance * 6 + 1);\n\n                    var _loop3 = function _loop3(n) {\n                        if (d + 1 > distance || _this10.get(n) === -sign || visited.some(function (w) {\n                            return helper.vertexEquals(n, w);\n                        })) return 'continue';\n\n                        visited.push(n);\n                        queue.push([n, d + 1]);\n                    };\n\n                    var _iteratorNormalCompletion6 = true;\n                    var _didIteratorError6 = false;\n                    var _iteratorError6 = undefined;\n\n                    try {\n                        for (var _iterator6 = _this10.getNeighbors(v, true)[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n                            var n = _step6.value;\n\n                            var _ret3 = _loop3(n);\n\n                            if (_ret3 === 'continue') continue;\n                        }\n                    } catch (err) {\n                        _didIteratorError6 = true;\n                        _iteratorError6 = err;\n                    } finally {\n                        try {\n                            if (!_iteratorNormalCompletion6 && _iterator6.return) {\n                                _iterator6.return();\n                            }\n                        } finally {\n                            if (_didIteratorError6) {\n                                throw _iteratorError6;\n                            }\n                        }\n                    }\n                }\n            };\n\n            for (var x = 0; x < this.width; x++) {\n                var _loop4 = function _loop4(y) {\n                    var v = [x, y];\n                    if (_this10.get(v) !== sign || done.some(function (w) {\n                        return helper.vertexEquals(v, w);\n                    })) return 'continue';\n\n                    var chain = _this10.getChain(v);\n                    chain.forEach(function (w) {\n                        return done.push(w);\n                    });\n\n                    castInfluence(chain, 6);\n                };\n\n                for (var y = 0; y < this.height; y++) {\n                    var _ret4 = _loop4(y);\n\n                    if (_ret4 === 'continue') continue;\n                }\n            }\n\n            return map;\n        }\n    }, {\n        key: 'getScore',\n        value: function getScore(areaMap) {\n            var score = {\n                area: [0, 0],\n                territory: [0, 0],\n                captures: this.captures\n            };\n\n            for (var x = 0; x < this.width; x++) {\n                for (var y = 0; y < this.height; y++) {\n                    var sign = areaMap[y][x];\n                    if (sign === 0) continue;\n\n                    var index = sign > 0 ? 0 : 1;\n\n                    score.area[index]++;\n                    if (this.get([x, y]) === 0) score.territory[index]++;\n                }\n            }\n\n            return score;\n        }\n    }, {\n        key: 'vertex2coord',\n        value: function vertex2coord(vertex) {\n            if (!this.hasVertex(vertex)) return null;\n            return alpha[vertex[0]] + (this.height - vertex[1]);\n        }\n    }, {\n        key: 'coord2vertex',\n        value: function coord2vertex(coord) {\n            var x = alpha.indexOf(coord[0].toUpperCase());\n            var y = this.height - +coord.substr(1);\n            return [x, y];\n        }\n    }, {\n        key: 'isValid',\n        value: function isValid() {\n            var liberties = {};\n\n            for (var x = 0; x < this.width; x++) {\n                for (var y = 0; y < this.height; y++) {\n                    var vertex = [x, y];\n                    if (this.get(vertex) === 0 || vertex in liberties) continue;\n                    if (!this.hasLiberties(vertex)) return false;\n\n                    this.getChain(vertex).forEach(function (v) {\n                        return liberties[v] = true;\n                    });\n                }\n            }\n\n            return true;\n        }\n    }, {\n        key: 'makeMove',\n        value: function makeMove(sign, vertex) {\n            var move = this.clone();\n\n            if (sign === 0 || !this.hasVertex(vertex)) return move;\n\n            sign = sign > 0 ? 1 : -1;\n            move.set(vertex, sign);\n\n            // Remove captured stones\n\n            var deadNeighbors = move.getNeighbors(vertex).filter(function (n) {\n                return move.get(n) === -sign && !move.hasLiberties(n);\n            });\n\n            var _iteratorNormalCompletion7 = true;\n            var _didIteratorError7 = false;\n            var _iteratorError7 = undefined;\n\n            try {\n                for (var _iterator7 = deadNeighbors[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n                    var n = _step7.value;\n\n                    if (move.get(n) === 0) continue;\n\n                    var _iteratorNormalCompletion9 = true;\n                    var _didIteratorError9 = false;\n                    var _iteratorError9 = undefined;\n\n                    try {\n                        for (var _iterator9 = move.getChain(n)[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n                            var _c = _step9.value;\n\n                            move.set(_c, 0);\n                            move.captures[(-sign + 1) / 2]++;\n                        }\n                    } catch (err) {\n                        _didIteratorError9 = true;\n                        _iteratorError9 = err;\n                    } finally {\n                        try {\n                            if (!_iteratorNormalCompletion9 && _iterator9.return) {\n                                _iterator9.return();\n                            }\n                        } finally {\n                            if (_didIteratorError9) {\n                                throw _iteratorError9;\n                            }\n                        }\n                    }\n                }\n            } catch (err) {\n                _didIteratorError7 = true;\n                _iteratorError7 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion7 && _iterator7.return) {\n                        _iterator7.return();\n                    }\n                } finally {\n                    if (_didIteratorError7) {\n                        throw _iteratorError7;\n                    }\n                }\n            }\n\n            move.set(vertex, sign);\n\n            // Detect suicide\n\n            if (deadNeighbors.length === 0 && !move.hasLiberties(vertex)) {\n                var _iteratorNormalCompletion8 = true;\n                var _didIteratorError8 = false;\n                var _iteratorError8 = undefined;\n\n                try {\n                    for (var _iterator8 = move.getChain(vertex)[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n                        var c = _step8.value;\n\n                        move.set(c, 0);\n                        move.captures[(sign + 1) / 2]++;\n                    }\n                } catch (err) {\n                    _didIteratorError8 = true;\n                    _iteratorError8 = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion8 && _iterator8.return) {\n                            _iterator8.return();\n                        }\n                    } finally {\n                        if (_didIteratorError8) {\n                            throw _iteratorError8;\n                        }\n                    }\n                }\n            }\n\n            return move;\n        }\n    }, {\n        key: 'getHandicapPlacement',\n        value: function getHandicapPlacement(count) {\n            if (Math.min(this.width, this.height) < 6 || count < 2) return [];\n\n            var nearX = this.width >= 13 ? 3 : 2;\n            var nearY = this.height >= 13 ? 3 : 2;\n            var farX = this.width - nearX - 1;\n            var farY = this.height - nearY - 1;\n\n            var result = [[nearX, farY], [farX, nearY], [nearX, nearY], [farX, farY]];\n            var middleX = (this.width - 1) / 2;\n            var middleY = (this.height - 1) / 2;\n\n            if (this.width % 2 !== 0 && this.height % 2 !== 0) {\n                if (count === 5) result.push([middleX, middleY]);\n                result.push([nearX, middleY], [farX, middleY]);\n\n                if (count === 7) result.push([middleX, middleY]);\n                result.push([middleX, nearY], [middleX, farY], [middleX, middleY]);\n            } else if (this.width % 2 !== 0) {\n                result.push([middleX, nearY], [middleX, farY]);\n            } else if (this.height % 2 !== 0) {\n                result.push([nearX, middleY], [farX, middleY]);\n            }\n\n            return result.slice(0, count);\n        }\n    }, {\n        key: 'generateAscii',\n        value: function generateAscii() {\n            var _this11 = this;\n\n            var result = [];\n            var lb = helper.linebreak;\n\n            var getIndexFromVertex = function getIndexFromVertex(_ref11) {\n                var _ref12 = _slicedToArray(_ref11, 2),\n                    x = _ref12[0],\n                    y = _ref12[1];\n\n                var rowLength = 4 + _this11.width * 2;\n                return rowLength + rowLength * y + 1 + x * 2 + 1;\n            };\n\n            // Make empty board\n\n            result.push('+');\n            for (var x = 0; x < this.width; x++) {\n                result.push('-', '-');\n            }result.push('-', '+', lb);\n\n            for (var y = 0; y < this.height; y++) {\n                result.push('|');\n                for (var _x10 = 0; _x10 < this.width; _x10++) {\n                    result.push(' ', '.');\n                }result.push(' ', '|', lb);\n            }\n\n            result.push('+');\n            for (var _x11 = 0; _x11 < this.width; _x11++) {\n                result.push('-', '-');\n            }result.push('-', '+', lb);\n\n            this.getHandicapPlacement(9).forEach(function (v) {\n                return result[getIndexFromVertex(v)] = ',';\n            });\n\n            // Place markers & stones\n\n            var data = {\n                plain: ['O', null, 'X'],\n                circle: ['W', 'C', 'B'],\n                square: ['@', 'S', '#'],\n                triangle: ['Q', 'T', 'Y'],\n                cross: ['P', 'M', 'Z'],\n                label: null\n            };\n\n            for (var _x12 = 0; _x12 < this.width; _x12++) {\n                for (var _y3 = 0; _y3 < this.height; _y3++) {\n                    var _v = [_x12, _y3];\n                    var i = getIndexFromVertex(_v);\n                    var s = this.get(_v);\n\n                    if (!this.markups[_v] || !(this.markups[_v][0] in data)) {\n                        if (s !== 0) result[i] = data.plain[s + 1];\n                    } else {\n                        var _markups$_v = _slicedToArray(this.markups[_v], 2),\n                            type = _markups$_v[0],\n                            label = _markups$_v[1];\n\n                        if (type !== 'label') {\n                            result[i] = data[type][s + 1];\n                        } else if (s === 0 && label.length === 1 && isNaN(parseFloat(label))) {\n                            result[i] = label.toLowerCase();\n                        }\n                    }\n                }\n            }\n\n            result = result.join('');\n\n            // Add lines & arrows\n\n            var _iteratorNormalCompletion10 = true;\n            var _didIteratorError10 = false;\n            var _iteratorError10 = undefined;\n\n            try {\n                for (var _iterator10 = this.lines[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n                    var _ref13 = _step10.value;\n\n                    var _ref14 = _slicedToArray(_ref13, 3);\n\n                    var start = _ref14[0];\n                    var end = _ref14[1];\n                    var arrow = _ref14[2];\n\n                    result += '{' + (arrow ? 'AR' : 'LN') + ' ' + this.vertex2coord(start) + ' ' + this.vertex2coord(end) + '}' + lb;\n                }\n            } catch (err) {\n                _didIteratorError10 = true;\n                _iteratorError10 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion10 && _iterator10.return) {\n                        _iterator10.return();\n                    }\n                } finally {\n                    if (_didIteratorError10) {\n                        throw _iteratorError10;\n                    }\n                }\n            }\n\n            return (lb + result.trim()).split(lb).map(function (l) {\n                return '$$ ' + l;\n            }).join(lb);\n        }\n    }, {\n        key: 'getPositionHash',\n        value: function getPositionHash() {\n            return helper.hash(JSON.stringify(this.arrangement));\n        }\n    }, {\n        key: 'getHash',\n        value: function getHash() {\n            return helper.hash(JSON.stringify([this.getPositionHash(), this.captures, this.markups, this.ghosts, this.lines]));\n        }\n    }]);\n\n    return Board;\n}();\n\nmodule.exports = Board;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function splitPath(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function () {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = i >= 0 ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function (p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return (resolvedAbsolute ? '/' : '') + resolvedPath || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function (path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function (p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function (path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function () {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function (p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n// path.relative(from, to)\n// posix version\nexports.relative = function (from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\nexports.basename = function (path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  return splitPath(path)[3];\n};\n\nfunction filter(xs, f) {\n  if (xs.filter) return xs.filter(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    if (f(xs[i], i, xs)) res.push(xs[i]);\n  }\n  return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b' ? function (str, start, len) {\n  return str.substr(start, len);\n} : function (str, start, len) {\n  if (start < 0) start = str.length + start;\n  return str.substr(start, len);\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(10)))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout() {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n})();\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while (len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) {\n    return [];\n};\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () {\n    return '/';\n};\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function () {\n    return 0;\n};\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar Bar = function (_Component) {\n    _inherits(Bar, _Component);\n\n    function Bar() {\n        _classCallCheck(this, Bar);\n\n        var _this = _possibleConstructorReturn(this, (Bar.__proto__ || Object.getPrototypeOf(Bar)).call(this));\n\n        _this.onCloseButtonClick = function () {\n            return sabaki.setMode('play');\n        };\n        return _this;\n    }\n\n    _createClass(Bar, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps) {\n            return nextProps.mode !== this.props.mode || nextProps.mode === nextProps.type;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref) {\n            var children = _ref.children,\n                type = _ref.type,\n                mode = _ref.mode,\n                _ref$class = _ref.class,\n                c = _ref$class === undefined ? '' : _ref$class;\n\n            return h('section', {\n                id: type,\n                class: classNames(c, {\n                    bar: true,\n                    current: type === mode\n                })\n            }, children, h('a', { class: 'close', href: '#', onClick: this.onCloseButtonClick }));\n        }\n    }]);\n\n    return Bar;\n}(Component);\n\nmodule.exports = Bar;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar Buffer = __webpack_require__(13);\nvar fs = __webpack_require__(5);\nvar gametree = __webpack_require__(4);\nvar helper = __webpack_require__(1);\n\nvar alpha = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n// The default encoding and list of properties that should be interpreted as\n// being encoded by the file's CA[] property is defined in the SGF spec at\n// http://www.red-bean.com/sgf/properties.html#CA\n\nvar defaultEncoding = 'ISO-8859-1';\nvar encodedProperties = ['C', 'N', 'AN', 'BR', 'BT', 'CP', 'DT', 'EV', 'GN', 'ON', 'OT', 'PB', 'PC', 'PW', 'RE', 'RO', 'RU', 'SO', 'US', 'WR', 'WT', 'GC'];\n\nexports.meta = {\n    name: 'Smart Game Format',\n    extensions: ['sgf']\n};\n\nexports.tokenize = function (contents) {\n    contents = helper.normalizeEndings(contents);\n\n    var tokens = [];\n    var rules = {\n        ignore: /^\\s+/,\n        parenthesis: /^(\\(|\\))/,\n        semicolon: /^;/,\n        prop_ident: /^[A-Za-z]+/,\n        c_value_type: /^\\[([^\\\\\\]]|\\\\[^])*\\]/\n    };\n\n    while (contents.length > 0) {\n        var token = null;\n        var length = 1;\n\n        for (var type in rules) {\n            var matches = rules[type].exec(contents);\n            if (!matches) continue;\n\n            var value = matches[0];\n            length = value.length;\n            token = [type, value];\n\n            break;\n        }\n\n        if (token && token[0] !== 'ignore') tokens.push(token);\n        contents = contents.substr(length);\n    }\n\n    return tokens;\n};\n\nfunction _parseTokens(tokens) {\n    var onProgress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : helper.noop;\n    var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultEncoding;\n    var start = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [0];\n    var depth = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n\n    var iconv = __webpack_require__(14);\n    var i = start[0];\n    var tree = gametree.new(),\n        node = void 0,\n        property = void 0,\n        id = void 0;\n\n    while (i < tokens.length) {\n        var _tokens$i = _slicedToArray(tokens[i], 2),\n            type = _tokens$i[0],\n            value = _tokens$i[1];\n\n        if (type === 'parenthesis' && value === '(') break;\n        if (type === 'parenthesis' && value === ')') return tree;\n\n        if (type === 'semicolon') {\n            node = {};\n            tree.nodes.push(node);\n        } else if (type === 'prop_ident') {\n            id = value.split('').filter(function (x) {\n                return x.toUpperCase() === x;\n            }).join('');\n\n            if (id !== '') {\n                if (!(id in node)) node[id] = [];\n                property = node[id];\n            }\n        } else if (type === 'c_value_type') {\n            value = exports.unescapeString(value.substr(1, value.length - 2));\n\n            if (encoding !== null) {\n                if (id === 'CA' && value !== defaultEncoding && iconv.encodingExists(value)) {\n                    encoding = value;\n\n                    // We may have already incorrectly parsed some values in this root node\n                    // already, so we have to go back and re-parse them now.\n\n                    for (var k in node) {\n                        if (encodedProperties.includes(k)) {\n                            node[k] = node[k].map(function (x) {\n                                return iconv.decode(Buffer.from(x, 'binary'), encoding);\n                            });\n                        }\n                    }\n                } else if (encodedProperties.includes(id) && encoding !== defaultEncoding) {\n                    var decodedValue = iconv.decode(Buffer.from(value, 'binary'), encoding);\n                    value = decodedValue;\n                }\n            }\n\n            property.push(value);\n        }\n\n        start[0] = ++i;\n    }\n\n    while (i < tokens.length) {\n        var _tokens$i2 = _slicedToArray(tokens[i], 2),\n            _type = _tokens$i2[0],\n            _value = _tokens$i2[1];\n\n        if (_type === 'parenthesis' && _value === '(') {\n            start[0] = i + 1;\n\n            var t = _parseTokens(tokens, onProgress, encoding, start, depth + Math.min(tree.subtrees.length, 1));\n\n            if (t.nodes.length > 0) {\n                t.parent = tree;\n                tree.subtrees.push(t);\n                tree.current = 0;\n            }\n\n            i = start[0];\n        } else if (_type === 'parenthesis' && _value === ')') {\n            start[0] = i;\n            onProgress({ progress: i / tokens.length });\n            break;\n        }\n\n        i++;\n    }\n\n    return tree;\n}\n\nexports.parseTokens = function (tokens, onProgress) {\n    var encoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultEncoding;\n\n    var tree = _parseTokens(tokens, onProgress, encoding);\n    tree.subtrees.forEach(function (subtree) {\n        return subtree.parent = null;\n    });\n    return tree.subtrees;\n};\n\nexports.parse = function (contents, onProgress) {\n    var ignoreEncoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    var tokens = exports.tokenize(contents);\n\n    var encoding = ignoreEncoding ? null : defaultEncoding;\n\n    if (!ignoreEncoding) {\n        var foundEncoding = false;\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n            for (var _iterator = tokens[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var t = _step.value;\n\n                if (helper.vertexEquals(t, ['prop_ident', 'CA'])) {\n                    foundEncoding = true;\n                    break;\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        if (!foundEncoding) {\n            var jschardet = __webpack_require__(15);\n            var detected = jschardet.detect(contents);\n\n            if (detected.confidence > 0.2) {\n                encoding = detected.encoding;\n            }\n        }\n    }\n\n    return exports.parseTokens(tokens, onProgress, encoding);\n};\n\nexports.parseFile = function (filename, onProgress) {\n    var ignoreEncoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n};\n\nexports.string2dates = function (input) {\n    if (!input.match(/^(\\d{4}(-\\d{1,2}(-\\d{1,2})?)?(\\s*,\\s*(\\d{4}|(\\d{4}-)?\\d{1,2}(-\\d{1,2})?))*)?$/)) return null;\n    if (input.trim() === '') return [];\n\n    var dates = input.split(',').map(function (x) {\n        return x.trim().split('-');\n    });\n\n    for (var i = 1; i < dates.length; i++) {\n        var date = dates[i];\n        var prev = dates[i - 1];\n\n        if (date[0].length !== 4) {\n            // No year\n\n            if (date.length === 1 && prev.length === 3) {\n                // Add month\n                date.unshift(prev[1]);\n            }\n\n            // Add year\n            date.unshift(prev[0]);\n        }\n    }\n\n    return dates.map(function (x) {\n        return x.map(function (y) {\n            return +y;\n        });\n    });\n};\n\nexports.dates2string = function (dates) {\n    if (dates.length === 0) return '';\n\n    var datesCopy = [dates[0].slice()];\n\n    for (var i = 1; i < dates.length; i++) {\n        var date = dates[i];\n        var prev = dates[i - 1];\n        var k = 0;\n\n        for (var j = 0; j < date.length; j++) {\n            if (date[j] === prev[j] && k === j) k++;else break;\n        }\n\n        datesCopy.push(date.slice(k));\n    }\n\n    return datesCopy.map(function (x) {\n        return x.map(function (y) {\n            return y > 9 ? '' + y : '0' + y;\n        }).join('-');\n    }).join(',');\n};\n\nexports.point2vertex = function (point) {\n    if (point.length !== 2) return [-1, -1];\n    return point.split('').map(function (x) {\n        return alpha.indexOf(x);\n    });\n};\n\nexports.vertex2point = function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        x = _ref2[0],\n        y = _ref2[1];\n\n    if (Math.min(x, y) < 0 || Math.max(x, y) >= alpha.length) return '';\n    return alpha[x] + alpha[y];\n};\n\nexports.compressed2list = function (compressed) {\n    var colon = compressed.indexOf(':');\n    if (colon < 0) return [exports.point2vertex(compressed)];\n\n    var v1 = exports.point2vertex(compressed.slice(0, colon));\n    var v2 = exports.point2vertex(compressed.slice(colon + 1));\n    var list = [];\n\n    for (var i = Math.min(v1[0], v2[0]); i <= Math.max(v1[0], v2[0]); i++) {\n        for (var j = Math.min(v1[1], v2[1]); j <= Math.max(v1[1], v2[1]); j++) {\n            list.push([i, j]);\n        }\n    }\n\n    return list;\n};\n\nexports.stringify = function (tree) {\n    if (Object.prototype.toString.call(tree) === '[object Array]') {\n        return exports.stringify({ nodes: [], subtrees: tree });\n    }\n\n    var output = '';\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n        for (var _iterator2 = tree.nodes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var node = _step2.value;\n\n            output += ';';\n\n            for (var id in node) {\n                if (id.toUpperCase() !== id) continue;\n\n                output += id + '[' + node[id].map(exports.escapeString).join('][') + ']';\n            }\n\n            output += helper.linebreak;\n        }\n    } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n            }\n        } finally {\n            if (_didIteratorError2) {\n                throw _iteratorError2;\n            }\n        }\n    }\n\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n        for (var _iterator3 = tree.subtrees[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var subtree = _step3.value;\n\n            output += '(' + exports.stringify(subtree) + ')';\n        }\n    } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                _iterator3.return();\n            }\n        } finally {\n            if (_didIteratorError3) {\n                throw _iteratorError3;\n            }\n        }\n    }\n\n    return output;\n};\n\nexports.escapeString = function (input) {\n    return input.toString().replace(/\\\\/g, '\\\\\\\\').replace(/\\]/g, '\\\\]').replace(/\\n\\n+/g, '\\n\\n').replace(/\\n/g, helper.linebreak);\n};\n\nexports.unescapeString = function (input) {\n    var result = [];\n    var inBackslash = false;\n\n    input = helper.normalizeEndings(input);\n\n    for (var i = 0; i < input.length; i++) {\n        if (!inBackslash) {\n            if (input[i] !== '\\\\') result.push(input[i]);else if (input[i] === '\\\\') inBackslash = true;\n        } else {\n            if (input[i] !== '\\n') result.push(input[i]);\n\n            inBackslash = false;\n        }\n    }\n\n    return result.join('');\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n    from: function from(x) {\n        return x;\n    }\n};\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n    encodingExists: function encodingExists() {\n        return false;\n    },\n    decode: function decode(x) {\n        return x;\n    }\n};\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n    detect: function detect() {\n        return {\n            confidence: 1,\n            encoding: 'utf8'\n        };\n    }\n};\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\nmodule.exports = [];\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar Drawer = function (_Component) {\n    _inherits(Drawer, _Component);\n\n    function Drawer() {\n        _classCallCheck(this, Drawer);\n\n        return _possibleConstructorReturn(this, (Drawer.__proto__ || Object.getPrototypeOf(Drawer)).apply(this, arguments));\n    }\n\n    _createClass(Drawer, [{\n        key: 'render',\n        value: function render(_ref) {\n            var type = _ref.type,\n                show = _ref.show,\n                children = _ref.children;\n\n            return h('section', {\n                id: type,\n                class: classNames({\n                    drawer: true,\n                    show: show\n                })\n            }, children);\n        }\n    }]);\n\n    return Drawer;\n}(Component);\n\nmodule.exports = Drawer;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function (n) {\n  if (!isNumber(n) || n < 0 || isNaN(n)) throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function (type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events) this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error || isObject(this._events.error) && !this._events.error.length) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler)) return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++) {\n      listeners[i].apply(this, args);\n    }\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function (type, listener) {\n  var m;\n\n  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\n  if (!this._events) this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener) this.emit('newListener', type, isFunction(listener.listener) ? listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' + 'leak detected. %d listeners added. ' + 'Use emitter.setMaxListeners() to increase limit.', this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function (type, listener) {\n  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function (type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type]) return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener || isFunction(list.listener) && list.listener === listener) {\n    delete this._events[type];\n    if (this._events.removeListener) this.emit('removeListener', type, listener);\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener || list[i].listener && list[i].listener === listener) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener) this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function (type) {\n  var key, listeners;\n\n  if (!this._events) return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0) this._events = {};else if (this._events[type]) delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length) {\n      this.removeListener(type, listeners[listeners.length - 1]);\n    }\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function (type) {\n  var ret;\n  if (!this._events || !this._events[type]) ret = [];else if (isFunction(this._events[type])) ret = [this._events[type]];else ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function (type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener)) return 1;else if (evlistener) return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return (typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\n/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar _require = __webpack_require__(7),\n    sgf = _require.sgf;\n\nvar _shapes = null;\nvar equals = function equals(v) {\n    return function (w) {\n        return w[0] === v[0] && w[1] === v[1];\n    };\n};\n\nexports.getSymmetries = function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        x = _ref2[0],\n        y = _ref2[1];\n\n    var f = function f(_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            x = _ref4[0],\n            y = _ref4[1];\n\n        return [[x, y], [-x, y], [x, -y], [-x, -y]];\n    };\n    return [].concat(_toConsumableArray(f([x, y])), _toConsumableArray(f([y, x])));\n};\n\nexports.getBoardSymmetries = function (board, vertex) {\n    var mx = board.width - 1,\n        my = board.height - 1;\n\n    var mod = function mod(x, m) {\n        return (x % m + m) % m;\n    };\n\n    return exports.getSymmetries(vertex).map(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n            x = _ref6[0],\n            y = _ref6[1];\n\n        return [mod(x, mx), mod(y, my)];\n    });\n};\n\nexports.readShapes = function (content) {\n    var tree = sgf.parse(content, function () {}, true)[0];\n    var result = [];\n\n    var _loop = function _loop(i) {\n        var node = tree.subtrees[i].nodes[0];\n        var anchors = node.MA.map(function (x) {\n            return [].concat(_toConsumableArray(sgf.point2vertex(x)), [node.AB.includes(x) ? 1 : -1]);\n        });\n        var vertices = ['AW', 'CR', 'AB'].map(function (x, i) {\n            return (node[x] || []).map(function (y) {\n                return [].concat(_toConsumableArray(sgf.point2vertex(y)), [i - 1]);\n            });\n        }).reduce(function (acc, x) {\n            return [].concat(_toConsumableArray(acc), _toConsumableArray(x));\n        }, []);\n\n        var data = {};\n\n        if ('C' in node) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = node.C[0].trim().split(', ').map(function (x) {\n                    return x.split(': ');\n                })[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var _ref7 = _step.value;\n\n                    var _ref8 = _slicedToArray(_ref7, 2);\n\n                    var key = _ref8[0];\n                    var value = _ref8[1];\n\n                    data[key] = value;\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n        }\n\n        result.push(Object.assign({\n            name: node.N[0],\n            anchors: anchors,\n            vertices: vertices\n        }, data));\n    };\n\n    for (var i = 0; i < tree.subtrees.length; i++) {\n        _loop(i);\n    }\n\n    return result;\n};\n\nexports.cornerMatch = function (vertices, board) {\n    var hypotheses = Array(8).fill(true);\n    var hypothesesInvert = Array(8).fill(true);\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n        for (var _iterator2 = vertices[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var _ref9 = _step2.value;\n\n            var _ref10 = _slicedToArray(_ref9, 3);\n\n            var x = _ref10[0];\n            var y = _ref10[1];\n            var sign = _ref10[2];\n\n            var representatives = exports.getBoardSymmetries(board, [x, y]);\n\n            for (var _i = 0; _i < hypotheses.length; _i++) {\n                if (hypotheses[_i] && board.get(representatives[_i]) !== sign) hypotheses[_i] = false;\n                if (hypothesesInvert[_i] && board.get(representatives[_i]) !== -sign) hypothesesInvert[_i] = false;\n            }\n\n            if (!hypotheses.includes(true) && !hypothesesInvert.includes(true)) return null;\n        }\n    } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n            }\n        } finally {\n            if (_didIteratorError2) {\n                throw _iteratorError2;\n            }\n        }\n    }\n\n    var i = [].concat(_toConsumableArray(hypotheses), _toConsumableArray(hypothesesInvert)).indexOf(true);\n    return i < 8 ? [i, false] : [i - 8, true];\n};\n\nexports.shapeMatch = function (shape, board, vertex) {\n    if (!board.hasVertex(vertex)) return null;\n\n    var sign = board.get(vertex);\n    if (sign === 0) return null;\n    var equalsVertex = equals(vertex);\n\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n        for (var _iterator3 = shape.anchors[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var anchor = _step3.value;\n\n            var hypotheses = Array(8).fill(true);\n            var i = 0;\n\n            if (shape.size != null && (board.width !== board.height || board.width !== +shape.size)) continue;\n\n            if (shape.type === 'corner' && !exports.getBoardSymmetries(board, anchor.slice(0, 2)).some(equalsVertex)) continue;\n\n            // Hypothesize vertex === anchor\n\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n                for (var _iterator4 = shape.vertices[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                    var _ref11 = _step4.value;\n\n                    var _ref12 = _slicedToArray(_ref11, 3);\n\n                    var x = _ref12[0];\n                    var y = _ref12[1];\n                    var s = _ref12[2];\n\n                    var diff = [x - anchor[0], y - anchor[1]];\n                    var symm = exports.getSymmetries(diff);\n\n                    for (var k = 0; k < symm.length; k++) {\n                        if (!hypotheses[k]) continue;\n                        var w = [vertex[0] + symm[k][0], vertex[1] + symm[k][1]];\n\n                        if (!board.hasVertex(w) || board.get(w) !== s * sign * anchor[2]) hypotheses[k] = false;\n                    }\n\n                    i = hypotheses.indexOf(true);\n                    if (i < 0) break;\n                }\n            } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                        _iterator4.return();\n                    }\n                } finally {\n                    if (_didIteratorError4) {\n                        throw _iteratorError4;\n                    }\n                }\n            }\n\n            if (i >= 0) return [i, sign !== anchor[2]];\n        }\n    } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                _iterator3.return();\n            }\n        } finally {\n            if (_didIteratorError3) {\n                throw _iteratorError3;\n            }\n        }\n    }\n\n    return null;\n};\n\nexports.getMoveInterpretation = function (board, vertex) {\n    var _ref13 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        _ref13$shapes = _ref13.shapes,\n        shapes = _ref13$shapes === undefined ? null : _ref13$shapes;\n\n    if (!board.hasVertex(vertex)) return 'Pass';\n\n    var sign = board.get(vertex);\n    var neighbors = board.getNeighbors(vertex);\n\n    // Check atari\n\n    if (neighbors.some(function (v) {\n        return board.get(v) === -sign && board.getLiberties(v).length === 1;\n    })) return 'Atari';\n\n    // Check connection\n\n    var friendly = neighbors.filter(function (v) {\n        return board.get(v) === sign;\n    });\n    if (friendly.length === neighbors.length) return 'Fill';\n    if (friendly.length >= 2) return 'Connect';\n\n    // Load shape library if needed\n\n    if (shapes == null) {\n        if (_shapes == null) {\n            _shapes = exports.readShapes(__webpack_require__(42));\n        }\n\n        shapes = _shapes;\n    }\n\n    // Match shape\n\n    var _iteratorNormalCompletion5 = true;\n    var _didIteratorError5 = false;\n    var _iteratorError5 = undefined;\n\n    try {\n        for (var _iterator5 = shapes[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n            var shape = _step5.value;\n\n            if (exports.shapeMatch(shape, board, vertex)) return shape.name;\n        }\n\n        // Determine position to edges\n    } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                _iterator5.return();\n            }\n        } finally {\n            if (_didIteratorError5) {\n                throw _iteratorError5;\n            }\n        }\n    }\n\n    var equalsVertex = equals(vertex);\n\n    if (equalsVertex([(board.width - 1) / 2, (board.height - 1) / 2])) return 'Tengen';\n\n    var diff = board.getCanonicalVertex(vertex).map(function (x) {\n        return x + 1;\n    });\n\n    if (!equals(diff)([4, 4]) && board.getHandicapPlacement(9).some(equalsVertex)) return 'Hoshi';\n\n    if (diff[1] <= 6) return diff.join('-') + ' point';\n\n    return null;\n};\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    render = _require.render;\n\nvar helper = __webpack_require__(1);\n\nvar hiddenStyle = {\n    opacity: 0,\n    pointerEvents: 'none'\n};\n\nvar fileInput = render(h('input', {\n    type: 'file',\n    style: hiddenStyle\n}), document.body);\n\nexports.showMessageBox = function (message) {\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'info';\n    var buttons = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ['OK'];\n    var cancelId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n    if (buttons.length <= 1) {\n        alert(message);\n        return 0;\n    } else {\n        return confirm(message) ? 0 : cancelId;\n    }\n};\n\nexports.showOpenDialog = function (options, callback) {\n    var clone = fileInput.cloneNode();\n    fileInput.parentNode.replaceChild(clone, fileInput);\n    fileInput = clone;\n\n    fileInput.multiple = options.properties.includes('multiSelections');\n    fileInput.value = '';\n\n    fileInput.addEventListener('change', function (evt) {\n        callback({ result: evt.currentTarget.files });\n    });\n\n    fileInput.click();\n};\n\nexports.showSaveDialog = function (options, callback) {\n    var type = options.type,\n        name = options.name,\n        content = options.content;\n\n    var href = 'data:' + type + ';charset=utf-8,' + encodeURIComponent(content);\n\n    var element = render(h('a', {\n        href: href,\n        style: hiddenStyle,\n        download: name\n    }), document.body);\n\n    element.click();\n    element.remove();\n};\n\nexports.showInputBox = function (message) {\n    var onSubmit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : helper.noop;\n    var onCancel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : helper.noop;\n\n    sabaki.setState({\n        inputBoxText: message,\n        showInputBox: true,\n        onInputBoxSubmit: onSubmit,\n        onInputBoxCancel: onCancel\n    });\n};\n\nexports.closeInputBox = function () {\n    var _sabaki$state$onInput = sabaki.state.onInputBoxCancel,\n        onInputBoxCancel = _sabaki$state$onInput === undefined ? helper.noop : _sabaki$state$onInput;\n\n    sabaki.setState({ showInputBox: false });\n    onInputBoxCancel();\n};\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar equals = function equals(v) {\n    return function (w) {\n        return w[0] === v[0] && w[1] === v[1];\n    };\n};\nvar equalsSign = function equalsSign(board) {\n    for (var _len = arguments.length, s = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        s[_key - 1] = arguments[_key];\n    }\n\n    return function (v) {\n        return s.includes(board.get(v));\n    };\n};\n\nfunction getNeighbors(_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        x = _ref2[0],\n        y = _ref2[1];\n\n    return [[x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]];\n}\n\nfunction getChain(board, vertex) {\n    var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var sign = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    if (result == null) result = [vertex];\n    if (sign == null) sign = board.get(vertex);\n\n    var neighbors = getNeighbors(vertex);\n\n    for (var i = 0; i < neighbors.length; i++) {\n        var v = neighbors[i];\n        if (board.get(v) !== sign || result.some(equals(v))) continue;\n\n        result.push(v);\n        getChain(board, v, result, sign);\n    }\n\n    return result;\n}\n\nfunction isPointChain(board, vertex) {\n    return !getNeighbors(vertex).some(equalsSign(board, board.get(vertex)));\n}\n\nfunction hasLiberties(board, vertex) {\n    var visited = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var sign = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    if (sign == null) sign = board.get(vertex);\n\n    var neighbors = getNeighbors(vertex);\n    var friendlyNeighbors = [];\n\n    for (var i = 0; i < neighbors.length; i++) {\n        var n = neighbors[i];\n        var s = board.get(n);\n\n        if (s === 0) {\n            return true;\n        } else if (s === sign) {\n            friendlyNeighbors.push(n);\n        }\n    }\n\n    visited.push(vertex);\n\n    for (var _i = 0; _i < friendlyNeighbors.length; _i++) {\n        var _n = friendlyNeighbors[_i];\n        if (visited.some(equals(_n))) continue;\n\n        if (hasLiberties(board, _n, visited, sign)) return true;\n    }\n\n    return false;\n}\n\nfunction makePseudoMove(board, sign, vertex) {\n    var neighbors = getNeighbors(vertex);\n    var checkCapture = false;\n    var checkMultipleDeadChains = false;\n\n    if (neighbors.every(equalsSign(board, sign, undefined))) return null;\n\n    board.set(vertex, sign);\n\n    if (!hasLiberties(board, vertex)) {\n        if (!neighbors.some(equalsSign(board, -sign))) {\n            board.set(vertex, 0);\n            return null;\n        } else if (isPointChain(board, vertex)) {\n            checkMultipleDeadChains = true;\n        } else {\n            checkCapture = true;\n        }\n    }\n\n    var dead = [];\n    var deadChains = 0;\n\n    for (var i = 0; i < neighbors.length; i++) {\n        var n = neighbors[i];\n        if (board.get(n) !== -sign || hasLiberties(board, n)) continue;\n\n        var chain = getChain(board, n);\n        dead.push.apply(dead, _toConsumableArray(chain));\n        deadChains++;\n\n        for (var j = 0; j < chain.length; j++) {\n            board.set(chain[j], 0);\n        }\n    }\n\n    if (checkMultipleDeadChains && deadChains <= 1) {\n        for (var _j = 0; _j < dead.length; _j++) {\n            board.set(dead[_j], -sign);\n        }\n\n        board.set(vertex, 0);\n        return null;\n    }\n\n    if (checkCapture && dead.length === 0) {\n        board.set(vertex, 0);\n        return null;\n    }\n\n    return dead;\n}\n\nfunction fixHoles(board) {\n    for (var x = 0; x < board.width; x++) {\n        for (var y = 0; y < board.height; y++) {\n            var vertex = [x, y];\n            if (board.get(vertex) !== 0) continue;\n\n            var neighbors = getNeighbors(vertex);\n            var sign = 0;\n            var fix = true;\n\n            for (var i = 1; i < neighbors.length; i++) {\n                var n = neighbors[i];\n                var s = board.get(n);\n\n                if (s != null && s !== sign) {\n                    if (sign === 0) {\n                        sign = s;\n                    } else {\n                        fix = false;\n                        break;\n                    }\n                }\n            }\n\n            if (fix) board.set(vertex, sign);\n        }\n    }\n\n    return board;\n}\n\nexports.guess = function (board) {\n    var scoring = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var iterations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 50;\n\n    var boardClone = board.clone();\n\n    if (scoring) {\n        var floating = exports.getFloatingStones(boardClone);\n        floating.forEach(function (v) {\n            return boardClone.set(v, 0);\n        });\n    }\n\n    var map = exports.getProbabilityMap(boardClone, iterations);\n    var done = [];\n    var result = [];\n\n    for (var x = 0; x < board.width; x++) {\n        for (var y = 0; y < board.height; y++) {\n            var vertex = [x, y];\n            var sign = board.get(vertex);\n\n            if (sign === 0 || done.some(equals(vertex))) continue;\n\n            var chain = getChain(board, vertex);\n            var probability = chain.map(function (_ref3) {\n                var _ref4 = _slicedToArray(_ref3, 2),\n                    i = _ref4[0],\n                    j = _ref4[1];\n\n                return map[j][i];\n            }).reduce(function (sum, x) {\n                return sum + x;\n            }) / chain.length;\n            var newSign = probability < 0.5 ? -1 : probability > 0.5 ? 1 : 0;\n\n            if (newSign === -sign) result.push.apply(result, _toConsumableArray(chain));\n\n            done.push(vertex);\n        }\n    }\n\n    if (!scoring) return result;\n\n    // Preserve life & death status of related chains\n\n    done.length = 0;\n    var updatedResult = [];\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = result[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _vertex = _step.value;\n\n            if (done.some(equals(_vertex))) continue;\n\n            var related = board.getRelatedChains(_vertex);\n            var deadProbability = related.filter(function (v) {\n                return result.some(equals(v));\n            }).length / related.length;\n\n            if (deadProbability > 0.5) {\n                updatedResult.push.apply(updatedResult, _toConsumableArray(related));\n            }\n\n            done.push.apply(done, _toConsumableArray(related));\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    return updatedResult;\n};\n\nexports.getFloatingStones = function (board) {\n    var map = board.getAreaMap();\n    var done = [];\n    var result = [];\n    var isNegative = function isNegative(v) {\n        return board.get(v) === -1;\n    };\n    var isPositive = function isPositive(v) {\n        return board.get(v) === 1;\n    };\n    var markAsDone = function markAsDone(v) {\n        return done.push(v);\n    };\n\n    for (var i = 0; i < board.width; i++) {\n        var _loop = function _loop(j) {\n            var vertex = [i, j];\n            if (map[j][i] !== 0 || done.some(equals(vertex))) return \"continue\";\n\n            var posArea = board.getConnectedComponent(vertex, [0, -1]);\n            var negArea = board.getConnectedComponent(vertex, [0, 1]);\n            var posDead = posArea.filter(isNegative);\n            var negDead = negArea.filter(isPositive);\n            var posDiff = posArea.filter(function (v) {\n                return !posDead.some(equals(v)) && !negArea.some(equals(v));\n            });\n            var negDiff = negArea.filter(function (v) {\n                return !negDead.some(equals(v)) && !posArea.some(equals(v));\n            });\n\n            var sign = 0;\n            var actualArea = void 0,\n                actualDead = void 0;\n\n            if (negDiff.length <= 1 && negDead.length <= posDead.length) {\n                sign--;\n                actualArea = negArea;\n                actualDead = negDead;\n            }\n\n            if (posDiff.length <= 1 && posDead.length <= negDead.length) {\n                sign++;\n                actualArea = posArea;\n                actualDead = posDead;\n            }\n\n            if (sign === 0) {\n                actualArea = getChain(board, vertex);\n                actualDead = [];\n            }\n\n            actualArea.forEach(markAsDone);\n            result.push.apply(result, _toConsumableArray(actualDead));\n        };\n\n        for (var j = 0; j < board.height; j++) {\n            var _ret = _loop(j);\n\n            if (_ret === \"continue\") continue;\n        }\n    }\n\n    return result;\n};\n\nexports.playTillEnd = function (board, sign) {\n    var iterations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Infinity;\n\n    board = board.clone();\n\n    var freeVertices = [];\n    var illegalVertices = [];\n\n    for (var x = 0; x < board.width; x++) {\n        for (var y = 0; y < board.height; y++) {\n            if (board.get([x, y]) !== 0) continue;\n            freeVertices.push([x, y]);\n        }\n    }\n\n    var finished = [false, false];\n\n    while (iterations > 0 && freeVertices.length > 0 && finished.includes(false)) {\n        var madeMove = false;\n\n        while (freeVertices.length > 0) {\n            var randomIndex = Math.floor(Math.random() * freeVertices.length);\n            var _vertex2 = freeVertices[randomIndex];\n            var freedVertices = makePseudoMove(board, sign, _vertex2, false);\n\n            freeVertices.splice(randomIndex, 1);\n\n            if (freedVertices != null) {\n                freeVertices.push.apply(freeVertices, _toConsumableArray(freedVertices));\n\n                finished[-sign > 0 ? 0 : 1] = false;\n                madeMove = true;\n\n                break;\n            } else {\n                illegalVertices.push(_vertex2);\n            }\n        }\n\n        finished[sign > 0 ? 0 : 1] = !madeMove;\n\n        freeVertices.push.apply(freeVertices, illegalVertices);\n        illegalVertices.length = 0;\n\n        sign = -sign;\n        iterations--;\n    }\n\n    return board;\n};\n\nexports.getProbabilityMap = function (board, iterations) {\n    var pmap = [].concat(_toConsumableArray(Array(board.height))).map(function (_) {\n        return Array(board.width).fill(0);\n    });\n    var nmap = [].concat(_toConsumableArray(Array(board.height))).map(function (_) {\n        return Array(board.width).fill(0);\n    });\n    var result = [].concat(_toConsumableArray(Array(board.height))).map(function (_) {\n        return Array(board.width).fill(0.5);\n    });\n\n    for (var i = 0; i < iterations; i++) {\n        var _sign = Math.sign(Math.random() - 0.5);\n        var areaMap = fixHoles(exports.playTillEnd(board, _sign));\n\n        for (var x = 0; x < areaMap.width; x++) {\n            for (var y = 0; y < areaMap.height; y++) {\n                var s = areaMap.get([x, y]);\n                if (s < 0) nmap[y][x]++;else if (s > 0) pmap[y][x]++;\n            }\n        }\n    }\n\n    for (var _x8 = 0; _x8 < board.width; _x8++) {\n        for (var _y = 0; _y < board.height; _y++) {\n            if (pmap[_y][_x8] + nmap[_y][_x8] === 0) continue;\n            result[_y][_x8] = pmap[_y][_x8] / (pmap[_y][_x8] + nmap[_y][_x8]);\n        }\n    }\n\n    return result;\n};\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process) {var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar fs = __webpack_require__(5);\nvar EventEmitter = __webpack_require__(18);\n\nvar _require = __webpack_require__(2),\n    ipcRenderer = _require.ipcRenderer,\n    remote = _require.remote;\n\nvar app = remote.app,\n    Menu = remote.Menu;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    render = _require2.render,\n    Component = _require2.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar ThemeManager = __webpack_require__(6);\nvar MainView = __webpack_require__(29);\nvar LeftSidebar = __webpack_require__(6);\nvar Sidebar = __webpack_require__(37);\nvar DrawerManager = __webpack_require__(43);\nvar InputBox = __webpack_require__(52);\nvar BusyScreen = __webpack_require__(53);\nvar InfoOverlay = __webpack_require__(54);\n\nvar Board = __webpack_require__(8);\nvar boardmatcher = __webpack_require__(20);\nvar deadstones = __webpack_require__(22);\nvar dialog = __webpack_require__(21);\nvar fileformats = __webpack_require__(7);\nvar gametree = __webpack_require__(4);\nvar gtp = __webpack_require__(16);\nvar helper = __webpack_require__(1);\nvar setting = remote.require('./setting');\nvar sgf = fileformats.sgf;\n\nvar sound = __webpack_require__(55);\n\nvar App = function (_Component) {\n    _inherits(App, _Component);\n\n    function App() {\n        _classCallCheck(this, App);\n\n        var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this));\n\n        window.sabaki = _this;\n\n        var emptyTree = gametree.new();\n        emptyTree.nodes.push({});\n\n        _this.state = {\n            mode: 'play',\n            openDrawer: null,\n            busy: false,\n            fullScreen: false,\n            showMenuBar: null,\n            zoomFactor: null,\n\n            representedFilename: null,\n            gameTrees: [emptyTree],\n            treePosition: [emptyTree, 0],\n\n            // Bars\n\n            undoable: false,\n            undoText: 'Undo',\n            selectedTool: 'stone_1',\n            scoringMethod: null,\n            findText: '',\n            findVertex: null,\n            deadStones: [],\n            blockedGuesses: [],\n\n            // Goban\n\n            highlightVertices: [],\n            showCoordinates: null,\n            showMoveColorization: null,\n            showNextMoves: null,\n            showSiblings: null,\n            fuzzyStonePlacement: null,\n            animatedStonePlacement: null,\n            animatedVertex: null,\n\n            // Sidebar\n\n            consoleLog: [],\n            showConsole: setting.get('view.show_leftsidebar'),\n            leftSidebarWidth: setting.get('view.leftsidebar_width'),\n            showGameGraph: setting.get('view.show_graph'),\n            showCommentBox: setting.get('view.show_comments'),\n            sidebarWidth: setting.get('view.sidebar_width'),\n            graphGridSize: null,\n            graphNodeSize: null,\n\n            // Engines\n\n            engines: null,\n            attachedEngines: [null, null],\n            engineCommands: [[], []],\n            generatingMoves: false,\n\n            // Drawers\n\n            preferencesTab: 'general',\n\n            // Input Box\n\n            showInputBox: false,\n            inputBoxText: '',\n            onInputBoxSubmit: helper.noop,\n            onInputBoxCancel: helper.noop,\n\n            // Info Overlay\n\n            infoOverlayText: '',\n            showInfoOverlay: false\n        };\n\n        _this.events = new EventEmitter();\n        _this.appName = app.getName();\n        _this.version = app.getVersion();\n        _this.window = remote.getCurrentWindow();\n\n        _this.treeHash = _this.generateTreeHash();\n        _this.attachedEngineControllers = [null, null];\n        _this.engineBoards = [null, null];\n\n        // Expose submodules\n\n        _this.modules = { Board: Board, boardmatcher: boardmatcher, deadstones: deadstones, dialog: dialog,\n            fileformats: fileformats, gametree: gametree, gtp: gtp, helper: helper, setting: setting, sound: sound\n\n            // Bind state to settings\n\n        };setting.events.on('change', function (_ref) {\n            var key = _ref.key;\n            return _this.updateSettingState(key);\n        });\n        _this.updateSettingState();\n        return _this;\n    }\n\n    _createClass(App, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            window.addEventListener('contextmenu', function (evt) {\n                evt.preventDefault();\n            });\n\n            window.addEventListener('load', function () {\n                _this2.events.emit('ready');\n                _this2.window.show();\n            });\n\n            ipcRenderer.on('load-file', function (evt) {\n                for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                    args[_key - 1] = arguments[_key];\n                }\n\n                setTimeout(function () {\n                    return _this2.loadFile.apply(_this2, args);\n                }, setting.get('app.loadgame_delay'));\n            });\n\n            this.window.on('focus', function () {\n                if (setting.get('file.show_reload_warning')) {\n                    _this2.askForReload();\n                }\n\n                ipcRenderer.send('build-menu', _this2.state.busy);\n            });\n\n            this.window.on('resize', function () {\n                clearTimeout(_this2.resizeId);\n\n                _this2.resizeId = setTimeout(function () {\n                    if (!_this2.window.isMaximized() && !_this2.window.isMinimized() && !_this2.window.isFullScreen()) {\n                        var _window$getContentSiz = _this2.window.getContentSize(),\n                            _window$getContentSiz2 = _slicedToArray(_window$getContentSiz, 2),\n                            width = _window$getContentSiz2[0],\n                            height = _window$getContentSiz2[1];\n\n                        setting.set('window.width', width).set('window.height', height);\n                    }\n                }, 1000);\n            });\n\n            // Handle main menu items\n\n            var menuData = __webpack_require__(16);\n\n            var handleMenuClicks = function handleMenuClicks(menu) {\n                var _loop = function _loop(item) {\n                    if ('click' in item) {\n                        ipcRenderer.on('menu-click-' + item.id, function () {\n                            if (!_this2.state.showMenuBar) _this2.window.setMenuBarVisibility(false);\n                            dialog.closeInputBox();\n                            item.click();\n                        });\n                    }\n\n                    if ('submenu' in item) {\n                        handleMenuClicks(item.submenu);\n                    }\n                };\n\n                var _iteratorNormalCompletion = true;\n                var _didIteratorError = false;\n                var _iteratorError = undefined;\n\n                try {\n                    for (var _iterator = menu[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var item = _step.value;\n\n                        _loop(item);\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator.return) {\n                            _iterator.return();\n                        }\n                    } finally {\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n            };\n\n            handleMenuClicks(menuData);\n\n            // Handle mouse wheel\n\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n                for (var _iterator2 = document.querySelectorAll('#main main, #graph')[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                    var el = _step2.value;\n\n                    el.addEventListener('wheel', function (evt) {\n                        evt.preventDefault();\n\n                        if (_this2.residueDeltaY == null) _this2.residueDeltaY = 0;\n                        _this2.residueDeltaY += evt.deltaY;\n\n                        if (Math.abs(_this2.residueDeltaY) >= setting.get('game.navigation_sensitivity')) {\n                            _this2.goStep(Math.sign(_this2.residueDeltaY));\n                            _this2.residueDeltaY = 0;\n                        }\n                    });\n                }\n\n                // Handle file drag & drop\n            } catch (err) {\n                _didIteratorError2 = true;\n                _iteratorError2 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                        _iterator2.return();\n                    }\n                } finally {\n                    if (_didIteratorError2) {\n                        throw _iteratorError2;\n                    }\n                }\n            }\n\n            document.body.addEventListener('dragover', function (evt) {\n                return evt.preventDefault();\n            });\n            document.body.addEventListener('drop', function (evt) {\n                evt.preventDefault();\n\n                if (evt.dataTransfer.files.length === 0) return;\n                _this2.loadFile(evt.dataTransfer.files[0]);\n            });\n\n            // Handle escape key\n\n            document.addEventListener('keyup', function (evt) {\n                if (evt.keyCode === 27) {\n                    // Escape\n\n                    if (_this2.state.generatingMoves) {\n                        _this2.stopGeneratingMoves();\n                    } else if (_this2.state.openDrawer != null) {\n                        _this2.closeDrawer();\n                    } else if (_this2.state.mode !== 'play') {\n                        _this2.setMode('play');\n                    } else if (_this2.state.fullScreen) {\n                        _this2.setState({ fullScreen: false });\n                    }\n                }\n            });\n\n            // Handle other keyboard shortcuts\n\n            document.addEventListener('keydown', function (evt) {\n                if (['input', 'textarea'].indexOf(document.activeElement.tagName.toLowerCase()) >= 0) {\n                    return;\n                }\n\n                if (evt.keyCode == 36) {\n                    // Home\n                    _this2.goToBeginning();\n                } else if (evt.keyCode == 35) {\n                    // End\n                    _this2.goToEnd();\n                } else if (evt.keyCode == 38) {\n                    // Up\n                    _this2.goStep(-1);\n                } else if (evt.keyCode == 40) {\n                    // Down\n                    _this2.goStep(1);\n                } else if (evt.keyCode == 37) {\n                    // Left\n                    _this2.goToSiblingVariation(-1);\n                } else if (evt.keyCode == 39) {\n                    // Right\n                    _this2.goToSiblingVariation(1);\n                }\n            });\n\n            // Handle window closing\n\n            window.addEventListener('beforeunload', function (evt) {\n                evt.returnValue = ' ';\n            });\n\n            this.newFile();\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(_) {\n            var prevState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n            // Update title\n\n            var _require3 = __webpack_require__(9),\n                basename = _require3.basename;\n\n            var title = this.appName;\n\n            var _state = this.state,\n                representedFilename = _state.representedFilename,\n                gameTrees = _state.gameTrees,\n                _state$treePosition = _slicedToArray(_state.treePosition, 1),\n                tree = _state$treePosition[0];\n\n            if (representedFilename) title = basename(representedFilename);\n            if (gameTrees.length > 1) title += ' — Game ' + (this.inferredState.gameIndex + 1);\n            if (representedFilename && process.platform != 'darwin') title += ' — ' + this.appName;\n\n            if (document.title !== title) document.title = title;\n\n            // Handle full screen & menu bar\n\n            if (prevState.fullScreen !== this.state.fullScreen) {\n                if (this.state.fullScreen) this.flashInfoOverlay('Press Esc to exit full screen mode');\n                this.window.setFullScreen(this.state.fullScreen);\n            }\n\n            if (prevState.showMenuBar !== this.state.showMenuBar) {\n                if (!this.state.showMenuBar) this.flashInfoOverlay('Press Alt to show menu bar');\n                this.window.setMenuBarVisibility(this.state.showMenuBar);\n                this.window.setAutoHideMenuBar(!this.state.showMenuBar);\n            }\n\n            // Handle sidebar showing/hiding\n\n            if (prevState.showLeftSidebar !== this.state.showLeftSidebar || prevState.showSidebar !== this.state.showSidebar) {\n                var _window$getContentSiz3 = this.window.getContentSize(),\n                    _window$getContentSiz4 = _slicedToArray(_window$getContentSiz3, 2),\n                    width = _window$getContentSiz4[0],\n                    height = _window$getContentSiz4[1];\n\n                var widthDiff = 0;\n\n                if (prevState.showSidebar !== this.state.showSidebar) {\n                    widthDiff += this.state.sidebarWidth * (this.state.showSidebar ? 1 : -1);\n                }\n\n                if (prevState.showLeftSidebar !== this.state.showLeftSidebar) {\n                    widthDiff += this.state.leftSidebarWidth * (this.state.showLeftSidebar ? 1 : -1);\n                }\n\n                if (!this.window.isMaximized() && !this.window.isMinimized() && !this.window.isFullScreen()) {\n                    this.window.setContentSize(width + widthDiff, height);\n                }\n            }\n\n            // Handle zoom factor\n\n            if (prevState.zoomFactor !== this.state.zoomFactor) {\n                this.window.webContents.setZoomFactor(this.state.zoomFactor);\n            }\n        }\n    }, {\n        key: 'updateSettingState',\n        value: function updateSettingState() {\n            var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n            var data = {\n                'app.zoom_factor': 'zoomFactor',\n                'view.show_menubar': 'showMenuBar',\n                'view.show_coordinates': 'showCoordinates',\n                'view.show_move_colorization': 'showMoveColorization',\n                'view.show_next_moves': 'showNextMoves',\n                'view.show_siblings': 'showSiblings',\n                'view.fuzzy_stone_placement': 'fuzzyStonePlacement',\n                'view.animated_stone_placement': 'animatedStonePlacement',\n                'graph.grid_size': 'graphGridSize',\n                'graph.node_size': 'graphNodeSize',\n                'engines.list': 'engines',\n                'scoring.method': 'scoringMethod'\n            };\n\n            if (key == null) {\n                for (var k in data) {\n                    this.updateSettingState(k);\n                }return;\n            }\n\n            if (key in data) {\n                ipcRenderer.send('build-menu', this.state.busy);\n                this.setState(_defineProperty({}, data[key], setting.get(key)));\n            }\n        }\n\n        // User Interface\n\n    }, {\n        key: 'setSidebarWidth',\n        value: function setSidebarWidth(sidebarWidth) {\n            this.setState({ sidebarWidth: sidebarWidth }, function () {\n                return window.dispatchEvent(new Event('resize'));\n            });\n        }\n    }, {\n        key: 'setLeftSidebarWidth',\n        value: function setLeftSidebarWidth(leftSidebarWidth) {\n            this.setState({ leftSidebarWidth: leftSidebarWidth }, function () {\n                return window.dispatchEvent(new Event('resize'));\n            });\n        }\n    }, {\n        key: 'setMode',\n        value: function setMode(mode) {\n            var stateChange = { mode: mode };\n\n            if (['scoring', 'estimator'].includes(mode)) {\n                // Guess dead stones\n\n                var _require4 = __webpack_require__(22),\n                    guess = _require4.guess;\n\n                var treePosition = this.state.treePosition;\n\n                var iterations = setting.get('score.estimator_iterations');\n                var deadStones = guess(gametree.getBoard.apply(gametree, _toConsumableArray(treePosition)), mode === 'scoring', iterations);\n\n                Object.assign(stateChange, { deadStones: deadStones });\n            }\n\n            this.setState(stateChange);\n            this.events.emit('modeChange');\n        }\n    }, {\n        key: 'openDrawer',\n        value: function openDrawer(drawer) {\n            this.setState({ openDrawer: drawer });\n        }\n    }, {\n        key: 'closeDrawer',\n        value: function closeDrawer() {\n            document.activeElement.blur();\n            this.openDrawer(null);\n        }\n    }, {\n        key: 'setBusy',\n        value: function setBusy(busy) {\n            this.setState({ busy: busy });\n        }\n    }, {\n        key: 'showInfoOverlay',\n        value: function showInfoOverlay(text) {\n            this.setState({\n                infoOverlayText: text,\n                showInfoOverlay: true\n            });\n        }\n    }, {\n        key: 'hideInfoOverlay',\n        value: function hideInfoOverlay() {\n            this.setState({ showInfoOverlay: false });\n        }\n    }, {\n        key: 'flashInfoOverlay',\n        value: function flashInfoOverlay(text) {\n            var _this3 = this;\n\n            this.showInfoOverlay(text);\n            setTimeout(function () {\n                return _this3.hideInfoOverlay();\n            }, setting.get('infooverlay.duration'));\n        }\n\n        // File Management\n\n    }, {\n        key: 'getEmptyGameTree',\n        value: function getEmptyGameTree() {\n            var handicap = setting.get('game.default_handicap');\n            var size = setting.get('game.default_board_size').toString().split(':').map(function (x) {\n                return +x;\n            });\n            var _ref2 = [size[0], size.slice(-1)[0]],\n                width = _ref2[0],\n                height = _ref2[1];\n\n            var handicapStones = new Board(width, height).getHandicapPlacement(handicap).map(sgf.vertex2point);\n\n            var sizeInfo = width === height ? width.toString() : width + ':' + height;\n            var handicapInfo = handicapStones.length > 0 ? 'HA[' + handicap + ']AB[' + handicapStones.join('][') + ']' : '';\n            var date = new Date();\n            var dateInfo = sgf.dates2string([[date.getFullYear(), date.getMonth() + 1, date.getDate()]]);\n\n            return sgf.parse('\\n            (;GM[1]FF[4]CA[UTF-8]AP[' + this.appName + ':' + this.version + ']\\n            KM[' + setting.get('game.default_komi') + ']\\n            SZ[' + sizeInfo + ']DT[' + dateInfo + ']\\n            ' + handicapInfo + ')\\n        ')[0];\n        }\n    }, {\n        key: 'newFile',\n        value: function newFile() {\n            var _this4 = this;\n\n            var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref3$playSound = _ref3.playSound,\n                playSound = _ref3$playSound === undefined ? false : _ref3$playSound,\n                _ref3$showInfo = _ref3.showInfo,\n                showInfo = _ref3$showInfo === undefined ? false : _ref3$showInfo,\n                _ref3$suppressAskForS = _ref3.suppressAskForSave,\n                suppressAskForSave = _ref3$suppressAskForS === undefined ? false : _ref3$suppressAskForS;\n\n            if (!suppressAskForSave && !this.askForSave()) return;\n\n            if (showInfo && this.state.openDrawer === 'info') this.closeDrawer();\n            this.setMode('play');\n\n            this.clearUndoPoint();\n            this.detachEngines();\n            this.setState(this.state, function () {\n                var emptyTree = _this4.getEmptyGameTree();\n\n                _this4.setState({\n                    openDrawer: showInfo ? 'info' : null,\n                    gameTrees: [emptyTree],\n                    treePosition: [emptyTree, 0],\n                    representedFilename: null\n                });\n\n                _this4.treeHash = _this4.generateTreeHash();\n                _this4.fileHash = _this4.generateFileHash();\n\n                if (playSound) sound.playNewGame();\n            });\n        }\n    }, {\n        key: 'loadFile',\n        value: function loadFile() {\n            var _this5 = this;\n\n            var file = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n            var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n                _ref4$suppressAskForS = _ref4.suppressAskForSave,\n                suppressAskForSave = _ref4$suppressAskForS === undefined ? false : _ref4$suppressAskForS;\n\n            if (!suppressAskForSave && !this.askForSave()) return;\n\n            if (!file) {\n                dialog.showOpenDialog({\n                    properties: ['openFile'],\n                    filters: [].concat(_toConsumableArray(fileformats.meta), [{ name: 'All Files', extensions: ['*'] }])\n                }, function (_ref5) {\n                    var result = _ref5.result;\n\n                    if (result) file = result[0];\n                    if (file) _this5.loadFile(file, { suppressAskForSave: true });\n                });\n\n                return;\n            }\n\n            var _require5 = __webpack_require__(9),\n                extname = _require5.extname;\n\n            var extension = extname(file.name).slice(1);\n\n            fs.readFile(file, function (err, content) {\n                _this5.loadContent(content, extension, {\n                    suppressAskForSave: true,\n                    callback: function callback(err) {\n                        if (err) return;\n\n                        _this5.setState({ representedFilename: file.name });\n                        _this5.fileHash = _this5.generateFileHash();\n\n                        if (setting.get('game.goto_end_after_loading')) {\n                            _this5.goToEnd();\n                        }\n                    }\n                });\n            });\n        }\n    }, {\n        key: 'loadContent',\n        value: function loadContent(content, extension) {\n            var _this6 = this;\n\n            var _ref6 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref6$suppressAskForS = _ref6.suppressAskForSave,\n                suppressAskForSave = _ref6$suppressAskForS === undefined ? false : _ref6$suppressAskForS,\n                _ref6$ignoreEncoding = _ref6.ignoreEncoding,\n                ignoreEncoding = _ref6$ignoreEncoding === undefined ? false : _ref6$ignoreEncoding,\n                _ref6$callback = _ref6.callback,\n                callback = _ref6$callback === undefined ? helper.noop : _ref6$callback;\n\n            if (!suppressAskForSave && !this.askForSave()) return;\n\n            this.setBusy(true);\n            if (this.state.openDrawer !== 'gamechooser') this.closeDrawer();\n            this.setMode('play');\n\n            setTimeout(function () {\n                var lastProgress = -1;\n                var error = false;\n                var gameTrees = [];\n\n                try {\n                    var fileFormatModule = fileformats.getModuleByExtension(extension);\n\n                    gameTrees = fileFormatModule.parse(content, function (evt) {\n                        if (evt.progress - lastProgress < 0.1) return;\n                        _this6.window.setProgressBar(evt.progress);\n                        lastProgress = evt.progress;\n                    }, ignoreEncoding);\n\n                    if (gameTrees.length == 0) throw true;\n                } catch (err) {\n                    dialog.showMessageBox('This file is unreadable.', 'warning');\n                    error = true;\n                }\n\n                if (gameTrees.length != 0) {\n                    _this6.clearUndoPoint();\n                    _this6.detachEngines();\n                    _this6.setState({\n                        representedFilename: null,\n                        gameTrees: gameTrees,\n                        treePosition: [gameTrees[0], 0]\n                    });\n\n                    _this6.treeHash = _this6.generateTreeHash();\n                    _this6.fileHash = _this6.generateFileHash();\n                }\n\n                _this6.setBusy(false);\n\n                if (gameTrees.length > 1) {\n                    setTimeout(function () {\n                        _this6.openDrawer('gamechooser');\n                    }, setting.get('gamechooser.show_delay'));\n                }\n\n                _this6.window.setProgressBar(-1);\n                callback(error);\n\n                if (!error) _this6.events.emit('fileLoad');\n            }, setting.get('app.loadgame_delay'));\n        }\n    }, {\n        key: 'saveFile',\n        value: function saveFile() {\n            var filename = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n            dialog.showSaveDialog({\n                type: 'application/x-go-sgf',\n                name: this.state.representedFilename || 'game.sgf',\n                content: this.getSGF()\n            });\n\n            this.treeHash = this.generateTreeHash();\n            this.fileHash = this.generateFileHash();\n\n            return true;\n        }\n    }, {\n        key: 'getSGF',\n        value: function getSGF() {\n            var gameTrees = this.state.gameTrees;\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n\n                for (var _iterator3 = gameTrees[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                    var tree = _step3.value;\n\n                    Object.assign(tree.nodes[0], {\n                        AP: [this.appName + ':' + this.version],\n                        CA: ['UTF-8']\n                    });\n                }\n            } catch (err) {\n                _didIteratorError3 = true;\n                _iteratorError3 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                        _iterator3.return();\n                    }\n                } finally {\n                    if (_didIteratorError3) {\n                        throw _iteratorError3;\n                    }\n                }\n            }\n\n            return sgf.stringify(gameTrees);\n        }\n    }, {\n        key: 'generateTreeHash',\n        value: function generateTreeHash() {\n            return this.state.gameTrees.map(function (tree) {\n                return gametree.getHash(tree);\n            }).join('');\n        }\n    }, {\n        key: 'generateFileHash',\n        value: function generateFileHash() {}\n    }, {\n        key: 'askForSave',\n        value: function askForSave() {\n            var hash = this.generateTreeHash();\n\n            if (hash !== this.treeHash) {\n                var answer = dialog.showMessageBox('Your changes will be lost if you close this file without saving. Do you want to continue?', 'warning', ['Save', 'Don’t Save', 'Cancel'], 2);\n\n                if (answer === 0) return true;else if (answer === 2) return false;\n            }\n\n            return true;\n        }\n    }, {\n        key: 'askForReload',\n        value: function askForReload() {}\n\n        // Playing\n\n    }, {\n        key: 'clickVertex',\n        value: function clickVertex(vertex) {\n            var _this7 = this;\n\n            var _ref7 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n                _ref7$button = _ref7.button,\n                button = _ref7$button === undefined ? 0 : _ref7$button,\n                _ref7$ctrlKey = _ref7.ctrlKey,\n                ctrlKey = _ref7$ctrlKey === undefined ? false : _ref7$ctrlKey,\n                _ref7$x = _ref7.x,\n                x = _ref7$x === undefined ? 0 : _ref7$x,\n                _ref7$y = _ref7.y,\n                y = _ref7$y === undefined ? 0 : _ref7$y;\n\n            this.closeDrawer();\n\n            var _state$treePosition2 = _slicedToArray(this.state.treePosition, 2),\n                tree = _state$treePosition2[0],\n                index = _state$treePosition2[1];\n\n            var board = gametree.getBoard(tree, index);\n            var node = tree.nodes[index];\n\n            if (typeof vertex == 'string') {\n                vertex = board.coord2vertex(vertex);\n            }\n\n            if (['play', 'autoplay'].includes(this.state.mode)) {\n                if (button === 0) {\n                    if (board.get(vertex) === 0) {\n                        this.makeMove(vertex, { sendToEngine: true });\n                    } else if (vertex in board.markups && board.markups[vertex][0] === 'point' && setting.get('edit.click_currentvertex_to_remove')) {\n                        this.removeNode(tree, index);\n                    }\n                } else if (button === 2) {\n                    if (vertex in board.markups && board.markups[vertex][0] === 'point') {\n                        this.openCommentMenu(tree, index, { x: x, y: y });\n                    }\n                }\n            } else if (this.state.mode === 'edit') {\n                if (ctrlKey) {\n                    // Add coordinates to comment\n\n                    var coord = board.vertex2coord(vertex);\n                    var commentText = node.C ? node.C[0] : '';\n\n                    node.C = commentText !== '' ? [commentText.trim() + ' ' + coord] : [coord];\n                    return;\n                }\n\n                var tool = this.state.selectedTool;\n\n                if (button === 2) {\n                    // Right mouse click\n\n                    if (['stone_1', 'stone_-1'].includes(tool)) {\n                        // Switch stone tool\n\n                        tool = tool === 'stone_1' ? 'stone_-1' : 'stone_1';\n                    } else if (['number', 'label'].includes(tool)) {\n                        // Show label editing context menu\n\n                        var click = function click() {\n                            return dialog.showInputBox('Enter label text', function (_ref8) {\n                                var value = _ref8.value;\n\n                                _this7.useTool('label', vertex, value);\n                            });\n                        };\n\n                        var template = [{ label: '&Edit Label', click: click }];\n                        helper.popupMenu(template, x, y);\n\n                        return;\n                    }\n                }\n\n                if (['line', 'arrow'].includes(tool)) {\n                    // Remember clicked vertex and pass as an argument the second time\n\n                    if (!this.editVertexData || this.editVertexData[0] !== tool) {\n                        this.useTool(tool, vertex);\n                        this.editVertexData = [tool, vertex];\n                    } else {\n                        this.useTool(tool, vertex, this.editVertexData[1]);\n                        this.editVertexData = null;\n                    }\n                } else {\n                    this.useTool(tool, vertex);\n                    this.editVertexData = null;\n                }\n            } else if (['scoring', 'estimator'].includes(this.state.mode)) {\n                if (button !== 0 || board.get(vertex) === 0) return;\n\n                var _state2 = this.state,\n                    mode = _state2.mode,\n                    deadStones = _state2.deadStones;\n\n                var dead = deadStones.some(function (v) {\n                    return helper.vertexEquals(v, vertex);\n                });\n                var stones = mode === 'estimator' ? board.getChain(vertex) : board.getRelatedChains(vertex);\n\n                if (!dead) {\n                    deadStones = [].concat(_toConsumableArray(deadStones), _toConsumableArray(stones));\n                } else {\n                    deadStones = deadStones.filter(function (v) {\n                        return !stones.some(function (w) {\n                            return helper.vertexEquals(v, w);\n                        });\n                    });\n                }\n\n                this.setState({ deadStones: deadStones });\n            } else if (this.state.mode === 'find') {\n                if (button !== 0) return;\n\n                if (helper.vertexEquals(this.state.findVertex || [-1, -1], vertex)) {\n                    this.setState({ findVertex: null });\n                } else {\n                    this.setState({ findVertex: vertex });\n                    this.findMove(1, { vertex: vertex, text: this.state.findText });\n                }\n            } else if (this.state.mode === 'guess') {\n                if (button !== 0) return;\n\n                var tp = gametree.navigate.apply(gametree, _toConsumableArray(this.state.treePosition).concat([1]));\n                if (!tp) return this.setMode('play');\n\n                var nextNode = tp[0].nodes[tp[1]];\n                if (!('B' in nextNode || 'W' in nextNode)) return this.setMode('play');\n\n                var nextVertex = sgf.point2vertex(nextNode['B' in nextNode ? 'B' : 'W'][0]);\n                var _board = gametree.getBoard.apply(gametree, _toConsumableArray(this.state.treePosition));\n                if (!_board.hasVertex(nextVertex)) return this.setMode('play');\n\n                if (helper.vertexEquals(vertex, nextVertex)) {\n                    this.makeMove(vertex, { player: 'B' in nextNode ? 1 : -1 });\n                } else {\n                    if (_board.get(vertex) !== 0 || this.state.blockedGuesses.some(function (v) {\n                        return helper.vertexEquals(v, vertex);\n                    })) return;\n\n                    var blocked = [];\n\n                    var _vertex$map$reduce = vertex.map(function (x, i) {\n                        return Math.abs(x - nextVertex[i]);\n                    }).reduce(function (_ref9, x, j) {\n                        var _ref10 = _slicedToArray(_ref9, 2),\n                            max = _ref10[0],\n                            i = _ref10[1];\n\n                        return x > max ? [x, j] : [max, i];\n                    }, [-Infinity, -1]),\n                        _vertex$map$reduce2 = _slicedToArray(_vertex$map$reduce, 2),\n                        i = _vertex$map$reduce2[1];\n\n                    for (var _x9 = 0; _x9 < _board.width; _x9++) {\n                        for (var _y = 0; _y < _board.height; _y++) {\n                            var z = i === 0 ? _x9 : _y;\n                            if (Math.abs(z - vertex[i]) < Math.abs(z - nextVertex[i])) blocked.push([_x9, _y]);\n                        }\n                    }\n\n                    var blockedGuesses = this.state.blockedGuesses;\n\n                    blockedGuesses.push.apply(blockedGuesses, blocked);\n                    this.setState({ blockedGuesses: blockedGuesses });\n                }\n            }\n\n            this.events.emit('vertexClick');\n        }\n    }, {\n        key: 'makeMove',\n        value: function makeMove(vertex) {\n            var _this8 = this;\n\n            var _ref11 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n                _ref11$player = _ref11.player,\n                player = _ref11$player === undefined ? null : _ref11$player,\n                _ref11$clearUndoPoint = _ref11.clearUndoPoint,\n                clearUndoPoint = _ref11$clearUndoPoint === undefined ? true : _ref11$clearUndoPoint,\n                _ref11$sendToEngine = _ref11.sendToEngine,\n                sendToEngine = _ref11$sendToEngine === undefined ? false : _ref11$sendToEngine;\n\n            if (!['play', 'autoplay', 'guess'].includes(this.state.mode)) {\n                this.closeDrawer();\n                this.setMode('play');\n            }\n\n            var _state$treePosition3 = _slicedToArray(this.state.treePosition, 2),\n                tree = _state$treePosition3[0],\n                index = _state$treePosition3[1];\n\n            var board = gametree.getBoard(tree, index);\n\n            if (typeof vertex == 'string') {\n                vertex = board.coord2vertex(vertex);\n            }\n\n            var pass = !board.hasVertex(vertex);\n            if (!pass && board.get(vertex) !== 0) return;\n\n            var prev = gametree.navigate(tree, index, -1);\n            if (!player) player = this.inferredState.currentPlayer;\n            var color = player > 0 ? 'B' : 'W';\n            var capture = false,\n                suicide = false,\n                ko = false;\n            var createNode = true;\n\n            if (!pass) {\n                // Check for ko\n\n                if (prev && setting.get('game.show_ko_warning')) {\n                    var hash = board.makeMove(player, vertex).getPositionHash();\n\n                    ko = prev[0].nodes[prev[1]].board.getPositionHash() == hash;\n\n                    if (ko && dialog.showMessageBox(['You are about to play a move which repeats a previous board position.', 'This is invalid in some rulesets. Do you want to play anyway?'].join('\\n'), 'info', ['Play Anyway', 'Don’t Play'], 1) != 0) return;\n                }\n\n                var vertexNeighbors = board.getNeighbors(vertex);\n\n                // Check for suicide\n\n                capture = vertexNeighbors.some(function (v) {\n                    return board.get(v) == -player && board.getLiberties(v).length == 1;\n                });\n\n                suicide = !capture && vertexNeighbors.filter(function (v) {\n                    return board.get(v) == player;\n                }).every(function (v) {\n                    return board.getLiberties(v).length == 1;\n                }) && vertexNeighbors.filter(function (v) {\n                    return board.get(v) == 0;\n                }).length == 0;\n\n                if (suicide && setting.get('game.show_suicide_warning')) {\n                    if (dialog.showMessageBox(['You are about to play a suicide move.', 'This is invalid in some rulesets. Do you want to play anyway?'].join('\\n'), 'info', ['Play Anyway', 'Don’t Play'], 1) != 0) return;\n                }\n\n                // Animate board\n\n                this.setState({ animatedVertex: vertex });\n            }\n\n            // Update data\n\n            var nextTreePosition = void 0;\n\n            if (tree.subtrees.length === 0 && tree.nodes.length - 1 === index) {\n                // Append move\n\n                var node = {};\n                node[color] = [sgf.vertex2point(vertex)];\n                tree.nodes.push(node);\n\n                nextTreePosition = [tree, tree.nodes.length - 1];\n            } else {\n                if (index !== tree.nodes.length - 1) {\n                    // Search for next move\n\n                    var nextNode = tree.nodes[index + 1];\n                    var moveExists = color in nextNode && helper.vertexEquals(sgf.point2vertex(nextNode[color][0]), vertex);\n\n                    if (moveExists) {\n                        nextTreePosition = [tree, index + 1];\n                        createNode = false;\n                    }\n                } else {\n                    // Search for variation\n\n                    var variations = tree.subtrees.filter(function (subtree) {\n                        return subtree.nodes.length > 0 && color in subtree.nodes[0] && helper.vertexEquals(sgf.point2vertex(subtree.nodes[0][color][0]), vertex);\n                    });\n\n                    if (variations.length > 0) {\n                        nextTreePosition = [variations[0], 0];\n                        createNode = false;\n                    }\n                }\n\n                if (createNode) {\n                    // Create variation\n\n                    var updateRoot = tree.parent == null;\n                    var splitted = gametree.split(tree, index);\n                    var newTree = gametree.new();\n                    var _node = _defineProperty({}, color, [sgf.vertex2point(vertex)]);\n\n                    newTree.nodes = [_node];\n                    newTree.parent = splitted;\n\n                    splitted.subtrees.push(newTree);\n                    splitted.current = splitted.subtrees.length - 1;\n\n                    if (updateRoot) {\n                        var gameTrees = this.state.gameTrees;\n\n                        gameTrees[gameTrees.indexOf(tree)] = splitted;\n                    }\n\n                    nextTreePosition = [newTree, 0];\n                }\n            }\n\n            this.setCurrentTreePosition.apply(this, _toConsumableArray(nextTreePosition));\n\n            // Play sounds\n\n            if (!pass) {\n                var delay = setting.get('sound.capture_delay_min');\n                delay += Math.floor(Math.random() * (setting.get('sound.capture_delay_max') - delay));\n\n                if (capture || suicide) sound.playCapture(delay);\n\n                sound.playPachi();\n            } else {\n                sound.playPass();\n            }\n\n            // Clear undo point\n\n            if (createNode && clearUndoPoint) this.clearUndoPoint();\n\n            // Enter scoring mode after two consecutive passes\n\n            var enterScoring = false;\n\n            if (pass && createNode && prev) {\n                var prevNode = tree.nodes[index];\n                var prevColor = color === 'B' ? 'W' : 'B';\n                var prevPass = prevColor in prevNode && prevNode[prevColor][0] === '';\n\n                if (prevPass) {\n                    enterScoring = true;\n                    this.setMode('scoring');\n                }\n            }\n\n            // Emit event\n\n            this.events.emit('moveMake', { pass: pass, capture: capture, suicide: suicide, ko: ko, enterScoring: enterScoring });\n\n            // Send command to engine\n\n            if (sendToEngine && this.attachedEngineControllers.some(function (x) {\n                return x != null;\n            })) {\n                var passPlayer = pass ? player : null;\n                setTimeout(function () {\n                    return _this8.startGeneratingMoves({ passPlayer: passPlayer });\n                }, setting.get('gtp.move_delay'));\n            }\n        }\n    }, {\n        key: 'makeResign',\n        value: function makeResign() {\n            var _ref12 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref12$player = _ref12.player,\n                player = _ref12$player === undefined ? null : _ref12$player,\n                _ref12$setUndoPoint = _ref12.setUndoPoint,\n                setUndoPoint = _ref12$setUndoPoint === undefined ? true : _ref12$setUndoPoint;\n\n            var _inferredState = this.inferredState,\n                rootTree = _inferredState.rootTree,\n                currentPlayer = _inferredState.currentPlayer;\n\n            if (player == null) player = currentPlayer;\n            var color = player > 0 ? 'W' : 'B';\n            var rootNode = rootTree.nodes[0];\n\n            if (setUndoPoint) this.setUndoPoint('Undo Resignation');\n            rootNode.RE = [color + '+Resign'];\n\n            this.makeMove([-1, -1], { player: player, clearUndoPoint: false });\n            this.makeMainVariation.apply(this, _toConsumableArray(this.state.treePosition).concat([{ setUndoPoint: false }]));\n\n            this.events.emit('resign', { player: player });\n        }\n    }, {\n        key: 'useTool',\n        value: function useTool(tool, vertex) {\n            var _this9 = this;\n\n            var argument = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n            var _state$treePosition4 = _slicedToArray(this.state.treePosition, 2),\n                tree = _state$treePosition4[0],\n                index = _state$treePosition4[1];\n\n            var _inferredState2 = this.inferredState,\n                currentPlayer = _inferredState2.currentPlayer,\n                gameIndex = _inferredState2.gameIndex;\n\n            var board = gametree.getBoard(tree, index);\n            var node = tree.nodes[index];\n\n            if (typeof vertex == 'string') {\n                vertex = board.coord2vertex(vertex);\n            }\n\n            var data = {\n                cross: 'MA',\n                triangle: 'TR',\n                circle: 'CR',\n                square: 'SQ',\n                number: 'LB',\n                label: 'LB'\n            };\n\n            if (['stone_-1', 'stone_1'].includes(tool)) {\n                (function () {\n                    if ('B' in node || 'W' in node || gametree.navigate(tree, index, 1)) {\n                        // New variation needed\n\n                        var updateRoot = tree.parent == null;\n                        var splitted = gametree.split(tree, index);\n\n                        if (splitted != tree || splitted.subtrees.length != 0) {\n                            tree = gametree.new();\n                            tree.parent = splitted;\n                            splitted.subtrees.push(tree);\n                        }\n\n                        node = { PL: currentPlayer > 0 ? ['B'] : ['W'] };\n                        index = tree.nodes.length;\n                        tree.nodes.push(node);\n\n                        if (updateRoot) {\n                            var gameTrees = _this9.state.gameTrees;\n\n                            gameTrees[gameIndex] = splitted;\n                        }\n                    }\n\n                    var sign = tool === 'stone_1' ? 1 : -1;\n                    var oldSign = board.get(vertex);\n                    var properties = ['AW', 'AE', 'AB'];\n                    var point = sgf.vertex2point(vertex);\n\n                    var _iteratorNormalCompletion4 = true;\n                    var _didIteratorError4 = false;\n                    var _iteratorError4 = undefined;\n\n                    try {\n                        for (var _iterator4 = properties[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                            var _prop = _step4.value;\n\n                            if (!(_prop in node)) continue;\n\n                            // Resolve compressed lists\n\n                            if (node[_prop].some(function (x) {\n                                return x.includes(':');\n                            })) {\n                                node[_prop] = node[_prop].map(function (value) {\n                                    return sgf.compressed2list(value).map(sgf.vertex2point);\n                                }).reduce(function (list, x) {\n                                    return [].concat(_toConsumableArray(list), [x]);\n                                });\n                            }\n\n                            // Remove residue\n\n                            node[_prop] = node[_prop].filter(function (x) {\n                                return x !== point;\n                            });\n                            if (node[_prop].length === 0) delete node[_prop];\n                        }\n                    } catch (err) {\n                        _didIteratorError4 = true;\n                        _iteratorError4 = err;\n                    } finally {\n                        try {\n                            if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                                _iterator4.return();\n                            }\n                        } finally {\n                            if (_didIteratorError4) {\n                                throw _iteratorError4;\n                            }\n                        }\n                    }\n\n                    var prop = oldSign !== sign ? properties[sign + 1] : 'AE';\n\n                    if (prop in node) node[prop].push(point);else node[prop] = [point];\n                })();\n            } else if (['line', 'arrow'].includes(tool)) {\n                var endVertex = argument;\n\n                if (!endVertex || helper.vertexEquals(vertex, endVertex)) return;\n\n                // Check whether to remove a line\n\n                var toDelete = board.lines.findIndex(function (x) {\n                    return helper.equals(x.slice(0, 2), [vertex, endVertex]);\n                });\n\n                if (toDelete === -1) {\n                    toDelete = board.lines.findIndex(function (x) {\n                        return helper.equals(x.slice(0, 2), [endVertex, vertex]);\n                    });\n\n                    if (toDelete >= 0 && tool !== 'line' && board.lines[toDelete][2]) {\n                        // Do not delete after all\n                        toDelete = -1;\n                    }\n                }\n\n                // Mutate board first, then apply changes to actual game tree\n\n                if (toDelete >= 0) {\n                    board.lines.splice(toDelete, 1);\n                } else {\n                    board.lines.push([vertex, endVertex, tool === 'arrow']);\n                }\n\n                node.LN = [];\n                node.AR = [];\n\n                var _iteratorNormalCompletion5 = true;\n                var _didIteratorError5 = false;\n                var _iteratorError5 = undefined;\n\n                try {\n                    for (var _iterator5 = board.lines[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                        var _ref13 = _step5.value;\n\n                        var _ref14 = _slicedToArray(_ref13, 3);\n\n                        var v1 = _ref14[0];\n                        var v2 = _ref14[1];\n                        var arrow = _ref14[2];\n\n                        var _map = [v1, v2].map(sgf.vertex2point),\n                            _map2 = _slicedToArray(_map, 2),\n                            p1 = _map2[0],\n                            p2 = _map2[1];\n\n                        if (p1 === p2) continue;\n\n                        node[arrow ? 'AR' : 'LN'].push([p1, p2].join(':'));\n                    }\n                } catch (err) {\n                    _didIteratorError5 = true;\n                    _iteratorError5 = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                            _iterator5.return();\n                        }\n                    } finally {\n                        if (_didIteratorError5) {\n                            throw _iteratorError5;\n                        }\n                    }\n                }\n\n                if (node.LN.length === 0) delete node.LN;\n                if (node.AR.length === 0) delete node.AR;\n            } else {\n                // Mutate board first, then apply changes to actual game tree\n\n                if (tool === 'number') {\n                    if (vertex in board.markups && board.markups[vertex][0] === 'label') {\n                        delete board.markups[vertex];\n                    } else {\n                        var number = !node.LB ? 1 : node.LB.map(function (x) {\n                            return parseFloat(x.substr(3));\n                        }).filter(function (x) {\n                            return !isNaN(x);\n                        }).sort(function (a, b) {\n                            return a - b;\n                        }).filter(function (x, i, arr) {\n                            return i === 0 || x !== arr[i - 1];\n                        }).concat([null]).findIndex(function (x, i) {\n                            return i + 1 !== x;\n                        }) + 1;\n\n                        argument = number.toString();\n                        board.markups[vertex] = [tool, number.toString()];\n                    }\n                } else if (tool === 'label') {\n                    var label = argument;\n\n                    if (label != null && label.trim() === '' || label == null && vertex in board.markups && board.markups[vertex][0] === 'label') {\n                        delete board.markups[vertex];\n                    } else {\n                        if (label == null) {\n                            var alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n                            var letterIndex = Math.max(!node.LB ? 0 : node.LB.filter(function (x) {\n                                return x.length === 4;\n                            }).map(function (x) {\n                                return alpha.indexOf(x[3]);\n                            }).filter(function (x) {\n                                return x >= 0;\n                            }).sort(function (a, b) {\n                                return a - b;\n                            }).filter(function (x, i, arr) {\n                                return i === 0 || x !== arr[i - 1];\n                            }).concat([null]).findIndex(function (x, i) {\n                                return i !== x;\n                            }), !node.L ? 0 : node.L.length);\n\n                            label = alpha[Math.min(letterIndex, alpha.length - 1)];\n                            argument = label;\n                        }\n\n                        board.markups[vertex] = [tool, label];\n                    }\n                } else {\n                    if (vertex in board.markups && board.markups[vertex][0] === tool) {\n                        delete board.markups[vertex];\n                    } else {\n                        board.markups[vertex] = [tool, ''];\n                    }\n                }\n\n                delete node.L;\n                for (var id in data) {\n                    delete node[data[id]];\n                } // Now apply changes to game tree\n\n                for (var x = 0; x < board.width; x++) {\n                    for (var y = 0; y < board.height; y++) {\n                        var v = [x, y];\n                        if (!(v in board.markups)) continue;\n\n                        var prop = data[board.markups[v][0]];\n                        var value = sgf.vertex2point(v);\n\n                        if (prop === 'LB') value += ':' + board.markups[v][1];\n\n                        if (prop in node) node[prop].push(value);else node[prop] = [value];\n                    }\n                }\n            }\n\n            this.clearUndoPoint();\n            this.setCurrentTreePosition(tree, index);\n\n            this.events.emit('toolUse', { tool: tool, vertex: vertex, argument: argument });\n        }\n\n        // Undo Methods\n\n    }, {\n        key: 'setUndoPoint',\n        value: function setUndoPoint() {\n            var undoText = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Undo';\n\n            var _state$treePosition5 = _slicedToArray(this.state.treePosition, 2),\n                tree = _state$treePosition5[0],\n                index = _state$treePosition5[1];\n\n            var rootTree = gametree.clone(gametree.getRoot(tree));\n            var level = gametree.getLevel(tree, index);\n\n            this.undoData = [rootTree, level];\n            this.setState({ undoable: true, undoText: undoText });\n        }\n    }, {\n        key: 'clearUndoPoint',\n        value: function clearUndoPoint() {\n            this.undoData = null;\n            this.setState({ undoable: false });\n        }\n    }, {\n        key: 'undo',\n        value: function undo() {\n            var _this10 = this;\n\n            if (!this.state.undoable || !this.undoData) return;\n\n            this.setBusy(true);\n\n            setTimeout(function () {\n                var _undoData = _slicedToArray(_this10.undoData, 2),\n                    undoRoot = _undoData[0],\n                    undoLevel = _undoData[1];\n\n                var _state3 = _this10.state,\n                    treePosition = _state3.treePosition,\n                    gameTrees = _state3.gameTrees;\n\n\n                gameTrees[_this10.inferredState.gameIndex] = undoRoot;\n                treePosition = gametree.navigate(undoRoot, 0, undoLevel);\n\n                _this10.setCurrentTreePosition.apply(_this10, _toConsumableArray(treePosition));\n                _this10.clearUndoPoint();\n                _this10.setBusy(false);\n            }, setting.get('edit.undo_delay'));\n        }\n\n        // Navigation\n\n    }, {\n        key: 'setCurrentTreePosition',\n        value: function setCurrentTreePosition(tree, index) {\n            var _ref15 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref15$clearUndoPoint = _ref15.clearUndoPoint,\n                clearUndoPoint = _ref15$clearUndoPoint === undefined ? true : _ref15$clearUndoPoint;\n\n            if (['scoring', 'estimator'].includes(this.state.mode)) return;\n\n            var t = tree;\n            while (t.parent != null) {\n                t.parent.current = t.parent.subtrees.indexOf(t);\n                t = t.parent;\n            }\n\n            if (clearUndoPoint && t !== gametree.getRoot(this.state.treePosition[0])) {\n                this.clearUndoPoint();\n            }\n\n            this.setState({\n                blockedGuesses: [],\n                highlightVertices: [],\n                treePosition: [tree, index]\n            });\n\n            this.events.emit('navigate');\n        }\n    }, {\n        key: 'goStep',\n        value: function goStep(step) {\n            var treePosition = gametree.navigate.apply(gametree, _toConsumableArray(this.state.treePosition).concat([step]));\n            if (treePosition) this.setCurrentTreePosition.apply(this, _toConsumableArray(treePosition));\n        }\n    }, {\n        key: 'goToMoveNumber',\n        value: function goToMoveNumber(number) {\n            number = +number;\n\n            if (isNaN(number)) return;\n            if (number < 0) number = 0;\n\n            var treePosition = this.state.treePosition;\n\n            var root = gametree.getRoot.apply(gametree, _toConsumableArray(treePosition));\n\n            treePosition = gametree.navigate(root, 0, Math.round(number));\n\n            if (treePosition) this.setCurrentTreePosition.apply(this, _toConsumableArray(treePosition));else this.goToEnd();\n        }\n    }, {\n        key: 'goToNextFork',\n        value: function goToNextFork() {\n            var _state$treePosition6 = _slicedToArray(this.state.treePosition, 2),\n                tree = _state$treePosition6[0],\n                index = _state$treePosition6[1];\n\n            if (index !== tree.nodes.length - 1) {\n                this.setCurrentTreePosition(tree, tree.nodes.length - 1);\n            } else if (tree.subtrees.length !== 0) {\n                var subtree = tree.subtrees[tree.current];\n                this.setCurrentTreePosition(subtree, subtree.nodes.length - 1);\n            }\n        }\n    }, {\n        key: 'goToPreviousFork',\n        value: function goToPreviousFork() {\n            var _state$treePosition7 = _slicedToArray(this.state.treePosition, 2),\n                tree = _state$treePosition7[0],\n                index = _state$treePosition7[1];\n\n            if (tree.parent == null || tree.parent.nodes.length === 0) {\n                if (index != 0) this.setCurrentTreePosition(tree, 0);\n            } else {\n                this.setCurrentTreePosition(tree.parent, tree.parent.nodes.length - 1);\n            }\n        }\n    }, {\n        key: 'goToComment',\n        value: function goToComment(step) {\n            var tp = this.state.treePosition;\n\n            var _loop2 = function _loop2() {\n                tp = gametree.navigate.apply(gametree, _toConsumableArray(tp).concat([step]));\n                if (!tp) return 'break';\n\n                var node = tp[0].nodes[tp[1]];\n\n                if (setting.get('sgf.comment_properties').some(function (p) {\n                    return p in node;\n                })) return 'break';\n            };\n\n            while (true) {\n                var _ret3 = _loop2();\n\n                if (_ret3 === 'break') break;\n            }\n\n            if (tp) this.setCurrentTreePosition.apply(this, _toConsumableArray(tp));\n        }\n    }, {\n        key: 'goToBeginning',\n        value: function goToBeginning() {\n            this.setCurrentTreePosition(gametree.getRoot.apply(gametree, _toConsumableArray(this.state.treePosition)), 0);\n        }\n    }, {\n        key: 'goToEnd',\n        value: function goToEnd() {\n            var rootTree = gametree.getRoot.apply(gametree, _toConsumableArray(this.state.treePosition));\n            var tp = gametree.navigate(rootTree, 0, gametree.getCurrentHeight(rootTree) - 1);\n            this.setCurrentTreePosition.apply(this, _toConsumableArray(tp));\n        }\n    }, {\n        key: 'goToSiblingVariation',\n        value: function goToSiblingVariation(step) {\n            var _state$treePosition8 = _slicedToArray(this.state.treePosition, 2),\n                tree = _state$treePosition8[0],\n                index = _state$treePosition8[1];\n\n            if (!tree.parent) return;\n\n            step = step < 0 ? -1 : 1;\n\n            var mod = tree.parent.subtrees.length;\n            var i = (tree.parent.current + mod + step) % mod;\n\n            this.setCurrentTreePosition(tree.parent.subtrees[i], 0);\n        }\n    }, {\n        key: 'goToMainVariation',\n        value: function goToMainVariation() {\n            var tp = this.state.treePosition;\n            var root = gametree.getRoot.apply(gametree, _toConsumableArray(tp));\n\n            while (root.subtrees.length !== 0) {\n                root.current = 0;\n                root = root.subtrees[0];\n            }\n\n            if (gametree.onMainTrack.apply(gametree, _toConsumableArray(tp))) {\n                this.setCurrentTreePosition.apply(this, _toConsumableArray(tp));\n            } else {\n                var _tp = _slicedToArray(tp, 1),\n                    tree = _tp[0];\n\n                while (!gametree.onMainTrack(tree)) {\n                    tree = tree.parent;\n                }\n\n                this.setCurrentTreePosition(tree, tree.nodes.length - 1);\n            }\n        }\n    }, {\n        key: 'goToSiblingGame',\n        value: function goToSiblingGame(step) {\n            var _state4 = this.state,\n                gameTrees = _state4.gameTrees,\n                treePosition = _state4.treePosition;\n\n            var _treePosition = _slicedToArray(treePosition, 1),\n                tree = _treePosition[0];\n\n            var index = gameTrees.indexOf(gametree.getRoot(tree));\n            var newIndex = Math.max(0, Math.min(gameTrees.length - 1, index + step));\n\n            this.setCurrentTreePosition(gameTrees[newIndex], 0);\n        }\n\n        // Find Methods\n\n    }, {\n        key: 'findPosition',\n        value: function findPosition(step, condition) {\n            var _this11 = this;\n\n            var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : helper.noop;\n\n            if (isNaN(step)) step = 1;else step = step >= 0 ? 1 : -1;\n\n            this.setBusy(true);\n\n            setTimeout(function () {\n                var tp = _this11.state.treePosition;\n                var iterator = gametree.makeHorizontalNavigator.apply(gametree, _toConsumableArray(tp));\n\n                while (true) {\n                    tp = step >= 0 ? iterator.next() : iterator.prev();\n\n                    if (!tp) {\n                        var root = _this11.inferredState.rootTree;\n\n                        if (step === 1) {\n                            tp = [root, 0];\n                        } else {\n                            var sections = gametree.getSection(root, gametree.getHeight(root) - 1);\n                            tp = sections[sections.length - 1];\n                        }\n\n                        iterator = gametree.makeHorizontalNavigator.apply(gametree, _toConsumableArray(tp));\n                    }\n\n                    if (helper.vertexEquals(tp, _this11.state.treePosition) || condition.apply(undefined, _toConsumableArray(tp))) break;\n                }\n\n                _this11.setCurrentTreePosition.apply(_this11, _toConsumableArray(tp));\n                _this11.setBusy(false);\n                callback();\n            }, setting.get('find.delay'));\n        }\n    }, {\n        key: 'findHotspot',\n        value: function findHotspot(step) {\n            var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : helper.noop;\n\n            this.findPosition(step, function (tree, index) {\n                return 'HO' in tree.nodes[index];\n            }, callback);\n        }\n    }, {\n        key: 'findMove',\n        value: function findMove(step, _ref16) {\n            var _ref16$vertex = _ref16.vertex,\n                vertex = _ref16$vertex === undefined ? null : _ref16$vertex,\n                _ref16$text = _ref16.text,\n                text = _ref16$text === undefined ? '' : _ref16$text;\n            var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : helper.noop;\n\n            if (vertex == null && text.trim() === '') return;\n            var point = vertex ? sgf.vertex2point(vertex) : null;\n\n            this.findPosition(step, function (tree, index) {\n                var node = tree.nodes[index];\n                var cond = function cond(prop, value) {\n                    return prop in node && node[prop][0].toLowerCase().includes(value.toLowerCase());\n                };\n\n                return (!point || ['B', 'W'].some(function (x) {\n                    return cond(x, point);\n                })) && (!text || cond('C', text) || cond('N', text));\n            }, callback);\n        }\n\n        // Node Actions\n\n    }, {\n        key: 'getGameInfo',\n        value: function getGameInfo(tree) {\n            var root = gametree.getRoot(tree);\n\n            var komi = gametree.getRootProperty(root, 'KM');\n            if (komi != null && !isNaN(komi)) komi = +komi;else komi = null;\n\n            var size = gametree.getRootProperty(root, 'SZ');\n            if (size == null) {\n                size = [19, 19];\n            } else {\n                var s = size.toString().split(':');\n                size = [+s[0], +s[s.length - 1]];\n            }\n\n            var handicap = ~~gametree.getRootProperty(root, 'HA', 0);\n            handicap = Math.max(1, Math.min(9, handicap));\n            if (handicap === 1) handicap = 0;\n\n            var playerNames = ['B', 'W'].map(function (x) {\n                return gametree.getRootProperty(tree, 'P' + x) || gametree.getRootProperty(tree, x + 'T');\n            });\n\n            var playerRanks = ['BR', 'WR'].map(function (x) {\n                return gametree.getRootProperty(root, x);\n            });\n\n            return {\n                playerNames: playerNames,\n                playerRanks: playerRanks,\n                blackName: playerNames[0],\n                blackRank: playerRanks[0],\n                whiteName: playerNames[1],\n                whiteRank: playerRanks[1],\n                gameName: gametree.getRootProperty(root, 'GN'),\n                eventName: gametree.getRootProperty(root, 'EV'),\n                date: gametree.getRootProperty(root, 'DT'),\n                result: gametree.getRootProperty(root, 'RE'),\n                komi: komi,\n                handicap: handicap,\n                size: size\n            };\n        }\n    }, {\n        key: 'setGameInfo',\n        value: function setGameInfo(tree, data) {\n            var root = gametree.getRoot(tree);\n            var node = root.nodes[0];\n\n            if ('size' in data) {\n                // Update board size\n\n                if (data.size) {\n                    var value = data.size;\n                    value = value.map(function (x, i) {\n                        return isNaN(x) || !x ? 19 : Math.min(25, Math.max(3, x));\n                    });\n\n                    if (value[0] === value[1]) value = value[0];else value = value.join(':');\n\n                    setting.set('game.default_board_size', value);\n                    node.SZ = [value];\n                } else {\n                    delete node.SZ;\n                }\n            }\n\n            var props = {\n                blackName: 'PB',\n                blackRank: 'BR',\n                whiteName: 'PW',\n                whiteRank: 'WR',\n                gameName: 'GN',\n                eventName: 'EV',\n                date: 'DT',\n                result: 'RE',\n                komi: 'KM',\n                handicap: 'HA'\n            };\n\n            for (var key in props) {\n                if (!(key in data)) continue;\n\n                var _value = data[key];\n\n                if (_value && _value.toString().trim() !== '') {\n                    if (key === 'komi') {\n                        if (isNaN(_value)) _value = 0;\n\n                        setting.set('game.default_komi', _value);\n                    } else if (key === 'handicap') {\n                        var board = gametree.getBoard(root, 0);\n                        var stones = board.getHandicapPlacement(+_value);\n\n                        _value = stones.length;\n                        setting.set('game.default_handicap', _value);\n\n                        if (_value <= 1) {\n                            delete node[props[key]];\n                            delete node.AB;\n                            continue;\n                        }\n\n                        node.AB = stones.map(sgf.vertex2point);\n                    }\n\n                    node[props[key]] = [_value];\n                } else {\n                    delete node[props[key]];\n                }\n            }\n        }\n    }, {\n        key: 'getPlayer',\n        value: function getPlayer(tree, index) {\n            var node = tree.nodes[index];\n\n            return 'PL' in node ? node.PL[0] == 'W' ? -1 : 1 : 'B' in node || 'HA' in node && +node.HA[0] >= 1 ? -1 : 1;\n        }\n    }, {\n        key: 'setPlayer',\n        value: function setPlayer(tree, index, sign) {\n            var node = tree.nodes[index];\n            var intendedSign = 'B' in node || 'HA' in node && +node.HA[0] >= 1 ? -1 : +('W' in node);\n\n            if (intendedSign === sign || sign === 0) {\n                delete node.PL;\n            } else {\n                node.PL = [sign > 0 ? 'B' : 'W'];\n            }\n\n            this.clearUndoPoint();\n        }\n    }, {\n        key: 'getComment',\n        value: function getComment(tree, index) {\n            var node = tree.nodes[index];\n\n            return {\n                title: 'N' in node ? node.N[0].trim() : null,\n                comment: 'C' in node ? node.C[0] : null,\n                hotspot: 'HO' in node,\n                moveAnnotation: 'BM' in node ? 'BM' : 'TE' in node ? 'TE' : 'DO' in node ? 'DO' : 'IT' in node ? 'IT' : null,\n                positionAnnotation: 'UC' in node ? 'UC' : 'GW' in node ? 'GW' : 'DM' in node ? 'DM' : 'GB' in node ? 'GB' : null\n            };\n        }\n    }, {\n        key: 'setComment',\n        value: function setComment(tree, index, data) {\n            var node = tree.nodes[index];\n\n            var _arr = [['title', 'N'], ['comment', 'C']];\n            for (var _i = 0; _i < _arr.length; _i++) {\n                var _ref17 = _arr[_i];\n\n                var _ref18 = _slicedToArray(_ref17, 2);\n\n                var key = _ref18[0];\n                var prop = _ref18[1];\n\n                if (key in data) {\n                    if (data[key] && data[key].trim() !== '') node[prop] = [data[key]];else delete node[prop];\n                }\n            }\n\n            if ('hotspot' in data) {\n                if (data.hotspot) node.HO = [1];else delete node.HO;\n            }\n\n            var clearProperties = function clearProperties(properties) {\n                return properties.forEach(function (p) {\n                    return delete node[p];\n                });\n            };\n\n            if ('moveAnnotation' in data) {\n                var moveProps = { 'BM': 1, 'DO': '', 'IT': '', 'TE': 1 };\n\n                clearProperties(Object.keys(moveProps));\n\n                if (data.moveAnnotation != null) node[data.moveAnnotation] = [moveProps[data.moveAnnotation]];\n            }\n\n            if ('positionAnnotation' in data) {\n                var positionProps = { 'UC': 1, 'GW': 1, 'GB': 1, 'DM': 1 };\n\n                clearProperties(Object.keys(positionProps));\n\n                if (data.positionAnnotation != null) node[data.positionAnnotation] = [positionProps[data.positionAnnotation]];\n            }\n\n            this.clearUndoPoint();\n        }\n    }, {\n        key: 'copyVariation',\n        value: function copyVariation(tree, index) {\n            var clone = gametree.clone(tree);\n            if (index != 0) gametree.split(clone, index - 1);\n\n            this.copyVariationData = clone;\n        }\n    }, {\n        key: 'cutVariation',\n        value: function cutVariation(tree, index) {\n            var _ref19 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref19$setUndoPoint = _ref19.setUndoPoint,\n                setUndoPoint = _ref19$setUndoPoint === undefined ? true : _ref19$setUndoPoint;\n\n            if (setUndoPoint) this.setUndoPoint('Undo Cut Variation');\n\n            this.copyVariation(tree, index);\n            this.removeNode(tree, index, {\n                suppressConfirmation: true,\n                setUndoPoint: false\n            });\n        }\n    }, {\n        key: 'pasteVariation',\n        value: function pasteVariation(tree, index) {\n            var _ref20 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref20$setUndoPoint = _ref20.setUndoPoint,\n                setUndoPoint = _ref20$setUndoPoint === undefined ? true : _ref20$setUndoPoint;\n\n            if (this.copyVariationData == null) return;\n\n            if (setUndoPoint) this.setUndoPoint('Undo Paste Variation');\n            this.closeDrawer();\n            this.setMode('play');\n\n            var updateRoot = !tree.parent;\n            var oldLength = tree.nodes.length;\n            var splitted = gametree.split(tree, index);\n            var copied = gametree.clone(this.copyVariationData);\n\n            copied.parent = splitted;\n            splitted.subtrees.push(copied);\n\n            if (updateRoot) {\n                var gameTrees = this.state.gameTrees;\n\n                gameTrees[this.inferredState.gameIndex] = splitted;\n                this.setState({ gameTrees: gameTrees });\n            }\n\n            if (splitted.subtrees.length === 1) {\n                gametree.reduce(splitted);\n                this.setCurrentTreePosition(splitted, oldLength);\n            } else {\n                this.setCurrentTreePosition(copied, 0);\n            }\n        }\n    }, {\n        key: 'flattenVariation',\n        value: function flattenVariation(tree, index) {\n            var _ref21 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref21$setUndoPoint = _ref21.setUndoPoint,\n                setUndoPoint = _ref21$setUndoPoint === undefined ? true : _ref21$setUndoPoint;\n\n            if (setUndoPoint) this.setUndoPoint('Undo Flatten');\n            this.closeDrawer();\n            this.setMode('play');\n\n            var gameTrees = this.state.gameTrees;\n            var _inferredState3 = this.inferredState,\n                rootTree = _inferredState3.rootTree,\n                gameIndex = _inferredState3.gameIndex;\n\n            var board = gametree.getBoard(tree, index);\n            var rootNode = rootTree.nodes[0];\n            var inherit = ['BR', 'BT', 'DT', 'EV', 'GN', 'GC', 'PB', 'PW', 'RE', 'SO', 'WT', 'WR'];\n\n            var clone = gametree.clone(tree);\n            if (index !== 0) gametree.split(clone, index - 1);\n            var node = clone.nodes[0];\n\n            node.AB = [];\n            node.AW = [];\n            delete node.AE;\n            delete node.B;\n            delete node.W;\n\n            clone.parent = null;\n            inherit.forEach(function (x) {\n                return x in rootNode ? node[x] = rootNode[x] : null;\n            });\n\n            for (var x = 0; x < board.width; x++) {\n                for (var y = 0; y < board.height; y++) {\n                    var sign = board.get([x, y]);\n                    if (sign == 0) continue;\n\n                    node[sign > 0 ? 'AB' : 'AW'].push(sgf.vertex2point([x, y]));\n                }\n            }\n\n            if (node.AB.length === 0) delete node.AB;\n            if (node.AW.length === 0) delete node.AW;\n\n            gameTrees[gameIndex] = clone;\n            this.setState({ gameTrees: gameTrees });\n            this.setCurrentTreePosition(clone, 0, { clearUndoPoint: false });\n        }\n    }, {\n        key: 'makeMainVariation',\n        value: function makeMainVariation(tree, index) {\n            var _ref22 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref22$setUndoPoint = _ref22.setUndoPoint,\n                setUndoPoint = _ref22$setUndoPoint === undefined ? true : _ref22$setUndoPoint;\n\n            if (setUndoPoint) this.setUndoPoint('Restore Main Variation');\n            this.closeDrawer();\n            this.setMode('play');\n\n            var t = tree;\n\n            while (t.parent != null) {\n                t.parent.subtrees.splice(t.parent.subtrees.indexOf(t), 1);\n                t.parent.subtrees.unshift(t);\n                t.parent.current = 0;\n\n                t = t.parent;\n            }\n\n            t = tree;\n\n            while (t.subtrees.length !== 0) {\n                var _t$subtrees$splice = t.subtrees.splice(t.current, 1),\n                    _t$subtrees$splice2 = _slicedToArray(_t$subtrees$splice, 1),\n                    x = _t$subtrees$splice2[0];\n\n                t.subtrees.unshift(x);\n                t.current = 0;\n\n                t = x;\n            }\n\n            this.setCurrentTreePosition(tree, index);\n        }\n    }, {\n        key: 'shiftVariation',\n        value: function shiftVariation(tree, index, step) {\n            var _ref23 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n                _ref23$setUndoPoint = _ref23.setUndoPoint,\n                setUndoPoint = _ref23$setUndoPoint === undefined ? true : _ref23$setUndoPoint;\n\n            if (!tree.parent) return;\n\n            if (setUndoPoint) this.setUndoPoint('Undo Shift Variation');\n            this.closeDrawer();\n            this.setMode('play');\n\n            var subtrees = tree.parent.subtrees;\n            var m = subtrees.length;\n            var i = subtrees.indexOf(tree);\n            var iNew = ((i + step) % m + m) % m;\n\n            subtrees.splice(i, 1);\n            subtrees.splice(iNew, 0, tree);\n\n            this.setCurrentTreePosition.apply(this, _toConsumableArray(this.state.treePosition));\n        }\n    }, {\n        key: 'removeNode',\n        value: function removeNode(tree, index) {\n            var _ref24 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref24$suppressConfir = _ref24.suppressConfirmation,\n                suppressConfirmation = _ref24$suppressConfir === undefined ? false : _ref24$suppressConfir,\n                _ref24$setUndoPoint = _ref24.setUndoPoint,\n                setUndoPoint = _ref24$setUndoPoint === undefined ? true : _ref24$setUndoPoint;\n\n            if (!tree.parent && index === 0) {\n                dialog.showMessageBox('The root node cannot be removed.', 'warning');\n                return;\n            }\n\n            if (suppressConfirmation !== true && setting.get('edit.show_removenode_warning') && dialog.showMessageBox('Do you really want to remove this node?', 'warning', ['Remove Node', 'Cancel'], 1) === 1) return;\n\n            if (setUndoPoint) this.setUndoPoint('Undo Remove Node');\n            this.closeDrawer();\n            this.setMode('play');\n\n            // Remove node\n\n            var prev = gametree.navigate(tree, index, -1);\n\n            if (index !== 0) {\n                tree.nodes.splice(index, tree.nodes.length);\n                tree.current = null;\n                tree.subtrees.length = 0;\n            } else {\n                var parent = tree.parent;\n                var i = parent.subtrees.indexOf(tree);\n\n                parent.subtrees.splice(i, 1);\n                if (parent.current >= 1) parent.current--;\n                gametree.reduce(parent);\n            }\n\n            if (!prev) prev = this.state.treePosition;\n            this.setCurrentTreePosition.apply(this, _toConsumableArray(prev));\n        }\n    }, {\n        key: 'removeOtherVariations',\n        value: function removeOtherVariations(tree, index) {\n            var _ref25 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref25$suppressConfir = _ref25.suppressConfirmation,\n                suppressConfirmation = _ref25$suppressConfir === undefined ? false : _ref25$suppressConfir,\n                _ref25$setUndoPoint = _ref25.setUndoPoint,\n                setUndoPoint = _ref25$setUndoPoint === undefined ? true : _ref25$setUndoPoint;\n\n            if (suppressConfirmation !== true && setting.get('edit.show_removeothervariations_warning') && dialog.showMessageBox('Do you really want to remove all other variations?', 'warning', ['Remove Variations', 'Cancel'], 1) == 1) return;\n\n            // Save undo information\n\n            if (setUndoPoint) this.setUndoPoint('Undo Remove Other Variations');\n            this.closeDrawer();\n            this.setMode('play');\n\n            // Remove all subsequent variations\n\n            var t = tree;\n\n            while (t.subtrees.length != 0) {\n                t.subtrees = [t.subtrees[t.current]];\n                t.current = 0;\n\n                t = t.subtrees[0];\n            }\n\n            // Remove all precedent variations\n\n            t = tree;\n\n            while (t.parent != null) {\n                t.parent.subtrees = [t];\n                t.parent.current = 0;\n\n                t = t.parent;\n            }\n\n            this.setCurrentTreePosition(tree, index);\n        }\n\n        // Menus\n\n    }, {\n        key: 'openNodeMenu',\n        value: function openNodeMenu(tree, index) {\n            var _this12 = this;\n\n            var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n            if (this.state.mode === 'scoring') return;\n\n            var template = [{\n                label: 'C&opy Variation',\n                click: function click() {\n                    return _this12.copyVariation(tree, index);\n                }\n            }, {\n                label: 'C&ut Variation',\n                click: function click() {\n                    return _this12.cutVariation(tree, index);\n                }\n            }, {\n                label: '&Paste Variation',\n                click: function click() {\n                    return _this12.pasteVariation(tree, index);\n                }\n            }, { type: 'separator' }, {\n                label: 'Make &Main Variation',\n                click: function click() {\n                    return _this12.makeMainVariation(tree, index);\n                }\n            }, {\n                label: \"Shift &Left\",\n                click: function click() {\n                    return _this12.shiftVariation(tree, index, -1);\n                }\n            }, {\n                label: \"Shift Ri&ght\",\n                click: function click() {\n                    return _this12.shiftVariation(tree, index, 1);\n                }\n            }, { type: 'separator' }, {\n                label: '&Flatten',\n                click: function click() {\n                    return _this12.flattenVariation(tree, index);\n                }\n            }, {\n                label: '&Remove Node',\n                click: function click() {\n                    return _this12.removeNode(tree, index);\n                }\n            }, {\n                label: 'Remove &Other Variations',\n                click: function click() {\n                    return _this12.removeOtherVariations(tree, index);\n                }\n            }];\n\n            helper.popupMenu(template, options.x, options.y);\n        }\n    }, {\n        key: 'openCommentMenu',\n        value: function openCommentMenu(tree, index) {\n            var _this13 = this;\n\n            var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n            var node = tree.nodes[index];\n\n            var template = [{\n                label: '&Clear Annotations',\n                click: function click() {\n                    _this13.setComment(tree, index, { positionAnnotation: null, moveAnnotation: null });\n                }\n            }, { type: 'separator' }, {\n                label: 'Good for &Black',\n                type: 'checkbox',\n                data: { positionAnnotation: 'GB' }\n            }, {\n                label: '&Unclear Position',\n                type: 'checkbox',\n                data: { positionAnnotation: 'UC' }\n            }, {\n                label: '&Even Position',\n                type: 'checkbox',\n                data: { positionAnnotation: 'DM' }\n            }, {\n                label: 'Good for &White',\n                type: 'checkbox',\n                data: { positionAnnotation: 'GW' }\n            }];\n\n            if ('B' in node || 'W' in node) {\n                template.push({ type: 'separator' }, {\n                    label: '&Good Move',\n                    type: 'checkbox',\n                    data: { moveAnnotation: 'TE' }\n                }, {\n                    label: '&Interesting Move',\n                    type: 'checkbox',\n                    data: { moveAnnotation: 'IT' }\n                }, {\n                    label: '&Doubtful Move',\n                    type: 'checkbox',\n                    data: { moveAnnotation: 'DO' }\n                }, {\n                    label: 'B&ad Move',\n                    type: 'checkbox',\n                    data: { moveAnnotation: 'BM' }\n                });\n            }\n\n            template.push({ type: 'separator' }, {\n                label: '&Hotspot',\n                type: 'checkbox',\n                data: { hotspot: true }\n            });\n\n            var _loop3 = function _loop3(item) {\n                if (!('data' in item)) return 'continue';\n\n                var _Object$keys = Object.keys(item.data),\n                    _Object$keys2 = _slicedToArray(_Object$keys, 1),\n                    key = _Object$keys2[0];\n\n                var prop = key === 'hotspot' ? 'HO' : item.data[key];\n\n                item.checked = prop in node;\n                if (item.checked) item.data[key] = null;\n\n                item.click = function () {\n                    return _this13.setComment(tree, index, item.data);\n                };\n            };\n\n            var _iteratorNormalCompletion6 = true;\n            var _didIteratorError6 = false;\n            var _iteratorError6 = undefined;\n\n            try {\n                for (var _iterator6 = template[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n                    var item = _step6.value;\n\n                    var _ret4 = _loop3(item);\n\n                    if (_ret4 === 'continue') continue;\n                }\n            } catch (err) {\n                _didIteratorError6 = true;\n                _iteratorError6 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion6 && _iterator6.return) {\n                        _iterator6.return();\n                    }\n                } finally {\n                    if (_didIteratorError6) {\n                        throw _iteratorError6;\n                    }\n                }\n            }\n\n            helper.popupMenu(template, options.x, options.y);\n        }\n\n        // GTP Engines\n\n    }, {\n        key: 'attachEngines',\n        value: function attachEngines() {\n            var _this14 = this;\n\n            for (var _len2 = arguments.length, engines = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                engines[_key2] = arguments[_key2];\n            }\n\n            var _state5 = this.state,\n                engineCommands = _state5.engineCommands,\n                attachedEngines = _state5.attachedEngines;\n\n\n            if (helper.vertexEquals([].concat(engines).reverse(), attachedEngines)) {\n                // Just swap engines\n\n                this.attachedEngineControllers.reverse();\n                this.engineBoards.reverse();\n\n                this.setState({\n                    engineCommands: engineCommands.reverse(),\n                    attachedEngines: engines\n                });\n\n                return;\n            }\n\n            var command = function command(name) {\n                return new gtp.Command(null, name);\n            };\n\n            var _loop4 = function _loop4(i) {\n                if (attachedEngines[i] != engines[i]) {\n                    if (_this14.attachedEngineControllers[i]) _this14.attachedEngineControllers[i].stop();\n\n                    try {\n                        var controller = engines[i] ? new gtp.Controller(engines[i]) : null;\n                        _this14.attachedEngineControllers[i] = controller;\n                        _this14.engineBoards[i] = null;\n\n                        _this14.sendGTPCommand(controller, command('name'));\n                        _this14.sendGTPCommand(controller, command('version'));\n                        _this14.sendGTPCommand(controller, command('protocol_version'));\n                        _this14.sendGTPCommand(controller, command('list_commands'), function (_ref26) {\n                            var response = _ref26.response;\n\n                            engineCommands[i] = response.content.split('\\n');\n                        });\n\n                        controller.on('stderr', function (_ref27) {\n                            var content = _ref27.content;\n\n                            _this14.setState(function (_ref28) {\n                                var consoleLog = _ref28.consoleLog;\n                                return {\n                                    consoleLog: [].concat(_toConsumableArray(consoleLog), [[i === 0 ? 1 : -1, controller.name, null, new gtp.Response(null, content, false, true)]])\n                                };\n                            });\n                        });\n\n                        _this14.setState({ engineCommands: engineCommands });\n                    } catch (err) {\n                        _this14.attachedEngineControllers[i] = null;\n                        engines[i] = null;\n                    }\n                }\n            };\n\n            for (var i = 0; i < attachedEngines.length; i++) {\n                _loop4(i);\n            }\n\n            this.setState({ attachedEngines: engines });\n            this.syncEngines();\n        }\n    }, {\n        key: 'detachEngines',\n        value: function detachEngines() {}\n    }, {\n        key: 'suspendEngines',\n        value: function suspendEngines() {\n            var _iteratorNormalCompletion7 = true;\n            var _didIteratorError7 = false;\n            var _iteratorError7 = undefined;\n\n            try {\n                for (var _iterator7 = this.attachedEngineControllers[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n                    var controller = _step7.value;\n\n                    if (controller != null) controller.stop();\n                }\n            } catch (err) {\n                _didIteratorError7 = true;\n                _iteratorError7 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion7 && _iterator7.return) {\n                        _iterator7.return();\n                    }\n                } finally {\n                    if (_didIteratorError7) {\n                        throw _iteratorError7;\n                    }\n                }\n            }\n\n            this.engineBoards = [null, null];\n        }\n    }, {\n        key: 'sendGTPCommand',\n        value: function sendGTPCommand(controller, command) {\n            var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : helper.noop;\n        }\n    }, {\n        key: 'syncEngines',\n        value: function syncEngines() {\n            var _ref29 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref29$passPlayer = _ref29.passPlayer,\n                passPlayer = _ref29$passPlayer === undefined ? null : _ref29$passPlayer;\n        }\n    }, {\n        key: 'startGeneratingMoves',\n        value: function startGeneratingMoves() {\n            var _ref30 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref30$passPlayer = _ref30.passPlayer,\n                passPlayer = _ref30$passPlayer === undefined ? null : _ref30$passPlayer,\n                _ref30$followUp = _ref30.followUp,\n                followUp = _ref30$followUp === undefined ? false : _ref30$followUp;\n        }\n    }, {\n        key: 'stopGeneratingMoves',\n        value: function stopGeneratingMoves() {}\n\n        // Render\n\n    }, {\n        key: 'render',\n        value: function render(_, state) {\n            // Calculate some inferred values\n\n            var rootTree = gametree.getRoot.apply(gametree, _toConsumableArray(state.treePosition));\n            var scoreBoard = void 0,\n                areaMap = void 0;\n\n            if (['scoring', 'estimator'].includes(state.mode)) {\n                // Calculate area map\n\n                scoreBoard = gametree.getBoard.apply(gametree, _toConsumableArray(state.treePosition)).clone();\n\n                var _iteratorNormalCompletion8 = true;\n                var _didIteratorError8 = false;\n                var _iteratorError8 = undefined;\n\n                try {\n                    for (var _iterator8 = state.deadStones[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n                        var vertex = _step8.value;\n\n                        var sign = scoreBoard.get(vertex);\n                        if (sign === 0) continue;\n\n                        scoreBoard.captures[sign > 0 ? 1 : 0]++;\n                        scoreBoard.set(vertex, 0);\n                    }\n                } catch (err) {\n                    _didIteratorError8 = true;\n                    _iteratorError8 = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion8 && _iterator8.return) {\n                            _iterator8.return();\n                        }\n                    } finally {\n                        if (_didIteratorError8) {\n                            throw _iteratorError8;\n                        }\n                    }\n                }\n\n                areaMap = state.mode === 'estimator' ? scoreBoard.getAreaEstimateMap() : scoreBoard.getAreaMap();\n            }\n\n            this.inferredState = {\n                showSidebar: state.showGameGraph || state.showCommentBox,\n                showLeftSidebar: state.showConsole,\n                rootTree: rootTree,\n                gameIndex: state.gameTrees.indexOf(rootTree),\n                gameInfo: this.getGameInfo(rootTree),\n                currentPlayer: this.getPlayer.apply(this, _toConsumableArray(state.treePosition)),\n                scoreBoard: scoreBoard,\n                areaMap: areaMap\n            };\n\n            state = Object.assign(state, this.inferredState);\n\n            return h('section', {\n                class: classNames(_defineProperty({\n                    leftsidebar: state.showLeftSidebar,\n                    sidebar: state.showSidebar\n                }, state.mode, true))\n            }, h(ThemeManager), h(MainView, state), h(LeftSidebar, state), h(Sidebar, state), h(DrawerManager, state), h(InputBox, {\n                text: state.inputBoxText,\n                show: state.showInputBox,\n                onSubmit: state.onInputBoxSubmit,\n                onCancel: state.onInputBoxCancel\n            }), h(BusyScreen, { show: state.busy }), h(InfoOverlay, { text: state.infoOverlayText, show: state.showInfoOverlay }));\n        }\n    }]);\n\n    return App;\n}(Component);\n\n// Render\n\nrender(h(App), document.body);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(10)))\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * This is a modified version of marked v0.3.7 for Sabaki\n */\n\n/**\n * marked - a markdown parser\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n;(function () {\n\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^\\n+/,\n    code: noop,\n    fences: noop,\n    hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n    heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n    nptable: noop,\n    lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n    blockquote: /^( *>[^\\n]+(\\n(?!def)[^\\n]+)*\\n*)+/,\n    list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n    html: /^ *(?:comment *(?:\\n|\\s*$)|closed *(?:\\n{2,}|\\s*$)|closing *(?:\\n{2,}|\\s*$))/,\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n    table: noop,\n    paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n    text: /^[^\\n]+/\n  };\n\n  block.bullet = /(?:[*+-]|\\d+\\.)/;\n  block.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\n  block.item = replace(block.item, 'gm')(/bull/g, block.bullet)();\n\n  block.list = replace(block.list)(/bull/g, block.bullet)('hr', '\\\\n+(?=\\\\1?(?:[-*_] *){3,}(?:\\\\n+|$))')('def', '\\\\n+(?=' + block.def.source + ')')();\n\n  block.blockquote = replace(block.blockquote)('def', block.def)();\n\n  block._tag = '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code' + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo' + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|[^\\\\w\\\\s@]*@)\\\\b';\n\n  block.html = replace(block.html)('comment', /<!--[\\s\\S]*?-->/)('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)(/tag/g, block._tag)();\n\n  block.paragraph = replace(block.paragraph)('hr', block.hr)('heading', block.heading)('lheading', block.lheading)('blockquote', block.blockquote)('tag', '<' + block._tag)('def', block.def)();\n\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge({}, block);\n\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge({}, block.normal, {\n    fences: /^ *(`{3,}|~{3,})[ \\.]*(\\S+)? *\\n([\\s\\S]*?)\\s*\\1 *(?:\\n+|$)/,\n    paragraph: /^/,\n    heading: /^ *(#{1,6}) +([^\\n]+?) *#* *(?:\\n+|$)/\n  });\n\n  block.gfm.paragraph = replace(block.paragraph)('(?!', '(?!' + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|' + block.list.source.replace('\\\\1', '\\\\3') + '|')();\n\n  /**\n   * GFM + Tables Block Grammar\n   */\n\n  block.tables = merge({}, block.gfm, {\n    nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n    table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n  });\n\n  /**\n   * Block Lexer\n   */\n\n  function Lexer(options) {\n    this.tokens = [];\n    this.tokens.links = {};\n    this.options = options || marked.defaults;\n    this.rules = block.normal;\n\n    if (this.options.gfm) {\n      if (this.options.tables) {\n        this.rules = block.tables;\n      } else {\n        this.rules = block.gfm;\n      }\n    }\n  }\n\n  /**\n   * Expose Block Rules\n   */\n\n  Lexer.rules = block;\n\n  /**\n   * Static Lex Method\n   */\n\n  Lexer.lex = function (src, options) {\n    var lexer = new Lexer(options);\n    return lexer.lex(src);\n  };\n\n  /**\n   * Preprocessing\n   */\n\n  Lexer.prototype.lex = function (src) {\n    src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ').replace(/\\u00a0/g, ' ').replace(/\\u2424/g, '\\n');\n\n    return this.token(src, true);\n  };\n\n  /**\n   * Lexing\n   */\n\n  Lexer.prototype.token = function (src, top, bq) {\n    var src = src.replace(/^ +$/gm, ''),\n        next,\n        loose,\n        cap,\n        bull,\n        b,\n        item,\n        space,\n        i,\n        l;\n\n    while (src) {\n      // newline\n      if (cap = this.rules.newline.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (cap[0].length > 1) {\n          this.tokens.push({\n            type: 'space'\n          });\n        }\n      }\n\n      // code\n      if (cap = this.rules.code.exec(src)) {\n        src = src.substring(cap[0].length);\n        cap = cap[0].replace(/^ {4}/gm, '');\n        this.tokens.push({\n          type: 'code',\n          text: !this.options.pedantic ? cap.replace(/\\n+$/, '') : cap\n        });\n        continue;\n      }\n\n      // fences (gfm)\n      if (cap = this.rules.fences.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'code',\n          lang: cap[2],\n          text: cap[3] || ''\n        });\n        continue;\n      }\n\n      // heading\n      if (cap = this.rules.heading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[1].length,\n          text: cap[2]\n        });\n        continue;\n      }\n\n      // table no leading pipe (gfm)\n      if (top && (cap = this.rules.nptable.exec(src))) {\n        src = src.substring(cap[0].length);\n\n        item = {\n          type: 'table',\n          header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3].replace(/\\n$/, '').split('\\n')\n        };\n\n        for (i = 0; i < item.align.length; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        for (i = 0; i < item.cells.length; i++) {\n          item.cells[i] = item.cells[i].split(/ *\\| */);\n        }\n\n        this.tokens.push(item);\n\n        continue;\n      }\n\n      // lheading\n      if (cap = this.rules.lheading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[2] === '=' ? 1 : 2,\n          text: cap[1]\n        });\n        continue;\n      }\n\n      // hr\n      if (cap = this.rules.hr.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'hr'\n        });\n        continue;\n      }\n\n      // blockquote\n      if (cap = this.rules.blockquote.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        this.tokens.push({\n          type: 'blockquote_start'\n        });\n\n        cap = cap[0].replace(/^ *> ?/gm, '');\n\n        // Pass `top` to keep the current\n        // \"toplevel\" state. This is exactly\n        // how markdown.pl works.\n        this.token(cap, top, true);\n\n        this.tokens.push({\n          type: 'blockquote_end'\n        });\n\n        continue;\n      }\n\n      // list\n      if (cap = this.rules.list.exec(src)) {\n        src = src.substring(cap[0].length);\n        bull = cap[2];\n\n        this.tokens.push({\n          type: 'list_start',\n          ordered: bull.length > 1\n        });\n\n        // Get each top-level item.\n        cap = cap[0].match(this.rules.item);\n\n        next = false;\n        l = cap.length;\n        i = 0;\n\n        for (; i < l; i++) {\n          item = cap[i];\n\n          // Remove the list item's bullet\n          // so it is seen as the next token.\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n\n          // Outdent whatever the\n          // list item contains. Hacky.\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          }\n\n          // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n          if (this.options.smartLists && i !== l - 1) {\n            b = block.bullet.exec(cap[i + 1])[0];\n            if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n              src = cap.slice(i + 1).join('\\n') + src;\n              i = l - 1;\n            }\n          }\n\n          // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          this.tokens.push({\n            type: loose ? 'loose_item_start' : 'list_item_start'\n          });\n\n          // Recurse.\n          this.token(item, false, bq);\n\n          this.tokens.push({\n            type: 'list_item_end'\n          });\n        }\n\n        this.tokens.push({\n          type: 'list_end'\n        });\n\n        continue;\n      }\n\n      // html\n      if (cap = this.rules.html.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: cap[0]\n        });\n        continue;\n      }\n\n      // def\n      if (!bq && top && (cap = this.rules.def.exec(src))) {\n        src = src.substring(cap[0].length);\n        this.tokens.links[cap[1].toLowerCase()] = {\n          href: cap[2],\n          title: cap[3]\n        };\n        continue;\n      }\n\n      // table (gfm)\n      if (top && (cap = this.rules.table.exec(src))) {\n        src = src.substring(cap[0].length);\n\n        item = {\n          type: 'table',\n          header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n        };\n\n        for (i = 0; i < item.align.length; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        for (i = 0; i < item.cells.length; i++) {\n          item.cells[i] = item.cells[i].replace(/^ *\\| *| *\\| *$/g, '').split(/ *\\| */);\n        }\n\n        this.tokens.push(item);\n\n        continue;\n      }\n\n      // top-level paragraph\n      if (top && (cap = this.rules.paragraph.exec(src))) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'paragraph',\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        });\n        continue;\n      }\n\n      // text\n      if (cap = this.rules.text.exec(src)) {\n        // Top-level should never reach here.\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'text',\n          text: cap[0]\n        });\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return this.tokens;\n  };\n\n  /**\n   * Inline-Level Grammar\n   */\n\n  var inline = {\n    escape: noop,\n    autolink: noop,\n    url: noop,\n    tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n    link: /^!?\\[(inside)\\]\\(href\\)/,\n    reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n    nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n    strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n    em: /^\\b_((?:[^_]|__)+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n    code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n    br: /^ {2,}\\n(?!\\s*$)/,\n    del: noop,\n    text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n  };\n\n  inline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\n  inline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n\n  inline.link = replace(inline.link)('inside', inline._inside)('href', inline._href)();\n\n  inline.reflink = replace(inline.reflink)('inside', inline._inside)();\n\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge({}, inline);\n\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge({}, inline.normal, {\n    strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n  });\n\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge({}, inline.normal);\n\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge({}, inline.gfm, {\n    br: replace(inline.br)('{2,}', '*')(),\n    text: replace(inline.gfm.text)('{2,}', '*')()\n  });\n\n  /**\n   * Inline Lexer & Compiler\n   */\n\n  function InlineLexer(links, options) {\n    this.options = options || marked.defaults;\n    this.links = links;\n    this.rules = inline.normal;\n    this.renderer = this.options.renderer || new Renderer();\n    this.renderer.options = this.options;\n\n    if (!this.links) {\n      throw new Error('Tokens array requires a `links` property.');\n    }\n\n    if (this.options.gfm) {\n      if (this.options.breaks) {\n        this.rules = inline.breaks;\n      } else {\n        this.rules = inline.gfm;\n      }\n    } else if (this.options.pedantic) {\n      this.rules = inline.pedantic;\n    }\n  }\n\n  /**\n   * Expose Inline Rules\n   */\n\n  InlineLexer.rules = inline;\n\n  /**\n   * Static Lexing/Compiling Method\n   */\n\n  InlineLexer.output = function (src, links, options) {\n    var inline = new InlineLexer(links, options);\n    return inline.output(src);\n  };\n\n  /**\n   * Lexing/Compiling\n   */\n\n  InlineLexer.prototype.output = function (src) {\n    var out = '',\n        link,\n        text,\n        href,\n        cap;\n\n    while (src) {\n      // escape\n      if (cap = this.rules.escape.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += cap[1];\n        continue;\n      }\n\n      // autolink\n      if (cap = this.rules.autolink.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (cap[2] === '@') {\n          text = cap[1].charAt(6) === ':' ? this.mangle(cap[1].substring(7)) : this.mangle(cap[1]);\n          href = this.mangle('mailto:') + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n        out += this.renderer.link(href, null, text);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.inLink && (cap = this.rules.url.exec(src))) {\n        src = src.substring(cap[0].length);\n        text = escape(cap[1]);\n        href = text;\n        out += this.renderer.link(href, null, text);\n        continue;\n      }\n\n      // tag\n      if (cap = this.rules.tag.exec(src)) {\n        if (!this.inLink && /^<a /i.test(cap[0])) {\n          this.inLink = true;\n        } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.inLink = false;\n        }\n        src = src.substring(cap[0].length);\n        out += this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];\n        continue;\n      }\n\n      // link\n      if (cap = this.rules.link.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.inLink = true;\n        out += this.outputLink(cap, {\n          href: cap[2],\n          title: cap[3]\n        });\n        this.inLink = false;\n        continue;\n      }\n\n      // reflink, nolink\n      if ((cap = this.rules.reflink.exec(src)) || (cap = this.rules.nolink.exec(src))) {\n        src = src.substring(cap[0].length);\n        link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = this.links[link.toLowerCase()];\n        if (!link || !link.href) {\n          out += cap[0].charAt(0);\n          src = cap[0].substring(1) + src;\n          continue;\n        }\n        this.inLink = true;\n        out += this.outputLink(cap, link);\n        this.inLink = false;\n        continue;\n      }\n\n      // strong\n      if (cap = this.rules.strong.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.strong(this.output(cap[2] || cap[1]));\n        continue;\n      }\n\n      // em\n      if (cap = this.rules.em.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.em(this.output(cap[2] || cap[1]));\n        continue;\n      }\n\n      // code\n      if (cap = this.rules.code.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.codespan(escape(cap[2], true));\n        continue;\n      }\n\n      // br\n      if (cap = this.rules.br.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.br();\n        continue;\n      }\n\n      // del (gfm)\n      if (cap = this.rules.del.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.del(this.output(cap[1]));\n        continue;\n      }\n\n      // text\n      if (cap = this.rules.text.exec(src)) {\n        var helper =  true ? __webpack_require__(1) : window.helper;\n        src = src.substring(cap[0].length);\n        out += this.renderer.text(helper.htmlify(escape(this.smartypants(cap[0]))));\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return out;\n  };\n\n  /**\n   * Compile Link\n   */\n\n  InlineLexer.prototype.outputLink = function (cap, link) {\n    var href = escape(link.href),\n        title = link.title ? escape(link.title) : null;\n\n    return cap[0].charAt(0) !== '!' ? this.renderer.link(href, title, this.output(cap[1])) : this.renderer.image(href, title, escape(cap[1]));\n  };\n\n  /**\n   * Smartypants Transformations\n   */\n\n  InlineLexer.prototype.smartypants = function (text) {\n    if (!this.options.smartypants) return text;\n    return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201C')\n    // closing doubles\n    .replace(/\"/g, '\\u201D')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n  };\n\n  /**\n   * Mangle Links\n   */\n\n  InlineLexer.prototype.mangle = function (text) {\n    if (!this.options.mangle) return text;\n    var out = '',\n        l = text.length,\n        i = 0,\n        ch;\n\n    for (; i < l; i++) {\n      ch = text.charCodeAt(i);\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  };\n\n  /**\n   * Renderer\n   */\n\n  function Renderer(options) {\n    this.options = options || {};\n  }\n\n  Renderer.prototype.code = function (code, lang, escaped) {\n    if (this.options.highlight) {\n      var out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>' + (escaped ? code : escape(code, true)) + '\\n</code></pre>';\n    }\n\n    return '<pre><code class=\"' + this.options.langPrefix + escape(lang, true) + '\">' + (escaped ? code : escape(code, true)) + '\\n</code></pre>\\n';\n  };\n\n  Renderer.prototype.blockquote = function (quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  };\n\n  Renderer.prototype.html = function (html) {\n    return html;\n  };\n\n  Renderer.prototype.heading = function (text, level, raw) {\n    return '<h' + level + ' id=\"' + this.options.headerPrefix + raw.toLowerCase().replace(/[^\\w]+/g, '-') + '\">' + text + '</h' + level + '>\\n';\n  };\n\n  Renderer.prototype.hr = function () {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  };\n\n  Renderer.prototype.list = function (body, ordered) {\n    var type = ordered ? 'ol' : 'ul';\n    return '<' + type + '>\\n' + body + '</' + type + '>\\n';\n  };\n\n  Renderer.prototype.listitem = function (text) {\n    return '<li>' + text + '</li>\\n';\n  };\n\n  Renderer.prototype.paragraph = function (text) {\n    return '<p>' + text + '</p>\\n';\n  };\n\n  Renderer.prototype.table = function (header, body) {\n    return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + '<tbody>\\n' + body + '</tbody>\\n' + '</table>\\n';\n  };\n\n  Renderer.prototype.tablerow = function (content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  };\n\n  Renderer.prototype.tablecell = function (content, flags) {\n    var type = flags.header ? 'th' : 'td';\n    var tag = flags.align ? '<' + type + ' style=\"text-align:' + flags.align + '\">' : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  };\n\n  // span level renderer\n  Renderer.prototype.strong = function (text) {\n    return '<strong>' + text + '</strong>';\n  };\n\n  Renderer.prototype.em = function (text) {\n    return '<em>' + text + '</em>';\n  };\n\n  Renderer.prototype.codespan = function (text) {\n    return '<code>' + text + '</code>';\n  };\n\n  Renderer.prototype.br = function () {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  };\n\n  Renderer.prototype.del = function (text) {\n    return '<del>' + text + '</del>';\n  };\n\n  Renderer.prototype.link = function (href, title, text) {\n    if (this.options.sanitize) {\n      try {\n        var prot = decodeURIComponent(unescape(href)).replace(/[^\\w:]/g, '').toLowerCase();\n      } catch (e) {\n        return '';\n      }\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return '';\n      }\n    }\n    var out = '<a href=\"' + href + '\" class=\"external\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  };\n\n  Renderer.prototype.image = function (href, title, text) {\n    return this.link(href, title, text);\n  };\n\n  Renderer.prototype.text = function (text) {\n    return text;\n  };\n\n  /**\n   * Parsing & Compiling\n   */\n\n  function Parser(options) {\n    this.tokens = [];\n    this.token = null;\n    this.options = options || marked.defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n  }\n\n  /**\n   * Static Parse Method\n   */\n\n  Parser.parse = function (src, options, renderer) {\n    var parser = new Parser(options, renderer);\n    return parser.parse(src);\n  };\n\n  /**\n   * Parse Loop\n   */\n\n  Parser.prototype.parse = function (src) {\n    this.inline = new InlineLexer(src.links, this.options, this.renderer);\n    this.tokens = src.reverse();\n\n    var out = '';\n    while (this.next()) {\n      out += this.tok();\n    }\n\n    return out;\n  };\n\n  /**\n   * Next Token\n   */\n\n  Parser.prototype.next = function () {\n    return this.token = this.tokens.pop();\n  };\n\n  /**\n   * Preview Next Token\n   */\n\n  Parser.prototype.peek = function () {\n    return this.tokens[this.tokens.length - 1] || 0;\n  };\n\n  /**\n   * Parse Text Tokens\n   */\n\n  Parser.prototype.parseText = function () {\n    var body = this.token.text;\n\n    while (this.peek().type === 'text') {\n      body += '\\n' + this.next().text;\n    }\n\n    return this.inline.output(body);\n  };\n\n  /**\n   * Parse Current Token\n   */\n\n  Parser.prototype.tok = function () {\n    switch (this.token.type) {\n      case 'space':\n        {\n          return '';\n        }\n      case 'hr':\n        {\n          return this.renderer.hr();\n        }\n      case 'heading':\n        {\n          return this.renderer.heading(this.inline.output(this.token.text), this.token.depth, this.token.text);\n        }\n      case 'code':\n        {\n          return this.renderer.code(this.token.text, this.token.lang, this.token.escaped);\n        }\n      case 'table':\n        {\n          var header = '',\n              body = '',\n              i,\n              row,\n              cell,\n              flags,\n              j;\n\n          // header\n          cell = '';\n          for (i = 0; i < this.token.header.length; i++) {\n            flags = { header: true, align: this.token.align[i] };\n            cell += this.renderer.tablecell(this.inline.output(this.token.header[i]), { header: true, align: this.token.align[i] });\n          }\n          header += this.renderer.tablerow(cell);\n\n          for (i = 0; i < this.token.cells.length; i++) {\n            row = this.token.cells[i];\n\n            cell = '';\n            for (j = 0; j < row.length; j++) {\n              cell += this.renderer.tablecell(this.inline.output(row[j]), { header: false, align: this.token.align[j] });\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n          return this.renderer.table(header, body);\n        }\n      case 'blockquote_start':\n        {\n          var body = '';\n\n          while (this.next().type !== 'blockquote_end') {\n            body += this.tok();\n          }\n\n          return this.renderer.blockquote(body);\n        }\n      case 'list_start':\n        {\n          var body = '',\n              ordered = this.token.ordered;\n\n          while (this.next().type !== 'list_end') {\n            body += this.tok();\n          }\n\n          return this.renderer.list(body, ordered);\n        }\n      case 'list_item_start':\n        {\n          var body = '';\n\n          while (this.next().type !== 'list_item_end') {\n            body += this.token.type === 'text' ? this.parseText() : this.tok();\n          }\n\n          return this.renderer.listitem(body);\n        }\n      case 'loose_item_start':\n        {\n          var body = '';\n\n          while (this.next().type !== 'list_item_end') {\n            body += this.tok();\n          }\n\n          return this.renderer.listitem(body);\n        }\n      case 'html':\n        {\n          var html = !this.token.pre && !this.options.pedantic ? this.inline.output(this.token.text) : this.token.text;\n          return this.renderer.html(html);\n        }\n      case 'paragraph':\n        {\n          return this.renderer.paragraph(this.inline.output(this.token.text));\n        }\n      case 'text':\n        {\n          return this.renderer.paragraph(this.parseText());\n        }\n    }\n  };\n\n  /**\n   * Helpers\n   */\n\n  function escape(html, encode) {\n    return html.replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;');\n  }\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities \n    return html.replace(/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/g, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n      return '';\n    });\n  }\n\n  function replace(regex, opt) {\n    regex = regex.source;\n    opt = opt || '';\n    return function self(name, val) {\n      if (!name) return new RegExp(regex, opt);\n      val = val.source || val;\n      val = val.replace(/(^|[^\\[])\\^/g, '$1');\n      regex = regex.replace(name, val);\n      return self;\n    };\n  }\n\n  function noop() {}\n  noop.exec = noop;\n\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    if (callback || typeof opt === 'function') {\n      if (!callback) {\n        callback = opt;\n        opt = null;\n      }\n\n      opt = merge({}, marked.defaults, opt || {});\n\n      var highlight = opt.highlight,\n          tokens,\n          pending,\n          i = 0;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      pending = tokens.length;\n\n      var done = function done(err) {\n        if (err) {\n          opt.highlight = highlight;\n          return callback(err);\n        }\n\n        var out;\n\n        try {\n          out = Parser.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n\n        opt.highlight = highlight;\n\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n\n      if (!pending) return done();\n\n      for (; i < tokens.length; i++) {\n        (function (token) {\n          if (token.type !== 'code') {\n            return --pending || done();\n          }\n          return highlight(token.text, token.lang, function (err, code) {\n            if (err) return done(err);\n            if (code == null || code === token.text) {\n              return --pending || done();\n            }\n            token.text = code;\n            token.escaped = true;\n            --pending || done();\n          });\n        })(tokens[i]);\n      }\n\n      return;\n    }\n    try {\n      if (opt) opt = merge({}, marked.defaults, opt);\n      return Parser.parse(Lexer.lex(src, opt), opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n      if ((opt || marked.defaults).silent) {\n        return '<p>An error occured:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n      throw e;\n    }\n  }\n\n  /**\n   * Options\n   */\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    return marked;\n  };\n\n  marked.defaults = {\n    gfm: true,\n    tables: false,\n    breaks: true,\n    pedantic: false,\n    sanitize: true,\n    sanitizer: null,\n    mangle: true,\n    smartLists: true,\n    silent: false,\n    highlight: null,\n    langPrefix: 'lang-',\n    smartypants: true,\n    headerPrefix: 'commentsheader-',\n    renderer: new Renderer(),\n    xhtml: true\n  };\n\n  /**\n   * Expose\n   */\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n\n  marked.Renderer = Renderer;\n\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n\n  marked.InlineLexer = InlineLexer;\n  marked.inlineLexer = InlineLexer.output;\n\n  marked.parse = marked;\n\n  if (typeof module !== 'undefined' && ( false ? 'undefined' : _typeof(exports)) === 'object') {\n    module.exports = marked;\n  } else if (true) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return marked;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {\n    this.marked = marked;\n  }\n}).call(function () {\n  return this || (typeof window !== 'undefined' ? window : global);\n}());\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (input) {\n\tvar el = document.createElement('textarea');\n\n\tel.value = input;\n\n\t// Prevent keyboard from showing on mobile\n\tel.setAttribute('readonly', '');\n\n\tel.style.contain = 'strict';\n\tel.style.position = 'absolute';\n\tel.style.left = '-9999px';\n\tel.style.fontSize = '12pt'; // Prevent zooming on iOS\n\n\tvar selection = document.getSelection();\n\tvar originalRange = false;\n\tif (selection.rangeCount > 0) {\n\t\toriginalRange = selection.getRangeAt(0);\n\t}\n\n\tdocument.body.appendChild(el);\n\tel.select();\n\n\t// Explicit selection workaround for iOS\n\tel.selectionStart = 0;\n\tel.selectionEnd = input.length;\n\n\tvar success = false;\n\ttry {\n\t\tsuccess = document.execCommand('copy');\n\t} catch (err) {}\n\n\tdocument.body.removeChild(el);\n\n\tif (originalRange) {\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(originalRange);\n\t}\n\n\treturn success;\n};\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar EventEmitter = __webpack_require__(18);\nvar fs = __webpack_require__(5);\nvar path = __webpack_require__(9);\n\nvar _require = __webpack_require__(2),\n    app = _require.app;\n\nvar settings = {};\n\nvar themesDict = null;\n\nvar defaults = {\n    'app.startup_check_updates': true,\n    'app.startup_check_updates_delay': 3000,\n    'app.loadgame_delay': 100,\n    'app.hide_busy_delay': 200,\n    'app.zoom_factor': 1,\n    'autoplay.sec_per_move': 1,\n    'autoplay.max_sec_per_move': 99,\n    'autoscroll.max_interval': 200,\n    'autoscroll.min_interval': 50,\n    'autoscroll.diff': 10,\n    'cleanmarkup.cross': true,\n    'cleanmarkup.triangle': true,\n    'cleanmarkup.square': true,\n    'cleanmarkup.circle': true,\n    'cleanmarkup.line': true,\n    'cleanmarkup.arrow': true,\n    'cleanmarkup.label': true,\n    'cleanmarkup.comments': false,\n    'cleanmarkup.annotations': false,\n    'cleanmarkup.hotspots': false,\n    'comments.show_move_interpretation': true,\n    'console.blocked_commands': ['boardsize', 'clear_board', 'play', 'genmove', 'undo', 'fixed_handicap', 'place_free_handicap', 'set_free_handicap', 'loadsgf', 'komi'],\n    'console.max_history_count': 100,\n    'debug.dev_tools': false,\n    'edit.click_currentvertex_to_remove': true,\n    'edit.show_removenode_warning': true,\n    'edit.show_removeothervariations_warning': true,\n    'edit.undo_delay': 100,\n    'engines.list': [],\n    'file.show_reload_warning': true,\n    'find.delay': 100,\n    'game.default_board_size': 19,\n    'game.default_komi': 6.5,\n    'game.default_handicap': 0,\n    'game.goto_end_after_loading': false,\n    'game.navigation_sensitivity': 40,\n    'game.show_ko_warning': true,\n    'game.show_suicide_warning': true,\n    'gamechooser.show_delay': 100,\n    'gamechooser.thumbnail_size': 153,\n    'graph.delay': 200,\n    'graph.edge_color': '#eee',\n    'graph.edge_inactive_color': '#777',\n    'graph.edge_size': 2,\n    'graph.edge_inactive_size': 1,\n    'graph.grid_size': 26,\n    'graph.node_active_color': '#f76047',\n    'graph.node_bookmark_color': '#c678dd',\n    'graph.node_color': '#eee',\n    'graph.node_inactive_color': '#777',\n    'graph.node_comment_color': '#6bb1ff',\n    'graph.node_inactive_bookmark_color': '#643d6f',\n    'graph.node_inactive_comment_color': '#365980',\n    'graph.node_size': 6,\n    'gtp.attach_delay': 300,\n    'gtp.move_delay': 300,\n    'score.estimator_iterations': 30,\n    'setting.overwrite.v0.16.0': ['console.blocked_commands', 'window.minheight'],\n    'setting.overwrite.v0.17.1': ['graph.collapse_tokens_count'],\n    'setting.overwrite.v0.19.0_1': ['window.minheight', 'graph.delay'],\n    'setting.overwrite.v0.19.1': ['app.startup_check_updates_delay'],\n    'setting.overwrite.v0.19.3': ['graph.grid_size', 'graph.node_size'],\n    'setting.overwrite.v0.30.0-beta': ['graph.delay', 'console.max_history_count', 'window.minheight', 'window.minwidth'],\n    'scoring.method': 'territory',\n    'sgf.comment_properties': ['C', 'N', 'UC', 'GW', 'DM', 'GB', 'BM', 'TE', 'DO', 'IT'],\n    'sound.capture_delay_max': 500,\n    'sound.capture_delay_min': 300,\n    'sound.enable': true,\n    'theme.custom_whitestones': null,\n    'theme.custom_blackstones': null,\n    'theme.custom_background': null,\n    'theme.current': null,\n    'view.properties_height': 50,\n    'view.properties_minheight': 20,\n    'view.animated_stone_placement': true,\n    'view.fuzzy_stone_placement': true,\n    'view.show_menubar': true,\n    'view.show_leftsidebar': false,\n    'view.show_comments': true,\n    'view.show_coordinates': false,\n    'view.show_graph': true,\n    'view.show_move_colorization': true,\n    'view.show_next_moves': true,\n    'view.show_siblings': true,\n    'view.leftsidebar_width': 250,\n    'view.leftsidebar_minwidth': 100,\n    'view.sidebar_width': 280,\n    'view.sidebar_minwidth': 100,\n    'infooverlay.duration': 2000,\n    'window.height': 604,\n    'window.minheight': 440,\n    'window.minwidth': 526,\n    'window.width': 564\n};\n\nexports.events = new EventEmitter();\nexports.events.setMaxListeners(100);\n\nexports.load = function () {\n    if (localStorage.settings != null) {\n        settings = JSON.parse(localStorage.settings);\n    } else {\n        settings = {};\n    }\n\n    // Load default settings\n\n    for (var key in defaults) {\n        if (key in settings) continue;\n        settings[key] = defaults[key];\n    }\n\n    // Overwrite settings\n\n    for (var overwriteKey in settings) {\n        if (overwriteKey.indexOf('setting.overwrite.') != 0) continue;\n\n        var overwrites = settings[overwriteKey];\n        if (!overwrites.length) continue;\n\n        for (var i = 0; i < overwrites.length; i++) {\n            settings[overwrites[i]] = defaults[overwrites[i]];\n        }\n\n        settings[overwriteKey] = [];\n    }\n\n    return exports.save();\n};\n\nexports.loadThemes = function () {\n    return {};\n};\n\nexports.save = function () {\n    localStorage.settings = JSON.stringify(settings);\n    return exports;\n};\n\nexports.get = function (key) {\n    if (key in settings) return settings[key];\n    if (key in defaults) return defaults[key];\n    return null;\n};\n\nexports.set = function (key, value) {\n    settings[key] = value;\n    exports.save();\n    exports.events.emit('change', { key: key });\n    return exports;\n};\n\nexports.getThemes = function () {\n    if (themesDict == null) exports.loadThemes();\n    return themesDict;\n};\n\nexports.load();\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    render = _require.render;\n\nvar classNames = __webpack_require__(3);\n\nfunction hide() {\n    document.getElementById('popupmenu-overlay').remove();\n}\n\nfunction show(velement, x, y) {\n    var element = render(velement, document.body).childNodes[0];\n\n    var _element$getBoundingC = element.getBoundingClientRect(),\n        width = _element$getBoundingC.width,\n        height = _element$getBoundingC.height;\n\n    var _document$body$getBou = document.body.getBoundingClientRect(),\n        bodyWidth = _document$body$getBou.width,\n        bodyHeight = _document$body$getBou.height;\n\n    element.style.left = (x + width <= bodyWidth ? x : Math.max(0, x - width)) + 'px';\n    element.style.top = (y + height <= bodyHeight ? y : Math.max(0, y - height)) + 'px';\n}\n\nexports.buildFromTemplate = function (template) {\n    return {\n        popup: function popup(_, _ref) {\n            var x = _ref.x,\n                y = _ref.y;\n            return show(h('section', {\n                id: 'popupmenu-overlay',\n                onClick: function onClick() {\n                    return hide();\n                }\n            }, h('ul', { class: 'popupmenu' }, template.map(function (item) {\n                return h('li', {\n                    class: classNames(_defineProperty({\n                        checked: item.checked\n                    }, item.type, item.type)),\n                    onClick: function onClick() {\n                        return item.click && item.click();\n                    }\n                }, item.label && item.label.replace(/&/g, ''));\n            }))), x, y);\n        }\n    };\n};\n\nrender(h('style', {}, '\\n    #popupmenu-overlay {\\n        position: absolute;\\n        left: 0;\\n        top: 0;\\n        right: 0;\\n        bottom: 0;\\n        z-index: 1000;\\n    }\\n\\n    .popupmenu {\\n            position: absolute;\\n            padding: 3px 0;\\n            max-height: calc(100% - 6px);\\n            max-width: 100%;\\n            overflow: auto;\\n            background: rgba(0, 0, 0, .9);\\n            box-shadow: 0 5px 10px rgba(0, 0, 0, .5);\\n            color: white;\\n            list-style: none;\\n        }\\n        .popupmenu li:not(.separator) {\\n            position: relative;\\n            display: block;\\n            height: 1em;\\n            padding: 7px 30px;\\n            line-height: 1em;\\n        }\\n        .popupmenu li.checked::before {\\n            content: \\'\\';\\n            position: absolute;\\n            width: 1em;\\n            height: 1em;\\n            left: 9px;\\n            top: 7px;\\n            background: url(\\'./node_modules/octicons/build/svg/check.svg\\') left top/contain no-repeat;\\n            filter: invert(100%);\\n            -webkit-filter: invert(100%);\\n        }\\n        .popupmenu li.separator {\\n            height: 2px;\\n            margin: 3px 0;\\n            background: rgba(255, 255, 255, .3);\\n        }\\n        .popupmenu li:not(.separator):hover {\\n            background-color: #0050C0;\\n        }\\n        .popupmenu li:not(.separator):active {\\n            background-color: #0030A0;\\n    }\\n'), document.body);\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar Goban = __webpack_require__(30);\nvar PlayBar = __webpack_require__(31);\nvar EditBar = __webpack_require__(32);\nvar GuessBar = __webpack_require__(6);\nvar AutoplayBar = __webpack_require__(6);\nvar ScoringBar = __webpack_require__(33);\nvar FindBar = __webpack_require__(34);\n\nvar gametree = __webpack_require__(4);\n\nvar MainView = function (_Component) {\n    _inherits(MainView, _Component);\n\n    function MainView() {\n        _classCallCheck(this, MainView);\n\n        var _this = _possibleConstructorReturn(this, (MainView.__proto__ || Object.getPrototypeOf(MainView)).call(this));\n\n        _this.handleTogglePlayer = function () {\n            var _sabaki;\n\n            return (_sabaki = sabaki).setPlayer.apply(_sabaki, _toConsumableArray(_this.props.treePosition).concat([-_this.props.currentPlayer]));\n        };\n\n        _this.handleToolButtonClick = function (evt) {\n            sabaki.setState({ selectedTool: evt.tool });\n        };\n\n        _this.handleFindButtonClick = function (evt) {\n            return sabaki.findMove(evt.step, {\n                vertex: _this.props.findVertex,\n                text: _this.props.findText\n            });\n        };\n\n        _this.handleGobanResize = _this.handleGobanResize.bind(_this);\n        _this.handleGobanVertexClick = _this.handleGobanVertexClick.bind(_this);\n        _this.handleGobanLineDraw = _this.handleGobanLineDraw.bind(_this);\n        return _this;\n    }\n\n    _createClass(MainView, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            // Pressing shift should show crosshair cursor on Goban in edit mode\n\n            document.addEventListener('keydown', function (evt) {\n                if (evt.keyCode !== 17) return;\n\n                if (_this2.props.mode === 'edit') {\n                    _this2.setState({ gobanCrosshair: true });\n                }\n            });\n\n            document.addEventListener('keyup', function (evt) {\n                if (evt.keyCode !== 17) return;\n\n                if (_this2.props.mode === 'edit') {\n                    _this2.setState({ gobanCrosshair: false });\n                }\n            });\n        }\n    }, {\n        key: 'handleGobanResize',\n        value: function handleGobanResize() {\n            /*  Because of board rendering issues, we want the width\n                and the height of `<main>` to be even */\n\n            if (this.mainElement == null) return;\n\n            this.mainElement.style.width = '';\n            this.mainElement.style.height = '';\n\n            var _window$getComputedSt = window.getComputedStyle(this.mainElement),\n                width = _window$getComputedSt.width,\n                height = _window$getComputedSt.height;\n\n            width = parseFloat(width);\n            height = parseFloat(height);\n\n            if (width % 2 !== 0) width++;\n            if (height % 2 !== 0) height++;\n\n            this.setState({ width: width, height: height });\n        }\n    }, {\n        key: 'handleGobanVertexClick',\n        value: function handleGobanVertexClick(evt) {\n            sabaki.clickVertex(evt.vertex, evt);\n        }\n    }, {\n        key: 'handleGobanLineDraw',\n        value: function handleGobanLineDraw(evt) {\n            var _evt$line = _slicedToArray(evt.line, 2),\n                v1 = _evt$line[0],\n                v2 = _evt$line[1];\n\n            sabaki.useTool(this.props.selectedTool, v1, v2);\n            sabaki.editVertexData = null;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref, _ref2) {\n            var _this3 = this;\n\n            var mode = _ref.mode,\n                treePosition = _ref.treePosition,\n                rootTree = _ref.rootTree,\n                currentPlayer = _ref.currentPlayer,\n                gameInfo = _ref.gameInfo,\n                attachedEngines = _ref.attachedEngines,\n                deadStones = _ref.deadStones,\n                scoringMethod = _ref.scoringMethod,\n                scoreBoard = _ref.scoreBoard,\n                areaMap = _ref.areaMap,\n                blockedGuesses = _ref.blockedGuesses,\n                highlightVertices = _ref.highlightVertices,\n                showCoordinates = _ref.showCoordinates,\n                showMoveColorization = _ref.showMoveColorization,\n                showNextMoves = _ref.showNextMoves,\n                showSiblings = _ref.showSiblings,\n                fuzzyStonePlacement = _ref.fuzzyStonePlacement,\n                animatedStonePlacement = _ref.animatedStonePlacement,\n                animatedVertex = _ref.animatedVertex,\n                undoable = _ref.undoable,\n                undoText = _ref.undoText,\n                selectedTool = _ref.selectedTool,\n                findText = _ref.findText,\n                findVertex = _ref.findVertex,\n                showLeftSidebar = _ref.showLeftSidebar,\n                showSidebar = _ref.showSidebar,\n                sidebarWidth = _ref.sidebarWidth,\n                leftSidebarWidth = _ref.leftSidebarWidth;\n            var width = _ref2.width,\n                height = _ref2.height,\n                gobanCrosshair = _ref2.gobanCrosshair;\n\n            var _treePosition = _slicedToArray(treePosition, 2),\n                tree = _treePosition[0],\n                index = _treePosition[1];\n\n            var board = gametree.getBoard(tree, index);\n            var node = tree.nodes[index];\n            var komi = +gametree.getRootProperty(rootTree, 'KM', 0);\n            var paintMap = void 0;\n\n            if (['scoring', 'estimator'].includes(mode)) {\n                paintMap = areaMap;\n            } else if (mode === 'guess') {\n                paintMap = [].concat(_toConsumableArray(Array(board.height))).map(function (_) {\n                    return Array(board.width).fill(0);\n                });\n\n                var _iteratorNormalCompletion = true;\n                var _didIteratorError = false;\n                var _iteratorError = undefined;\n\n                try {\n                    for (var _iterator = blockedGuesses[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var _ref3 = _step.value;\n\n                        var _ref4 = _slicedToArray(_ref3, 2);\n\n                        var x = _ref4[0];\n                        var y = _ref4[1];\n\n                        paintMap[y][x] = 1;\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator.return) {\n                            _iterator.return();\n                        }\n                    } finally {\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n            }\n\n            return h('section', {\n                id: 'main',\n                style: {\n                    left: showLeftSidebar ? leftSidebarWidth : null,\n                    right: showSidebar ? sidebarWidth : null\n                }\n            }, h('main', {\n                ref: function ref(el) {\n                    return _this3.mainElement = el;\n                },\n                style: { width: width, height: height }\n            }, h(Goban, {\n                board: board,\n                highlightVertices: findVertex && mode === 'find' ? [findVertex] : highlightVertices,\n                paintMap: paintMap,\n                dimmedStones: ['scoring', 'estimator'].includes(mode) ? deadStones : [],\n\n                crosshair: gobanCrosshair,\n                showCoordinates: showCoordinates,\n                showMoveColorization: showMoveColorization,\n                showNextMoves: mode !== 'guess' && showNextMoves,\n                showSiblings: mode !== 'guess' && showSiblings,\n                fuzzyStonePlacement: fuzzyStonePlacement,\n                animatedStonePlacement: animatedStonePlacement,\n                animatedVertex: animatedVertex,\n\n                drawLineMode: mode === 'edit' && ['arrow', 'line'].includes(selectedTool) ? selectedTool : null,\n\n                onBeforeResize: this.handleGobanResize,\n                onVertexClick: this.handleGobanVertexClick,\n                onLineDraw: this.handleGobanLineDraw\n            })), h('section', { id: 'bar' }, h(PlayBar, {\n                mode: mode,\n                attachedEngines: attachedEngines,\n                playerNames: gameInfo.playerNames,\n                playerRanks: gameInfo.playerRanks,\n                playerCaptures: board.captures,\n                currentPlayer: currentPlayer,\n                showHotspot: 'HO' in node,\n                undoable: undoable,\n                undoText: undoText,\n                onCurrentPlayerClick: this.handleTogglePlayer\n            }), h(EditBar, {\n                mode: mode,\n                selectedTool: selectedTool,\n                onToolButtonClick: this.handleToolButtonClick\n            }), h(GuessBar, {\n                mode: mode,\n                treePosition: treePosition\n            }), h(AutoplayBar, {\n                mode: mode,\n                treePosition: treePosition\n            }), h(ScoringBar, {\n                type: 'scoring',\n                mode: mode,\n                method: scoringMethod,\n                scoreBoard: scoreBoard,\n                areaMap: areaMap,\n                komi: komi\n            }, 'Please select dead stones.'), h(ScoringBar, {\n                type: 'estimator',\n                mode: mode,\n                method: scoringMethod,\n                scoreBoard: scoreBoard,\n                areaMap: areaMap,\n                komi: komi\n            }, 'Toggle group status.'), h(FindBar, {\n                mode: mode,\n                findText: findText,\n                onButtonClick: this.handleFindButtonClick\n            })));\n        }\n    }]);\n\n    return MainView;\n}(Component);\n\nmodule.exports = MainView;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar helper = __webpack_require__(1);\n\nvar alpha = 'ABCDEFGHJKLMNOPQRSTUVWXYZ';\nvar range = function range(n) {\n    return [].concat(_toConsumableArray(Array(n))).map(function (_, i) {\n        return i;\n    });\n};\nvar random = function random(n) {\n    return Math.floor(Math.random() * n);\n};\n\nvar GobanVertex = function (_Component) {\n    _inherits(GobanVertex, _Component);\n\n    function GobanVertex() {\n        _classCallCheck(this, GobanVertex);\n\n        return _possibleConstructorReturn(this, (GobanVertex.__proto__ || Object.getPrototypeOf(GobanVertex)).apply(this, arguments));\n    }\n\n    _createClass(GobanVertex, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref) {\n            var sign = _ref.sign,\n                hoshi = _ref.hoshi,\n                shift = _ref.shift,\n                highlight = _ref.highlight,\n                paint = _ref.paint,\n                dimmed = _ref.dimmed,\n                animate = _ref.animate,\n                label = _ref.label,\n                markupType = _ref.markupType,\n                ghostTypes = _ref.ghostTypes;\n\n            return sign !== this.props.sign || highlight !== this.props.highlight || ghostTypes !== this.props.ghostTypes || markupType !== this.props.markupType || label !== this.props.label || shift !== this.props.shift || animate !== this.props.animate || paint !== this.props.paint || dimmed !== this.props.dimmed || hoshi !== this.props.hoshi;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref2) {\n            var _classes;\n\n            var _ref2$position = _slicedToArray(_ref2.position, 2),\n                x = _ref2$position[0],\n                y = _ref2$position[1],\n                shift = _ref2.shift,\n                random = _ref2.random,\n                sign = _ref2.sign,\n                highlight = _ref2.highlight,\n                paint = _ref2.paint,\n                dimmed = _ref2.dimmed,\n                hoshi = _ref2.hoshi,\n                animate = _ref2.animate,\n                markupType = _ref2.markupType,\n                label = _ref2.label,\n                ghostTypes = _ref2.ghostTypes,\n                _ref2$onMouseDown = _ref2.onMouseDown,\n                onMouseDown = _ref2$onMouseDown === undefined ? helper.noop : _ref2$onMouseDown,\n                _ref2$onMouseUp = _ref2.onMouseUp,\n                onMouseUp = _ref2$onMouseUp === undefined ? helper.noop : _ref2$onMouseUp,\n                _ref2$onMouseMove = _ref2.onMouseMove,\n                onMouseMove = _ref2$onMouseMove === undefined ? helper.noop : _ref2$onMouseMove;\n\n            var classes = (_classes = {}, _defineProperty(_classes, 'pos_' + x + '-' + y, true), _defineProperty(_classes, 'shift_' + shift, true), _defineProperty(_classes, 'random_' + random, true), _defineProperty(_classes, 'sign_' + sign, true), _defineProperty(_classes, 'paint_' + paint, !!paint), _defineProperty(_classes, markupType, !!markupType), _defineProperty(_classes, 'dimmed', dimmed), _defineProperty(_classes, 'hoshi', hoshi), _defineProperty(_classes, 'animate', animate), _defineProperty(_classes, 'smalllabel', label.length >= 3), _classes);\n\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = ghostTypes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var type = _step.value;\n\n                    classes[type] = true;\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            return h('li', {\n                'data-vertex': x + '-' + y,\n                class: classNames(classes),\n                onMouseDown: onMouseDown,\n                onMouseUp: onMouseUp,\n                onMouseMove: onMouseMove\n            }, h('div', { class: 'stone' }, h('img', { src: './img/goban/blank.svg' }), h('span', { title: label })), h('div', { class: 'paint' }), highlight && h('div', { class: 'highlight' }));\n        }\n    }]);\n\n    return GobanVertex;\n}(Component);\n\nvar GobanLine = function (_Component2) {\n    _inherits(GobanLine, _Component2);\n\n    function GobanLine() {\n        _classCallCheck(this, GobanLine);\n\n        return _possibleConstructorReturn(this, (GobanLine.__proto__ || Object.getPrototypeOf(GobanLine)).apply(this, arguments));\n    }\n\n    _createClass(GobanLine, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps) {\n            for (var i in nextProps) {\n                if (nextProps[i] !== this.props[i]) return true;\n            }return false;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref3) {\n            var _classNames;\n\n            var v1 = _ref3.v1,\n                v2 = _ref3.v2,\n                type = _ref3.type,\n                temporary = _ref3.temporary,\n                showCoordinates = _ref3.showCoordinates,\n                fieldSize = _ref3.fieldSize;\n\n            if (helper.vertexEquals(v1, v2)) return;\n\n            var _map = [v1, v2].map(function (v) {\n                return v.map(function (x) {\n                    return (showCoordinates ? x + 1 : x) * fieldSize;\n                });\n            }),\n                _map2 = _slicedToArray(_map, 2),\n                pos1 = _map2[0],\n                pos2 = _map2[1];\n\n            var _pos1$map = pos1.map(function (x, i) {\n                return pos2[i] - x;\n            }),\n                _pos1$map2 = _slicedToArray(_pos1$map, 2),\n                dx = _pos1$map2[0],\n                dy = _pos1$map2[1];\n\n            var _pos1$map3 = pos1.map(function (x, i) {\n                return (x + pos2[i] + fieldSize) / 2;\n            }),\n                _pos1$map4 = _slicedToArray(_pos1$map3, 2),\n                left = _pos1$map4[0],\n                top = _pos1$map4[1];\n\n            var angle = Math.atan2(dy, dx) * 180 / Math.PI;\n            var length = Math.sqrt(dx * dx + dy * dy);\n\n            return h('hr', {\n                class: classNames((_classNames = {}, _defineProperty(_classNames, type, true), _defineProperty(_classNames, 'temporary', temporary), _classNames)),\n                style: {\n                    width: length,\n                    transform: '\\n                        translate(' + (left - length / 2) + 'px, ' + top + 'px)\\n                        rotate(' + angle + 'deg)\\n                    '\n                }\n            });\n        }\n    }]);\n\n    return GobanLine;\n}(Component);\n\nvar CoordX = function (_Component3) {\n    _inherits(CoordX, _Component3);\n\n    function CoordX() {\n        _classCallCheck(this, CoordX);\n\n        return _possibleConstructorReturn(this, (CoordX.__proto__ || Object.getPrototypeOf(CoordX)).apply(this, arguments));\n    }\n\n    _createClass(CoordX, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref4) {\n            var rangeX = _ref4.rangeX;\n\n            return rangeX.length !== this.props.rangeX.length;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref5) {\n            var rangeX = _ref5.rangeX;\n\n            return h('ol', { class: 'coordx' }, rangeX.map(function (i) {\n                return h('li', {}, alpha[i]);\n            }));\n        }\n    }]);\n\n    return CoordX;\n}(Component);\n\nvar CoordY = function (_Component4) {\n    _inherits(CoordY, _Component4);\n\n    function CoordY() {\n        _classCallCheck(this, CoordY);\n\n        return _possibleConstructorReturn(this, (CoordY.__proto__ || Object.getPrototypeOf(CoordY)).apply(this, arguments));\n    }\n\n    _createClass(CoordY, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref6) {\n            var rangeY = _ref6.rangeY;\n\n            return rangeY.length !== this.props.rangeY.length;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref7) {\n            var rangeY = _ref7.rangeY;\n\n            return h('ol', { class: 'coordy' }, rangeY.map(function (i) {\n                return h('li', {}, rangeY.length - i);\n            }));\n        }\n    }]);\n\n    return CoordY;\n}(Component);\n\nvar Goban = function (_Component5) {\n    _inherits(Goban, _Component5);\n\n    function Goban(props) {\n        _classCallCheck(this, Goban);\n\n        var _this5 = _possibleConstructorReturn(this, (Goban.__proto__ || Object.getPrototypeOf(Goban)).call(this));\n\n        _this5.componentWillReceiveProps(props);\n\n        _this5.handleVertexMouseUp = _this5.handleVertexMouseUp.bind(_this5);\n        _this5.handleVertexMouseDown = _this5.handleVertexMouseDown.bind(_this5);\n        _this5.handleVertexMouseMove = _this5.handleVertexMouseMove.bind(_this5);\n        return _this5;\n    }\n\n    _createClass(Goban, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this6 = this;\n\n            document.addEventListener('mouseup', function () {\n                _this6.mouseDown = false;\n\n                if (_this6.state.temporaryLine) _this6.setState({ temporaryLine: null });\n            });\n\n            // Measure CSS\n\n            var _window$getComputedSt = window.getComputedStyle(this.element),\n                borderLeftWidth = _window$getComputedSt.borderLeftWidth,\n                borderTopWidth = _window$getComputedSt.borderTopWidth,\n                borderRightWidth = _window$getComputedSt.borderRightWidth,\n                borderBottomWidth = _window$getComputedSt.borderBottomWidth,\n                paddingLeft = _window$getComputedSt.paddingLeft,\n                paddingTop = _window$getComputedSt.paddingTop,\n                paddingRight = _window$getComputedSt.paddingRight,\n                paddingBottom = _window$getComputedSt.paddingBottom;\n\n            this.setState({\n                borderLeftWidth: parseFloat(borderLeftWidth),\n                borderTopWidth: parseFloat(borderTopWidth),\n                borderRightWidth: parseFloat(borderRightWidth),\n                borderBottomWidth: parseFloat(borderBottomWidth),\n                paddingLeft: parseFloat(paddingLeft),\n                paddingTop: parseFloat(paddingTop),\n                paddingRight: parseFloat(paddingRight),\n                paddingBottom: parseFloat(paddingBottom)\n            });\n\n            // Resize board when window is resizing\n\n            window.addEventListener('resize', function () {\n                _this6.resize();\n            });\n\n            this.resize();\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            for (var key in nextProps) {\n                if (['board', 'highlightVertices', 'dimmedStones', 'paintMap'].includes(key)) continue;\n\n                if (nextProps[key] !== this.props[key]) return true;\n            }\n\n            for (var _key in nextState) {\n                if (nextState[_key] !== this.state[_key]) return true;\n            }\n\n            return nextProps.board.getHash() !== this.props.board.getHash() || !helper.equals(nextProps.highlightVertices, this.props.highlightVertices) || !helper.equals(nextProps.dimmedStones, this.props.dimmedStones) || !helper.equals(nextProps.paintMap, this.props.paintMap);\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(_ref8) {\n            var _this7 = this;\n\n            var board = _ref8.board,\n                animatedVertex = _ref8.animatedVertex;\n\n            var dim = function dim(board) {\n                return [board.width, board.height];\n            };\n\n            if (!this.props || !helper.vertexEquals(dim(board), dim(this.props.board))) {\n                // Update state to accomodate new board size\n\n                var rangeX = range(board.width);\n                var rangeY = range(board.height);\n                var hoshis = board.getHandicapPlacement(9);\n\n                var shifts = rangeY.map(function (_) {\n                    return rangeX.map(function (__) {\n                        return random(9);\n                    });\n                });\n                this.readjustShifts(shifts);\n\n                this.setState({\n                    rangeX: rangeX,\n                    rangeY: rangeY,\n                    hoshis: hoshis,\n                    randomizer: rangeY.map(function (_) {\n                        return rangeX.map(function (__) {\n                            return random(5);\n                        });\n                    }),\n                    shifts: shifts\n                }, function () {\n                    return _this7.resize();\n                });\n            } else if (animatedVertex && !(this.props.animatedVertex && helper.vertexEquals(animatedVertex, this.props.animatedVertex))) {\n                // Update shift\n\n                var _animatedVertex = _slicedToArray(animatedVertex, 2),\n                    x = _animatedVertex[0],\n                    y = _animatedVertex[1];\n\n                var _shifts = this.state.shifts;\n\n\n                _shifts[y][x] = random(9);\n                this.readjustShifts(_shifts, animatedVertex);\n\n                this.setState({ shifts: _shifts, animatedVertex: animatedVertex });\n                setTimeout(function () {\n                    return _this7.setState({ animatedVertex: null });\n                }, 200);\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(_ref9) {\n            var showCoordinates = _ref9.showCoordinates;\n\n            if (showCoordinates !== this.props.showCoordinates) {\n                this.resize();\n            }\n        }\n    }, {\n        key: 'resize',\n        value: function resize() {\n            if (!this.element || !this.element.parentElement) return;\n\n            var _props = this.props,\n                board = _props.board,\n                showCoordinates = _props.showCoordinates,\n                _props$onBeforeResize = _props.onBeforeResize,\n                onBeforeResize = _props$onBeforeResize === undefined ? helper.noop : _props$onBeforeResize;\n\n            onBeforeResize();\n\n            var _window$getComputedSt2 = window.getComputedStyle(this.element.parentElement),\n                outerWidth = _window$getComputedSt2.width,\n                outerHeight = _window$getComputedSt2.height;\n\n            outerWidth = parseFloat(outerWidth);\n            outerHeight = parseFloat(outerHeight);\n\n            var boardWidth = board.width;\n            var boardHeight = board.height;\n\n            if (showCoordinates) {\n                boardWidth += 2;\n                boardHeight += 2;\n            }\n\n            var width = helper.floorEven(outerWidth - this.state.paddingLeft - this.state.paddingRight - this.state.borderLeftWidth - this.state.borderRightWidth);\n            var height = helper.floorEven(outerHeight - this.state.paddingTop - this.state.paddingBottom - this.state.borderTopWidth - this.state.borderBottomWidth);\n\n            var fieldSize = helper.floorEven(Math.min(width / boardWidth, height / boardHeight, 150));\n            var minX = fieldSize * boardWidth;\n            var minY = fieldSize * boardHeight;\n\n            this.setState({\n                width: minX + outerWidth - width,\n                height: minY + outerHeight - height,\n                marginLeft: -(minX + outerWidth - width) / 2,\n                marginTop: -(minY + outerHeight - height) / 2,\n                innerWidth: minX,\n                innerHeight: minY,\n                innerMarginLeft: -minX / 2,\n                innerMarginTop: -minY / 2,\n                fieldSize: fieldSize\n            });\n        }\n    }, {\n        key: 'readjustShifts',\n        value: function readjustShifts(shifts) {\n            var vertex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n            if (vertex == null) {\n                var _movedVertices = [];\n\n                for (var _y = 0; _y < shifts.length; _y++) {\n                    for (var _x2 = 0; _x2 < shifts[0].length; _x2++) {\n                        _movedVertices.push.apply(_movedVertices, _toConsumableArray(this.readjustShifts(shifts, [_x2, _y])));\n                    }\n                }\n\n                return _movedVertices;\n            }\n\n            var _vertex = _slicedToArray(vertex, 2),\n                x = _vertex[0],\n                y = _vertex[1];\n\n            var direction = shifts[y][x];\n\n            var data = [\n            // Left\n            [[1, 5, 8], [x - 1, y], [3, 7, 6]],\n            // Top\n            [[2, 5, 6], [x, y - 1], [4, 7, 8]],\n            // Right\n            [[3, 7, 6], [x + 1, y], [1, 5, 8]],\n            // Bottom\n            [[4, 7, 8], [x, y + 1], [2, 5, 6]]];\n\n            var movedVertices = [];\n\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n                for (var _iterator2 = data[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                    var _ref10 = _step2.value;\n\n                    var _ref11 = _slicedToArray(_ref10, 3);\n\n                    var directions = _ref11[0];\n\n                    var _ref11$ = _slicedToArray(_ref11[1], 2);\n\n                    var qx = _ref11$[0];\n                    var qy = _ref11$[1];\n                    var removeShifts = _ref11[2];\n\n                    if (!directions.includes(direction)) continue;\n\n                    if (shifts[qy] && removeShifts.includes(shifts[qy][qx])) {\n                        shifts[qy][qx] = 0;\n                        movedVertices.push([qx, qy]);\n                    }\n                }\n            } catch (err) {\n                _didIteratorError2 = true;\n                _iteratorError2 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                        _iterator2.return();\n                    }\n                } finally {\n                    if (_didIteratorError2) {\n                        throw _iteratorError2;\n                    }\n                }\n            }\n\n            return movedVertices;\n        }\n    }, {\n        key: 'handleVertexMouseDown',\n        value: function handleVertexMouseDown(evt) {\n            var currentTarget = evt.currentTarget;\n\n\n            this.mouseDown = true;\n            this.startVertex = currentTarget.dataset.vertex.split('-').map(function (x) {\n                return +x;\n            });\n        }\n    }, {\n        key: 'handleVertexMouseUp',\n        value: function handleVertexMouseUp(evt) {\n            if (!this.mouseDown) return;\n\n            var _props2 = this.props,\n                _props2$onVertexClick = _props2.onVertexClick,\n                onVertexClick = _props2$onVertexClick === undefined ? helper.noop : _props2$onVertexClick,\n                _props2$onLineDraw = _props2.onLineDraw,\n                onLineDraw = _props2$onLineDraw === undefined ? helper.noop : _props2$onLineDraw;\n            var currentTarget = evt.currentTarget;\n\n\n            this.mouseDown = false;\n            evt.vertex = currentTarget.dataset.vertex.split('-').map(function (x) {\n                return +x;\n            });\n            evt.line = this.state.temporaryLine;\n\n            if (evt.x == null) evt.x = evt.clientX;\n            if (evt.y == null) evt.y = evt.clientY;\n\n            if (evt.line) {\n                onLineDraw(evt);\n            } else {\n                onVertexClick(evt);\n            }\n        }\n    }, {\n        key: 'handleVertexMouseMove',\n        value: function handleVertexMouseMove(evt) {\n            var _props3 = this.props,\n                drawLineMode = _props3.drawLineMode,\n                _props3$onVertexMouse = _props3.onVertexMouseMove,\n                onVertexMouseMove = _props3$onVertexMouse === undefined ? helper.noop : _props3$onVertexMouse;\n            var currentTarget = evt.currentTarget;\n\n\n            onVertexMouseMove(Object.assign(evt, {\n                mouseDown: this.mouseDown,\n                startVertex: this.startVertex,\n                vertex: currentTarget.dataset.vertex.split('-').map(function (x) {\n                    return +x;\n                })\n            }));\n\n            if (!!drawLineMode && evt.mouseDown && evt.button === 0) {\n                var temporaryLine = [evt.startVertex, evt.vertex];\n\n                if (!helper.equals(temporaryLine, this.state.temporaryLine)) {\n                    this.setState({ temporaryLine: temporaryLine });\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref12, state) {\n            var _this8 = this;\n\n            var board = _ref12.board,\n                paintMap = _ref12.paintMap,\n                _ref12$highlightVerti = _ref12.highlightVertices,\n                highlightVertices = _ref12$highlightVerti === undefined ? [] : _ref12$highlightVerti,\n                _ref12$dimmedStones = _ref12.dimmedStones,\n                dimmedStones = _ref12$dimmedStones === undefined ? [] : _ref12$dimmedStones,\n                _ref12$crosshair = _ref12.crosshair,\n                crosshair = _ref12$crosshair === undefined ? false : _ref12$crosshair,\n                _ref12$showCoordinate = _ref12.showCoordinates,\n                showCoordinates = _ref12$showCoordinate === undefined ? false : _ref12$showCoordinate,\n                _ref12$showMoveColori = _ref12.showMoveColorization,\n                showMoveColorization = _ref12$showMoveColori === undefined ? true : _ref12$showMoveColori,\n                _ref12$showNextMoves = _ref12.showNextMoves,\n                showNextMoves = _ref12$showNextMoves === undefined ? true : _ref12$showNextMoves,\n                _ref12$showSiblings = _ref12.showSiblings,\n                showSiblings = _ref12$showSiblings === undefined ? true : _ref12$showSiblings,\n                _ref12$fuzzyStonePlac = _ref12.fuzzyStonePlacement,\n                fuzzyStonePlacement = _ref12$fuzzyStonePlac === undefined ? true : _ref12$fuzzyStonePlac,\n                _ref12$animatedStoneP = _ref12.animatedStonePlacement,\n                animatedStonePlacement = _ref12$animatedStoneP === undefined ? true : _ref12$animatedStoneP,\n                _ref12$drawLineMode = _ref12.drawLineMode,\n                drawLineMode = _ref12$drawLineMode === undefined ? null : _ref12$drawLineMode;\n            var fieldSize = state.fieldSize,\n                rangeY = state.rangeY,\n                rangeX = state.rangeX,\n                temporaryLine = state.temporaryLine,\n                animatedVertex = state.animatedVertex;\n\n            var animatedVertices = animatedVertex ? [animatedVertex].concat(_toConsumableArray(board.getNeighbors(animatedVertex))) : [];\n            var drawTemporaryLine = !!drawLineMode && !!temporaryLine;\n\n            return h('section', {\n                ref: function ref(el) {\n                    return _this8.element = el;\n                },\n                id: 'goban',\n                class: classNames({\n                    goban: true,\n                    crosshair: crosshair,\n                    coordinates: showCoordinates,\n                    movecolorization: showMoveColorization,\n                    variations: showNextMoves,\n                    siblings: showSiblings,\n                    fuzzy: fuzzyStonePlacement,\n                    animation: animatedStonePlacement\n                })\n            }, h('style', {}, '\\n                #goban {\\n                    font-size: ' + fieldSize + 'px;\\n                    width: ' + state.width + 'px;\\n                    height: ' + state.height + 'px;\\n                    margin-left: ' + state.marginLeft + 'px;\\n                    margin-top: ' + state.marginTop + 'px;\\n                }\\n                #goban > div {\\n                    width: ' + state.innerWidth + 'px;\\n                    height: ' + state.innerHeight + 'px;\\n                    margin-left: ' + state.innerMarginLeft + 'px;\\n                    margin-top: ' + state.innerMarginTop + 'px;\\n                }\\n                #goban > div > ol > li {\\n                    width: ' + fieldSize + 'px;\\n                    height: ' + fieldSize + 'px;\\n                }\\n                #goban > div > ol:not(.coordy) {\\n                    height: ' + fieldSize + 'px;\\n                    line-height: ' + fieldSize + 'px;\\n                    margin-left: ' + (showCoordinates ? fieldSize : 0) + 'px;\\n                }\\n                #goban > div > ol.coordy {\\n                    width: ' + fieldSize + 'px;\\n                    top: ' + fieldSize + 'px;\\n                    line-height: ' + fieldSize + 'px;\\n                }\\n                #goban > div > ol.coordy:last-child {\\n                    left: ' + fieldSize * (board.width + 1) + 'px;\\n                }\\n            '), h('div', {}, h(CoordY, { rangeY: rangeY }), h(CoordX, { rangeX: rangeX }), rangeY.map(function (y) {\n                return h('ol', { class: 'row' }, rangeX.map(function (x) {\n                    var sign = board.get([x, y]);\n\n                    var _ref13 = board.markups[[x, y]] || [null, ''],\n                        _ref14 = _slicedToArray(_ref13, 2),\n                        markupType = _ref14[0],\n                        label = _ref14[1];\n\n                    var equalsVertex = function equalsVertex(v) {\n                        return helper.vertexEquals(v, [x, y]);\n                    };\n\n                    return h(GobanVertex, {\n                        position: [x, y],\n                        shift: _this8.state.shifts[y][x],\n                        random: _this8.state.randomizer[y][x],\n                        sign: sign,\n                        paint: paintMap && paintMap[y] && paintMap[y][x],\n                        dimmed: dimmedStones.some(equalsVertex),\n                        highlight: highlightVertices.some(equalsVertex),\n                        hoshi: _this8.state.hoshis.some(equalsVertex),\n                        animate: animatedVertices.some(equalsVertex),\n                        smalllabel: label.length >= 3,\n                        markupType: markupType,\n                        label: label,\n                        ghostTypes: board.ghosts[[x, y]] || [],\n\n                        onMouseUp: _this8.handleVertexMouseUp,\n                        onMouseDown: _this8.handleVertexMouseDown,\n                        onMouseMove: _this8.handleVertexMouseMove\n                    });\n                }));\n            }), h(CoordX, { rangeX: rangeX }), h(CoordY, { rangeY: rangeY })),\n\n            // Draw lines & arrows\n\n            board.lines.map(function (_ref15) {\n                var _ref16 = _slicedToArray(_ref15, 3),\n                    v1 = _ref16[0],\n                    v2 = _ref16[1],\n                    arrow = _ref16[2];\n\n                if (drawTemporaryLine) {\n                    if (helper.equals([v1, v2], temporaryLine) || (!arrow || drawLineMode === 'line') && helper.equals([v2, v1], temporaryLine)) {\n                        drawTemporaryLine = false;\n                        return;\n                    }\n                }\n\n                return h(GobanLine, {\n                    v1: v1, v2: v2, showCoordinates: showCoordinates, fieldSize: fieldSize,\n                    type: arrow ? 'arrow' : 'line'\n                });\n            }), drawTemporaryLine && h(GobanLine, {\n                temporary: true,\n                v1: temporaryLine[0], v2: temporaryLine[1],\n                showCoordinates: showCoordinates, fieldSize: fieldSize,\n                type: drawLineMode\n            }));\n        }\n    }]);\n\n    return Goban;\n}(Component);\n\nmodule.exports = Goban;\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(2),\n    shell = _require.shell,\n    clipboard = _require.clipboard,\n    remote = _require.remote;\n\nvar Menu = __webpack_require__(2).remote.Menu;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar helper = __webpack_require__(1);\nvar setting = remote.require('./setting');\n\nvar toggleSetting = function toggleSetting(key) {\n    return setting.set(key, !setting.get(key));\n};\n\nvar PlayBar = function (_Component) {\n    _inherits(PlayBar, _Component);\n\n    function PlayBar() {\n        _classCallCheck(this, PlayBar);\n\n        var _this = _possibleConstructorReturn(this, (PlayBar.__proto__ || Object.getPrototypeOf(PlayBar)).call(this));\n\n        _this.handleCurrentPlayerClick = function () {\n            return _this.props.onCurrentPlayerClick;\n        };\n        _this.handleUndoButtonClick = function () {\n            return sabaki.undo();\n        };\n\n        _this.handleMenuClick = function () {\n            var template = [{\n                label: 'About ' + sabaki.appName + '\\u2026',\n                click: function click() {\n                    return shell.openExternal('http://sabaki.yichuanshen.de');\n                }\n            }, { type: 'separator' }, {\n                label: 'New File',\n                click: function click() {\n                    return sabaki.newFile({ playSound: true, showInfo: true });\n                }\n            }, {\n                label: 'Open File…',\n                click: function click() {\n                    return sabaki.loadFile();\n                }\n            }, {\n                label: 'Download SGF',\n                click: function click() {\n                    return sabaki.saveFile(sabaki.state.representedFilename);\n                }\n            }, {\n                label: 'Load SGF from Clipboard',\n                click: function click() {\n                    var content = clipboard.readText();\n                    if (content == null) return;\n                    sabaki.loadContent(content, 'sgf', { ignoreEncoding: true });\n                }\n            }, {\n                label: 'Copy SGF to Clipboard',\n                click: function click() {\n                    return clipboard.writeText(sabaki.getSGF());\n                }\n            }, { type: 'separator' }, {\n                label: 'Show &Coordinates',\n                checked: setting.get('view.show_coordinates'),\n                click: function click() {\n                    return toggleSetting('view.show_coordinates');\n                }\n            }, {\n                label: 'Show Move Colori&zation',\n                checked: setting.get('view.show_move_colorization'),\n                click: function click() {\n                    return toggleSetting('view.show_move_colorization');\n                }\n            }, {\n                label: 'Show &Next Moves',\n                checked: setting.get('view.show_next_moves'),\n                click: function click() {\n                    return toggleSetting('view.show_next_moves');\n                }\n            }, {\n                label: 'Show &Sibling Variations',\n                checked: setting.get('view.show_siblings'),\n                click: function click() {\n                    return toggleSetting('view.show_siblings');\n                }\n            }, {\n                label: '&Manage Games…',\n                click: function click() {\n                    return sabaki.openDrawer('gamechooser');\n                }\n            }, { type: 'separator' }, {\n                label: '&Pass',\n                click: function click() {\n                    return sabaki.makeMove([-1, -1], { sendToEngine: true });\n                }\n            }, {\n                label: '&Resign',\n                click: function click() {\n                    return sabaki.makeResign();\n                }\n            }, { type: 'separator' }, {\n                label: 'Es&timate',\n                click: function click() {\n                    return sabaki.setMode('estimator');\n                }\n            }, {\n                label: '&Score',\n                click: function click() {\n                    return sabaki.setMode('scoring');\n                }\n            }, {\n                label: '&Edit',\n                click: function click() {\n                    return sabaki.setMode('edit');\n                }\n            }, {\n                label: '&Find',\n                click: function click() {\n                    return sabaki.setMode('find');\n                }\n            }, { type: 'separator' }, {\n                label: '&Info',\n                click: function click() {\n                    return sabaki.openDrawer('info');\n                }\n            }];\n\n            var _this$menuButtonEleme = _this.menuButtonElement.getBoundingClientRect(),\n                left = _this$menuButtonEleme.left,\n                top = _this$menuButtonEleme.top;\n\n            helper.popupMenu(template, left, top);\n        };\n        return _this;\n    }\n\n    _createClass(PlayBar, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps) {\n            return nextProps.mode !== this.props.mode || nextProps.mode === 'play';\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref) {\n            var _this2 = this;\n\n            var mode = _ref.mode,\n                attachedEngines = _ref.attachedEngines,\n                playerNames = _ref.playerNames,\n                playerRanks = _ref.playerRanks,\n                playerCaptures = _ref.playerCaptures,\n                currentPlayer = _ref.currentPlayer,\n                showHotspot = _ref.showHotspot,\n                undoable = _ref.undoable,\n                undoText = _ref.undoText,\n                _ref$onCurrentPlayerC = _ref.onCurrentPlayerClick,\n                onCurrentPlayerClick = _ref$onCurrentPlayerC === undefined ? helper.noop : _ref$onCurrentPlayerC;\n\n            var captureStyle = function captureStyle(index) {\n                return { opacity: playerCaptures[index] === 0 ? 0 : .7 };\n            };\n            var isEngine = Array(attachedEngines.length).fill(false);\n\n            attachedEngines.forEach(function (engine, i) {\n                if (engine == null) return;\n\n                playerNames[i] = engine.name;\n                playerRanks[i] = 'Engine';\n                isEngine[i] = true;\n            });\n\n            return h('header', {\n                class: classNames({\n                    undoable: undoable,\n                    hotspot: showHotspot,\n                    current: mode === 'play'\n                })\n            }, h('span', { id: 'player_1' }, h('span', { class: 'captures', style: captureStyle(0) }, playerCaptures[0]), ' ', h('span', {\n                class: classNames('name', { engine: isEngine[0] }),\n                title: playerRanks[0]\n            }, playerNames[0] || 'Black')), h('span', { id: 'player_-1' }, h('span', {\n                class: classNames('name', { engine: isEngine[1] }),\n                title: playerRanks[1]\n            }, playerNames[1] || 'White'), ' ', h('span', { class: 'captures', style: captureStyle(1) }, playerCaptures[1])), h('img', {\n                src: './img/ui/player_' + currentPlayer + '.svg',\n                class: 'current-player',\n                height: 22,\n                title: 'Change Player',\n                onClick: onCurrentPlayerClick\n            }), h('div', { class: 'hotspot', title: 'Hotspot' }), h('a', {\n                class: 'undo',\n                title: undoText,\n                onClick: this.handleUndoButtonClick\n            }, h('img', { src: './node_modules/octicons/build/svg/mail-reply.svg', height: 21 })), h('a', {\n                ref: function ref(el) {\n                    return _this2.menuButtonElement = el;\n                },\n                id: 'headermenu',\n                onClick: this.handleMenuClick\n            }, h('img', { src: './node_modules/octicons/build/svg/three-bars.svg', height: 21 })));\n        }\n    }]);\n\n    return PlayBar;\n}(Component);\n\nmodule.exports = PlayBar;\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar Bar = __webpack_require__(11);\nvar helper = __webpack_require__(1);\n\nvar EditBar = function (_Component) {\n    _inherits(EditBar, _Component);\n\n    function EditBar() {\n        _classCallCheck(this, EditBar);\n\n        var _this = _possibleConstructorReturn(this, (EditBar.__proto__ || Object.getPrototypeOf(EditBar)).call(this));\n\n        _this.state = {\n            stoneTool: 1\n        };\n\n        _this.handleToolButtonClick = _this.handleToolButtonClick.bind(_this);\n        return _this;\n    }\n\n    _createClass(EditBar, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(_ref) {\n            var selectedTool = _ref.selectedTool;\n\n            if (selectedTool === this.props.selectedTool) return;\n\n            if (selectedTool.indexOf('stone') === 0) {\n                this.setState({ stoneTool: +selectedTool.replace('stone_', '') });\n            }\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps) {\n            return nextProps.mode !== this.props.mode || nextProps.mode === 'edit';\n        }\n    }, {\n        key: 'handleToolButtonClick',\n        value: function handleToolButtonClick(evt) {\n            var _props = this.props,\n                selectedTool = _props.selectedTool,\n                _props$onToolButtonCl = _props.onToolButtonClick,\n                onToolButtonClick = _props$onToolButtonCl === undefined ? helper.noop : _props$onToolButtonCl;\n\n\n            evt.tool = evt.currentTarget.dataset.id;\n\n            if (evt.tool.indexOf('stone') === 0 && selectedTool.indexOf('stone') === 0) {\n                evt.tool = 'stone_' + -this.state.stoneTool;\n                this.setState(function (_ref2) {\n                    var stoneTool = _ref2.stoneTool;\n                    return { stoneTool: -stoneTool };\n                });\n            }\n\n            onToolButtonClick(evt);\n        }\n    }, {\n        key: 'renderButton',\n        value: function renderButton(title, toolId) {\n            var selected = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n            return h('li', { class: classNames({ selected: selected }) }, h('a', {\n                title: title,\n                href: '#',\n                'data-id': toolId,\n                onClick: this.handleToolButtonClick\n            }, h('img', { src: './img/edit/' + toolId + '.svg' })));\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref3, _ref4) {\n            var _this2 = this;\n\n            var selectedTool = _ref3.selectedTool;\n            var stoneTool = _ref4.stoneTool;\n\n            var isSelected = function isSelected(_ref5) {\n                var _ref6 = _slicedToArray(_ref5, 2),\n                    id = _ref6[1];\n\n                return id.replace(/_-?1$/, '') === selectedTool.replace(/_-?1$/, '');\n            };\n\n            return h(Bar, Object.assign({ type: 'edit' }, this.props), h('ul', {}, [['Stone Tool', 'stone_' + stoneTool], ['Cross Tool', 'cross'], ['Triangle Tool', 'triangle'], ['Square Tool', 'square'], ['Circle Tool', 'circle'], ['Line Tool', 'line'], ['Arrow Tool', 'arrow'], ['Label Tool', 'label'], ['Number Tool', 'number']].map(function (x) {\n                return _this2.renderButton.apply(_this2, _toConsumableArray(x).concat([isSelected(x)]));\n            })));\n        }\n    }]);\n\n    return EditBar;\n}(Component);\n\nmodule.exports = EditBar;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar Bar = __webpack_require__(11);\nvar helper = __webpack_require__(1);\n\nvar ScoringBar = function (_Component) {\n    _inherits(ScoringBar, _Component);\n\n    function ScoringBar() {\n        _classCallCheck(this, ScoringBar);\n\n        var _this = _possibleConstructorReturn(this, (ScoringBar.__proto__ || Object.getPrototypeOf(ScoringBar)).call(this));\n\n        _this.handleButtonClick = function () {\n            return sabaki.openDrawer('score');\n        };\n        return _this;\n    }\n\n    _createClass(ScoringBar, [{\n        key: 'render',\n        value: function render(_ref) {\n            var type = _ref.type,\n                children = _ref.children,\n                method = _ref.method,\n                areaMap = _ref.areaMap,\n                scoreBoard = _ref.scoreBoard,\n                komi = _ref.komi;\n\n            var score = scoreBoard ? scoreBoard.getScore(areaMap) : { area: [], territory: [], captures: [] };\n            var result = method === 'area' ? score.area[0] - score.area[1] - komi : score.territory[0] - score.territory[1] + score.captures[0] - score.captures[1] - komi;\n            var resultString = result > 0 ? 'B+' + result : result < 0 ? 'W+' + -result : 'Draw';\n\n            return h(Bar, Object.assign({ type: type }, this.props), h('button', { onClick: this.handleButtonClick }, 'Details', h('strong', {}, resultString)), children);\n        }\n    }]);\n\n    return ScoringBar;\n}(Component);\n\nmodule.exports = ScoringBar;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar Bar = __webpack_require__(11);\nvar helper = __webpack_require__(1);\n\nvar FindBar = function (_Component) {\n    _inherits(FindBar, _Component);\n\n    function FindBar() {\n        _classCallCheck(this, FindBar);\n\n        var _this = _possibleConstructorReturn(this, (FindBar.__proto__ || Object.getPrototypeOf(FindBar)).call(this));\n\n        _this.handleChange = function (evt) {\n            sabaki.setState({ findText: evt.currentTarget.value });\n        };\n\n        _this.handleButtonClick = function (evt) {\n            evt.preventDefault();\n\n            var step = evt.currentTarget.classList.contains('next') ? 1 : -1;\n            var _this$props$onButtonC = _this.props.onButtonClick,\n                onButtonClick = _this$props$onButtonC === undefined ? helper.noop : _this$props$onButtonC;\n\n\n            evt.step = step;\n            onButtonClick(evt);\n        };\n        return _this;\n    }\n\n    _createClass(FindBar, [{\n        key: 'render',\n        value: function render(_ref) {\n            var findText = _ref.findText;\n\n            return h(Bar, Object.assign({ type: 'find' }, this.props), h('form', {}, h('input', {\n                type: 'text',\n                placeholder: 'Find',\n                value: findText,\n                onInput: this.handleChange\n            }), h('button', { class: 'next', onClick: this.handleButtonClick }, h('img', { src: './node_modules/octicons/build/svg/chevron-down.svg', height: 20, alt: 'Next' })), h('button', { class: 'prev', onClick: this.handleButtonClick }, h('img', { src: './node_modules/octicons/build/svg/chevron-up.svg', height: 20, alt: 'Previous' }))));\n        }\n    }]);\n\n    return FindBar;\n}(Component);\n\nmodule.exports = FindBar;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar Buffer = __webpack_require__(13);\nvar fs = __webpack_require__(5);\nvar sgf = __webpack_require__(12);\nvar gametree = __webpack_require__(4);\nvar Board = __webpack_require__(8);\n\nexports.meta = {\n    name: 'wBaduk NGF',\n    extensions: ['ngf']\n};\n\nexports.parse = function (content) {\n    var iconv = __webpack_require__(14);\n    var jschardet = __webpack_require__(15);\n\n    // NGF files have a huge amount of ASCII-looking text. To help\n    // the detector, we just send it the first few lines.\n\n    var rawlines = content.split('\\n');\n    var raw = rawlines.slice(0, 12).join();\n\n    var encoding = 'utf8';\n    var detected = jschardet.detect(raw);\n    if (detected.confidence > 0.2) {\n        encoding = detected.encoding;\n    }\n\n    content = iconv.decode(Buffer.from(content, 'binary'), encoding);\n\n    var lines = content.split('\\n');\n\n    var tree = gametree.new();\n    var root = {};\n    tree.nodes.push(root);\n\n    root.CA = ['UTF-8'];\n    root.FF = [4];\n    root.GM = [1];\n    root.SZ = [19];\n\n    // These array accesses might throw if out of range, that's fine.\n    // The caller will deal with the exception.\n\n    var boardsize = Math.floor(parseFloat(lines[1]));\n    var handicap = Math.floor(parseFloat(lines[5]));\n    var pw = lines[2].split(' ')[0];\n    var pb = lines[3].split(' ')[0];\n    var rawdate = lines[8].slice(0, 8);\n    var komi = Math.floor(parseFloat(lines[7]));\n\n    if (Number.isNaN(boardsize)) {\n        boardsize = 19;\n    }\n    if (Number.isNaN(handicap)) {\n        handicap = 0;\n    }\n    if (Number.isNaN(komi)) {\n        komi = 0;\n    }\n\n    var line2 = lines[2].trim().split(' ');\n    if (line2.length > 1) {\n        var whiterank = line2[line2.length - 1];\n        whiterank = whiterank.replace('DP', 'p').replace('K', 'k').replace('D', 'd');\n        root.WR = [whiterank];\n    }\n\n    var line3 = lines[3].trim().split(' ');\n    if (line3.length > 1) {\n        var blackrank = line3[line3.length - 1];\n        blackrank = blackrank.replace('DP', 'p').replace('K', 'k').replace('D', 'd');\n        root.BR = [blackrank];\n    }\n\n    if (handicap === 0 && komi === Math.floor(komi)) {\n        komi += 0.5;\n    }\n\n    var winner = '';\n    var margin = '';\n\n    if (lines[10].includes('resign')) {\n        margin = 'R';\n    }\n    if (lines[10].includes('time')) {\n        margin = 'T';\n    }\n    if (lines[10].includes('hite win') || lines[10].includes('lack lose')) {\n        winner = 'W';\n    }\n    if (lines[10].includes('lack win') || lines[10].includes('hite lose')) {\n        winner = 'B';\n    }\n    if (margin === '') {\n\n        var score = null;\n        var strings = lines[10].split(' ');\n\n        // Try to find score by assuming any float found is the score.\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n            for (var _iterator = strings[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var s = _step.value;\n\n                var p = parseFloat(s);\n                if (Number.isNaN(p) === false) {\n                    score = p;\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        if (score !== null) {\n            margin = score.toString();\n        }\n    }\n\n    if (winner !== '') {\n        root.RE = [winner + '+' + margin];\n    }\n\n    root.SZ = [boardsize];\n\n    if (handicap >= 2) {\n        root.HA = [handicap];\n        root.AB = [];\n\n        var tmp = new Board(boardsize, boardsize); // Created solely for .getHandicapPlacement()\n\n        var points = tmp.getHandicapPlacement(handicap);\n\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n            for (var _iterator2 = points[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var _p = _step2.value;\n\n                var _p2 = _slicedToArray(_p, 2),\n                    x = _p2[0],\n                    y = _p2[1];\n\n                var _s = sgf.vertex2point([x, y]);\n                root.AB.push(_s);\n            }\n        } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                    _iterator2.return();\n                }\n            } finally {\n                if (_didIteratorError2) {\n                    throw _iteratorError2;\n                }\n            }\n        }\n    }\n\n    if (komi) {\n        root.KM = [komi];\n    }\n\n    if (rawdate.length === 8) {\n        var ok = true;\n        for (var n = 0; n < 8; n++) {\n            var _tmp = parseFloat(rawdate.charAt(n));\n            if (Number.isNaN(_tmp)) {\n                ok = false;\n            }\n        }\n        if (ok) {\n            var date = '';\n            date += rawdate.slice(0, 4);\n            date += '-' + rawdate.slice(4, 6);\n            date += '-' + rawdate.slice(6, 8);\n            root.DT = [date];\n        }\n    }\n\n    root.PW = [pw];\n    root.PB = [pb];\n\n    // We currently search for moves in all lines. Current files start moves at line 12.\n    // But some older files have less headers and start moves earlier.\n\n    for (var _n = 0; _n < lines.length; _n++) {\n        var line = lines[_n].trim();\n\n        if (line.length >= 7) {\n\n            if (line.slice(0, 2) === 'PM') {\n\n                var key = line.charAt(4);\n\n                if (key === 'B' || key === 'W') {\n\n                    // Coordinates are letters but with 'B' as the lowest.\n\n                    var _x = line.charCodeAt(5) - 66;\n                    var _y = line.charCodeAt(6) - 66;\n\n                    var val = sgf.vertex2point([_x, _y]);\n\n                    var node = {};\n                    tree.nodes.push(node);\n                    node[key] = [val];\n                }\n            }\n        }\n    }\n\n    return [tree];\n};\n\nexports.parseFile = function (filename) {};\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar Buffer = __webpack_require__(13);\nvar fs = __webpack_require__(5);\nvar sgf = __webpack_require__(12);\nvar gametree = __webpack_require__(4);\nvar Board = __webpack_require__(8);\n\nexports.meta = {\n    name: 'Tygem GIB',\n    extensions: ['gib']\n};\n\nfunction makeResult(grlt, zipsu) {\n    // Arguments are expected to be numbers\n    // Given a game result type and a score, return a text result.\n\n    // The GRLT tag contains the type of result:\n    // 0: B+n   1: W+n   3: B+R   4: W+R   7: B+T   8: W+T\n\n    var easycases = { '3': 'B+R', '4': 'W+R', '7': 'B+T', '8': 'W+T' };\n\n    if (easycases[grlt] !== undefined) {\n        return easycases[grlt];\n    }\n\n    // If there is a score, the ZIPSU tag contains it (multiplied by 10).\n\n    if (grlt === 0 || grlt === 1) {\n        var winner = grlt === 0 ? 'B' : 'W';\n        var margin = (zipsu / 10).toString();\n        return winner + '+' + margin;\n    }\n\n    // We couldn't work it out...\n\n    return '';\n}\n\nfunction getResult(line, grltRegex, zipsuRegex) {\n    // Takes a line and two regexes, the first finding the GRLT (game\n    // result type, e.g. 3 == B+R) and the second finding the score.\n\n    var result = '';\n    var match = grltRegex.exec(line);\n\n    if (match) {\n        var grlt = parseFloat(match[1]);\n        match = zipsuRegex.exec(line);\n        if (match) {\n            var zipsu = parseFloat(match[1]);\n            result = makeResult(grlt, zipsu);\n        }\n    }\n\n    return result;\n}\n\nfunction parsePlayerName(raw) {\n    var name = '';\n    var rank = '';\n\n    // If there's exactly one opening bracket...\n\n    var foo = raw.split('(');\n    if (foo.length === 2) {\n        // And if the closing bracket is right at the end...\n\n        if (foo[1].indexOf(')') === foo[1].length - 1) {\n\n            // Then extract the rank...\n\n            name = foo[0].trim();\n            rank = foo[1].slice(0, foo[1].length - 1);\n        }\n    }\n\n    if (name === '') {\n        return [raw, ''];\n    } else {\n        return [name, rank];\n    }\n}\n\nexports.parse = function (content) {\n    var iconv = __webpack_require__(14);\n    var jschardet = __webpack_require__(15);\n\n    var encoding = 'utf8';\n    var detected = jschardet.detect(content);\n    if (detected.confidence > 0.2) {\n        encoding = detected.encoding;\n    }\n\n    content = iconv.decode(Buffer.from(content, 'binary'), encoding);\n\n    var lines = content.split('\\n');\n\n    var tree = gametree.new();\n    var root = {};\n    tree.nodes.push(root);\n\n    root.CA = ['UTF-8'];\n    root.FF = [4];\n    root.GM = [1];\n    root.SZ = [19];\n\n    var node = root;\n\n    var regex = void 0;\n    var match = void 0;\n\n    for (var n = 0; n < lines.length; n++) {\n        var line = lines[n].trim();\n\n        if (line.startsWith('\\\\[GAMEBLACKNAME=') && line.endsWith('\\\\]')) {\n\n            var s = line.slice(16, -2);\n\n            var _parsePlayerName = parsePlayerName(s),\n                _parsePlayerName2 = _slicedToArray(_parsePlayerName, 2),\n                name = _parsePlayerName2[0],\n                rank = _parsePlayerName2[1];\n\n            if (name) {\n                root.PB = [name];\n            }\n            if (rank) {\n                root.BR = [rank];\n            }\n        } else if (line.startsWith('\\\\[GAMEWHITENAME=') && line.endsWith('\\\\]')) {\n            var _s = line.slice(16, -2);\n\n            var _parsePlayerName3 = parsePlayerName(_s),\n                _parsePlayerName4 = _slicedToArray(_parsePlayerName3, 2),\n                _name = _parsePlayerName4[0],\n                _rank = _parsePlayerName4[1];\n\n            if (_name) {\n                root.PW = [_name];\n            }\n            if (_rank) {\n                root.WR = [_rank];\n            }\n        } else if (line.startsWith('\\\\[GAMEINFOMAIN=')) {\n\n            if (root.RE === undefined) {\n                var result = getResult(line, /GRLT:(\\d+),/, /ZIPSU:(\\d+),/);\n                if (result !== '') {\n                    root.RE = [result];\n                }\n            }\n\n            if (root.KM === undefined) {\n                regex = /GONGJE:(\\d+),/;\n                match = regex.exec(line);\n                if (match) {\n                    var komi = parseFloat(match[1]) / 10;\n                    root.KM = [komi];\n                }\n            }\n        } else if (line.startsWith('\\\\[GAMETAG=')) {\n            if (root.DT === undefined) {\n                regex = /C(\\d\\d\\d\\d):(\\d\\d):(\\d\\d)/;\n                match = regex.exec(line);\n                if (match) {\n                    root.DT = [match[1] + '-' + match[2] + '-' + match[3]];\n                }\n            }\n\n            if (root.RE === undefined) {\n                var _result = getResult(line, /,W(\\d+),/, /,Z(\\d+),/);\n                if (_result !== '') {\n                    root.RE = [_result];\n                }\n            }\n\n            if (root.KM === undefined) {\n                regex = /,G(\\d+),/;\n                match = regex.exec(line);\n                if (match) {\n                    var _komi = parseFloat(match[1]) / 10;\n                    root.KM = [_komi];\n                }\n            }\n        } else if (line.slice(0, 3) === 'INI') {\n            var setup = line.split(' ');\n            var handicap = 0;\n            var p = Math.floor(parseFloat(setup[3]));\n\n            if (Number.isNaN(p) === false) {\n                handicap = p;\n            }\n\n            if (handicap >= 2 && handicap <= 9) {\n                root.HA = [handicap];\n                root.AB = [];\n\n                var tmp = new Board(); // Created solely for .getHandicapPlacement()\n\n                var points = tmp.getHandicapPlacement(handicap);\n\n                var _iteratorNormalCompletion = true;\n                var _didIteratorError = false;\n                var _iteratorError = undefined;\n\n                try {\n                    for (var _iterator = points[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var _p = _step.value;\n\n                        var _p2 = _slicedToArray(_p, 2),\n                            x = _p2[0],\n                            y = _p2[1];\n\n                        var _s2 = sgf.vertex2point([x, y]);\n                        root.AB.push(_s2);\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator.return) {\n                            _iterator.return();\n                        }\n                    } finally {\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n            }\n        } else if (line.slice(0, 3) === 'STO') {\n            var elements = line.split(' ');\n\n            if (elements.length < 6) {\n                continue;\n            }\n\n            var key = void 0;\n\n            if (elements[3] === '1') {\n                key = 'B';\n            } else {\n                key = 'W';\n            }\n\n            var _x = Math.floor(parseFloat(elements[4]));\n            var _y = Math.floor(parseFloat(elements[5]));\n\n            if (Number.isNaN(_x) || Number.isNaN(_y)) {\n                continue;\n            }\n\n            var val = sgf.vertex2point([_x, _y]);\n\n            var _node = {};\n            tree.nodes.push(_node);\n            _node[key] = [val];\n        }\n    }\n\n    return [tree];\n};\n\nexports.parseFile = function (filename) {};\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(2),\n    remote = _require.remote;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar gametree = __webpack_require__(4);\nvar helper = __webpack_require__(1);\nvar setting = remote.require('./setting');\n\nvar Slider = __webpack_require__(38);\nvar GameGraph = __webpack_require__(39);\nvar CommentBox = __webpack_require__(40);\n\nvar sidebarMinWidth = setting.get('view.sidebar_minwidth');\nvar sidebarMinSplit = setting.get('view.properties_minheight');\n\nvar Sidebar = function (_Component) {\n    _inherits(Sidebar, _Component);\n\n    function Sidebar(props) {\n        _classCallCheck(this, Sidebar);\n\n        var _this = _possibleConstructorReturn(this, (Sidebar.__proto__ || Object.getPrototypeOf(Sidebar)).call(this));\n\n        _this.state = {\n            sidebarSplit: setting.get('view.properties_height'),\n            sidebarSplitTransition: true\n        };\n\n        _this.handleGraphNodeClick = function (_ref) {\n            var button = _ref.button,\n                treePosition = _ref.treePosition,\n                x = _ref.x,\n                y = _ref.y;\n\n            if (button === 0) {\n                var _sabaki;\n\n                (_sabaki = sabaki).setCurrentTreePosition.apply(_sabaki, _toConsumableArray(treePosition));\n            } else {\n                var _sabaki2;\n\n                (_sabaki2 = sabaki).openNodeMenu.apply(_sabaki2, _toConsumableArray(treePosition).concat([{ x: x, y: y }]));\n            }\n        };\n\n        _this.handleVerticalResizerMouseDown = function (_ref2) {\n            var button = _ref2.button,\n                x = _ref2.x,\n                y = _ref2.y;\n\n            if (button !== 0) return;\n\n            _this.oldSidebarWidth = _this.props.sidebarWidth;\n            _this.oldMousePosition = [x, y];\n            _this.verticalResizerMouseDown = true;\n        };\n\n        _this.handleHorizontalResizerMouseDown = function (_ref3) {\n            var button = _ref3.button;\n\n            if (button !== 0) return;\n            _this.horizontalResizerMouseDown = true;\n        };\n\n        _this.handleSliderChange = function (_ref4) {\n            var percent = _ref4.percent;\n\n            var moveNumber = Math.round((_this.state.treeHeight - 1) * percent);\n            sabaki.goToMoveNumber(moveNumber);\n        };\n\n        _this.handleStartAutoscrolling = function (_ref5) {\n            var step = _ref5.step;\n\n            var minDelay = setting.get('autoscroll.min_interval');\n            var diff = setting.get('autoscroll.diff');\n\n            var scroll = function scroll() {\n                var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n                sabaki.goStep(step);\n\n                clearTimeout(_this.autoscrollId);\n                _this.autoscrollId = setTimeout(function () {\n                    return scroll(Math.max(minDelay, delay - diff));\n                }, delay);\n            };\n\n            scroll(setting.get('autoscroll.max_interval'));\n        };\n\n        _this.handleStopAutoscrolling = function () {\n            clearTimeout(_this.autoscrollId);\n        };\n\n        _this.handleCommentInput = function (evt) {\n            var _sabaki3;\n\n            (_sabaki3 = sabaki).setComment.apply(_sabaki3, _toConsumableArray(_this.props.treePosition).concat([evt]));\n        };\n\n        _this.componentWillReceiveProps(props);\n        return _this;\n    }\n\n    _createClass(Sidebar, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps) {\n            return nextProps.showSidebar != this.props.showSidebar || nextProps.showSidebar;\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps() {\n            var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                treePosition = _ref6.treePosition,\n                rootTree = _ref6.rootTree;\n\n            // Update tree height\n\n            if (this.props && treePosition === this.props.treePosition) return;\n            this.setState({ treeHeight: gametree.getHeight(rootTree) });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            document.addEventListener('mouseup', function () {\n                if (_this2.verticalResizerMouseDown || _this2.horizontalResizerMouseDown) {\n                    _this2.verticalResizerMouseDown = false;\n                    _this2.horizontalResizerMouseDown = false;\n\n                    setting.set('view.properties_height', _this2.state.sidebarSplit);\n                    setting.set('view.sidebar_width', _this2.props.sidebarWidth);\n                    _this2.setState({ sidebarSplitTransition: false });\n                    window.dispatchEvent(new Event('resize'));\n                }\n            });\n\n            document.addEventListener('mousemove', function (evt) {\n                if (_this2.verticalResizerMouseDown) {\n                    evt.preventDefault();\n\n                    var sidebarWidth = _this2.props.sidebarWidth;\n\n                    var diff = [evt.clientX, evt.clientY].map(function (x, i) {\n                        return x - _this2.oldMousePosition[i];\n                    });\n\n                    sidebarWidth = Math.max(sidebarMinWidth, _this2.oldSidebarWidth - diff[0]);\n                    sabaki.setSidebarWidth(sidebarWidth);\n                } else if (_this2.horizontalResizerMouseDown) {\n                    evt.preventDefault();\n\n                    var sidebarSplit = Math.min(100 - sidebarMinSplit, Math.max(sidebarMinSplit, 100 - evt.clientY * 100 / _this2.element.offsetHeight));\n\n                    _this2.setState({ sidebarSplit: sidebarSplit, sidebarSplitTransition: false });\n                }\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref7, _ref8) {\n            var _this3 = this;\n\n            var mode = _ref7.mode,\n                treePosition = _ref7.treePosition,\n                rootTree = _ref7.rootTree,\n                showGameGraph = _ref7.showGameGraph,\n                showCommentBox = _ref7.showCommentBox,\n                sidebarWidth = _ref7.sidebarWidth,\n                graphGridSize = _ref7.graphGridSize,\n                graphNodeSize = _ref7.graphNodeSize;\n            var treeHeight = _ref8.treeHeight,\n                sidebarSplit = _ref8.sidebarSplit,\n                sidebarSplitTransition = _ref8.sidebarSplitTransition;\n\n            var _treePosition = _slicedToArray(treePosition, 2),\n                tree = _treePosition[0],\n                index = _treePosition[1];\n\n            var node = tree.nodes[index];\n            var level = gametree.getLevel(tree, index);\n\n            return h('section', {\n                ref: function ref(el) {\n                    return _this3.element = el;\n                },\n                id: 'sidebar',\n                style: { width: sidebarWidth }\n            }, h('div', {\n                class: 'verticalresizer',\n                onMouseDown: this.handleVerticalResizerMouseDown\n            }), h(Slider, {\n                showSlider: showGameGraph,\n                text: level,\n                percent: level / (treeHeight - 1) * 100,\n                height: !showGameGraph ? 0 : !showCommentBox ? 100 : 100 - sidebarSplit,\n\n                onChange: this.handleSliderChange,\n                onStartAutoscrolling: this.handleStartAutoscrolling,\n                onStopAutoscrolling: this.handleStopAutoscrolling\n            }), h(GameGraph, {\n                treePosition: treePosition,\n                showGameGraph: showGameGraph,\n                viewportWidth: sidebarWidth,\n                height: !showGameGraph ? 0 : !showCommentBox ? 100 : 100 - sidebarSplit,\n                gridSize: graphGridSize,\n                nodeSize: graphNodeSize,\n\n                onNodeClick: this.handleGraphNodeClick\n            }), h(CommentBox, {\n                mode: mode,\n                treePosition: treePosition,\n                showCommentBox: showCommentBox,\n                moveAnnotation: 'BM' in node ? [-1, node.BM[0]] : 'DO' in node ? [0, 1] : 'IT' in node ? [1, 1] : 'TE' in node ? [2, node.TE[0]] : [null, 1],\n                positionAnnotation: 'UC' in node ? [-2, node.UC[0]] : 'GW' in node ? [-1, node.GW[0]] : 'DM' in node ? [0, node.DM[0]] : 'GB' in node ? [1, node.GB[0]] : [null, 1],\n                title: 'N' in node ? node.N[0].trim() : '',\n                comment: 'C' in node ? node.C[0] : '',\n                height: !showCommentBox ? 0 : !showGameGraph ? 100 : sidebarSplit,\n                sidebarSplitTransition: sidebarSplitTransition,\n\n                onResizerMouseDown: this.handleHorizontalResizerMouseDown,\n                onCommentInput: this.handleCommentInput\n            }));\n        }\n    }]);\n\n    return Sidebar;\n}(Component);\n\nmodule.exports = Sidebar;\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(2),\n    remote = _require.remote;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar helper = __webpack_require__(1);\nvar setting = remote.require('./setting');\n\nvar Slider = function (_Component) {\n    _inherits(Slider, _Component);\n\n    function Slider() {\n        _classCallCheck(this, Slider);\n\n        var _this = _possibleConstructorReturn(this, (Slider.__proto__ || Object.getPrototypeOf(Slider)).call(this));\n\n        _this.handleSliderAreaMouseDown = function (evt) {\n            if (evt.button !== 0) return;\n\n            _this.sliderAreaMouseDown = true;\n            document.dispatchEvent(new MouseEvent('mousemove', evt));\n        };\n\n        _this.handleButtonMouseDown = function (evt) {\n            if (evt.button !== 0) return;\n\n            var type = evt.currentTarget.className;\n            var _this$props$onStartAu = _this.props.onStartAutoscrolling,\n                onStartAutoscrolling = _this$props$onStartAu === undefined ? helper.noop : _this$props$onStartAu;\n\n\n            _this.buttonMouseDown = type;\n            onStartAutoscrolling({ step: type === 'prev' ? -1 : 1 });\n        };\n        return _this;\n    }\n\n    _createClass(Slider, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            document.addEventListener('mouseup', function () {\n                _this2.sliderAreaMouseDown = false;\n\n                if (_this2.buttonMouseDown != null) {\n                    var type = _this2.buttonMouseDown;\n                    var _props$onStopAutoscro = _this2.props.onStopAutoscrolling,\n                        onStopAutoscrolling = _props$onStopAutoscro === undefined ? helper.noop : _props$onStopAutoscro;\n\n\n                    _this2.buttonMouseDown = null;\n                    onStopAutoscrolling({ step: type === 'prev' ? -1 : 1 });\n                }\n            });\n\n            document.addEventListener('mousemove', function (evt) {\n                if (!_this2.sliderAreaMouseDown) return;\n\n                var _props$onChange = _this2.props.onChange,\n                    onChange = _props$onChange === undefined ? helper.noop : _props$onChange;\n                var _slidingAreaElement = _this2.slidingAreaElement,\n                    offsetTop = _slidingAreaElement.offsetTop,\n                    offsetHeight = _slidingAreaElement.offsetHeight;\n\n                var percent = Math.min(1, Math.max(0, (evt.clientY - offsetTop) / offsetHeight));\n\n                onChange({ percent: percent });\n            });\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref) {\n            var showSlider = _ref.showSlider,\n                height = _ref.height;\n\n            return showSlider && (height !== this.props.height || this.sliderAreaMouseDown || this.buttonMouseDown || !this.dirty);\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps() {\n            var _this3 = this;\n\n            // Debounce rendering\n\n            this.dirty = true;\n\n            clearTimeout(this.renderId);\n            this.renderId = setTimeout(function () {\n                _this3.dirty = false;\n                _this3.setState(_this3.state);\n            }, setting.get('graph.delay'));\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref2) {\n            var _this4 = this;\n\n            var height = _ref2.height,\n                text = _ref2.text,\n                percent = _ref2.percent;\n\n            return h('section', { id: 'slider', style: { height: height + '%' } }, h('a', {\n                href: '#',\n                class: 'prev',\n                onMouseDown: this.handleButtonMouseDown\n            }, '▲'), h('a', {\n                href: '#',\n                class: 'next',\n                onMouseDown: this.handleButtonMouseDown\n            }, '▼'), h('div', {\n                ref: function ref(el) {\n                    return _this4.slidingAreaElement = el;\n                },\n                class: 'inner',\n                onMouseDown: this.handleSliderAreaMouseDown\n            }, h('span', { style: { top: percent + '%' } }, text)));\n        }\n    }]);\n\n    return Slider;\n}(Component);\n\nmodule.exports = Slider;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(2),\n    remote = _require.remote;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar gametree = __webpack_require__(4);\nvar helper = __webpack_require__(1);\nvar setting = remote.require('./setting');\n\nvar _map = ['graph.delay', 'graph.animation_duration', 'sgf.comment_properties', 'graph.edge_color', 'graph.edge_inactive_color', 'graph.edge_size', 'graph.edge_inactive_size', 'graph.node_color', 'graph.node_inactive_color', 'graph.node_active_color', 'graph.node_bookmark_color', 'graph.node_comment_color', 'graph.node_inactive_bookmark_color', 'graph.node_inactive_comment_color'].map(function (x) {\n    return setting.get(x);\n}),\n    _map2 = _slicedToArray(_map, 14),\n    delay = _map2[0],\n    animationDuration = _map2[1],\n    commentProperties = _map2[2],\n    edgeColor = _map2[3],\n    edgeInactiveColor = _map2[4],\n    edgeSize = _map2[5],\n    edgeInactiveSize = _map2[6],\n    nodeColor = _map2[7],\n    nodeInactiveColor = _map2[8],\n    nodeActiveColor = _map2[9],\n    nodeBookmarkColor = _map2[10],\n    nodeCommentColor = _map2[11],\n    nodeInactiveBookmarkColor = _map2[12],\n    nodeInactiveCommentColor = _map2[13];\n\nvar GameGraphNode = function (_Component) {\n    _inherits(GameGraphNode, _Component);\n\n    function GameGraphNode() {\n        _classCallCheck(this, GameGraphNode);\n\n        var _this = _possibleConstructorReturn(this, (GameGraphNode.__proto__ || Object.getPrototypeOf(GameGraphNode)).call(this));\n\n        _this.state = {\n            hover: false\n        };\n\n        _this.handleMouseMove = function (evt) {\n            if (!_this.element) return;\n\n            var x = evt.clientX,\n                y = evt.clientY;\n\n            var _this$props = _this.props,\n                position = _this$props.position,\n                _this$props$mouseShif = _slicedToArray(_this$props.mouseShift, 2),\n                sx = _this$props$mouseShif[0],\n                sy = _this$props$mouseShif[1],\n                gridSize = _this$props.gridSize;\n\n            var mousePosition = [x + sx, y + sy];\n            var hover = false;\n\n            if (mousePosition.every(function (x, i) {\n                return Math.ceil(position[i] - gridSize / 2) <= x && x <= Math.floor(position[i] + gridSize / 2) - 1;\n            })) {\n                hover = true;\n            }\n\n            if (hover !== _this.state.hover) {\n                _this.setState({ hover: hover });\n            }\n        };\n        return _this;\n    }\n\n    _createClass(GameGraphNode, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            document.addEventListener('mousemove', this.handleMouseMove);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            document.removeEventListener('mousemove', this.handleMouseMove);\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref, _ref2) {\n            var type = _ref.type,\n                fill = _ref.fill,\n                nodeSize = _ref.nodeSize,\n                gridSize = _ref.gridSize;\n            var hover = _ref2.hover;\n\n            return type !== this.props.type || fill !== this.props.fill || nodeSize !== this.props.nodeSize || gridSize !== this.props.gridSize || hover !== this.state.hover;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref3, _ref4) {\n            var _this2 = this;\n\n            var _ref3$position = _slicedToArray(_ref3.position, 2),\n                left = _ref3$position[0],\n                top = _ref3$position[1],\n                type = _ref3.type,\n                fill = _ref3.fill,\n                nodeSize = _ref3.nodeSize;\n\n            var hover = _ref4.hover;\n\n            return h('path', {\n                ref: function ref(el) {\n                    return _this2.element = el;\n                },\n                d: function () {\n                    var nodeSize2 = nodeSize * 2;\n\n                    if (type === 'square') {\n                        return 'M ' + (left - nodeSize) + ' ' + (top - nodeSize) + '\\n                        h ' + nodeSize2 + ' v ' + nodeSize2 + ' h ' + -nodeSize2 + ' v ' + -nodeSize2;\n                    } else if (type === 'circle') {\n                        return 'M ' + left + ' ' + top + ' m ' + -nodeSize + ' 0\\n                        a ' + nodeSize + ' ' + nodeSize + ' 0 1 0 ' + nodeSize2 + ' 0\\n                        a ' + nodeSize + ' ' + nodeSize + ' 0 1 0 ' + -nodeSize2 + ' 0';\n                    } else if (type === 'diamond') {\n                        var diamondSide = Math.round(Math.sqrt(2) * nodeSize);\n\n                        return 'M ' + left + ' ' + (top - diamondSide) + '\\n                        L ' + (left - diamondSide) + ' ' + top + ' L ' + left + ' ' + (top + diamondSide) + '\\n                        L ' + (left + diamondSide) + ' ' + top + ' L ' + left + ' ' + (top - diamondSide);\n                    }\n\n                    return '';\n                }(),\n\n                class: classNames({ hover: hover }),\n                fill: fill\n            });\n        }\n    }]);\n\n    return GameGraphNode;\n}(Component);\n\nvar GameGraphEdge = function (_Component2) {\n    _inherits(GameGraphEdge, _Component2);\n\n    function GameGraphEdge() {\n        _classCallCheck(this, GameGraphEdge);\n\n        return _possibleConstructorReturn(this, (GameGraphEdge.__proto__ || Object.getPrototypeOf(GameGraphEdge)).apply(this, arguments));\n    }\n\n    _createClass(GameGraphEdge, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref5) {\n            var positionAbove = _ref5.positionAbove,\n                positionBelow = _ref5.positionBelow,\n                current = _ref5.current,\n                length = _ref5.length,\n                gridSize = _ref5.gridSize;\n\n            return length !== this.props.length || current !== this.props.current || gridSize !== this.props.gridSize || !helper.vertexEquals(positionAbove, this.props.positionAbove) || !helper.vertexEquals(positionBelow, this.props.positionBelow);\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref6) {\n            var _ref6$positionAbove = _slicedToArray(_ref6.positionAbove, 2),\n                left1 = _ref6$positionAbove[0],\n                top1 = _ref6$positionAbove[1],\n                _ref6$positionBelow = _slicedToArray(_ref6.positionBelow, 2),\n                left2 = _ref6$positionBelow[0],\n                top2 = _ref6$positionBelow[1],\n                length = _ref6.length,\n                gridSize = _ref6.gridSize,\n                current = _ref6.current;\n\n            var points = void 0;\n\n            if (left1 === left2) {\n                points = left1 + ',' + top1 + ' ' + left1 + ',' + (top2 + length);\n            } else {\n                points = left1 + ',' + top1 + ' ' + (left2 - gridSize) + ',' + (top2 - gridSize) + '\\n                ' + left2 + ',' + top2 + ' ' + left2 + ',' + (top2 + length);\n            }\n\n            return h('polyline', {\n                points: points,\n                fill: 'none',\n                stroke: current ? edgeColor : edgeInactiveColor,\n                'stroke-width': current ? edgeSize : edgeInactiveSize\n            });\n        }\n    }]);\n\n    return GameGraphEdge;\n}(Component);\n\nvar GameGraph = function (_Component3) {\n    _inherits(GameGraph, _Component3);\n\n    function GameGraph(props) {\n        _classCallCheck(this, GameGraph);\n\n        var _this4 = _possibleConstructorReturn(this, (GameGraph.__proto__ || Object.getPrototypeOf(GameGraph)).call(this, props));\n\n        _this4.state = {\n            cameraPosition: [-props.gridSize, -props.gridSize],\n            viewportSize: [props.viewportWidth, props.height],\n            viewportPosition: [0, 0],\n            matrixDict: null\n        };\n\n        _this4.mousePosition = [-100, -100];\n        _this4.matrixDictHash = null;\n        _this4.matrixDictCache = {};\n\n        _this4.handleNodeClick = _this4.handleNodeClick.bind(_this4);\n        _this4.handleGraphMouseDown = _this4.handleGraphMouseDown.bind(_this4);\n        return _this4;\n    }\n\n    _createClass(GameGraph, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this5 = this;\n\n            document.addEventListener('mousemove', function (evt) {\n                if (!_this5.svgElement) return;\n\n                var x = evt.clientX,\n                    y = evt.clientY,\n                    movementX = evt.movementX,\n                    movementY = evt.movementY;\n\n                var _state = _this5.state,\n                    _state$cameraPosition = _slicedToArray(_state.cameraPosition, 2),\n                    cx = _state$cameraPosition[0],\n                    cy = _state$cameraPosition[1],\n                    _state$viewportPositi = _slicedToArray(_state.viewportPosition, 2),\n                    vx = _state$viewportPositi[0],\n                    vy = _state$viewportPositi[1];\n\n                if (_this5.mouseDown === 0) {\n                    _this5.drag = true;\n                } else {\n                    ;movementX = 0;\n                    movementY = 0;\n\n                    _this5.drag = false;\n                }\n\n                _this5.mousePosition = [x - vx, y - vy];\n\n                if (_this5.drag) {\n                    evt.preventDefault();\n                    _this5.setState({ cameraPosition: [cx - movementX, cy - movementY] });\n                }\n            });\n\n            document.addEventListener('mouseup', function () {\n                _this5.mouseDown = null;\n            });\n\n            window.addEventListener('resize', function () {\n                clearTimeout(_this5.remeasureId);\n                _this5.remeasureId = setTimeout(function () {\n                    return _this5.remeasure();\n                }, 500);\n            });\n\n            this.remeasure();\n            this.componentWillReceiveProps();\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref7) {\n            var showGameGraph = _ref7.showGameGraph,\n                height = _ref7.height;\n\n            return height !== this.props.height || showGameGraph && !this.dirty;\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps() {\n            var _this6 = this;\n\n            var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                treePosition = _ref8.treePosition;\n\n            // Debounce rendering\n\n            if (treePosition === this.props.treePosition) return;\n\n            this.dirty = true;\n\n            clearTimeout(this.renderId);\n            this.renderId = setTimeout(function () {\n                return _this6.updateCameraPosition();\n            }, delay);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(_ref9) {\n            var _this7 = this;\n\n            var height = _ref9.height,\n                showGameGraph = _ref9.showGameGraph;\n\n            if (height !== this.props.height) {\n                setTimeout(function () {\n                    return _this7.remeasure();\n                }, 200);\n            }\n\n            if (showGameGraph !== this.props.showGameGraph) {\n                setTimeout(function () {\n                    return _this7.updateCameraPosition();\n                }, 200);\n            }\n        }\n    }, {\n        key: 'getMatrixDict',\n        value: function getMatrixDict(tree) {\n            var hash = gametree.getMatrixHash(tree);\n\n            if (hash !== this.matrixDictHash) {\n                this.matrixDictHash = hash;\n                this.matrixDictCache = gametree.getMatrixDict(tree);\n            }\n\n            return this.matrixDictCache;\n        }\n    }, {\n        key: 'updateCameraPosition',\n        value: function updateCameraPosition() {\n            var _props = this.props,\n                gridSize = _props.gridSize,\n                _props$treePosition = _slicedToArray(_props.treePosition, 2),\n                tree = _props$treePosition[0],\n                index = _props$treePosition[1];\n\n            var id = tree.id + '-' + index;\n\n            var _getMatrixDict = this.getMatrixDict(gametree.getRoot(tree)),\n                _getMatrixDict2 = _slicedToArray(_getMatrixDict, 2),\n                matrix = _getMatrixDict2[0],\n                dict = _getMatrixDict2[1];\n\n            var _dict$id = _slicedToArray(dict[id], 2),\n                x = _dict$id[0],\n                y = _dict$id[1];\n\n            var _gametree$getMatrixWi = gametree.getMatrixWidth(y, matrix),\n                _gametree$getMatrixWi2 = _slicedToArray(_gametree$getMatrixWi, 2),\n                width = _gametree$getMatrixWi2[0],\n                padding = _gametree$getMatrixWi2[1];\n\n            var relX = width === 1 ? 0 : 1 - 2 * (x - padding) / (width - 1);\n            var diff = (width - 1) * gridSize / 2;\n            diff = Math.min(diff, this.state.viewportSize[0] / 2 - gridSize);\n\n            this.dirty = false;\n\n            this.setState({\n                matrixDict: [matrix, dict],\n                cameraPosition: [x * gridSize + relX * diff - this.state.viewportSize[0] / 2, y * gridSize - this.state.viewportSize[1] / 2].map(function (z) {\n                    return Math.round(z);\n                })\n            });\n        }\n    }, {\n        key: 'remeasure',\n        value: function remeasure() {\n            if (!this.props.showGameGraph) return;\n\n            var _element$getBoundingC = this.element.getBoundingClientRect(),\n                left = _element$getBoundingC.left,\n                top = _element$getBoundingC.top,\n                width = _element$getBoundingC.width,\n                height = _element$getBoundingC.height;\n\n            this.setState({ viewportSize: [width, height], viewportPosition: [left, top] });\n        }\n    }, {\n        key: 'handleGraphMouseDown',\n        value: function handleGraphMouseDown(evt) {\n            this.mouseDown = evt.button;\n        }\n    }, {\n        key: 'handleNodeClick',\n        value: function handleNodeClick(evt) {\n            if (this.drag) {\n                this.drag = false;\n                return;\n            }\n\n            var _props2 = this.props,\n                _props2$onNodeClick = _props2.onNodeClick,\n                onNodeClick = _props2$onNodeClick === undefined ? helper.noop : _props2$onNodeClick,\n                gridSize = _props2.gridSize;\n\n            var _state2 = this.state,\n                _state2$matrixDict = _slicedToArray(_state2.matrixDict, 1),\n                matrix = _state2$matrixDict[0],\n                _state2$cameraPositio = _slicedToArray(_state2.cameraPosition, 2),\n                cx = _state2$cameraPositio[0],\n                cy = _state2$cameraPositio[1];\n\n            var _mousePosition = _slicedToArray(this.mousePosition, 2),\n                mx = _mousePosition[0],\n                my = _mousePosition[1];\n\n            var _map3 = [mx + cx, my + cy].map(function (z) {\n                return Math.round(z / gridSize);\n            }),\n                _map4 = _slicedToArray(_map3, 2),\n                nearestX = _map4[0],\n                nearestY = _map4[1];\n\n            if (!matrix[nearestY] || !matrix[nearestY][nearestX]) return;\n\n            evt.treePosition = matrix[nearestY][nearestX];\n            onNodeClick(evt);\n        }\n    }, {\n        key: 'renderNodes',\n        value: function renderNodes(_ref10, _ref11) {\n            var _this8 = this;\n\n            var gridSize = _ref10.gridSize,\n                nodeSize = _ref10.nodeSize;\n\n            var _ref11$matrixDict = _slicedToArray(_ref11.matrixDict, 2),\n                matrix = _ref11$matrixDict[0],\n                dict = _ref11$matrixDict[1],\n                _ref11$cameraPosition = _slicedToArray(_ref11.cameraPosition, 2),\n                cx = _ref11$cameraPosition[0],\n                cy = _ref11$cameraPosition[1],\n                _ref11$viewportSize = _slicedToArray(_ref11.viewportSize, 2),\n                width = _ref11$viewportSize[0],\n                height = _ref11$viewportSize[1],\n                _ref11$viewportPositi = _slicedToArray(_ref11.viewportPosition, 2),\n                vx = _ref11$viewportPositi[0],\n                vy = _ref11$viewportPositi[1];\n\n            var nodeColumns = [];\n            var edges = [];\n\n            var _map5 = [cx, cy].map(function (z) {\n                return Math.max(Math.ceil(z / gridSize) - 2, 0);\n            }),\n                _map6 = _slicedToArray(_map5, 2),\n                minX = _map6[0],\n                minY = _map6[1];\n\n            var _map7 = [cx, cy].map(function (z, i) {\n                return (z + [width, height][i]) / gridSize + 2;\n            }),\n                _map8 = _slicedToArray(_map7, 2),\n                maxX = _map8[0],\n                maxY = _map8[1];\n\n            minY -= 3;\n            maxY += 3;\n\n            var doneTreeBones = [];\n            var currentTracks = [];\n            var notCurrentTracks = [];\n\n            // Render only nodes that are visible\n\n            for (var x = minX; x <= maxX; x++) {\n                var column = [];\n\n                var _loop = function _loop(y) {\n                    if (matrix[y] == null || matrix[y][x] == null) return 'continue';\n\n                    var _matrix$y$x = _slicedToArray(matrix[y][x], 2),\n                        tree = _matrix$y$x[0],\n                        index = _matrix$y$x[1];\n\n                    var node = tree.nodes[index];\n                    var onCurrentTrack = void 0;\n\n                    if (currentTracks.includes(tree.id)) {\n                        onCurrentTrack = true;\n                    } else if (notCurrentTracks.includes(tree.id)) {\n                        onCurrentTrack = false;\n                    } else {\n                        if (!tree.parent) {\n                            onCurrentTrack = true;\n                            currentTracks.push(tree.id);\n                        } else if (currentTracks.includes(tree.parent.id)) {\n                            if (tree.parent.subtrees[tree.parent.current] !== tree) {\n                                onCurrentTrack = false;\n                                notCurrentTracks.push(tree.id);\n                            } else {\n                                onCurrentTrack = true;\n                                currentTracks.push(tree.id);\n                            }\n                        } else if (notCurrentTracks.includes(tree.parent.id)) {\n                            onCurrentTrack = false;\n                            notCurrentTracks.push(tree.id);\n                        } else {\n                            onCurrentTrack = gametree.onCurrentTrack(tree);\n\n                            if (onCurrentTrack) currentTracks.push(tree.id);else notCurrentTracks.push(tree.id);\n                        }\n                    }\n\n                    // Render node\n\n                    var fill = nodeColor;\n                    if (onCurrentTrack) {\n                        fill = helper.vertexEquals(_this8.props.treePosition, [tree, index]) ? nodeActiveColor : 'HO' in node ? nodeBookmarkColor : commentProperties.some(function (x) {\n                            return x in node;\n                        }) ? nodeCommentColor : nodeColor;\n                    } else {\n                        fill = 'HO' in node ? nodeInactiveBookmarkColor : commentProperties.some(function (x) {\n                            return x in node;\n                        }) ? nodeInactiveCommentColor : nodeInactiveColor;\n                    }\n\n                    var left = x * gridSize;\n                    var top = y * gridSize;\n\n                    column.push(h(GameGraphNode, {\n                        key: y,\n                        mouseShift: [cx - vx, cy - vy],\n                        position: [left, top],\n                        type: 'B' in node && node.B[0] === '' || 'W' in node && node.W[0] === '' ? 'square' // Pass node\n                        : !('B' in node || 'W' in node) ? 'diamond' // Non-move node\n                        : 'circle', // Normal node\n                        fill: fill,\n                        nodeSize: nodeSize,\n                        gridSize: gridSize\n                    }));\n\n                    if (!doneTreeBones.includes(tree.id)) {\n                        // A *tree bone* denotes a straight edge through the whole tree\n\n                        var positionAbove = void 0,\n                            positionBelow = void 0;\n\n                        if (index === 0 && tree.parent) {\n                            // Render precedent edge with tree bone\n\n                            var _gametree$navigate = gametree.navigate(tree, index, -1),\n                                _gametree$navigate2 = _slicedToArray(_gametree$navigate, 2),\n                                prevTree = _gametree$navigate2[0],\n                                prevIndex = _gametree$navigate2[1];\n\n                            var _dict = _slicedToArray(dict[prevTree.id + '-' + prevIndex], 2),\n                                px = _dict[0],\n                                py = _dict[1];\n\n                            positionAbove = [px * gridSize, py * gridSize];\n                            positionBelow = [left, top];\n                        } else {\n                            // Render tree bone only\n\n                            var _dict2 = _slicedToArray(dict[tree.id + '-0'], 2),\n                                sx = _dict2[0],\n                                sy = _dict2[1];\n\n                            positionAbove = [sx * gridSize, sy * gridSize];\n                            positionBelow = positionAbove;\n                        }\n\n                        if (positionAbove != null && positionBelow != null) {\n                            edges[!onCurrentTrack ? 'unshift' : 'push'](h(GameGraphEdge, {\n                                key: tree.id,\n                                positionAbove: positionAbove,\n                                positionBelow: positionBelow,\n                                length: (tree.nodes.length - 1) * gridSize,\n                                current: onCurrentTrack,\n                                gridSize: gridSize\n                            }));\n\n                            doneTreeBones.push(tree.id);\n                        }\n                    }\n\n                    if (index === tree.nodes.length - 1) {\n                        // Render successor edges with subtree bones\n\n                        var _iteratorNormalCompletion = true;\n                        var _didIteratorError = false;\n                        var _iteratorError = undefined;\n\n                        try {\n                            for (var _iterator = tree.subtrees[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                                var subtree = _step.value;\n\n                                var current = onCurrentTrack && tree.subtrees[tree.current] === subtree;\n\n                                var _dict3 = _slicedToArray(dict[subtree.id + '-0'], 2),\n                                    nx = _dict3[0],\n                                    ny = _dict3[1];\n\n                                edges[!current ? 'unshift' : 'push'](h(GameGraphEdge, {\n                                    key: subtree.id,\n                                    positionAbove: [left, top],\n                                    positionBelow: [nx * gridSize, ny * gridSize],\n                                    length: (subtree.nodes.length - 1) * gridSize,\n                                    current: current,\n                                    gridSize: gridSize\n                                }));\n\n                                doneTreeBones.push(subtree.id);\n                            }\n                        } catch (err) {\n                            _didIteratorError = true;\n                            _iteratorError = err;\n                        } finally {\n                            try {\n                                if (!_iteratorNormalCompletion && _iterator.return) {\n                                    _iterator.return();\n                                }\n                            } finally {\n                                if (_didIteratorError) {\n                                    throw _iteratorError;\n                                }\n                            }\n                        }\n                    }\n                };\n\n                for (var y = minY; y <= maxY; y++) {\n                    var _ret = _loop(y);\n\n                    if (_ret === 'continue') continue;\n                }\n\n                if (column.length > 0) nodeColumns.push(h('g', { key: x }, column));\n            }\n\n            return [h('g', {}, edges), h('g', {}, nodeColumns)];\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref12, _ref13) {\n            var _this9 = this;\n\n            var height = _ref12.height,\n                treePosition = _ref12.treePosition,\n                showGameGraph = _ref12.showGameGraph;\n\n            var matrixDict = _ref13.matrixDict,\n                viewportSize = _ref13.viewportSize,\n                _ref13$cameraPosition = _slicedToArray(_ref13.cameraPosition, 2),\n                cx = _ref13$cameraPosition[0],\n                cy = _ref13$cameraPosition[1];\n\n            return h('section', {\n                ref: function ref(el) {\n                    return _this9.element = el;\n                },\n                id: 'graph'\n            }, h('style', {}, '\\n                #graph {\\n                    height: ' + height + '%;\\n                }\\n                #graph svg > * {\\n                    transform: translate(' + -cx + 'px, ' + -cy + 'px);\\n                }\\n            '), showGameGraph && matrixDict && viewportSize && h('svg', {\n                ref: function ref(el) {\n                    return _this9.svgElement = el;\n                },\n                width: viewportSize[0],\n                height: viewportSize[1],\n\n                onClick: this.handleNodeClick,\n                onContextMenu: this.handleNodeClick,\n                onMouseDown: this.handleGraphMouseDown,\n                onMouseUp: this.handleGraphMouseUp\n            }, this.renderNodes(this.props, this.state)));\n        }\n    }]);\n\n    return GameGraph;\n}(Component);\n\nmodule.exports = GameGraph;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(2),\n    remote = _require.remote;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar classNames = __webpack_require__(3);\nvar ContentDisplay = __webpack_require__(41);\n\nvar boardmatcher = __webpack_require__(20);\nvar gametree = __webpack_require__(4);\nvar helper = __webpack_require__(1);\nvar setting = remote.require('./setting');\n\nvar _require3 = __webpack_require__(7),\n    sgf = _require3.sgf;\n\nvar Board = __webpack_require__(8);\n\nvar CommentTitle = function (_Component) {\n    _inherits(CommentTitle, _Component);\n\n    function CommentTitle() {\n        _classCallCheck(this, CommentTitle);\n\n        var _this = _possibleConstructorReturn(this, (CommentTitle.__proto__ || Object.getPrototypeOf(CommentTitle)).call(this));\n\n        _this.handleEditButtonClick = function () {\n            return sabaki.setMode('edit');\n        };\n        return _this;\n    }\n\n    _createClass(CommentTitle, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref) {\n            var treePosition = _ref.treePosition,\n                moveAnnotation = _ref.moveAnnotation,\n                positionAnnotation = _ref.positionAnnotation,\n                title = _ref.title;\n\n            var _treePosition = _slicedToArray(treePosition, 2),\n                tree = _treePosition[0],\n                index = _treePosition[1];\n\n            return title !== this.props.title\n            // First node\n            || !tree.parent && index === 0\n            // Last node\n            || tree.subtrees.length === 0 && index === tree.nodes.length - 1\n            // Other data changed\n            || treePosition !== this.props.treePosition || !helper.vertexEquals(moveAnnotation, this.props.moveAnnotation) || !helper.vertexEquals(positionAnnotation, this.props.positionAnnotation);\n        }\n    }, {\n        key: 'getCurrentMoveInterpretation',\n        value: function getCurrentMoveInterpretation() {\n            var _props = this.props,\n                _props$treePosition = _slicedToArray(_props.treePosition, 2),\n                tree = _props$treePosition[0],\n                index = _props$treePosition[1],\n                board = _props.board;\n\n            var node = tree.nodes[index];\n\n            // Determine root node\n\n            if (!tree.parent && index === 0) {\n                var result = [];\n\n                if ('EV' in node) result.push(node.EV[0]);\n                if ('GN' in node) result.push(node.GN[0]);\n\n                result = result.filter(function (x) {\n                    return x.trim() !== '';\n                }).join(' — ');\n                if (result !== '') return result;\n\n                var today = new Date();\n                if (today.getDate() === 25 && today.getMonth() === 3) return 'Happy Birthday, Sabaki!';\n            }\n\n            // Determine end of main variation and show game result\n\n            if (tree.subtrees.length === 0 && index === tree.nodes.length - 1 && gametree.onMainTrack(tree)) {\n                var rootNode = gametree.getRoot(tree).nodes[0];\n\n                if ('RE' in rootNode && rootNode.RE[0].trim() !== '') return 'Result: ' + rootNode.RE[0];\n            }\n\n            // Determine capture\n\n            var ptp = gametree.navigate(tree, index, -1);\n\n            if (ptp) {\n                var prevBoard = ptp[0].nodes[ptp[1]].board || gametree.getBoard.apply(gametree, _toConsumableArray(ptp));\n\n                if (!helper.vertexEquals(prevBoard.captures, board.captures)) return 'Take';\n            }\n\n            // Get current vertex\n\n            var vertex = void 0;\n\n            if ('B' in node && node.B[0] !== '') vertex = sgf.point2vertex(node.B[0]);else if ('W' in node && node.W[0] !== '') vertex = sgf.point2vertex(node.W[0]);else if ('W' in node || 'B' in node) return 'Pass';else return '';\n\n            return boardmatcher.getMoveInterpretation(board, vertex) || '';\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref2) {\n            var _ref2$moveAnnotation = _slicedToArray(_ref2.moveAnnotation, 2),\n                ma = _ref2$moveAnnotation[0],\n                mv = _ref2$moveAnnotation[1],\n                _ref2$positionAnnotat = _slicedToArray(_ref2.positionAnnotation, 2),\n                pa = _ref2$positionAnnotat[0],\n                pv = _ref2$positionAnnotat[1],\n                title = _ref2.title;\n\n            var moveData = {\n                '-1': ['Bad move', 'badmove'],\n                '0': ['Doubtful move', 'doubtfulmove'],\n                '1': ['Interesting move', 'interestingmove'],\n                '2': ['Good move', 'goodmove']\n            };\n\n            if (mv > 1) {\n                for (var s in moveData) {\n                    moveData[s][0] = 'Very ' + moveData[s][0].toLowerCase();\n                }\n            }\n\n            var positionData = {\n                '-1': ['Good for white', 'white'],\n                '0': ['Even position', 'balance'],\n                '1': ['Good for black', 'black'],\n                '-2': ['Unclear position', 'unclear']\n            };\n\n            if (pv > 1) {\n                for (var _s in positionData) {\n                    positionData[_s][0] = 'Very ' + positionData[_s][0].toLowerCase();\n                }\n            }\n\n            var showMoveInterpretation = setting.get('comments.show_move_interpretation');\n\n            return h('p', {\n                class: classNames({\n                    header: true,\n                    movestatus: ma !== null,\n                    positionstatus: pa !== null\n                })\n            }, h('img', {\n                width: 16,\n                height: 16,\n                class: 'positionstatus',\n                title: pa in positionData ? positionData[pa][0] : '',\n                src: pa in positionData ? './img/ui/' + positionData[pa][1] + '.svg' : ''\n            }), h('img', {\n                width: 16,\n                height: 16,\n                class: 'movestatus',\n                title: ma in moveData ? moveData[ma][0] : '',\n                src: ma in moveData ? './img/ui/' + moveData[ma][1] + '.svg' : ''\n            }), h('img', {\n                src: './node_modules/octicons/build/svg/pencil.svg',\n                class: 'edit-button',\n                title: 'Edit',\n                width: 16,\n                height: 16,\n                onClick: this.handleEditButtonClick\n            }), h('span', {}, title !== '' ? title : showMoveInterpretation ? this.getCurrentMoveInterpretation() : ''));\n        }\n    }]);\n\n    return CommentTitle;\n}(Component);\n\nvar CommentText = function (_Component2) {\n    _inherits(CommentText, _Component2);\n\n    function CommentText() {\n        _classCallCheck(this, CommentText);\n\n        return _possibleConstructorReturn(this, (CommentText.__proto__ || Object.getPrototypeOf(CommentText)).apply(this, arguments));\n    }\n\n    _createClass(CommentText, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref3) {\n            var board = _ref3.board,\n                comment = _ref3.comment;\n\n            return comment !== this.props.comment || board.width !== this.props.board.width || board.height !== this.props.board.height;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref4) {\n            var _this3 = this;\n\n            var board = _ref4.board,\n                comment = _ref4.comment;\n\n            return h('div', {\n                ref: function ref(el) {\n                    return _this3.element = el;\n                },\n                class: 'comment'\n            }, h(ContentDisplay, {\n                tag: 'div',\n                board: board,\n                dangerouslySetInnerHTML: { __html: helper.markdown(comment) }\n            }));\n        }\n    }]);\n\n    return CommentText;\n}(Component);\n\nvar CommentBox = function (_Component3) {\n    _inherits(CommentBox, _Component3);\n\n    function CommentBox(props) {\n        _classCallCheck(this, CommentBox);\n\n        var _this4 = _possibleConstructorReturn(this, (CommentBox.__proto__ || Object.getPrototypeOf(CommentBox)).call(this));\n\n        _this4.state = {\n            board: new Board()\n        };\n\n        _this4.handleCommentInput = function () {\n            var _this4$props$onCommen = _this4.props.onCommentInput,\n                onCommentInput = _this4$props$onCommen === undefined ? helper.noop : _this4$props$onCommen;\n\n\n            onCommentInput({\n                title: _this4.titleInputElement.value,\n                comment: _this4.textareaElement.value\n            });\n        };\n\n        _this4.handleMenuButtonClick = function () {\n            var _sabaki;\n\n            var _this4$menuButtonElem = _this4.menuButtonElement.getBoundingClientRect(),\n                left = _this4$menuButtonElem.left,\n                bottom = _this4$menuButtonElem.bottom;\n\n            (_sabaki = sabaki).openCommentMenu.apply(_sabaki, _toConsumableArray(_this4.props.treePosition).concat([{\n                x: Math.round(left),\n                y: Math.round(bottom)\n            }]));\n        };\n        return _this4;\n    }\n\n    _createClass(CommentBox, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref5) {\n            var showCommentBox = _ref5.showCommentBox,\n                height = _ref5.height;\n\n            return height !== this.props.height || showCommentBox && !this.dirty;\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(_ref6) {\n            var _this5 = this;\n\n            var treePosition = _ref6.treePosition,\n                mode = _ref6.mode;\n\n            if (mode === 'edit') return;\n\n            // Debounce rendering\n\n            this.dirty = true;\n\n            var treePositionChanged = treePosition !== this.props.treePosition;\n\n            clearTimeout(this.updateId);\n            this.updateId = setTimeout(function () {\n                _this5.dirty = false;\n\n                if (treePositionChanged) {\n                    _this5.setState({\n                        board: gametree.getBoard.apply(gametree, _toConsumableArray(_this5.props.treePosition))\n                    });\n\n                    if (_this5.props.mode === 'edit') {\n                        _this5.element.scrollTop = 0;\n                        if (treePositionChanged) _this5.textareaElement.scrollTop = 0;\n                    }\n\n                    _this5.element.scrollTop = 0;\n                } else {\n                    _this5.setState(_this5.state);\n                }\n            }, setting.get('graph.delay'));\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref7, _ref8) {\n            var _this6 = this;\n\n            var treePosition = _ref7.treePosition,\n                height = _ref7.height,\n                sidebarSplitTransition = _ref7.sidebarSplitTransition,\n                moveAnnotation = _ref7.moveAnnotation,\n                positionAnnotation = _ref7.positionAnnotation,\n                title = _ref7.title,\n                comment = _ref7.comment,\n                _ref7$onResizerMouseD = _ref7.onResizerMouseDown,\n                onResizerMouseDown = _ref7$onResizerMouseD === undefined ? helper.noop : _ref7$onResizerMouseD,\n                _ref7$onLinkClick = _ref7.onLinkClick,\n                onLinkClick = _ref7$onLinkClick === undefined ? helper.noop : _ref7$onLinkClick,\n                _ref7$onCoordinateMou = _ref7.onCoordinateMouseEnter,\n                onCoordinateMouseEnter = _ref7$onCoordinateMou === undefined ? helper.noop : _ref7$onCoordinateMou,\n                _ref7$onCoordinateMou2 = _ref7.onCoordinateMouseLeave,\n                onCoordinateMouseLeave = _ref7$onCoordinateMou2 === undefined ? helper.noop : _ref7$onCoordinateMou2;\n            var board = _ref8.board;\n\n            return h('section', {\n                ref: function ref(el) {\n                    return _this6.element = el;\n                },\n                id: 'properties',\n                style: {\n                    transition: sidebarSplitTransition ? null : 'none',\n                    height: height + '%'\n                }\n            }, h('div', {\n                class: 'horizontalresizer',\n                onMouseDown: onResizerMouseDown\n            }), h('div', { class: 'inner' }, h(CommentTitle, {\n                board: board,\n                treePosition: treePosition,\n                moveAnnotation: moveAnnotation,\n                positionAnnotation: positionAnnotation,\n                title: title\n            }), h(CommentText, {\n                board: board,\n                comment: comment,\n                onLinkClick: onLinkClick,\n                onCoordinateMouseEnter: onCoordinateMouseEnter,\n                onCoordinateMouseLeave: onCoordinateMouseLeave\n            })), h('div', { class: 'edit' }, h('div', { class: 'header' }, h('img', {\n                ref: function ref(el) {\n                    return _this6.menuButtonElement = el;\n                },\n                src: './node_modules/octicons/build/svg/chevron-down.svg',\n                width: 16,\n                height: 16,\n                onClick: this.handleMenuButtonClick\n            }), h('div', {}, h('input', {\n                ref: function ref(el) {\n                    return _this6.titleInputElement = el;\n                },\n                type: 'text',\n                name: 'title',\n                value: title,\n                placeholder: 'Title',\n                onInput: this.handleCommentInput\n            }))), h('textarea', {\n                ref: function ref(el) {\n                    return _this6.textareaElement = el;\n                },\n                placeholder: 'Comment',\n                value: comment,\n                onInput: this.handleCommentInput\n            })));\n        }\n    }]);\n\n    return CommentBox;\n}(Component);\n\nmodule.exports = CommentBox;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(2),\n    shell = _require.shell;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar gametree = __webpack_require__(4);\nvar helper = __webpack_require__(1);\n\nvar ContentDisplay = function (_Component) {\n    _inherits(ContentDisplay, _Component);\n\n    function ContentDisplay() {\n        _classCallCheck(this, ContentDisplay);\n\n        return _possibleConstructorReturn(this, (ContentDisplay.__proto__ || Object.getPrototypeOf(ContentDisplay)).apply(this, arguments));\n    }\n\n    _createClass(ContentDisplay, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.componentDidUpdate();\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            var _this2 = this;\n\n            // Handle link clicks\n\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = this.element.querySelectorAll('a')[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var el = _step.value;\n\n                    el.addEventListener('click', function (evt) {\n                        var linkElement = evt.currentTarget;\n\n                        if (linkElement.classList.contains('external')) {\n                            evt.preventDefault();\n                            shell.openExternal(linkElement.href);\n                        } else if (linkElement.classList.contains('movenumber')) {\n                            evt.preventDefault();\n                            var moveNumber = +linkElement.innerText.slice(1);\n\n                            sabaki.setUndoPoint('Go Back');\n                            sabaki.goToMainVariation();\n                            sabaki.goToMoveNumber(moveNumber);\n                        }\n                    });\n                }\n\n                // Hover on coordinates\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            var _loop = function _loop(_el) {\n                _el.addEventListener('mouseenter', function (evt) {\n                    var board = _this2.props.board;\n\n                    var vertex = board.coord2vertex(_el.innerText);\n                    sabaki.setState({ highlightVertices: [vertex] });\n                });\n\n                _el.addEventListener('mouseleave', function (evt) {\n                    sabaki.setState({ highlightVertices: [] });\n                });\n            };\n\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n                for (var _iterator2 = this.element.querySelectorAll('.coord')[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                    var _el = _step2.value;\n\n                    _loop(_el);\n                }\n            } catch (err) {\n                _didIteratorError2 = true;\n                _iteratorError2 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                        _iterator2.return();\n                    }\n                } finally {\n                    if (_didIteratorError2) {\n                        throw _iteratorError2;\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref) {\n            var _this3 = this;\n\n            var tag = _ref.tag;\n\n            return h(tag, Object.assign({ ref: function ref(el) {\n                    return _this3.element = el;\n                } }, this.props));\n        }\n    }]);\n\n    return ContentDisplay;\n}(Component);\n\nmodule.exports = ContentDisplay;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"(;GM[1]AP[Sabaki:0.30.0]CA[UTF-8]SZ[19]\\n(;AB[dd][kc][qd]N[Low Chinese opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[kc][dd][qd]\\n)(;AB[dd][kd][qd]N[High Chinese opening]AE[so]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][ld][md][nd][od][pd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dd][kd][qd]\\n)(;AB[dd][pc][qe]N[Orthodox opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][re][se][af][bf][cf][df][ef][ff][gf][hf][if][jf][kf][lf][mf][nf][of][pf][qf][rf][sf]MA[pc][dd][qe]\\n)(;AB[cd][pc][qe]N[Orthodox opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][qc][rc][sc][ad][bd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][re][se][af][bf][cf][df][ef][ff][gf][hf][if][jf][kf][lf][mf][nf][of][pf][qf][rf][sf]MA[pc][cd][qe]\\n)(;AB[dc][nc][jd]AW[pd]N[Kobayashi opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][ec][fc][gc][hc][ic][jc][kc][lc][mc][oc][pc][qc][rc][sc][ad][bd][cd][dd][ed][fd][gd][hd][id][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dc][nc][jd][pd]\\n)(;AB[cd][nc][ic]AW[pd]N[Small Chinese opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][jc][kc][lc][mc][oc][pc][qc][rc][sc][ad][bd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[ic][nc][cd][pd]\\n)(;AB[cd][hc][nc]AW[pd]N[Micro Chinese opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][ic][jc][kc][lc][mc][oc][pc][qc][rc][sc][ad][bd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[hc][nc][cd][pd]\\n)(;AB[pd][jd][dd]N[Sanrensei opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dd][jd][pd]\\n)(;AB[dd][pd]N[Nirensei opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dd][pd]\\n)(;AB[qd][pq][cp][pe]AW[dc][oc][qo]N[Shūsaku opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][pc][qc][rc][sc][ad][bd][cd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][qe][re][se][af][bf][cf][df][ef][ff][gf][hf][if][jf][kf][lf][mf][nf][of][pf][qf][rf][sf][ag][bg][cg][dg][eg][fg][gg][hg][ig][jg][kg][lg][mg][ng][og][pg][qg][rg][sg][ah][bh][ch][dh][eh][fh][gh][hh][ih][jh][kh][lh][mh][nh][oh][ph][qh][rh][sh][ai][bi][ci][di][ei][fi][gi][hi][ii][ji][ki][li][mi][ni][oi][pi][qi][ri][si][aj][bj][cj][dj][ej][fj][gj][hj][ij][jj][kj][lj][mj][nj][oj][pj][qj][rj][sj][ak][bk][ck][dk][ek][fk][gk][hk][ik][jk][kk][lk][mk][nk][ok][pk][qk][rk][sk][al][bl][cl][dl][el][fl][gl][hl][il][jl][kl][ll][ml][nl][ol][pl][ql][rl][sl][am][bm][cm][dm][em][fm][gm][hm][im][jm][km][lm][mm][nm][om][pm][qm][rm][sm][an][bn][cn][dn][en][fn][gn][hn][in][jn][kn][ln][mn][nn][on][pn][qn][rn][sn][ao][bo][co][do][eo][fo][go][ho][io][jo][ko][lo][mo][no][oo][po][ro][so][ap][bp][dp][ep][fp][gp][hp][ip][jp][kp][lp][mp][np][op][pp][qp][rp][sp][aq][bq][cq][dq][eq][fq][gq][hq][iq][jq][kq][lq][mq][nq][oq][qq][rq][sq][ar][br][cr][dr][er][fr][gr][hr][ir][jr][kr][lr][mr][nr][or][pr][qr][rr][sr][as][bs][cs][ds][es][fs][gs][hs][is][js][ks][ls][ms][ns][os][ps][qs][rs][ss]MA[dc][oc][qd][pe][qo][cp][pq]\\n)(;AE[oc][qd]AB[qc]N[3-3 point]C[type: corner]CR[qa][ra][sa][qb][rb][sb][rc][sc]MA[qc]\\n)(;AW[qd]AB[oc]N[Low approach]C[type: corner]CR[na][nb][nc][nd][ne][oa][ob][od][oe][pa][pb][pc][pd][pe][qa][qb][qc][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[oc]\\n)(;AW[pd]AB[nc]N[Low approach]C[type: corner]CR[ma][mb][mc][md][me][na][nb][nd][ne][oa][ob][oc][od][oe][pa][pb][pc][pe][qa][qb][qc][qd][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[nc]\\n)(;AW[qd]AB[od]N[High approach]C[type: corner]CR[na][nb][nc][nd][ne][oa][ob][oc][oe][pa][pb][pc][pd][pe][qa][qb][qc][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[od]\\n)(;AW[pd]AB[nd]N[High approach]C[type: corner]CR[ma][mb][mc][md][me][na][nb][nc][ne][oa][ob][oc][od][oe][pa][pb][pc][pe][qa][qb][qc][qd][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[nd]\\n)(;AB[oc][qd]N[Low enclosure]C[type: corner]CR[na][oa][pa][qa][ra][sa][nb][ob][pb][qb][rb][sb][nc][pc][qc][rc][sc][nd][od][pd][rd][sd][ne][oe][pe][qe][re][se]MA[oc][qd]\\n)(;AB[nc][pd]N[Low enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][oc][pc][qc][rc][sc][md][nd][od][qd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nc][pd]\\n)(;AB[od][qd]N[High enclosure]C[type: corner]CR[na][oa][pa][qa][ra][sa][nb][ob][pb][qb][rb][sb][nc][oc][pc][qc][rc][sc][nd][pd][rd][sd][ne][oe][pe][qe][re][se]MA[od][qd]\\n)(;AB[nd][pd]N[High enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][nc][oc][pc][qc][rc][sc][md][od][qd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nd][pd]\\n)(;AB[nc][qd]N[Low enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][oc][pc][qc][rc][sc][md][nd][od][pd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nc][qd]\\n)(;AB[mc][pd]N[Low enclosure]C[type: corner]CR[la][ma][na][oa][pa][qa][ra][sa][lb][mb][nb][ob][pb][qb][rb][sb][lc][nc][oc][pc][qc][rc][sc][ld][md][nd][od][qd][rd][sd][le][me][ne][oe][pe][qe][re][se]MA[mc][pd]\\n)(;AB[nd][qd]N[High enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][nc][oc][pc][qc][rc][sc][md][od][pd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nd][qd]\\n)(;AB[md][pd]N[High enclosure]C[type: corner]CR[la][ma][na][oa][pa][qa][ra][sa][lb][mb][nb][ob][pb][qb][rb][sb][lc][mc][nc][oc][pc][qc][rc][sc][ld][nd][od][qd][rd][sd][le][me][ne][oe][pe][qe][re][se]MA[md][pd]\\n)(;AB[dd][de][ef][ff][fd]N[Mouth shape]CR[ec][ed][fe][ge]MA[dd][fd][de][ef][ff]\\n)(;AB[dd][de][fd][ff]N[Table shape]MA[dd][fd][de][ff]CR[ed][ee][fe][ge]\\n)(;AB[dd][ed][df][fg]N[Tippy table]CR[de][ee][ef][ff]MA[fg]\\n)(;AB[dd][ed][df][ef]N[Bamboo joint]MA[dd][ed][df][ef]CR[de][ee]\\n)(;AB[dd][de][fd][ge]N[Trapezium]CR[ed][gd][ee][fe][ff]MA[fd][ge]\\n)(;AB[dd][ce][ee][df]N[Diamond]MA[dd][ce][ee][df]CR[de]\\n)(;AB[dd][ee][fd]N[Tiger’s mouth]CR[ec][ed]MA[dd][fd][ee]\\n)(;AB[dd][de][ed]N[Empty triangle]MA[dd][ed][de]CR[ee]\\n)(;AB[dd][ed][ee]AW[de]N[Turn]MA[dd][ee]\\n)(;AB[dd][de]N[Stretch]MA[dd][de]\\n)(;AB[dd][ee]N[Diagonal]MA[dd][ee]CR[ed][de]\\n)(;AB[dd]AW[ed][cd]N[Wedge]CR[dc][de]MA[dd]\\n)(;AB[dd][ee]AW[ed]N[Hane]MA[dd][ee]CR[de]\\n)(;AB[dd][ee]AW[ed][de]N[Cut]MA[dd][ee]\\n)(;AB[dd][fd][ff][df]N[Square]MA[dd][fd][df][ff]CR[ee]\\n)(;AB[dd][fe][df][fg]N[Parallelogram]MA[dd][fe][df][fg]CR[ee][ef]\\n)(;AB[dd][df][fe]N[Dog’s head]MA[dd][fe][df]CR[ed][de][ee][ef]\\n)(;AB[dd][df][ge]N[Horse’s head]MA[dd][ge][df]CR[ed][de][ee][fe][ef]\\n)(;AB[dd]AW[ed]N[Attachment]CR[dc][ec][de][ee]MA[dd]\\n)(;AB[dd][fd]N[One-point jump]MA[dd][fd]CR[ed]\\n)(;AB[dd][fe][eg]N[Big bulge]MA[dd][fe][eg]CR[ee][ef]\\n)(;AB[dd][fe]N[Small knight]MA[dd][fe]CR[ed][ee]\\n)(;AB[dd][gd]N[Two-point jump]MA[dd][gd]CR[ed][fd]\\n)(;AB[dd][ge]N[Large knight]MA[dd][ge]CR[ed][fd][ee][fe]\\n)(;AB[dd]AW[ee]N[Shoulder hit]CR[cc][dc][ec][cd][ed][ce][de]MA[dd]\\n)(;AB[dd][ff]N[Diagonal jump]MA[dd][ff]CR[ed][de][ee][fe][ef]\\n))\"\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar gametree = __webpack_require__(4);\n\nvar InfoDrawer = __webpack_require__(44);\nvar ScoreDrawer = __webpack_require__(47);\nvar PreferencesDrawer = __webpack_require__(6);\nvar GameChooserDrawer = __webpack_require__(48);\nvar CleanMarkupDrawer = __webpack_require__(6);\n\nvar DrawerManager = function (_Component) {\n    _inherits(DrawerManager, _Component);\n\n    function DrawerManager() {\n        _classCallCheck(this, DrawerManager);\n\n        var _this = _possibleConstructorReturn(this, (DrawerManager.__proto__ || Object.getPrototypeOf(DrawerManager)).call(this));\n\n        _this.handleScoreSubmit = function (_ref) {\n            var resultString = _ref.resultString;\n\n            _this.props.rootTree.nodes[0].RE = [resultString];\n            sabaki.closeDrawer();\n            setTimeout(function () {\n                return sabaki.setMode('play');\n            }, 500);\n        };\n\n        _this.handleGameSelect = function (_ref2) {\n            var selectedTree = _ref2.selectedTree;\n\n            sabaki.closeDrawer();\n            sabaki.setMode('play');\n            sabaki.setCurrentTreePosition(selectedTree, 0);\n        };\n\n        _this.handleGameTreesChange = function (evt) {\n            var newGameTrees = evt.gameTrees;\n            var _this$props = _this.props,\n                gameTrees = _this$props.gameTrees,\n                gameIndex = _this$props.gameIndex,\n                rootTree = _this$props.rootTree;\n\n\n            if (!newGameTrees.includes(rootTree)) {\n                var _sabaki;\n\n                if (newGameTrees.length === 0) {\n                    newGameTrees = [sabaki.getEmptyGameTree()];\n                }\n\n                var newIndex = Math.min(Math.max(gameIndex - 1, 0), newGameTrees.length - 1);\n                var newTreePosition = [newGameTrees[newIndex], 0];\n\n                (_sabaki = sabaki).setCurrentTreePosition.apply(_sabaki, newTreePosition);\n            }\n\n            sabaki.setState({ gameTrees: newGameTrees });\n        };\n        return _this;\n    }\n\n    _createClass(DrawerManager, [{\n        key: 'render',\n        value: function render(_ref3) {\n            var mode = _ref3.mode,\n                openDrawer = _ref3.openDrawer,\n                gameTrees = _ref3.gameTrees,\n                gameIndex = _ref3.gameIndex,\n                treePosition = _ref3.treePosition,\n                rootTree = _ref3.rootTree,\n                gameInfo = _ref3.gameInfo,\n                currentPlayer = _ref3.currentPlayer,\n                scoringMethod = _ref3.scoringMethod,\n                scoreBoard = _ref3.scoreBoard,\n                areaMap = _ref3.areaMap,\n                engines = _ref3.engines,\n                attachedEngines = _ref3.attachedEngines,\n                graphGridSize = _ref3.graphGridSize,\n                preferencesTab = _ref3.preferencesTab;\n\n            return h('section', {}, h(InfoDrawer, {\n                show: openDrawer === 'info',\n                engines: attachedEngines,\n                treePosition: treePosition,\n                gameInfo: gameInfo,\n                currentPlayer: currentPlayer\n            }), h(PreferencesDrawer, {\n                show: openDrawer === 'preferences',\n                tab: preferencesTab,\n                engines: engines,\n                graphGridSize: graphGridSize\n            }), h(GameChooserDrawer, {\n                show: openDrawer === 'gamechooser',\n                gameTrees: gameTrees,\n                gameIndex: gameIndex,\n\n                onItemClick: this.handleGameSelect,\n                onChange: this.handleGameTreesChange\n            }), h(CleanMarkupDrawer, {\n                show: openDrawer === 'cleanmarkup',\n                treePosition: treePosition\n            }), h(ScoreDrawer, {\n                show: openDrawer === 'score',\n                estimating: mode === 'estimator',\n                areaMap: areaMap,\n                board: scoreBoard,\n                method: scoringMethod,\n                komi: +gametree.getRootProperty(treePosition[0], 'KM', 0),\n\n                onSubmitButtonClick: this.handleScoreSubmit\n            }));\n        }\n    }]);\n\n    return DrawerManager;\n}(Component);\n\nmodule.exports = DrawerManager;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(2),\n    remote = _require.remote;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar classNames = __webpack_require__(3);\nvar Pikaday = __webpack_require__(45);\n\nvar Drawer = __webpack_require__(17);\n\nvar gametree = __webpack_require__(4);\nvar helper = __webpack_require__(1);\nvar setting = remote.require('./setting');\n\nvar _require3 = __webpack_require__(7),\n    sgf = _require3.sgf;\n\nvar InfoDrawerItem = function (_Component) {\n    _inherits(InfoDrawerItem, _Component);\n\n    function InfoDrawerItem() {\n        _classCallCheck(this, InfoDrawerItem);\n\n        return _possibleConstructorReturn(this, (InfoDrawerItem.__proto__ || Object.getPrototypeOf(InfoDrawerItem)).apply(this, arguments));\n    }\n\n    _createClass(InfoDrawerItem, [{\n        key: 'render',\n        value: function render(_ref) {\n            var title = _ref.title,\n                children = _ref.children;\n\n            return h('li', {}, h('label', {}, h('span', {}, title + ':'), children[0]), children.slice(1));\n        }\n    }]);\n\n    return InfoDrawerItem;\n}(Component);\n\nvar InfoDrawer = function (_Component2) {\n    _inherits(InfoDrawer, _Component2);\n\n    function InfoDrawer() {\n        _classCallCheck(this, InfoDrawer);\n\n        var _this2 = _possibleConstructorReturn(this, (InfoDrawer.__proto__ || Object.getPrototypeOf(InfoDrawer)).call(this));\n\n        _this2.handleSubmitButtonClick = function (evt) {\n            var _sabaki;\n\n            evt.preventDefault();\n\n            var _this2$props$treePosi = _slicedToArray(_this2.props.treePosition, 2),\n                tree = _this2$props$treePosi[0],\n                index = _this2$props$treePosi[1];\n\n            var emptyTree = !tree.parent && tree.nodes.length === 1 && tree.subtrees.length === 0;\n\n            var keys = ['blackName', 'blackRank', 'whiteName', 'whiteRank', 'gameName', 'eventName', 'date', 'result', 'komi'];\n\n            var data = keys.reduce(function (acc, key) {\n                acc[key] = Array.isArray(_this2.state[key]) && _this2.state[key].every(function (x) {\n                    return x == null;\n                }) ? null : _this2.state[key];\n                return acc;\n            }, {});\n\n            if (emptyTree) {\n                data.handicap = _this2.state.handicap;\n                data.size = _this2.state.size;\n            }\n\n            sabaki.setGameInfo(_this2.props.treePosition[0], data);\n            sabaki.closeDrawer();\n            (_sabaki = sabaki).attachEngines.apply(_sabaki, _toConsumableArray(_this2.state.engines));\n\n            sabaki.setState(sabaki.state, function () {\n                var i = _this2.props.currentPlayer > 0 ? 0 : 1;\n\n                if (sabaki.attachedEngineControllers[i] != null) {\n                    sabaki.startGeneratingMoves();\n                }\n            });\n        };\n\n        _this2.handleCancelButtonClick = function (evt) {\n            evt.preventDefault();\n            sabaki.closeDrawer();\n        };\n\n        _this2.handleBoardWidthFocus = function () {\n            _this2.combinedSizeFields = _this2.state.size[0] === _this2.state.size[1];\n        };\n\n        _this2.handleBoardWidthChange = function (evt) {\n            var value = evt.currentTarget.value;\n\n            if (value === '') value = null;\n\n            _this2.setState(function (_ref2) {\n                var _ref2$size = _slicedToArray(_ref2.size, 2),\n                    height = _ref2$size[1];\n\n                return {\n                    size: [value, _this2.combinedSizeFields ? value : height]\n                };\n            });\n        };\n\n        _this2.handleBoardHeightChange = function (evt) {\n            var value = evt.currentTarget.value;\n\n            if (value === '') value = null;\n\n            _this2.setState(function (_ref3) {\n                var _ref3$size = _slicedToArray(_ref3.size, 1),\n                    width = _ref3$size[0];\n\n                return { size: [width, value] };\n            });\n        };\n\n        _this2.handleSizeSwapButtonClick = function () {\n            _this2.setState(function (_ref4) {\n                var size = _ref4.size;\n                return { size: size.reverse() };\n            });\n        };\n\n        _this2.handleSwapPlayers = function () {\n            _this2.setState(function (_ref5) {\n                var engines = _ref5.engines,\n                    blackName = _ref5.blackName,\n                    blackRank = _ref5.blackRank,\n                    whiteName = _ref5.whiteName,\n                    whiteRank = _ref5.whiteRank;\n                return {\n                    engines: (engines || [null, null]).reverse(),\n                    blackName: whiteName,\n                    whiteName: blackName,\n                    blackRank: whiteRank,\n                    whiteRank: blackRank\n                };\n            });\n        };\n\n        _this2.handleDateInputChange = function (evt) {\n            _this2.setState({ date: evt.currentTarget.value });\n            _this2.markDates();\n        };\n\n        _this2.handleDateInputFocus = function () {\n            _this2.pikaday.show();\n        };\n\n        _this2.handleDateInputBlur = function () {\n            setTimeout(function () {\n                if (!_this2.elementInPikaday(document.activeElement)) _this2.pikaday.hide();\n            }, 50);\n        };\n\n        _this2.handleShowResultClick = function () {\n            _this2.setState({ showResult: true });\n        };\n\n        _this2.handleInputChange = ['blackRank', 'blackName', 'whiteRank', 'whiteName', 'gameName', 'eventName', 'komi', 'result', 'handicap'].reduce(function (acc, key) {\n            acc[key] = function (_ref6) {\n                var currentTarget = _ref6.currentTarget;\n\n                _this2.setState(_defineProperty({}, key, currentTarget.value === '' ? null : currentTarget.value));\n            };\n\n            return acc;\n        }, {});\n\n        _this2.handleEngineMenuClick = [0, 1].map(function (index) {\n            return function (evt) {\n                var engines = setting.get('engines.list');\n                var nameKey = ['blackName', 'whiteName'][index];\n                var autoName = _this2.state.engines[index] == null ? _this2.state[nameKey] == null : _this2.state[nameKey] === _this2.state.engines[index].name.trim();\n\n                var template = [{\n                    label: 'Manual',\n                    type: 'checkbox',\n                    checked: _this2.state.engines[index] == null,\n                    click: function click() {\n                        var engines = _this2.state.engines;\n\n                        if (engines[index] == null) return;\n\n                        engines[index] = null;\n\n                        _this2.setState(_defineProperty({\n                            engines: engines\n                        }, nameKey, autoName ? null : _this2.state[nameKey]));\n                    }\n                }, { type: 'separator' }].concat(_toConsumableArray(engines.map(function (engine) {\n                    return {\n                        label: engine.name.trim() || '(Unnamed Engine)',\n                        type: 'checkbox',\n                        checked: engine === _this2.state.engines[index],\n                        click: function click() {\n                            var engines = _this2.state.engines;\n\n                            engines[index] = engine;\n\n                            _this2.setState(_defineProperty({\n                                engines: engines\n                            }, nameKey, autoName ? engine.name.trim() : _this2.state[nameKey]));\n                        }\n                    };\n                })), [engines.length > 0 && { type: 'separator' }, {\n                    label: 'Manage Engines…',\n                    click: function click() {\n                        sabaki.setState({ preferencesTab: 'engines' });\n                        sabaki.openDrawer('preferences');\n                    }\n                }]).filter(function (x) {\n                    return !!x;\n                });\n\n                var _evt$currentTarget$ge = evt.currentTarget.getBoundingClientRect(),\n                    left = _evt$currentTarget$ge.left,\n                    bottom = _evt$currentTarget$ge.bottom;\n\n                helper.popupMenu(template, left, bottom);\n            };\n        });\n        return _this2;\n    }\n\n    _createClass(InfoDrawer, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(_ref7) {\n            var gameInfo = _ref7.gameInfo,\n                engines = _ref7.engines,\n                show = _ref7.show;\n\n            if (!this.props.show && show) {\n                this.setState(Object.assign({}, gameInfo, {\n                    engines: [].concat(_toConsumableArray(engines)),\n                    showResult: !gameInfo.result || gameInfo.result.trim() === ''\n                }));\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.preparePikaday();\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref8) {\n            var show = _ref8.show;\n\n            return show !== this.props.show || show;\n        }\n    }, {\n        key: 'markDates',\n        value: function markDates() {\n            var dates = (sgf.string2dates(this.state.date || '') || []).filter(function (x) {\n                return x.length === 3;\n            });\n\n            var _loop = function _loop(el) {\n                var year = +el.dataset.pikaYear;\n                var month = +el.dataset.pikaMonth;\n                var day = +el.dataset.pikaDay;\n\n                el.parentElement.classList.toggle('is-multi-selected', dates.some(function (d) {\n                    return helper.shallowEquals(d, [year, month + 1, day]);\n                }));\n            };\n\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = this.pikaday.el.querySelectorAll('.pika-button')[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var el = _step.value;\n\n                    _loop(el);\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'adjustPikadayPosition',\n        value: function adjustPikadayPosition() {\n            var _dateInputElement$get = this.dateInputElement.getBoundingClientRect(),\n                left = _dateInputElement$get.left,\n                top = _dateInputElement$get.top;\n\n            var el = this.pikaday.el;\n\n            var _el$getBoundingClient = el.getBoundingClientRect(),\n                height = _el$getBoundingClient.height;\n\n            el.style.position = 'absolute';\n            el.style.left = Math.round(left) + 'px';\n            el.style.top = Math.round(top - height) + 'px';\n        }\n    }, {\n        key: 'elementInPikaday',\n        value: function elementInPikaday(element) {\n            while (element.parentElement) {\n                if (element === this.pikaday.el) return true;\n                element = element.parentElement;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'preparePikaday',\n        value: function preparePikaday() {\n            var _this3 = this;\n\n            this.pikaday = new Pikaday({\n                position: 'top left',\n                firstDay: 1,\n                yearRange: 6,\n                keyboardInput: false,\n\n                onOpen: function onOpen() {\n                    if (!_this3.pikaday) return;\n\n                    var dates = (sgf.string2dates(_this3.state.date || '') || []).filter(function (x) {\n                        return x.length === 3;\n                    });\n\n                    if (dates.length > 0) {\n                        _this3.pikaday.setDate(dates[0].join('-'), true);\n                    } else {\n                        _this3.pikaday.gotoToday();\n                    }\n\n                    _this3.adjustPikadayPosition();\n                },\n                onDraw: function onDraw() {\n                    if (!_this3.pikaday || !_this3.pikaday.isVisible()) return;\n\n                    _this3.adjustPikadayPosition();\n                    _this3.markDates();\n\n                    _this3.dateInputElement.focus();\n                },\n                onSelect: function onSelect(date) {\n                    if (!_this3.pikaday) return;\n\n                    var dates = sgf.string2dates(_this3.state.date || '') || [];\n                    date = [date.getFullYear(), date.getMonth() + 1, date.getDate()];\n\n                    if (!dates.some(function (x) {\n                        return helper.shallowEquals(x, date);\n                    })) {\n                        dates.push(date);\n                    } else {\n                        dates = dates.filter(function (x) {\n                            return !helper.shallowEquals(x, date);\n                        });\n                    }\n\n                    _this3.setState({ date: sgf.dates2string(dates.sort(helper.lexicalCompare)) });\n                    _this3.markDates();\n                }\n            });\n\n            // Hack for removing keyboard input support of Pikaday\n            document.removeEventListener('keydown', this.pikaday._onKeyChange);\n\n            this.pikaday.hide();\n\n            document.body.appendChild(this.pikaday.el);\n            document.body.addEventListener('click', function (evt) {\n                if (_this3.pikaday.isVisible() && document.activeElement !== _this3.dateInputElement && evt.target !== _this3.dateInputElement && !_this3.elementInPikaday(evt.target)) _this3.pikaday.hide();\n            });\n\n            window.addEventListener('resize', function () {\n                return _this3.adjustPikadayPosition();\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref9, _ref10) {\n            var _this4 = this;\n\n            var treePosition = _ref9.treePosition,\n                currentPlayer = _ref9.currentPlayer,\n                show = _ref9.show;\n            var _ref10$showResult = _ref10.showResult,\n                showResult = _ref10$showResult === undefined ? false : _ref10$showResult,\n                _ref10$engines = _ref10.engines,\n                engines = _ref10$engines === undefined ? [null, null] : _ref10$engines,\n                _ref10$blackName = _ref10.blackName,\n                blackName = _ref10$blackName === undefined ? null : _ref10$blackName,\n                _ref10$blackRank = _ref10.blackRank,\n                blackRank = _ref10$blackRank === undefined ? null : _ref10$blackRank,\n                _ref10$whiteName = _ref10.whiteName,\n                whiteName = _ref10$whiteName === undefined ? null : _ref10$whiteName,\n                _ref10$whiteRank = _ref10.whiteRank,\n                whiteRank = _ref10$whiteRank === undefined ? null : _ref10$whiteRank,\n                _ref10$gameName = _ref10.gameName,\n                gameName = _ref10$gameName === undefined ? null : _ref10$gameName,\n                _ref10$eventName = _ref10.eventName,\n                eventName = _ref10$eventName === undefined ? null : _ref10$eventName,\n                _ref10$date = _ref10.date,\n                date = _ref10$date === undefined ? null : _ref10$date,\n                _ref10$result = _ref10.result,\n                result = _ref10$result === undefined ? null : _ref10$result,\n                _ref10$komi = _ref10.komi,\n                komi = _ref10$komi === undefined ? null : _ref10$komi,\n                _ref10$handicap = _ref10.handicap,\n                handicap = _ref10$handicap === undefined ? 0 : _ref10$handicap,\n                _ref10$size = _ref10.size,\n                size = _ref10$size === undefined ? [null, null] : _ref10$size;\n\n            var _treePosition = _slicedToArray(treePosition, 2),\n                tree = _treePosition[0],\n                index = _treePosition[1];\n\n            var emptyTree = !tree.parent && tree.nodes.length === 1 && tree.subtrees.length === 0;\n\n            return h(Drawer, {\n                type: 'info',\n                show: show\n            }, h('form', {}, h('section', {}, h('span', {}, false && h('img', {\n                src: './node_modules/octicons/build/svg/chevron-down.svg',\n                width: 16,\n                height: 16,\n                class: classNames({ menu: true, active: engines[0] != null }),\n                onClick: this.handleEngineMenuClick[0]\n            }), ' ', h('input', {\n                type: 'text',\n                name: 'rank_1',\n                placeholder: 'Rank',\n                value: blackRank,\n                onInput: this.handleInputChange.blackRank\n            }), h('input', {\n                type: 'text',\n                name: 'name_1',\n                placeholder: 'Black',\n                value: blackName,\n                onInput: this.handleInputChange.blackName\n            })), h('img', {\n                class: 'current-player',\n                src: './img/ui/player_' + currentPlayer + '.svg',\n                height: 31,\n                title: 'Swap',\n                onClick: this.handleSwapPlayers\n            }), h('span', {}, h('input', {\n                type: 'text',\n                name: 'name_-1',\n                placeholder: 'White',\n                value: whiteName,\n                onInput: this.handleInputChange.whiteName\n            }), h('input', {\n                type: 'text',\n                name: 'rank_-1',\n                placeholder: 'Rank',\n                value: whiteRank,\n                onInput: this.handleInputChange.whiteRank\n            }), ' ', false && h('img', {\n                src: './node_modules/octicons/build/svg/chevron-down.svg',\n                width: 16,\n                height: 16,\n                class: classNames({ menu: true, active: engines[1] != null }),\n                onClick: this.handleEngineMenuClick[1]\n            }))), h('ul', {}, h(InfoDrawerItem, { title: 'Name' }, h('input', {\n                type: 'text',\n                placeholder: '(Unnamed)',\n                value: gameName,\n                onInput: this.handleInputChange.gameName\n            })), h(InfoDrawerItem, { title: 'Event' }, h('input', {\n                type: 'text',\n                placeholder: 'None',\n                value: eventName,\n                onInput: this.handleInputChange.eventName\n            })), h(InfoDrawerItem, { title: 'Date' }, h('input', {\n                ref: function ref(el) {\n                    return _this4.dateInputElement = el;\n                },\n                type: 'text',\n                placeholder: 'None',\n                value: date,\n\n                onFocus: this.handleDateInputFocus,\n                onBlur: this.handleDateInputBlur,\n                onInput: this.handleDateInputChange\n            })), h(InfoDrawerItem, { title: 'Komi' }, h('input', {\n                type: 'number',\n                name: 'komi',\n                step: 0.5,\n                placeholder: 0,\n                value: komi == null ? '' : komi,\n                onInput: this.handleInputChange.komi\n            })), h(InfoDrawerItem, { title: 'Result' }, showResult ? h('input', {\n                type: 'text',\n                placeholder: 'None',\n                value: result,\n                onInput: this.handleInputChange.result\n            }) : h('button', {\n                type: 'button',\n                onClick: this.handleShowResultClick\n            }, 'Show')), h(InfoDrawerItem, { title: 'Handicap' }, h('select', {\n                selectedIndex: Math.max(0, handicap - 1),\n                disabled: !emptyTree,\n                onChange: this.handleInputChange.handicap\n            }, h('option', { value: 0 }, 'No stones'), [].concat(_toConsumableArray(Array(8))).map(function (_, i) {\n                return h('option', { value: i + 2 }, i + 2 + ' stones');\n            }))), h(InfoDrawerItem, { title: 'Board Size' }, h('input', {\n                type: 'number',\n                name: 'size-width',\n                placeholder: 19,\n                max: 25,\n                min: 3,\n                value: size[0],\n                disabled: !emptyTree,\n                onFocus: this.handleBoardWidthFocus,\n                onInput: this.handleBoardWidthChange\n            }), ' ', h('span', {\n                title: 'Swap',\n                style: { cursor: emptyTree ? 'pointer' : 'default' },\n                onClick: !emptyTree ? helper.noop : this.handleSizeSwapButtonClick\n            }, '×'), ' ', h('input', {\n                type: 'number',\n                name: 'size-height',\n                placeholder: 19,\n                max: 25,\n                min: 3,\n                value: size[1],\n                disabled: !emptyTree,\n                onInput: this.handleBoardHeightChange\n            }))), h('p', {}, h('button', { type: 'submit', onClick: this.handleSubmitButtonClick }, 'OK'), ' ', h('button', { type: 'reset', onClick: this.handleCancelButtonClick }, 'Cancel'))));\n        }\n    }]);\n\n    return InfoDrawer;\n}(Component);\n\nmodule.exports = InfoDrawer;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/*!\n * Pikaday\n *\n * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory) {\n    'use strict';\n\n    var moment;\n    if (( false ? 'undefined' : _typeof(exports)) === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try {\n            moment = __webpack_require__(16);\n        } catch (e) {}\n        module.exports = factory(moment);\n    } else if (true) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_RESULT__ = (function (req) {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try {\n                moment = !(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\".\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n            } catch (e) {}\n            return factory(moment);\n        }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n})(this, function (moment) {\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n\n    var hasMoment = typeof moment === 'function',\n        hasEventListeners = !!window.addEventListener,\n        document = window.document,\n        sto = window.setTimeout,\n        addEvent = function addEvent(el, e, callback, capture) {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n        removeEvent = function removeEvent(el, e, callback, capture) {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n        trim = function trim(str) {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n    },\n        hasClass = function hasClass(el, cn) {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n        addClass = function addClass(el, cn) {\n        if (!hasClass(el, cn)) {\n            el.className = el.className === '' ? cn : el.className + ' ' + cn;\n        }\n    },\n        removeClass = function removeClass(el, cn) {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n        isArray = function isArray(obj) {\n        return (/Array/.test(Object.prototype.toString.call(obj))\n        );\n    },\n        isDate = function isDate(obj) {\n        return (/Date/.test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime())\n        );\n    },\n        isWeekend = function isWeekend(date) {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n        isLeapYear = function isLeapYear(year) {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n        getDaysInMonth = function getDaysInMonth(year, month) {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n        setToStartOfDay = function setToStartOfDay(date) {\n        if (isDate(date)) date.setHours(0, 0, 0, 0);\n    },\n        compareDates = function compareDates(a, b) {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n        extend = function extend(to, from, overwrite) {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && _typeof(from[prop]) === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                } else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n        fireEvent = function fireEvent(el, eventName, data) {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n        adjustCalendar = function adjustCalendar(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month) / 12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month) / 12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the toString function which gets passed a current date object and format\n        // and returns a string\n        toString: null,\n\n        // used to create date object from current input string\n        parse: null,\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the default flag for moment's strict date parsing\n        formatStrict: false,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // Week picker mode\n        pickWholeWeek: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // Render days of the calendar grid that fall in the next or previous month\n        showDaysInNextAndPreviousMonths: false,\n\n        // Allows user to select days that fall in the next or previous month\n        enableSelectionDaysInNextAndPreviousMonths: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // Blur field when date is selected\n        blurFieldOnSelect: true,\n\n        // internationalization\n        i18n: {\n            previousMonth: 'Previous Month',\n            nextMonth: 'Next Month',\n            months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n            weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n            weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // events array\n        events: [],\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null,\n\n        // Enable keyboard input\n        keyboardInput: true\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function renderDayName(opts, day, abbr) {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n        renderDay = function renderDay(opts) {\n        var arr = [];\n        var ariaSelected = 'false';\n        if (opts.isEmpty) {\n            if (opts.showDaysInNextAndPreviousMonths) {\n                arr.push('is-outside-current-month');\n\n                if (!opts.enableSelectionDaysInNextAndPreviousMonths) {\n                    arr.push('is-selection-disabled');\n                }\n            } else {\n                return '<td class=\"is-empty\"></td>';\n            }\n        }\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n            ariaSelected = 'true';\n        }\n        if (opts.hasEvent) {\n            arr.push('has-event');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' + '<button class=\"pika-button pika-day\" type=\"button\" ' + 'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' + opts.day + '</button>' + '</td>';\n    },\n        renderWeek = function renderWeek(d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil(((new Date(y, m, d) - onejan) / 86400000 + onejan.getDay() + 1) / 7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n        renderRow = function renderRow(days, isRTL, pickWholeWeek, isRowSelected) {\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n        renderBody = function renderBody(rows) {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n        renderHead = function renderHead(opts) {\n        var i,\n            arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n    },\n        renderTitle = function renderTitle(instance, c, year, month, refYear, randId) {\n        var i,\n            j,\n            arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' + (i === month ? ' selected=\"selected\"' : '') + (isMinYear && i < opts.minMonth || isMaxYear && i > opts.maxMonth ? 'disabled=\"disabled\"' : '') + '>' + opts.i18n.months[i] + '</option>');\n        }\n\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"' : '') + '>' + i + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === instance._o.numberOfMonths - 1) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n        renderTable = function renderTable(opts, data, randId) {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function Pikaday(options) {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function (e) {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function () {\n                            self.hide();\n                            if (opts.blurFieldOnSelect && opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                } else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                } else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function (e) {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            } else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onKeyChange = function (e) {\n            e = e || window.event;\n\n            if (self.isVisible()) {\n\n                switch (e.keyCode) {\n                    case 13:\n                    case 27:\n                        if (opts.field) {\n                            opts.field.blur();\n                        }\n                        break;\n                    case 37:\n                        e.preventDefault();\n                        self.adjustDate('subtract', 1);\n                        break;\n                    case 38:\n                        self.adjustDate('subtract', 7);\n                        break;\n                    case 39:\n                        self.adjustDate('add', 1);\n                        break;\n                    case 40:\n                        self.adjustDate('add', 7);\n                        break;\n                }\n            }\n        };\n\n        self._onInputChange = function (e) {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (opts.parse) {\n                date = opts.parse(opts.field.value, opts.format);\n            } else if (hasMoment) {\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\n                date = date && date.isValid() ? date.toDate() : null;\n            } else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n                self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function () {\n            self.show();\n        };\n\n        self._onInputClick = function () {\n            self.show();\n        };\n\n        self._onInputBlur = function () {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            } while (pEl = pEl.parentNode);\n\n            if (!self._c) {\n                self._b = sto(function () {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function (e) {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            } while (pEl = pEl.parentNode);\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n\n        if (opts.keyboardInput) {\n            addEvent(document, 'keydown', self._onKeyChange);\n        }\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n        /**\n         * configure functionality\n         */\n        config: function config(options) {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = opts.field && opts.field.nodeName ? opts.field : null;\n\n            opts.theme = typeof opts.theme === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = opts.trigger && opts.trigger.nodeName ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = typeof opts.disableDayFn === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if (opts.minDate && opts.maxDate && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function toString(format) {\n            format = format || this._o.format;\n            if (!isDate(this._d)) {\n                return '';\n            }\n            if (this._o.toString) {\n                return this._o.toString(this._d, format);\n            }\n            if (hasMoment) {\n                return moment(this._d).format(format);\n            }\n            return this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function getMoment() {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function setMoment(date, preventOnSelect) {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function getDate() {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function setDate(date, preventOnSelect) {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function gotoDate(date) {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length - 1].year, this.calendars[this.calendars.length - 1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth() + 1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate() - 1);\n                newCalendar = visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate;\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustDate: function adjustDate(sign, days) {\n\n            var day = this.getDate() || new Date();\n            var difference = parseInt(days) * 24 * 60 * 60 * 1000;\n\n            var newDay;\n\n            if (sign === 'add') {\n                newDay = new Date(day.valueOf() + difference);\n            } else if (sign === 'subtract') {\n                newDay = new Date(day.valueOf() - difference);\n            }\n\n            this.setDate(newDay);\n        },\n\n        adjustCalendars: function adjustCalendars() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function gotoToday() {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function gotoMonth(month) {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function nextMonth() {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function prevMonth() {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function gotoYear(year) {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function setMinDate(value) {\n            if (value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.minDate = value;\n                this._o.minYear = value.getFullYear();\n                this._o.minMonth = value.getMonth();\n            } else {\n                this._o.minDate = defaults.minDate;\n                this._o.minYear = defaults.minYear;\n                this._o.minMonth = defaults.minMonth;\n                this._o.startRange = defaults.startRange;\n            }\n\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function setMaxDate(value) {\n            if (value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.maxDate = value;\n                this._o.maxYear = value.getFullYear();\n                this._o.maxMonth = value.getMonth();\n            } else {\n                this._o.maxDate = defaults.maxDate;\n                this._o.maxYear = defaults.maxYear;\n                this._o.maxMonth = defaults.maxMonth;\n                this._o.endRange = defaults.endRange;\n            }\n\n            this.draw();\n        },\n\n        setStartRange: function setStartRange(value) {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function setEndRange(value) {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function draw(force) {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '',\n                randId;\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if (opts.field.type !== 'hidden') {\n                    sto(function () {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                this._o.onDraw(this);\n            }\n\n            if (opts.bound) {\n                // let the screen reader user know to use arrow keys\n                opts.field.setAttribute('aria-label', 'Use the arrow keys to pick a date');\n            }\n        },\n\n        adjustPosition: function adjustPosition() {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top = pEl.offsetTop + pEl.offsetHeight;\n                while (pEl = pEl.offsetParent) {\n                    left += pEl.offsetLeft;\n                    top += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if (this._o.reposition && left + width > viewportWidth || this._o.position.indexOf('right') > -1 && left - width + field.offsetWidth > 0) {\n                left = left - width + field.offsetWidth;\n            }\n            if (this._o.reposition && top + height > viewportHeight + scrollTop || this._o.position.indexOf('top') > -1 && top - height - field.offsetHeight > 0) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function render(year, month, randId) {\n            var opts = this._o,\n                now = new Date(),\n                days = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data = [],\n                row = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var previousMonth = month === 0 ? 11 : month - 1,\n                nextMonth = month === 11 ? 0 : month + 1,\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\n                yearOfNextMonth = month === 11 ? year + 1 : year,\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n            var cells = days + before,\n                after = cells;\n            while (after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            var isWeekSelected = false;\n            for (var i = 0, r = 0; i < cells; i++) {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n                    isEmpty = i < before || i >= days + before,\n                    dayNumber = 1 + (i - before),\n                    monthNumber = month,\n                    yearNumber = year,\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = opts.minDate && day < opts.minDate || opts.maxDate && day > opts.maxDate || opts.disableWeekends && isWeekend(day) || opts.disableDayFn && opts.disableDayFn(day);\n\n                if (isEmpty) {\n                    if (i < before) {\n                        dayNumber = daysInPreviousMonth + dayNumber;\n                        monthNumber = previousMonth;\n                        yearNumber = yearOfPreviousMonth;\n                    } else {\n                        dayNumber = dayNumber - days;\n                        monthNumber = nextMonth;\n                        yearNumber = yearOfNextMonth;\n                    }\n                }\n\n                var dayConfig = {\n                    day: dayNumber,\n                    month: monthNumber,\n                    year: yearNumber,\n                    hasEvent: hasEvent,\n                    isSelected: isSelected,\n                    isToday: isToday,\n                    isDisabled: isDisabled,\n                    isEmpty: isEmpty,\n                    isStartRange: isStartRange,\n                    isEndRange: isEndRange,\n                    isInRange: isInRange,\n                    showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n                    enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n                };\n\n                if (opts.pickWholeWeek && isSelected) {\n                    isWeekSelected = true;\n                }\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n                    row = [];\n                    r = 0;\n                    isWeekSelected = false;\n                }\n            }\n            return renderTable(opts, data, randId);\n        },\n\n        isVisible: function isVisible() {\n            return this._v;\n        },\n\n        show: function show() {\n            if (!this.isVisible()) {\n                this._v = true;\n                this.draw();\n                removeClass(this.el, 'is-hidden');\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function hide() {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function destroy() {\n            var opts = this._o;\n\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            if (opts.keyboardInput) {\n                removeEvent(document, 'keydown', this._onKeyChange);\n            }\n            if (opts.field) {\n                removeEvent(opts.field, 'change', this._onInputChange);\n                if (opts.bound) {\n                    removeEvent(opts.trigger, 'click', this._onInputClick);\n                    removeEvent(opts.trigger, 'focus', this._onInputFocus);\n                    removeEvent(opts.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n});\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports) {\n\nfunction webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 46;\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(2),\n    remote = _require.remote;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar Drawer = __webpack_require__(17);\n\nvar helper = __webpack_require__(1);\nvar setting = remote.require('./setting');\n\nvar ScoreRow = function (_Component) {\n    _inherits(ScoreRow, _Component);\n\n    function ScoreRow() {\n        _classCallCheck(this, ScoreRow);\n\n        return _possibleConstructorReturn(this, (ScoreRow.__proto__ || Object.getPrototypeOf(ScoreRow)).apply(this, arguments));\n    }\n\n    _createClass(ScoreRow, [{\n        key: 'render',\n        value: function render(_ref) {\n            var method = _ref.method,\n                score = _ref.score,\n                komi = _ref.komi,\n                sign = _ref.sign;\n\n            var index = sign > 0 ? 0 : 1;\n\n            var total = method === 'area' ? score.area[index] : score.territory[index] + score.captures[index];\n\n            if (sign < 0) total += komi;\n\n            return h('tr', {}, h('th', {}, h('img', {\n                src: './img/goban/stone_' + sign + '.png',\n                alt: sign > 0 ? 'Black' : 'White',\n                width: 24,\n                height: 24\n            })), h('td', { class: classNames({ disabled: method === 'territory' }) }, score.area[index]), h('td', { class: classNames({ disabled: method === 'area' }) }, score.territory[index]), h('td', { class: classNames({ disabled: method === 'area' }) }, score.captures[index]), h('td', {}, sign < 0 ? komi : '-'), h('td', {}, total));\n        }\n    }]);\n\n    return ScoreRow;\n}(Component);\n\nvar ScoreDrawer = function (_Component2) {\n    _inherits(ScoreDrawer, _Component2);\n\n    function ScoreDrawer() {\n        _classCallCheck(this, ScoreDrawer);\n\n        var _this2 = _possibleConstructorReturn(this, (ScoreDrawer.__proto__ || Object.getPrototypeOf(ScoreDrawer)).call(this));\n\n        _this2.handleTerritoryButtonClick = function () {\n            return setting.set('scoring.method', 'territory');\n        };\n        _this2.handleAreaButtonClick = function () {\n            return setting.set('scoring.method', 'area');\n        };\n        _this2.handleCloseButtonClick = function () {\n            return sabaki.closeDrawer();\n        };\n\n        _this2.handleSubmitButtonClick = function (evt) {\n            evt.preventDefault();\n\n            var _this2$props$onSubmit = _this2.props.onSubmitButtonClick,\n                onSubmitButtonClick = _this2$props$onSubmit === undefined ? helper.noop : _this2$props$onSubmit;\n\n            evt.resultString = _this2.resultString;\n            onSubmitButtonClick(evt);\n        };\n        return _this2;\n    }\n\n    _createClass(ScoreDrawer, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref2) {\n            var areaMap = _ref2.areaMap;\n\n            return areaMap != null;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref3) {\n            var show = _ref3.show,\n                estimating = _ref3.estimating,\n                method = _ref3.method,\n                areaMap = _ref3.areaMap,\n                board = _ref3.board,\n                komi = _ref3.komi;\n\n            if (isNaN(komi)) komi = 0;\n\n            var score = board ? board.getScore(areaMap) : { area: [], territory: [], captures: [] };\n            var result = method === 'area' ? score.area[0] - score.area[1] - komi : score.territory[0] - score.territory[1] + score.captures[0] - score.captures[1] - komi;\n\n            this.resultString = result > 0 ? 'B+' + result : result < 0 ? 'W+' + -result : 'Draw';\n\n            return h(Drawer, {\n                type: 'score',\n                show: show\n            }, h('h2', {}, 'Score'), h('ul', { class: 'tabs' }, h('li', { class: classNames({ current: method === 'area' }) }, h('a', {\n                href: '#',\n                onClick: this.handleAreaButtonClick\n            }, 'Area')), h('li', { class: classNames({ current: method === 'territory' }) }, h('a', {\n                href: '#',\n                onClick: this.handleTerritoryButtonClick\n            }, 'Territory'))), h('table', {}, h('thead', {}, h('tr', {}, h('th'), h('th', { disabled: method === 'territory' }, 'Area'), h('th', { disabled: method === 'area' }, 'Territory'), h('th', { disabled: method === 'area' }, 'Captures'), h('th', {}, 'Komi'), h('th', {}, 'Total'))), h('tbody', {}, h(ScoreRow, { method: method, score: score, komi: komi, sign: 1 }), h(ScoreRow, { method: method, score: score, komi: komi, sign: -1 }))), h('form', {}, h('p', {}, 'Result: ', h('span', { class: 'result' }, this.resultString), ' ', !estimating && h('button', {\n                type: 'submit',\n                onClick: this.handleSubmitButtonClick\n            }, 'Update Result'), ' ', h('button', {\n                type: 'reset',\n                onClick: this.handleCloseButtonClick\n            }, 'Close'))));\n        }\n    }]);\n\n    return ScoreDrawer;\n}(Component);\n\nmodule.exports = ScoreDrawer;\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar _require = __webpack_require__(2),\n    remote = _require.remote;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar MiniGoban = __webpack_require__(49);\nvar Drawer = __webpack_require__(17);\n\nvar dialog = __webpack_require__(21);\nvar fileformats = __webpack_require__(7);\nvar gametree = __webpack_require__(4);\nvar helper = __webpack_require__(1);\nvar setting = remote.require('./setting');\nvar sgf = fileformats.sgf;\n\n\nvar thumbnailSize = setting.get('gamechooser.thumbnail_size');\nvar itemMinWidth = thumbnailSize + 12 + 20;\nvar itemHeight = 253 + 10 + 20;\n\nvar getPreviewBoard = function getPreviewBoard(tree) {\n    var tp = gametree.navigate(tree, 0, 30);\n    if (!tp) tp = gametree.navigate(tree, 0, gametree.getCurrentHeight(tree) - 1);\n    return gametree.getBoard.apply(gametree, _toConsumableArray(tp));\n};\n\nvar GameListItem = function (_Component) {\n    _inherits(GameListItem, _Component);\n\n    function GameListItem() {\n        _classCallCheck(this, GameListItem);\n\n        var _this = _possibleConstructorReturn(this, (GameListItem.__proto__ || Object.getPrototypeOf(GameListItem)).call(this));\n\n        var events = ['Click', 'ContextMenu', 'DragStart', 'DragOver'];\n\n        var _loop = function _loop(name) {\n            _this['handle' + name] = function (evt) {\n                var callback = _this.props['on' + name];\n                evt.tree = _this.props.tree;\n                if (callback) callback(evt);\n            };\n        };\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n            for (var _iterator = events[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var name = _step.value;\n\n                _loop(name);\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        return _this;\n    }\n\n    _createClass(GameListItem, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps) {\n            for (var i in nextProps) {\n                if (nextProps[i] !== this.props[i]) return true;\n            }return false;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref) {\n            var _this2 = this;\n\n            var tree = _ref.tree,\n                left = _ref.left,\n                top = _ref.top,\n                draggable = _ref.draggable,\n                showThumbnail = _ref.showThumbnail,\n                insertBefore = _ref.insertBefore,\n                insertAfter = _ref.insertAfter;\n\n            var gameInfo = sabaki.getGameInfo(tree);\n            var gameName = gameInfo.gameName,\n                eventName = gameInfo.eventName,\n                blackName = gameInfo.blackName,\n                blackRank = gameInfo.blackRank,\n                whiteName = gameInfo.whiteName,\n                whiteRank = gameInfo.whiteRank;\n\n            var name = gameName || eventName || '';\n\n            return h('li', {\n                ref: function ref(el) {\n                    return _this2.element = el;\n                },\n                class: classNames({\n                    insertbefore: insertBefore,\n                    insertafter: insertAfter\n                }),\n                style: { left: left, top: top }\n            }, h('div', {\n                draggable: draggable,\n                onClick: this.handleClick,\n                onContextMenu: this.handleContextMenu,\n                onDragStart: this.handleDragStart,\n                onDragOver: this.handleDragOver\n            }, h('span', { title: name }, name), h(MiniGoban, {\n                board: getPreviewBoard(tree),\n                maxSize: thumbnailSize,\n                visible: showThumbnail\n            }), h('span', { class: 'black', title: blackRank }, blackName || 'Black'), h('span', { class: 'white', title: whiteRank }, whiteName || 'White')));\n        }\n    }]);\n\n    return GameListItem;\n}(Component);\n\nvar GameChooserDrawer = function (_Component2) {\n    _inherits(GameChooserDrawer, _Component2);\n\n    function GameChooserDrawer() {\n        _classCallCheck(this, GameChooserDrawer);\n\n        var _this3 = _possibleConstructorReturn(this, (GameChooserDrawer.__proto__ || Object.getPrototypeOf(GameChooserDrawer)).call(this));\n\n        _this3.itemElements = {};\n\n        _this3.state = {\n            scrollTop: 0,\n            insertBefore: -1,\n            animation: false,\n            filterText: ''\n        };\n\n        _this3.handleFilterTextChange = function (evt) {\n            return _this3.setState({\n                filterText: evt.currentTarget.value.trim()\n            });\n        };\n\n        _this3.handleCloseButtonClick = function () {\n            return sabaki.closeDrawer();\n        };\n\n        _this3.handleListScroll = function (evt) {\n            _this3.setState({ scrollTop: evt.currentTarget.scrollTop });\n        };\n\n        _this3.handleItemContextMenu = function (evt) {\n            var template = [{\n                label: '&Remove Game',\n                click: function click() {\n                    if (dialog.showMessageBox('Do you really want to remove this game permanently?', 'warning', ['Remove Game', 'Cancel'], 1) === 1) return;\n\n                    var _this3$props = _this3.props,\n                        gameTrees = _this3$props.gameTrees,\n                        _this3$props$onChange = _this3$props.onChange,\n                        onChange = _this3$props$onChange === undefined ? helper.noop : _this3$props$onChange;\n\n                    var index = gameTrees.indexOf(evt.tree);\n\n                    onChange({ gameTrees: gameTrees.filter(function (_, i) {\n                            return i !== index;\n                        }) });\n                }\n            }, {\n                label: 'Remove &Other Games',\n                click: function click() {\n                    if (dialog.showMessageBox('Do you really want to remove all other games permanently?', 'warning', ['Remove Games', 'Cancel'], 1) === 1) return;\n\n                    var _this3$props$onChange2 = _this3.props.onChange,\n                        onChange = _this3$props$onChange2 === undefined ? helper.noop : _this3$props$onChange2;\n\n                    onChange({ gameTrees: [evt.tree] });\n                }\n            }];\n\n            helper.popupMenu(template, evt.clientX, evt.clientY);\n        };\n\n        _this3.handleItemDragStart = function (evt) {\n            _this3.dragData = _this3.props.gameTrees.indexOf(evt.tree);\n        };\n\n        _this3.handleItemDragOver = function (evt) {\n            if (_this3.dragData == null) return;\n\n            evt.preventDefault();\n\n            var element = evt.currentTarget;\n            var index = _this3.props.gameTrees.indexOf(evt.tree);\n\n            var x = evt.clientX;\n\n            var _element$getBoundingC = element.getBoundingClientRect(),\n                left = _element$getBoundingC.left,\n                width = _element$getBoundingC.width;\n\n            var middle = left + width / 2;\n\n            if (x <= middle - 10) {\n                _this3.setState({ insertBefore: index });\n            } else if (x >= middle + 10) {\n                _this3.setState({ insertBefore: index + 1 });\n            }\n        };\n\n        _this3.handleItemDrop = function (evt) {\n            var _this3$props2 = _this3.props,\n                gameTrees = _this3$props2.gameTrees,\n                _this3$props2$onChang = _this3$props2.onChange,\n                onChange = _this3$props2$onChang === undefined ? helper.noop : _this3$props2$onChang;\n            var insertBefore = _this3.state.insertBefore;\n\n            var newGameTrees = gameTrees.slice();\n\n            if (_this3.dragData == null || insertBefore < 0) return;\n            if (insertBefore > _this3.dragData) insertBefore--;\n\n            var _newGameTrees$splice = newGameTrees.splice(_this3.dragData, 1),\n                _newGameTrees$splice2 = _slicedToArray(_newGameTrees$splice, 1),\n                tree = _newGameTrees$splice2[0];\n\n            newGameTrees.splice(insertBefore, 0, tree);\n\n            _this3.dragData = null;\n            _this3.setState({ insertBefore: -1 });\n\n            onChange({ gameTrees: newGameTrees });\n        };\n\n        _this3.handleCancelDrag = function () {\n            _this3.dragData = null;\n            _this3.setState({ insertBefore: -1 });\n        };\n\n        _this3.handleItemClick = function (evt) {\n            var gameTrees = _this3.props.gameTrees;\n            var _this3$props$onItemCl = _this3.props.onItemClick,\n                onItemClick = _this3$props$onItemCl === undefined ? helper.noop : _this3$props$onItemCl;\n\n            var index = gameTrees.indexOf(evt.tree);\n\n            evt.selectedTree = evt.tree;\n            evt.selectedIndex = index;\n\n            onItemClick(evt);\n        };\n\n        _this3.handleAddButtonClick = function (evt) {\n            var template = [{\n                label: 'Add &New Game',\n                click: function click() {\n                    var tree = sabaki.getEmptyGameTree();\n                    var _this3$props3 = _this3.props,\n                        gameTrees = _this3$props3.gameTrees,\n                        _this3$props3$onChang = _this3$props3.onChange,\n                        onChange = _this3$props3$onChang === undefined ? helper.noop : _this3$props3$onChang;\n\n\n                    onChange({ gameTrees: [].concat(_toConsumableArray(gameTrees), [tree]) });\n                }\n            }, {\n                label: 'Add &Existing Files…',\n                click: function click() {\n                    dialog.showOpenDialog({\n                        properties: ['openFile', 'multiSelections'],\n                        filters: [].concat(_toConsumableArray(fileformats.meta), [{ name: 'All Files', extensions: ['*'] }])\n                    }, function (_ref2) {\n                        var result = _ref2.result;\n                        var _this3$props$onChange3 = _this3.props.onChange,\n                            onChange = _this3$props$onChange3 === undefined ? helper.noop : _this3$props$onChange3;\n\n\n                        sabaki.setBusy(true);\n\n                        if (result) {\n                            try {\n                                var _iteratorNormalCompletion2 = true;\n                                var _didIteratorError2 = false;\n                                var _iteratorError2 = undefined;\n\n                                try {\n                                    for (var _iterator2 = result[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                                        var file = _step2.value;\n\n                                        fileformats.parseFile(file, helper.noop, function (_ref3) {\n                                            var trees = _ref3.trees;\n\n                                            onChange({ gameTrees: [].concat(_toConsumableArray(_this3.props.gameTrees), _toConsumableArray(trees)) });\n                                        });\n                                    }\n                                } catch (err) {\n                                    _didIteratorError2 = true;\n                                    _iteratorError2 = err;\n                                } finally {\n                                    try {\n                                        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                                            _iterator2.return();\n                                        }\n                                    } finally {\n                                        if (_didIteratorError2) {\n                                            throw _iteratorError2;\n                                        }\n                                    }\n                                }\n                            } catch (err) {\n                                dialog.showMessageBox('Some files are unreadable.', 'warning');\n                            }\n                        }\n\n                        sabaki.setBusy(false);\n                    });\n                }\n            }];\n\n            var element = evt.currentTarget;\n\n            var _element$getBoundingC2 = element.getBoundingClientRect(),\n                left = _element$getBoundingC2.left,\n                bottom = _element$getBoundingC2.bottom;\n\n            helper.popupMenu(template, left, bottom);\n        };\n\n        _this3.handleSortButtonClick = function (evt) {\n            var natsort = __webpack_require__(50);\n\n            var template = [{ label: '&Black Player', property: 'PB' }, { label: '&White Player', property: 'PW' }, { label: 'Black R&ank', property: 'BR' }, { label: 'White Ran&k', property: 'WR' }, { label: 'Game &Name', property: 'GN' }, { label: 'Game &Event', property: 'EV' }, { label: '&Date', property: 'DT' }, { type: 'separator' }, { label: '&Reverse', property: '-1' }];\n\n            var _loop2 = function _loop2(item) {\n                var property = item.property;\n\n                delete item.property;\n\n                item.click = function () {\n                    sabaki.setBusy(true);\n\n                    var _this3$props4 = _this3.props,\n                        gameTrees = _this3$props4.gameTrees,\n                        _this3$props4$onChang = _this3$props4.onChange,\n                        onChange = _this3$props4$onChang === undefined ? helper.noop : _this3$props4$onChang;\n\n                    // Stable sort\n\n                    gameTrees = gameTrees.map(function (x, i) {\n                        return [x, i];\n                    }).sort(function (_ref4, _ref5) {\n                        var _ref7 = _slicedToArray(_ref4, 2),\n                            t1 = _ref7[0],\n                            i1 = _ref7[1];\n\n                        var _ref6 = _slicedToArray(_ref5, 2),\n                            t2 = _ref6[0],\n                            i2 = _ref6[1];\n\n                        var s = void 0;\n\n                        var _ref8 = property === '-1' ? [i2, i1] : [t1, t2].map(function (t) {\n                            return property in t.nodes[0] ? t.nodes[0][property][0] : '';\n                        }),\n                            _ref9 = _slicedToArray(_ref8, 2),\n                            x1 = _ref9[0],\n                            x2 = _ref9[1];\n\n                        if (['BR', 'WR'].includes(property)) {\n                            var _map$map = [x1, x2].map(function (x) {\n                                return (x.includes('k') ? -1 : x.includes('p') ? 10 : 1) * parseFloat(x);\n                            }).map(function (x) {\n                                return isNaN(x) ? -Infinity : x;\n                            });\n                            // Transform ranks\n\n                            var _map$map2 = _slicedToArray(_map$map, 2);\n\n                            x1 = _map$map2[0];\n                            x2 = _map$map2[1];\n                        } else if (property === 'DT') {\n                            var _map$map3 = [x1, x2].map(function (x) {\n                                return sgf.string2dates(x);\n                            }).map(function (x) {\n                                return x ? sgf.dates2string(x.sort(helper.lexicalCompare)) : '';\n                            });\n                            // Transform dates\n\n                            var _map$map4 = _slicedToArray(_map$map3, 2);\n\n                            x1 = _map$map4[0];\n                            x2 = _map$map4[1];\n                        }\n\n                        if (['GN', 'EV'].includes(property)) {\n                            // Sort names\n\n                            s = natsort({ insensitive: true })(x1, x2);\n                        } else {\n                            s = x1 < x2 ? -1 : +(x1 !== x2);\n                        }\n\n                        return s !== 0 ? s : i1 - i2;\n                    }).map(function (x) {\n                        return x[0];\n                    });\n\n                    onChange({ gameTrees: gameTrees });\n                    sabaki.setBusy(false);\n                };\n            };\n\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n                for (var _iterator3 = template[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                    var item = _step3.value;\n\n                    _loop2(item);\n                }\n            } catch (err) {\n                _didIteratorError3 = true;\n                _iteratorError3 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                        _iterator3.return();\n                    }\n                } finally {\n                    if (_didIteratorError3) {\n                        throw _iteratorError3;\n                    }\n                }\n            }\n\n            var element = evt.currentTarget;\n\n            var _element$getBoundingC3 = element.getBoundingClientRect(),\n                left = _element$getBoundingC3.left,\n                bottom = _element$getBoundingC3.bottom;\n\n            helper.popupMenu(template, left, bottom);\n        };\n        return _this3;\n    }\n\n    _createClass(GameChooserDrawer, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this4 = this;\n\n            window.addEventListener('resize', function () {\n                return _this4.resize();\n            });\n\n            this.resize();\n            this.forceUpdate();\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref10, _ref11) {\n            var show = _ref10.show;\n            var animation = _ref11.animation;\n\n            return animation !== this.state.animation || show || show !== this.props.show;\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            var _this5 = this;\n\n            if (this.state.scrollTop !== prevState.scrollTop && this.state.scrollTop !== this.gamesListElement.scrollTop) {\n                // Update scroll top\n\n                this.gamesListElement.scrollTop = this.state.scrollTop;\n                this.setState({ scrollTop: this.gamesListElement.scrollTop });\n            }\n\n            if (this.props.show && prevProps.gameTrees.length !== this.props.gameTrees.length) {\n                // Scroll down\n\n                this.gamesListElement.scrollTop = this.gamesListElement.scrollHeight;\n                this.setState({ scrollTop: this.gamesListElement.scrollTop });\n            }\n\n            if (!prevProps.show && this.props.show) {\n                // Scroll current list element into view\n\n                var index = this.shownGameTrees.findIndex(function (_ref12) {\n                    var _ref13 = _slicedToArray(_ref12, 2),\n                        i = _ref13[1];\n\n                    return i === _this5.props.gameIndex;\n                });\n                var scrollTop = 0;\n                if (index >= 0) scrollTop = this.getRowFromIndex(index) * itemHeight;\n\n                this.gamesListElement.scrollTop = scrollTop;\n                this.setState({ scrollTop: this.gamesListElement.scrollTop });\n            }\n\n            if (prevProps.show !== this.props.show) {\n                // Animate\n\n                var gobanRect = document.getElementById('goban').getBoundingClientRect();\n                var drawerRect = document.getElementById('gamechooser').getBoundingClientRect();\n\n                var itemElement = this.itemElements[this.props.gameIndex];\n                var svgElement = itemElement != null ? itemElement.querySelector('svg') : null;\n\n                if (itemElement != null && svgElement != null) {\n                    var _itemElement$querySel = itemElement.querySelector('svg').getBoundingClientRect(),\n                        width = _itemElement$querySel.width,\n                        height = _itemElement$querySel.height,\n                        left = _itemElement$querySel.left,\n                        top = _itemElement$querySel.top;\n\n                    var miniGobanRect = {\n                        left: left - drawerRect.left,\n                        top: top - drawerRect.top,\n                        width: width,\n                        height: height\n                    };\n\n                    var direction = this.props.show ? 'reverse' : 'normal';\n\n                    this.setState({ animation: [miniGobanRect, gobanRect, direction] });\n                    setTimeout(function () {\n                        return _this5.setState({ animation: null });\n                    }, 600);\n                }\n            }\n        }\n    }, {\n        key: 'resize',\n        value: function resize() {\n            var innerWidth = this.gamesListElement.offsetWidth - 28;\n            var height = this.gamesListElement.offsetHeight;\n            var rowCount = Math.floor(innerWidth / itemMinWidth);\n\n            this.setState({ innerWidth: innerWidth, height: height, rowCount: rowCount });\n        }\n    }, {\n        key: 'getRowFromIndex',\n        value: function getRowFromIndex(i) {\n            return (i - i % this.state.rowCount) / this.state.rowCount;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref14, _ref15) {\n            var _this6 = this;\n\n            var show = _ref14.show,\n                gameTrees = _ref14.gameTrees,\n                gameIndex = _ref14.gameIndex;\n            var filterText = _ref15.filterText,\n                animation = _ref15.animation,\n                scrollTop = _ref15.scrollTop,\n                insertBefore = _ref15.insertBefore,\n                rowCount = _ref15.rowCount,\n                innerWidth = _ref15.innerWidth,\n                height = _ref15.height;\n\n            var itemWidth = Math.floor(innerWidth / rowCount);\n\n            this.shownGameTrees = gameTrees.map(function (tree, index) {\n                return [tree, index];\n            }).filter(function (_ref16) {\n                var _ref17 = _slicedToArray(_ref16, 1),\n                    tree = _ref17[0];\n\n                var gameInfo = sabaki.getGameInfo(tree);\n                var data = Object.keys(gameInfo).map(function (x) {\n                    return gameInfo[x];\n                });\n\n                return data.join(' ').toLowerCase().includes(filterText.toLowerCase());\n            });\n\n            return h('div', { onDrop: this.handleCancelDrag }, h('style', {}, '\\n                #gamechooser .games-list .placeholder {\\n                    height: ' + ((this.getRowFromIndex(this.shownGameTrees.length - 1) + 1) * itemHeight + 20) + 'px;\\n                }\\n\\n                #gamechooser .games-list li {\\n                    width: ' + (itemWidth - 20) + 'px;\\n                }\\n            ', animation && '\\n                #gamechooser-animation {\\n                    animation: gamechooser-animation .5s ' + animation[2] + ' forwards;\\n                }\\n\\n                @keyframes gamechooser-animation {\\n                    from {\\n                        transform: translate(' + animation[0].left + 'px, ' + animation[0].top + 'px);\\n                        opacity: 1;\\n                    }\\n                    to {\\n                        transform: translate(' + animation[1].left + 'px, ' + animation[1].top + 'px)\\n                            scale(' + animation[1].width / animation[0].width + ',\\n                            ' + animation[1].height / animation[0].height + ');\\n                        opacity: 0;\\n                    }\\n                }\\n            '), h(Drawer, {\n                type: 'gamechooser',\n                show: show\n            }, h('h2', {}, 'Manage Games'), h('input', {\n                type: 'search',\n                name: 'filter',\n                placeholder: 'Filter',\n                value: filterText,\n                onInput: this.handleFilterTextChange\n            }), h('div', {\n                ref: function ref(el) {\n                    return _this6.gamesListElement = el;\n                },\n                class: 'games-list',\n\n                onScroll: this.handleListScroll,\n                onDrop: this.handleItemDrop\n            }, h('div', { class: 'placeholder' }), h('ol', {}, this.shownGameTrees.map(function (_ref18, i) {\n                var _ref19 = _slicedToArray(_ref18, 2),\n                    tree = _ref19[0],\n                    index = _ref19[1];\n\n                var row = _this6.getRowFromIndex(i);\n                var itemTop = row * itemHeight + 10;\n                var itemLeft = (i - row * rowCount) * itemWidth + 10;\n\n                if (index !== gameIndex && (itemTop + itemHeight * 2 <= scrollTop || itemTop - itemHeight >= scrollTop + height)) return;\n\n                return h(GameListItem, {\n                    ref: function ref(item) {\n                        if (item != null) _this6.itemElements[index] = item.element;\n                    },\n                    key: tree.id,\n                    tree: tree,\n                    top: itemTop,\n                    left: itemLeft,\n                    draggable: filterText === '',\n\n                    showThumbnail: index !== gameIndex || !animation,\n                    insertBefore: insertBefore === index,\n                    insertAfter: i === _this6.shownGameTrees.length - 1 && insertBefore === index + 1,\n\n                    onClick: _this6.handleItemClick,\n                    onContextMenu: _this6.handleItemContextMenu,\n                    onDragStart: _this6.handleItemDragStart,\n                    onDragOver: _this6.handleItemDragOver\n                });\n            }))), h('p', {}, h('button', {\n                type: 'button',\n                class: 'dropdown',\n                onClick: this.handleAddButtonClick\n            }, 'Add'), h('button', {\n                type: 'button',\n                class: 'dropdown',\n                onClick: this.handleSortButtonClick\n            }, 'Sort By'), h('button', {\n                type: 'button',\n                onClick: this.handleCloseButtonClick\n            }, 'Close'))), h('div', {\n                id: 'gamechooser-animation',\n                style: !animation ? {\n                    opacity: 0,\n                    pointerEvents: 'none'\n                } : {}\n            }, h(MiniGoban, {\n                board: getPreviewBoard(gameTrees[gameIndex]),\n                maxSize: thumbnailSize\n            })));\n        }\n    }]);\n\n    return GameChooserDrawer;\n}(Component);\n\nmodule.exports = GameChooserDrawer;\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar range = function range(n) {\n    return [].concat(_toConsumableArray(Array(n))).map(function (_, i) {\n        return i;\n    });\n};\n\nvar MiniGoban = function (_Component) {\n    _inherits(MiniGoban, _Component);\n\n    function MiniGoban() {\n        _classCallCheck(this, MiniGoban);\n\n        return _possibleConstructorReturn(this, (MiniGoban.__proto__ || Object.getPrototypeOf(MiniGoban)).apply(this, arguments));\n    }\n\n    _createClass(MiniGoban, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref) {\n            var board = _ref.board,\n                maxSize = _ref.maxSize,\n                visible = _ref.visible;\n\n            return visible !== this.props.visible || maxSize !== this.props.maxSize || board.getPositionHash() !== this.props.board.getPositionHash();\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref2) {\n            var board = _ref2.board,\n                maxSize = _ref2.maxSize,\n                _ref2$visible = _ref2.visible,\n                visible = _ref2$visible === undefined ? true : _ref2$visible;\n\n            var fieldSize = (maxSize - 1) / Math.max(board.width, board.height);\n            var radius = fieldSize / 2;\n            var rangeX = range(board.width);\n            var rangeY = range(board.height);\n\n            return h('svg', {\n                width: fieldSize * board.width + 1,\n                height: fieldSize * board.height + 1,\n                style: { visibility: visible ? 'visible' : 'hidden' }\n            },\n\n            // Draw hoshi points\n\n            board.getHandicapPlacement(9).map(function (_ref3) {\n                var _ref4 = _slicedToArray(_ref3, 2),\n                    x = _ref4[0],\n                    y = _ref4[1];\n\n                return h('circle', {\n                    cx: x * fieldSize + radius + 1,\n                    cy: y * fieldSize + radius + 1,\n                    r: 2,\n                    fill: '#5E2E0C'\n                });\n            }),\n\n            // Draw shadows\n\n            rangeX.map(function (x) {\n                return rangeY.map(function (y) {\n                    return board.get([x, y]) !== 0 && h('circle', {\n                        cx: x * fieldSize + radius + 1,\n                        cy: y * fieldSize + radius + 2,\n                        r: radius,\n                        fill: 'rgba(0, 0, 0, .5)'\n                    });\n                });\n            }),\n\n            // Draw stones\n\n            rangeX.map(function (x) {\n                return rangeY.map(function (y) {\n                    return board.get([x, y]) !== 0 && h('circle', {\n                        cx: x * fieldSize + radius + 1,\n                        cy: y * fieldSize + radius + 1,\n                        r: radius,\n                        fill: board.get([x, y]) < 0 ? 'white' : 'black'\n                    });\n                });\n            }));\n        }\n    }]);\n\n    return MiniGoban;\n}(Component);\n\nmodule.exports = MiniGoban;\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/*\n * natsort\n * https://github.com/bubkoo/natsort\n *\n * Copyright 2016 bubkoo\n * Released under the MIT license\n */\n\n(function () {\n\n    'use strict';\n\n    function natsort(options) {\n\n        options = options || {};\n\n        var GREATER = options.desc ? -1 : 1;\n        var SMALLER = -GREATER;\n\n        var ore = /^0/;\n        var sre = /\\s+/g;\n        var tre = /^\\s+|\\s+$/g;\n        // unicode\n        var ure = /[^\\x00-\\x80]/;\n        // hex\n        var hre = /^0x[0-9a-f]+$/i;\n        // numeric\n        // var nre = /(^([+\\-]?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?(?=\\D|\\s|$))|^0x[\\da-fA-F]+$|\\d+)/g;\n        var nre = /(0x[\\da-fA-F]+|(^[\\+\\-]?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?(?=\\D|\\s|$))|\\d+)/g;\n        // datetime\n        var dre = /(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/;\n\n        var normalize = options.insensitive ? function (s) {\n            return lowerCase('' + s).replace(tre, '');\n        } : function (s) {\n            return ('' + s).replace(tre, '');\n        };\n\n        function lowerCase(s) {\n            if (s.toLocaleLowerCase) {\n                return s.toLocaleLowerCase();\n            }\n            return s.toLowerCase();\n        }\n\n        function tokenize(s) {\n            return s.replace(nre, '\\0$1\\0').replace(/\\0$/, '').replace(/^\\0/, '').split('\\0');\n        }\n\n        function parse(s, l) {\n            // normalize spaces; find floats not starting with '0',\n            // string or 0 if not defined (Clint Priest)\n            return (!s.match(ore) || l === 1) && parseFloat(s) || s.replace(sre, ' ').replace(tre, '') || 0;\n        }\n\n        return function (a, b) {\n\n            // trim pre-post whitespace\n            var x = normalize(a);\n            var y = normalize(b);\n\n            // return immediately if at least one of the values is empty.\n            // - empty string < any others\n            if (!x && !y) {\n                return 0;\n            }\n\n            if (!x && y) {\n                return SMALLER;\n            }\n\n            if (x && !y) {\n                return GREATER;\n            }\n\n            // tokenize: split numeric strings and default strings\n            var xArr = tokenize(x);\n            var yArr = tokenize(y);\n\n            // hex or date detection\n            var xD = parseInt(x.match(hre), 16) || xArr.length !== 1 && Date.parse(x);\n            var yD = parseInt(y.match(hre), 16) || xD && y.match(dre) && Date.parse(y) || null;\n\n            // try and sort Hex codes or Dates\n            if (yD) {\n                if (xD < yD) {\n                    return SMALLER;\n                } else if (xD > yD) {\n                    return GREATER;\n                }\n            }\n\n            //console.log('x: ' + xArr.join('@'));\n            //console.log('y: ' + yArr.join('@'));\n\n            var xL = xArr.length;\n            var yL = yArr.length;\n\n            // handle numeric strings and default strings\n            for (var i = 0, l = Math.max(xL, yL); i < l; i++) {\n\n                var xF = parse(xArr[i] || '', xL);\n                var yF = parse(yArr[i] || '', yL);\n\n                //console.log('xF: ' + xF);\n                //console.log('yF: ' + yF);\n\n                // handle numeric vs string comparison\n                // - numeric < string - (Kyle Adams)\n                if (isNaN(xF) !== isNaN(yF)) {\n                    return isNaN(xF) ? GREATER : SMALLER;\n                }\n\n                // if unicode use locale comparison\n                if (ure.test(xF + yF) && xF.localeCompare) {\n                    var comp = xF.localeCompare(yF);\n\n                    if (comp > 0) {\n                        return GREATER;\n                    } else if (comp < 0) {\n                        return SMALLER;\n                    } else {\n                        if (i === l - 1) {\n                            return 0;\n                        } else {\n                            continue;\n                        }\n                    }\n                }\n\n                if (xF < yF) {\n                    return SMALLER;\n                } else if (xF > yF) {\n                    return GREATER;\n                }\n            }\n\n            return 0;\n        };\n    }\n\n    // exports\n    // -------\n\n    /*global module:true, define: true, window: true */\n\n    if (( false ? 'undefined' : _typeof(exports)) === 'object' && ( false ? 'undefined' : _typeof(module)) === 'object') {\n        module.exports = natsort;\n    } else if (true) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n            return natsort;\n        }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') {\n        exports.natsort = natsort;\n    } else {\n        (typeof window !== 'undefined' ? window : this).natsort = natsort;\n    }\n})();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(51)(module)))\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function () {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function get() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function get() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar helper = __webpack_require__(1);\n\nvar InputBox = function (_Component) {\n    _inherits(InputBox, _Component);\n\n    function InputBox() {\n        _classCallCheck(this, InputBox);\n\n        var _this = _possibleConstructorReturn(this, (InputBox.__proto__ || Object.getPrototypeOf(InputBox)).call(this));\n\n        _this.state = { value: '' };\n\n        _this.handleInput = function (evt) {\n            return _this.setState({ value: evt.currentTarget.value });\n        };\n        _this.stopPropagation = function (evt) {\n            return evt.stopPropagation();\n        };\n\n        _this.handleKeyUp = function (evt) {\n            if (!_this.props.show) return;\n\n            if (evt.keyCode === 27) {\n                // Escape\n\n                evt.stopPropagation();\n                _this.cancel();\n            } else if (evt.keyCode == 13) {\n                // Enter\n\n                evt.stopPropagation();\n                sabaki.setState({ showInputBox: false });\n\n                var _this$props$onSubmit = _this.props.onSubmit,\n                    onSubmit = _this$props$onSubmit === undefined ? helper.noop : _this$props$onSubmit;\n\n                onSubmit(_this.state);\n            }\n        };\n\n        _this.cancel = _this.cancel.bind(_this);\n        return _this;\n    }\n\n    _createClass(InputBox, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref) {\n            var show = _ref.show,\n                text = _ref.text,\n                onSubmit = _ref.onSubmit,\n                onCancel = _ref.onCancel;\n\n            return show !== this.props.show || text !== this.props.text || onSubmit !== this.props.onSubmit || onCancel !== this.props.onCancel;\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.show && !this.props.show) {\n                this.setState({ value: '' });\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            if (!prevProps.show && this.props.show) {\n                this.inputElement.focus();\n            }\n        }\n    }, {\n        key: 'cancel',\n        value: function cancel() {\n            if (!this.props.show) return;\n\n            if (document.activeElement === this.inputElement) this.inputElement.blur();\n\n            var _props$onCancel = this.props.onCancel,\n                onCancel = _props$onCancel === undefined ? helper.noop : _props$onCancel;\n\n            sabaki.setState({ showInputBox: false });\n            onCancel();\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref2, _ref3) {\n            var _this2 = this;\n\n            var show = _ref2.show,\n                text = _ref2.text;\n            var value = _ref3.value;\n\n            return h('section', {\n                id: 'input-box',\n                class: classNames({ show: show }),\n\n                onClick: this.cancel\n            }, h('div', { class: 'inner', onClick: this.stopPropagation }, h('input', {\n                ref: function ref(el) {\n                    return _this2.inputElement = el;\n                },\n                type: 'text',\n                name: 'input',\n                value: value,\n                placeholder: text,\n\n                onInput: this.handleInput,\n                onKeyUp: this.handleKeyUp,\n                onBlur: this.cancel\n            })));\n        }\n    }]);\n\n    return InputBox;\n}(Component);\n\nmodule.exports = InputBox;\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(2),\n    remote = _require.remote,\n    ipcRenderer = _require.ipcRenderer;\n\nvar _require2 = __webpack_require__(0),\n    h = _require2.h,\n    Component = _require2.Component;\n\nvar setting = remote.require('./setting');\n\nvar BusyScreen = function (_Component) {\n    _inherits(BusyScreen, _Component);\n\n    function BusyScreen() {\n        _classCallCheck(this, BusyScreen);\n\n        return _possibleConstructorReturn(this, (BusyScreen.__proto__ || Object.getPrototypeOf(BusyScreen)).apply(this, arguments));\n    }\n\n    _createClass(BusyScreen, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(_ref) {\n            var _this2 = this;\n\n            var show = _ref.show;\n\n            if (show === this.props.show) return;\n\n            clearTimeout(this.busyId);\n\n            if (show) {\n                ipcRenderer.send('build-menu', true);\n                this.setState({ show: true });\n                document.activeElement.blur();\n            } else {\n                ipcRenderer.send('build-menu');\n                var delay = setting.get('app.hide_busy_delay');\n                this.busyId = setTimeout(function () {\n                    return _this2.setState({ show: false });\n                }, delay);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render(_, _ref2) {\n            var show = _ref2.show;\n\n            return h('section', {\n                id: 'busy',\n                style: { display: show ? 'block' : 'none' }\n            });\n        }\n    }]);\n\n    return BusyScreen;\n}(Component);\n\nmodule.exports = BusyScreen;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _require = __webpack_require__(0),\n    h = _require.h,\n    Component = _require.Component;\n\nvar classNames = __webpack_require__(3);\n\nvar InfoOverlay = function (_Component) {\n    _inherits(InfoOverlay, _Component);\n\n    function InfoOverlay() {\n        _classCallCheck(this, InfoOverlay);\n\n        return _possibleConstructorReturn(this, (InfoOverlay.__proto__ || Object.getPrototypeOf(InfoOverlay)).apply(this, arguments));\n    }\n\n    _createClass(InfoOverlay, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(_ref) {\n            var text = _ref.text,\n                show = _ref.show;\n\n            return text !== this.props.text || show !== this.props.show;\n        }\n    }, {\n        key: 'render',\n        value: function render(_ref2) {\n            var text = _ref2.text,\n                show = _ref2.show;\n\n            return h('section', {\n                id: 'info-overlay',\n                class: classNames({ show: show })\n            }, text);\n        }\n    }]);\n\n    return InfoOverlay;\n}(Component);\n\nmodule.exports = InfoOverlay;\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports) {\n\nvar lastPachiIndex = -1;\nvar lastCaptureIndex = -1;\n\nvar captureSounds = Object.keys(new Int8Array(5)).map(function (x) {\n    return new Audio('./data/capture' + x + '.mp3');\n});\nvar pachiSounds = Object.keys(new Int8Array(5)).map(function (x) {\n    return new Audio('./data/' + x + '.mp3');\n});\n\nvar newGameSound = new Audio('./data/newgame.mp3');\nvar passSound = new Audio('./data/pass.mp3');\n\nexports.playPachi = function () {\n    var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    var index = lastPachiIndex;\n\n    while (index === lastPachiIndex) {\n        index = Math.floor(Math.random() * pachiSounds.length);\n    }\n\n    lastPachiIndex = index;\n\n    setTimeout(function () {\n        return pachiSounds[index].play();\n    }, delay);\n};\n\nexports.playCapture = function () {\n    var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    var index = lastCaptureIndex;\n\n    while (index === lastCaptureIndex) {\n        index = Math.floor(Math.random() * captureSounds.length);\n    }\n\n    lastCaptureIndex = index;\n\n    setTimeout(function () {\n        return captureSounds[index].play();\n    }, delay);\n};\n\nexports.playPass = function () {\n    var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    setTimeout(function () {\n        return passSound.play();\n    }, delay);\n};\n\nexports.playNewGame = function () {\n    var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    setTimeout(function () {\n        return newGameSound.play();\n    }, delay);\n};\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f7e68757d83bdee43cd0","!function(){\"use strict\";function e(){}function t(t,n){var o,r,i,l,a=E;for(l=arguments.length;l-- >2;)W.push(arguments[l]);n&&null!=n.children&&(W.length||W.push(n.children),delete n.children);while(W.length)if((r=W.pop())&&void 0!==r.pop)for(l=r.length;l--;)W.push(r[l]);else\"boolean\"==typeof r&&(r=null),(i=\"function\"!=typeof t)&&(null==r?r=\"\":\"number\"==typeof r?r+=\"\":\"string\"!=typeof r&&(i=!1)),i&&o?a[a.length-1]+=r:a===E?a=[r]:a.push(r),o=i;var u=new e;return u.nodeName=t,u.children=a,u.attributes=null==n?void 0:n,u.key=null==n?void 0:n.key,void 0!==S.vnode&&S.vnode(u),u}function n(e,t){for(var n in t)e[n]=t[n];return e}function o(e,o){return t(e.nodeName,n(n({},e.attributes),o),arguments.length>2?[].slice.call(arguments,2):e.children)}function r(e){!e.__d&&(e.__d=!0)&&1==A.push(e)&&(S.debounceRendering||P)(i)}function i(){var e,t=A;A=[];while(e=t.pop())e.__d&&k(e)}function l(e,t,n){return\"string\"==typeof t||\"number\"==typeof t?void 0!==e.splitText:\"string\"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function u(e){var t=n({},e.attributes);t.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===t[r]&&(t[r]=o[r]);return t}function _(e,t){var n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",e):document.createElement(e);return n.__n=e,n}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function c(e,t,n,o,r){if(\"className\"===t&&(t=\"class\"),\"key\"===t);else if(\"ref\"===t)n&&n(null),o&&o(e);else if(\"class\"!==t||r)if(\"style\"===t){if(o&&\"string\"!=typeof o&&\"string\"!=typeof n||(e.style.cssText=o||\"\"),o&&\"object\"==typeof o){if(\"string\"!=typeof n)for(var i in n)i in o||(e.style[i]=\"\");for(var i in o)e.style[i]=\"number\"==typeof o[i]&&!1===V.test(i)?o[i]+\"px\":o[i]}}else if(\"dangerouslySetInnerHTML\"===t)o&&(e.innerHTML=o.__html||\"\");else if(\"o\"==t[0]&&\"n\"==t[1]){var l=t!==(t=t.replace(/Capture$/,\"\"));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,f,l):e.removeEventListener(t,f,l),(e.__l||(e.__l={}))[t]=o}else if(\"list\"!==t&&\"type\"!==t&&!r&&t in e)s(e,t,null==o?\"\":o),null!=o&&!1!==o||e.removeAttribute(t);else{var a=r&&t!==(t=t.replace(/^xlink\\:?/,\"\"));null==o||!1===o?a?e.removeAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase()):e.removeAttribute(t):\"function\"!=typeof o&&(a?e.setAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||\"\"}function s(e,t,n){try{e[t]=n}catch(e){}}function f(e){return this.__l[e.type](S.event&&S.event(e)||e)}function d(){var e;while(e=D.pop())S.afterMount&&S.afterMount(e),e.componentDidMount&&e.componentDidMount()}function h(e,t,n,o,r,i){H++||(R=null!=r&&void 0!==r.ownerSVGElement,j=null!=e&&!(\"__preactattr_\"in e));var l=m(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--H||(j=!1,i||d()),l}function m(e,t,n,o,r){var i=e,l=R;if(null!=t&&\"boolean\"!=typeof t||(t=\"\"),\"string\"==typeof t||\"number\"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),b(e,!0))),i.__preactattr_=!0,i;var u=t.nodeName;if(\"function\"==typeof u)return U(e,t,n,o);if(R=\"svg\"===u||\"foreignObject\"!==u&&R,u+=\"\",(!e||!a(e,u))&&(i=_(u,R),e)){while(e.firstChild)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),b(e,!0)}var p=i.firstChild,c=i.__preactattr_,s=t.children;if(null==c){c=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)c[f[d].name]=f[d].value}return!j&&s&&1===s.length&&\"string\"==typeof s[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=s[0]&&(p.nodeValue=s[0]):(s&&s.length||null!=p)&&v(i,s,n,o,j||null!=c.dangerouslySetInnerHTML),g(i,t.attributes,c),R=l,i}function v(e,t,n,o,r){var i,a,u,_,c,s=e.childNodes,f=[],d={},h=0,v=0,y=s.length,g=0,w=t?t.length:0;if(0!==y)for(var C=0;C<y;C++){var x=s[C],N=x.__preactattr_,k=w&&N?x._component?x._component.__k:N.key:null;null!=k?(h++,d[k]=x):(N||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(f[g++]=x)}if(0!==w)for(var C=0;C<w;C++){_=t[C],c=null;var k=_.key;if(null!=k)h&&void 0!==d[k]&&(c=d[k],d[k]=void 0,h--);else if(!c&&v<g)for(i=v;i<g;i++)if(void 0!==f[i]&&l(a=f[i],_,r)){c=a,f[i]=void 0,i===g-1&&g--,i===v&&v++;break}c=m(c,_,n,o),u=s[C],c&&c!==e&&c!==u&&(null==u?e.appendChild(c):c===u.nextSibling?p(u):e.insertBefore(c,u))}if(h)for(var C in d)void 0!==d[C]&&b(d[C],!1);while(v<=g)void 0!==(c=f[g--])&&b(c,!1)}function b(e,t){var n=e._component;n?L(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||p(e),y(e))}function y(e){e=e.lastChild;while(e){var t=e.previousSibling;b(e,!0),e=t}}function g(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||c(e,o,n[o],n[o]=void 0,R);for(o in t)\"children\"===o||\"innerHTML\"===o||o in n&&t[o]===(\"value\"===o||\"checked\"===o?e[o]:n[o])||c(e,o,n[o],n[o]=t[o],R)}function w(e){var t=e.constructor.name;(I[t]||(I[t]=[])).push(e)}function C(e,t,n){var o,r=I[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),T.call(o,t,n)):(o=new T(t,n),o.constructor=e,o.render=x),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.__b=r[i].__b,r.splice(i,1);break}return o}function x(e,t,n){return this.constructor(e,n)}function N(e,t,n,o,i){e.__x||(e.__x=!0,(e.__r=t.ref)&&delete t.ref,(e.__k=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.__c||(e.__c=e.context),e.context=o),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===S.syncComponentUpdates&&e.base?r(e):k(e,1,i)),e.__r&&e.__r(e))}function k(e,t,o,r){if(!e.__x){var i,l,a,_=e.props,p=e.state,c=e.context,s=e.__p||_,f=e.__s||p,m=e.__c||c,v=e.base,y=e.__b,g=v||y,w=e._component,x=!1;if(v&&(e.props=s,e.state=f,e.context=m,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(_,p,c)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(_,p,c),e.props=_,e.state=p,e.context=c),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!x){i=e.render(_,p,c),e.getChildContext&&(c=n(n({},c),e.getChildContext()));var U,T,M=i&&i.nodeName;if(\"function\"==typeof M){var W=u(i);l=w,l&&l.constructor===M&&W.key==l.__k?N(l,W,1,c,!1):(U=l,e._component=l=C(M,W,c),l.__b=l.__b||y,l.__u=e,N(l,W,0,c,!1),k(l,1,o,!0)),T=l.base}else a=g,U=w,U&&(a=e._component=null),(g||1===t)&&(a&&(a._component=null),T=h(a,i,c,o||!v,g&&g.parentNode,!0));if(g&&T!==g&&l!==w){var E=g.parentNode;E&&T!==E&&(E.replaceChild(T,g),U||(g._component=null,b(g,!1)))}if(U&&L(U),e.base=T,T&&!r){var P=e,V=e;while(V=V.__u)(P=V).base=T;T._component=P,T._componentConstructor=P.constructor}}if(!v||o?D.unshift(e):x||(e.componentDidUpdate&&e.componentDidUpdate(s,f,m),S.afterUpdate&&S.afterUpdate(e)),null!=e.__h)while(e.__h.length)e.__h.pop().call(e);H||r||d()}}function U(e,t,n,o){var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===t.nodeName,_=a,p=u(t);while(r&&!_&&(r=r.__u))_=r.constructor===t.nodeName;return r&&_&&(!o||r._component)?(N(r,p,3,n,o),e=r.base):(i&&!a&&(L(i),e=l=null),r=C(t.nodeName,p,n),e&&!r.__b&&(r.__b=e,l=null),N(r,p,1,n,o),e=r.base,l&&e!==l&&(l._component=null,b(l,!1))),e}function L(e){S.beforeUnmount&&S.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?L(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.__b=t,p(t),w(e),y(t)),e.__r&&e.__r(null)}function T(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}function M(e,t,n){return h(n,e,{},!1,t,!1)}var S={},W=[],E=[],P=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,V=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,A=[],D=[],H=0,R=!1,j=!1,I={};n(T.prototype,{setState:function(e,t){var o=this.state;this.__s||(this.__s=n({},o)),n(o,\"function\"==typeof e?e(o,this.props):e),t&&(this.__h=this.__h||[]).push(t),r(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),k(this,2)},render:function(){}});var $={h:t,createElement:t,cloneElement:o,Component:T,render:M,rerender:i,options:S};\"undefined\"!=typeof module?module.exports=$:self.preact=$}();\n//# sourceMappingURL=preact.min.js.map\n\n\n// WEBPACK FOOTER //\n// ./node_modules/preact/dist/preact.min.js","let id = 0\n\nexports.linebreak = process.platform === 'win32' ? '\\r\\n' : '\\n'\nexports.noop = () => {}\n\nexports.getId = function() {\n    return ++id\n}\n\nexports.hash = function(str) {\n    let hash = 0, chr\n    if (str.length == 0) return hash\n\n    for (let i = 0; i < str.length; i++) {\n        chr = str.charCodeAt(i)\n        hash = ((hash << 5) - hash) + chr\n        hash = hash & hash\n    }\n\n    return hash\n}\n\nexports.floorEven = function(float) {\n    let value = Math.floor(float)\n    return value % 2 === 0 ? value : value - 1\n}\n\nexports.equals = function(a, b) {\n    if (a === b) return true\n    if (a == null || b == null) return a == b\n\n    let t = Object.prototype.toString.call(a)\n    if (t !== Object.prototype.toString.call(b)) return false\n\n    let aa = t === '[object Array]'\n    let ao = t === '[object Object]'\n\n    if (aa) {\n        if (a.length !== b.length) return false\n        for (let i = 0; i < a.length; i++)\n            if (!exports.equals(a[i], b[i])) return false\n        return true\n    } else if (ao) {\n        let kk = Object.keys(a)\n        if (kk.length !== Object.keys(b).length) return false\n        for (let i = 0; i < kk.length; i++) {\n            let k = kk[i]\n            if (!(k in b)) return false\n            if (!exports.equals(a[k], b[k])) return false\n        }\n        return true\n    }\n\n    return false\n}\n\nexports.shallowEquals = function(a, b) {\n    return a == null || b == null ? a === b : a === b || a.length === b.length && a.every((x, i) => x == b[i])\n}\n\nexports.vertexEquals = function([a, b], [c, d]) {\n    return a === c && b === d\n}\n\nexports.lexicalCompare = function(a, b) {\n    if (!a.length || !b.length) return a.length - b.length\n    return a[0] < b[0] ? -1 : a[0] > b[0] ? 1 : exports.lexicalCompare(a.slice(1), b.slice(1))\n}\n\nexports.normalizeEndings = function(input) {\n    return input.replace(/\\r\\n|\\n\\r|\\r/g, '\\n')\n}\n\nexports.markdown = function(input) {\n    let marked = require('./marked')\n    return marked(exports.normalizeEndings(input.trim()).replace(/\\n/g, '  \\n'))\n}\n\nexports.htmlify = function(input) {\n    let urlRegex = '\\\\b(https?|ftps?):\\\\/\\\\/[^\\\\s<]+[^<.,:;\"\\')\\\\]\\\\s](\\\\/\\\\B|\\\\b)'\n    let emailRegex = '\\\\b[^\\\\s@<]+@[^\\\\s@<]+\\\\b'\n    let coordRegex = '\\\\b[a-hj-zA-HJ-Z][1-9][0-9]?\\\\b'\n    let movenumberRegex = '\\\\B#\\\\d+\\\\b'\n    let totalRegex = '(' + [urlRegex, emailRegex, coordRegex, movenumberRegex].join('|') + ')'\n\n    input = input.replace(new RegExp(totalRegex, 'g'), match => {\n        if (new RegExp(urlRegex).test(match))\n            return '<a href=\"' + match + '\" class=\"external\">' + match + '</a>'\n        if (new RegExp(emailRegex).test(match))\n            return '<a href=\"mailto:' + match + '\" class=\"external\">' + match + '</a>'\n        if (new RegExp(movenumberRegex).test(match))\n            return '<a href=\"#\" class=\"movenumber\">' + match + '</a>'\n        if (new RegExp(coordRegex).test(match))\n            return '<span class=\"coord\">' + match + '</span>'\n    })\n\n    return input\n}\n\nexports.popupMenu = function(template, x, y) {\n    let {remote} = require('electron')\n    let setting = remote.require('./setting')\n    let zoomFactor = +setting.get('app.zoom_factor')\n\n    remote.Menu.buildFromTemplate(template).popup(remote.getCurrentWindow(), {\n        x: Math.round(x * zoomFactor),\n        y: Math.round(y * zoomFactor),\n        async: true\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/helper.js","const copy = require('copy-text-to-clipboard')\nconst {h, render} = require('preact')\nconst {noop} = require('../helper')\n\nlet hiddenStyle = {opacity: 0, pointerEvents: 'none'}\n\nlet app = {\n    getName: () => 'Sabaki',\n    getVersion: () => 'web',\n    getPath: () => ''\n}\n\nmodule.exports = {\n    app,\n    ipcRenderer: {on: noop, send: noop},\n\n    clipboard: {\n        readText: () => prompt('Please paste contents here:'),\n\n        writeText: content => {\n            let element = render(h('a', {\n                href: '#',\n                style: hiddenStyle,\n\n                onClick: evt => {\n                    evt.preventDefault()\n                    copy(content)\n                }\n            }), document.body)\n\n            element.click()\n            element.remove()\n        }\n    },\n\n    shell: {\n        openExternal: href => {\n            let element = render(h('a', {\n                href,\n                target: '_blank',\n                style: hiddenStyle\n            }), document.body)\n\n            element.click()\n            element.remove()\n        }\n    },\n\n    remote: {\n        app,\n        require: x => x === './setting' ? require('../../setting') : {},\n\n        getCurrentWindow: () => ({\n            show: noop,\n            close: noop,\n            on: noop,\n            isMaximized: noop,\n            isMinimized: noop,\n            isFullScreen: noop,\n            setFullScreen: noop,\n            setMenuBarVisibility: noop,\n            setAutoHideMenuBar: noop,\n            setProgressBar: noop,\n            setContentSize: noop,\n            getContentSize: () => [0, 0],\n            webContents: {setAudioMuted: noop}\n        }),\n\n        Menu: require('./Menu')\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/shims/electron.js","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/classnames/index.js","const Board = require('./board')\n\nconst helper = require('./helper')\nconst {sgf} = require('./fileformats')\n\nconst alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\nexports.new = function() {\n    return {\n        id: helper.getId(),\n        nodes: [],\n        subtrees: [],\n        current: null,\n        parent: null\n    }\n}\n\nexports.clone = function(tree, parent = null) {\n    let c = Object.assign(exports.new(), {\n        current: tree.current,\n        parent\n    })\n\n    for (let node of tree.nodes) {\n        let cn = {}\n\n        for (let key in node) {\n            if (key === 'board') continue\n\n            if (Array.isArray(node[key])) {\n                cn[key] = [...node[key]]\n            } else {\n                cn[key] = node[key]\n            }\n        }\n\n        c.nodes.push(cn)\n    }\n\n    for (let subtree of tree.subtrees) {\n        c.subtrees.push(exports.clone(subtree, c))\n    }\n\n    return c\n}\n\nexports.getRoot = function(tree) {\n    while (tree.parent !== null) tree = tree.parent\n    return tree\n}\n\nexports.getRootProperty = function(tree, property, fallback = null) {\n    let node = exports.getRoot(tree).nodes[0]\n    if (!node) return fallback\n\n    let result = ''\n    if (property in node) result = node[property][0]\n\n    return result === '' ? fallback : result\n}\n\nexports.getHeight = function(tree) {\n    let height = 0\n\n    for (let subtree of tree.subtrees) {\n        height = Math.max(exports.getHeight(subtree), height)\n    }\n\n    return height + tree.nodes.length\n}\n\nexports.getCurrentHeight = function(tree) {\n    let height = tree.nodes.length\n\n    if (tree.subtrees.length !== 0)\n        height += exports.getCurrentHeight(tree.subtrees[tree.current])\n\n    return height\n}\n\nexports.getTreesRecursive = function(tree) {\n    let result = [tree]\n\n    for (let subtree of tree.subtrees) {\n        result.push(...exports.getTreesRecursive(subtree))\n    }\n\n    return result\n}\n\nexports.getLevel = function(tree, index) {\n    return index + (tree.parent ? exports.getLevel(tree.parent, tree.parent.nodes.length) : 0)\n}\n\nexports.getSection = function(tree, level) {\n    if (level < 0) return []\n    if (level < tree.nodes.length) return [[tree, level]]\n\n    let sections = []\n\n    for (let subtree of tree.subtrees) {\n        sections.push(...exports.getSection(subtree, level - tree.nodes.length))\n    }\n\n    return sections\n}\n\nexports.navigate = function(tree, index, step) {\n    if (index + step >= 0 && index + step < tree.nodes.length) {\n        return [tree, index + step]\n    } else if (index + step < 0 && tree.parent != null) {\n        let prev = tree.parent\n        let newstep = index + step + 1\n\n        return exports.navigate(prev, prev.nodes.length - 1, newstep)\n    } else if (index + step >= tree.nodes.length && tree.subtrees.length !== 0) {\n        let next = tree.subtrees[tree.current]\n        let newstep = index + step - tree.nodes.length\n\n        return exports.navigate(next, 0, newstep)\n    }\n\n    return null\n}\n\nexports.makeHorizontalNavigator = function(tree, index) {\n    let root = exports.getRoot(tree)\n    let level = exports.getLevel(tree, index, root)\n    let sections = exports.getSection(root, level)\n    let j = sections.map(x => x[0]).indexOf(tree)\n\n    return {\n        navigate(step) {\n            if (j + step >= 0 && j + step < sections.length) {\n                j = j + step\n            } else if (j + step >= sections.length) {\n                step = j + step - sections.length\n                sections = exports.getSection(root, ++level)\n                j = 0\n                if (sections.length != 0) this.navigate(step)\n            } else if (j + step < 0) {\n                step = j + step + 1\n                sections = exports.getSection(root, --level)\n                j = sections.length - 1\n                if (sections.length != 0) this.navigate(step)\n            }\n        },\n        value() {\n            return j < sections.length && j >= 0 ? sections[j] : null\n        },\n        next() {\n            this.navigate(1)\n            return this.value()\n        },\n        prev() {\n            this.navigate(-1)\n            return this.value()\n        }\n    }\n}\n\nexports.split = function(tree, index) {\n    if (index < 0 || index >= tree.nodes.length - 1) return tree\n\n    let newnodes = tree.nodes.slice(0, index + 1)\n    tree.nodes = tree.nodes.slice(index + 1)\n\n    let newtree = exports.new()\n    newtree.nodes = newnodes\n    newtree.subtrees = [tree]\n    newtree.parent = tree.parent\n    newtree.current = 0\n    tree.parent = newtree\n\n    if (newtree.parent) {\n        newtree.parent.subtrees[newtree.parent.subtrees.indexOf(tree)] = newtree\n    }\n\n    return newtree\n}\n\nexports.reduce = function(tree) {\n    if (tree.subtrees.length != 1) return tree\n\n    tree.nodes.push(...tree.subtrees[0].nodes)\n    tree.current = tree.subtrees[0].current\n    tree.subtrees = tree.subtrees[0].subtrees\n\n    for (let subtree of tree.subtrees) {\n        subtree.parent = tree\n    }\n\n    return tree\n}\n\nexports.onCurrentTrack = function(tree) {\n    return !tree.parent\n    || tree.parent.subtrees[tree.parent.current] == tree\n    && exports.onCurrentTrack(tree.parent)\n}\n\nexports.onMainTrack = function(tree) {\n    return !tree.parent\n    || tree.parent.subtrees[0] == tree\n    && exports.onMainTrack(tree.parent)\n}\n\nexports.getMatrixDict = function(tree, matrix = null, dict = {}, xshift = 0, yshift = 0) {\n    if (!matrix) matrix = [...Array(exports.getHeight(tree))].map(_ => [])\n\n    let hasCollisions = true\n    while (hasCollisions) {\n        hasCollisions = false\n\n        for (let y = 0; y < Math.min(tree.nodes.length + 1, matrix.length - yshift); y++) {\n            if (xshift >= matrix[yshift + y].length - (y === tree.nodes.length)) continue\n\n            hasCollisions = true\n            xshift++\n            break\n        }\n    }\n\n    for (let y = 0; y < tree.nodes.length; y++) {\n        matrix[yshift + y].length = xshift + 1\n        matrix[yshift + y][xshift] = [tree, y]\n        dict[tree.id + '-' + y] = [xshift, yshift + y]\n    }\n\n    for (let k = 0; k < tree.subtrees.length; k++) {\n        let subtree = tree.subtrees[k]\n        exports.getMatrixDict(subtree, matrix, dict, xshift + k, yshift + tree.nodes.length)\n    }\n\n    return [matrix, dict]\n}\n\nexports.getMatrixWidth = function(y, matrix) {\n    let keys = [...Array(10)]\n        .map((_, i) => i + y - 4)\n        .filter(i => i >= 0 && i < matrix.length)\n\n    let padding = Math.min(...keys.map(i => {\n        for (let j = 0; j < matrix[i].length; j++)\n            if (matrix[i][j] != null) return j\n        return 0\n    }))\n\n    let width = Math.max(...keys.map(i => matrix[i].length)) - padding\n\n    return [width, padding]\n}\n\nexports.getBoard = function(tree, index, baseboard = null) {\n    if (index >= tree.nodes.length) return null\n\n    let node = tree.nodes[index]\n    let vertex = null\n    let board = null\n\n    // Get base board\n\n    if (!baseboard) {\n        let prev = exports.navigate(tree, index, -1)\n\n        if (!prev) {\n            let size = [19, 19]\n\n            if ('SZ' in node) {\n                size = node.SZ[0].toString()\n\n                if (size.includes(':')) size = size.split(':')\n                else size = [size, size]\n\n                size = size.map(x => +x)\n            }\n\n            baseboard = new Board(...size)\n        } else {\n            let prevNode = prev[0].nodes[prev[1]]\n            baseboard = prevNode.board || exports.getBoard(...prev)\n        }\n    }\n\n    // Make move\n\n    let data = {B: 1, W: -1}\n\n    for (let prop in data) {\n        if (!(prop in node)) continue\n\n        vertex = sgf.point2vertex(node[prop][0])\n        board = baseboard.makeMove(data[prop], vertex)\n        break\n    }\n\n    if (!board) board = baseboard.clone()\n\n    // Add markup\n\n    data = {AW: -1, AE: 0, AB: 1}\n\n    for (let prop in data) {\n        if (!(prop in node)) continue\n\n        for (let value of node[prop]) {\n            for (let vertex of sgf.compressed2list(value)) {\n                if (!board.hasVertex(vertex)) continue\n                board.set(vertex, data[prop])\n            }\n        }\n    }\n\n    if (vertex != null) {\n        board.markups[vertex] = ['point', '']\n    }\n\n    data = {CR: 'circle', MA: 'cross', SQ: 'square', TR: 'triangle'}\n\n    for (let prop in data) {\n        if (!(prop in node)) continue\n\n        for (let value of node[prop]) {\n            for (let vertex of sgf.compressed2list(value)) {\n                board.markups[vertex] = [data[prop], '']\n            }\n        }\n    }\n\n    if ('LB' in node) {\n        for (let composed of node.LB) {\n            let sep = composed.indexOf(':')\n            let point = composed.slice(0, sep)\n            let label = composed.slice(sep + 1)\n\n            board.markups[sgf.point2vertex(point)] = ['label', label]\n        }\n    }\n\n    if ('L' in node) {\n        for (let i = 0; i < node.L.length; i++) {\n            let point = node.L[i]\n            let label = alpha[i]\n            if (label == null) return\n\n            board.markups[sgf.point2vertex(point)] = ['label', label]\n        }\n    }\n\n    for (let type of ['AR', 'LN']) {\n        if (!(type in node)) continue\n\n        for (let composed of node[type]) {\n            let sep = composed.indexOf(':')\n            let [v1, v2] = [composed.slice(0, sep), composed.slice(sep + 1)].map(sgf.point2vertex)\n\n            board.lines.push([v1, v2, type === 'AR'])\n        }\n    }\n\n    // Add variation overlays\n\n    let addOverlay = (node, type) => {\n        let v, sign\n\n        if ('B' in node) {\n            v = sgf.point2vertex(node.B[0])\n            sign = 1\n        } else if ('W' in node) {\n            v = sgf.point2vertex(node.W[0])\n            sign = -1\n        } else {\n            return\n        }\n\n        if (!board.hasVertex(v) || v in board.ghosts)\n            return\n\n        let types = []\n\n        if (type === 'child') {\n            types.push(`ghost_${sign}`)\n\n            if ('BM' in node) {\n                types.push('badmove')\n            } else if ('DO' in node) {\n                types.push('doubtfulmove')\n            } else if ('IT' in node) {\n                types.push('interestingmove')\n            } else if ('TE' in node) {\n                types.push('goodmove')\n            }\n        } else if (type === 'sibling') {\n            types.push(`siblingghost_${sign}`)\n        }\n\n        board.ghosts[v] = types\n    }\n\n    if (index === tree.nodes.length - 1) {\n        for (let subtree of tree.subtrees) {\n            if (subtree.nodes.length === 0) continue\n            addOverlay(subtree.nodes[0], 'child')\n        }\n    } else if (index < tree.nodes.length - 1) {\n        addOverlay(tree.nodes[index + 1], 'child')\n    }\n\n    if (index === 0 && tree.parent) {\n        for (let subtree of tree.parent.subtrees) {\n            if (subtree.nodes.length == 0) continue\n            addOverlay(subtree.nodes[0], 'sibling')\n        }\n    }\n\n    node.board = board\n    return board\n}\n\nexports.getJson = function(tree) {\n    return JSON.stringify(tree, (name, val) => {\n        let list = ['id', 'board', 'parent', 'current']\n        return list.includes(name) ? undefined : val\n    })\n}\n\nexports.fromJson = function(json) {\n    let addInformation = tree => {\n        tree.id = helper.getId()\n\n        if (tree.subtrees.length > 0) tree.current = 0\n\n        for (let i = 0; i < tree.subtrees.length; i++) {\n            tree.subtrees[i].parent = tree\n            addInformation(tree.subtrees[i])\n        }\n\n        return tree\n    }\n\n    let tree = JSON.parse(json)\n    tree.parent = null\n    return addInformation(tree)\n}\n\nexports.getHash = function(tree) {\n    return helper.hash(`${tree.nodes.map(exports.getJson).join('-')}-${tree.subtrees.map(exports.getHash).join('-')}`)\n}\n\nexports.getMatrixHash = function(tree) {\n    return helper.hash(`${tree.id}-${tree.nodes.length}-${tree.subtrees.map(exports.getMatrixHash).join('-')}`)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/gametree.js","const {noop} = require('../helper')\n\nmodule.exports = {\n    readFile: (file, callback = noop) => {\n        let reader = new FileReader()\n        reader.onload = evt => callback(null, evt.target.result)\n        reader.readAsText(file)\n    },\n\n    readFileSync: () => '',\n    writeFileSync: noop,\n    mkdirSync: noop,\n    accessSync: noop\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/shims/fs.js","module.exports = () => {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/shims/noop.js","const fs = require('fs')\nconst {extname} = require('path')\n\nlet sgf = require('./sgf')\nlet ngf = require('./ngf')\nlet gib = require('./gib')\n\nlet modules = {sgf, ngf, gib}\n\nexports = module.exports = modules\n\nlet extensions = Object.keys(modules).map(key => modules[key].meta)\nlet combinedExtensions = extensions.map(x => x.extensions)\n    .reduce((acc, x) => [...acc, ...x], [])\n\nexports.meta = [\n    {name: 'Game Records', extensions: combinedExtensions},\n    ...extensions\n]\n\nexports.getModuleByExtension = function(extension) {\n    return modules[Object.keys(modules).find(key =>\n        modules[key].meta.extensions.includes(extension.toLowerCase())\n    )] || sgf\n}\n\nexports.parseFile = function(file, onProgress, callback) {\n    let extension = extname(file.name).slice(1)\n    let m = exports.getModuleByExtension(extension)\n\n    fs.readFile(file, (err, content) => {\n        callback({trees: m.parse(content, onProgress)})\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/fileformats/index.js","const helper = require('./helper')\nconst alpha = 'ABCDEFGHJKLMNOPQRSTUVWXYZ'\n\nclass Board {\n    constructor(width = 19, height = 19, arrangement = [], captures = null) {\n        this.width = width\n        this.height = height\n        this.captures = captures ? captures.slice() : [0, 0]\n        this.arrangement = []\n        this.markups = {}\n        this.ghosts = {}\n        this.lines = []\n\n        // Initialize arrangement\n\n        for (let y = 0; y < this.height; y++) {\n            this.arrangement[y] = y in arrangement ? [...arrangement[y]] : Array(this.width).fill(0)\n        }\n    }\n\n    get([x, y]) {\n        return this.arrangement[y] ? this.arrangement[y][x] : undefined\n    }\n\n    set([x, y], sign) {\n        this.arrangement[y][x] = sign\n        return this\n    }\n\n    clone() {\n        return new Board(this.width, this.height, this.arrangement, this.captures)\n    }\n\n    diff(board) {\n        let result = []\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let sign = board.get([x, y])\n                if (this.get([x, y]) === sign) continue\n\n                result.push([x, y])\n            }\n        }\n\n        return result\n    }\n\n    hasVertex([x, y]) {\n        return 0 <= x && x < this.width && 0 <= y && y < this.height\n    }\n\n    clear() {\n        this.arrangement = this.arrangement.map(_ => Array(this.width).fill(0))\n    }\n\n    isSquare() {\n        return this.width === this.height\n    }\n\n    getDistance(v, w) {\n        return Math.abs(v[0] - w[0]) + Math.abs(v[1] - w[1])\n    }\n\n    getDistanceToGround(vertex) {\n        return this.getCanonicalVertex(vertex)[0]\n    }\n\n    getCanonicalVertex(vertex) {\n        if (!this.hasVertex(vertex)) return [-1, -1]\n\n        let boardSize = [this.width, this.height]\n\n        return vertex.map((x, i) => Math.min(x, boardSize[i] - x - 1))\n            .sort((x, y) => x - y)\n    }\n\n    getNeighbors(vertex, ignoreBoard = false) {\n        if (!ignoreBoard && !this.hasVertex(vertex)) return []\n\n        let [x, y] = vertex\n        let allNeighbors = [[x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]]\n\n        return ignoreBoard ? allNeighbors : allNeighbors.filter(v => this.hasVertex(v))\n    }\n\n    getConnectedComponent(vertex, func, result = null) {\n        if (func instanceof Array) {\n            let signs = func\n            func = v => signs.includes(this.get(v))\n        } else if (typeof func === 'number') {\n            let sign = func\n            func = v => this.get(v) === sign\n        }\n\n        if (!this.hasVertex(vertex)) return []\n        if (!result) result = [vertex]\n\n        // Recursive depth-first search\n\n        for (let v of this.getNeighbors(vertex)) {\n            if (!func(v)) continue\n            if (result.some(w => helper.vertexEquals(v, w))) continue\n\n            result.push(v)\n            this.getConnectedComponent(v, func, result)\n        }\n\n        return result\n    }\n\n    getChain(vertex) {\n        return this.getConnectedComponent(vertex, this.get(vertex))\n    }\n\n    hasLiberties(vertex, visited = {}) {\n        let sign = this.get(vertex)\n        if (!this.hasVertex(vertex) || sign === 0) return false\n\n        if (vertex in visited) return false\n        let neighbors = this.getNeighbors(vertex)\n\n        if (neighbors.some(n => this.get(n) === 0))\n            return true\n\n        visited[vertex] = true\n\n        return neighbors.filter(n => this.get(n) === sign)\n        .some(n => this.hasLiberties(n, visited))\n    }\n\n    getLiberties(vertex) {\n        if (!this.hasVertex(vertex) || this.get(vertex) === 0) return []\n\n        let chain = this.getChain(vertex)\n        let liberties = []\n        let added = {}\n\n        for (let c of chain) {\n            let freeNeighbors = this.getNeighbors(c).filter(n => this.get(n) === 0)\n\n            liberties.push(...freeNeighbors.filter(n => !(n in added)))\n            freeNeighbors.forEach(n => added[n] = true)\n        }\n\n        return liberties\n    }\n\n    getRelatedChains(vertex) {\n        if (!this.hasVertex(vertex) || this.get(vertex) === 0) return []\n\n        let area = this.getConnectedComponent(vertex, [this.get(vertex), 0])\n        return area.filter(v => this.get(v) === this.get(vertex))\n    }\n\n    getAreaMap() {\n        let map = [...Array(this.height)].map(_ => Array(this.width).fill(null))\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let vertex = [x, y]\n\n                if (map[y][x] != null) continue\n                if (this.get(vertex) !== 0) {\n                    map[y][x] = this.get(vertex)\n                    continue\n                }\n\n                let chain = this.getChain(vertex)\n                let sign = 0\n                let indicator = 1\n\n                for (let c of chain) {\n                    if (indicator === 0) break\n\n                    for (let n of this.getNeighbors(c)) {\n                        if (indicator === 0) break\n                        if (this.get(n) === 0) continue\n\n                        let [i, j] = n\n                        if (sign === 0) sign = map[j][i] = this.get(n)\n                        else if (sign !== this.get(n)) indicator = 0\n                    }\n                }\n\n                for (let [i, j] of chain) {\n                    map[j][i] = sign * indicator\n                }\n            }\n        }\n\n        return map\n    }\n\n    getAreaEstimateMap() {\n        let map = this.getAreaMap()\n\n        let pnnmap = this.getNearestNeighborMap(1)\n        let nnnmap = this.getNearestNeighborMap(-1)\n        let pimap = this.getInfluenceMap(1)\n        let nimap = this.getInfluenceMap(-1)\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                if (map[y][x] !== 0) continue\n\n                let s = Math.sign(nnnmap[y][x] - pnnmap[y][x])\n                if (s > 0 && pnnmap[y][x] > 6 || s < 0 && nnnmap[y][x] > 6\n                || s > 0 && Math.round(pimap[y][x]) < 2 || s < 0 && Math.round(nimap[y][x]) < 2)\n                    s = 0\n\n                map[y][x] = s\n            }\n        }\n\n        // Fix holes and prevent single point areas\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let neighbors = this.getNeighbors([x, y])\n                if (neighbors.length === 0) continue\n\n                let [i, j] = neighbors[0]\n                let s = map[y][x] === 0 ? map[j][i] : 0\n\n                if (neighbors.every(([i, j]) => map[j][i] === s))\n                    map[y][x] = s\n            }\n        }\n\n        return map\n    }\n\n    getNearestNeighborMap(sign) {\n        let map = [...Array(this.height)].map(_ => Array(this.width).fill(Infinity))\n        let min = Infinity\n\n        let f = (x, y) => {\n            let v = [x, y]\n            if (this.get(v) === sign) min = 0\n            else if (this.get(v) === 0) min++\n            else min = Infinity\n\n            map[y][x] = min = Math.min(min, map[y][x])\n        }\n\n        for (let y = 0; y < this.height; y++) {\n            min = Infinity\n\n            for (let x = 0; x < this.width; x++) {\n                let old = Infinity\n\n                f(x, y)\n                old = min\n\n                for (let ny = y + 1; ny < this.height; ny++) f(x, ny)\n                min = old\n\n                for (let ny = y - 1; ny >= 0; ny--) f(x, ny)\n                min = old\n            }\n        }\n\n        for (let y = this.height - 1; y >= 0; y--) {\n            min = Infinity\n\n            for (let x = this.width - 1; x >= 0; x--) {\n                let old = Infinity\n\n                f(x, y)\n                old = min\n\n                for (let ny = y + 1; ny < this.height; ny++) f(x, ny)\n                min = old\n\n                for (let ny = y - 1; ny >= 0; ny--) f(x, ny)\n                min = old\n            }\n        }\n\n        return map\n    }\n\n    getInfluenceMap(sign) {\n        let map = [...Array(this.height)].map(_ => Array(this.width).fill(0))\n        let size = [this.width, this.height]\n        let done = []\n\n        // Cast influence\n\n        let getVertex = v => {\n            if (this.hasVertex(v)) return v\n            return v.map((z, i) => z < 0 ? -z - 1 : z >= size[i] ? 2 * size[i] - z - 1 : z)\n        }\n\n        let castInfluence = (chain, distance) => {\n            let queue = chain.map(x => [x, 0])\n            let visited = []\n\n            while (queue.length > 0) {\n                let [v, d] = queue.shift()\n                let [x, y] = getVertex(v)\n\n                map[y][x] += !this.hasVertex(v) ? 2 : 1.5 / (d / distance * 6 + 1)\n\n                for (let n of this.getNeighbors(v, true)) {\n                    if (d + 1 > distance\n                    || this.get(n) === -sign\n                    || visited.some(w => helper.vertexEquals(n, w))) continue\n\n                    visited.push(n)\n                    queue.push([n, d + 1])\n                }\n            }\n        }\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let v = [x, y]\n                if (this.get(v) !== sign || done.some(w => helper.vertexEquals(v, w))) continue\n\n                let chain = this.getChain(v)\n                chain.forEach(w => done.push(w))\n\n                castInfluence(chain, 6)\n            }\n        }\n\n        return map\n    }\n\n    getScore(areaMap) {\n        let score = {\n            area: [0, 0],\n            territory: [0, 0],\n            captures: this.captures\n        }\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let sign = areaMap[y][x]\n                if (sign === 0) continue\n\n                let index = sign > 0 ? 0 : 1\n\n                score.area[index]++\n                if (this.get([x, y]) === 0) score.territory[index]++\n            }\n        }\n\n        return score\n    }\n\n    vertex2coord(vertex) {\n        if (!this.hasVertex(vertex)) return null\n        return alpha[vertex[0]] + (this.height - vertex[1])\n    }\n\n    coord2vertex(coord) {\n        let x = alpha.indexOf(coord[0].toUpperCase())\n        let y = this.height - +coord.substr(1)\n        return [x, y]\n    }\n\n    isValid() {\n        let liberties = {}\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let vertex = [x, y]\n                if (this.get(vertex) === 0 || vertex in liberties) continue\n                if (!this.hasLiberties(vertex)) return false\n\n                this.getChain(vertex).forEach(v => liberties[v] = true)\n            }\n        }\n\n        return true\n    }\n\n    makeMove(sign, vertex) {\n        let move = this.clone()\n\n        if (sign === 0 || !this.hasVertex(vertex)) return move\n\n        sign = sign > 0 ? 1 : -1\n        move.set(vertex, sign)\n\n        // Remove captured stones\n\n        let deadNeighbors = move.getNeighbors(vertex)\n            .filter(n => move.get(n) === -sign && !move.hasLiberties(n))\n\n        for (let n of deadNeighbors) {\n            if (move.get(n) === 0) continue\n\n            for (let c of move.getChain(n)) {\n                move.set(c, 0)\n                move.captures[(-sign + 1) / 2]++\n            }\n        }\n\n        move.set(vertex, sign)\n\n        // Detect suicide\n\n        if (deadNeighbors.length === 0 && !move.hasLiberties(vertex)) {\n            for (let c of move.getChain(vertex)) {\n                move.set(c, 0)\n                move.captures[(sign + 1) / 2]++\n            }\n        }\n\n        return move\n    }\n\n    getHandicapPlacement(count) {\n        if (Math.min(this.width, this.height) < 6 || count < 2) return []\n\n        let nearX = this.width >= 13 ? 3 : 2\n        let nearY = this.height >= 13 ? 3 : 2\n        let farX = this.width - nearX - 1\n        let farY = this.height - nearY - 1\n\n        let result = [[nearX, farY], [farX, nearY], [nearX, nearY], [farX, farY]]\n        let middleX = (this.width - 1) / 2\n        let middleY = (this.height - 1) / 2\n\n        if (this.width % 2 !== 0 && this.height % 2 !== 0) {\n            if (count === 5) result.push([middleX, middleY])\n            result.push([nearX, middleY], [farX, middleY])\n\n            if (count === 7) result.push([middleX, middleY])\n            result.push([middleX, nearY], [middleX, farY], [middleX, middleY])\n        } else if (this.width % 2 !== 0) {\n            result.push([middleX, nearY], [middleX, farY])\n        } else if (this.height % 2 !== 0) {\n            result.push([nearX, middleY], [farX, middleY])\n        }\n\n        return result.slice(0, count)\n    }\n\n    generateAscii() {\n        let result = []\n        let lb = helper.linebreak\n\n        let getIndexFromVertex = ([x, y]) => {\n            let rowLength = 4 + this.width * 2\n            return rowLength + rowLength * y + 1 + x * 2 + 1\n        }\n\n        // Make empty board\n\n        result.push('+')\n        for (let x = 0; x < this.width; x++) result.push('-', '-')\n        result.push('-', '+', lb)\n\n        for (let y = 0; y < this.height; y++) {\n            result.push('|')\n            for (let x = 0; x < this.width; x++) result.push(' ', '.')\n            result.push(' ', '|', lb)\n        }\n\n        result.push('+')\n        for (let x = 0; x < this.width; x++) result.push('-', '-')\n        result.push('-', '+', lb)\n\n        this.getHandicapPlacement(9).forEach(v => result[getIndexFromVertex(v)] = ',')\n\n        // Place markers & stones\n\n        let data = {\n            plain: ['O', null, 'X'],\n            circle: ['W', 'C', 'B'],\n            square: ['@', 'S', '#'],\n            triangle: ['Q', 'T', 'Y'],\n            cross: ['P', 'M', 'Z'],\n            label: null\n        }\n\n        for (let x = 0; x < this.width; x++) {\n            for (let y = 0; y < this.height; y++) {\n                let v = [x, y]\n                let i = getIndexFromVertex(v)\n                let s = this.get(v)\n\n                if (!this.markups[v] || !(this.markups[v][0] in data)) {\n                    if (s !== 0) result[i] = data.plain[s + 1]\n                } else {\n                    let [type, label] = this.markups[v]\n\n                    if (type !== 'label') {\n                        result[i] = data[type][s + 1]\n                    } else if (s === 0 && label.length === 1 && isNaN(parseFloat(label))) {\n                        result[i] = label.toLowerCase()\n                    }\n                }\n            }\n        }\n\n        result = result.join('')\n\n        // Add lines & arrows\n\n        for (let [start, end, arrow] of this.lines) {\n            result += `{${arrow ? 'AR' : 'LN'} ${this.vertex2coord(start)} ${this.vertex2coord(end)}}${lb}`\n        }\n\n        return (lb + result.trim()).split(lb).map(l => `$$ ${l}`).join(lb)\n    }\n\n    getPositionHash() {\n        return helper.hash(JSON.stringify(this.arrangement))\n    }\n\n    getHash() {\n        return helper.hash(JSON.stringify([\n            this.getPositionHash(),\n            this.captures,\n            this.markups,\n            this.ghosts,\n            this.lines\n        ]))\n    }\n}\n\nmodule.exports = Board\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/board.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/path-browserify/index.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/process/browser.js","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nclass Bar extends Component {\n    constructor() {\n        super()\n\n        this.onCloseButtonClick = () => sabaki.setMode('play')\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.mode !== this.props.mode || nextProps.mode === nextProps.type\n    }\n\n    render({children, type, mode, class: c = ''}) {\n        return h('section',\n            {\n                id: type,\n                class: classNames(c, {\n                    bar: true,\n                    current: type === mode\n                })\n            },\n\n            children,\n            h('a', {class: 'close', href: '#', onClick: this.onCloseButtonClick})\n        )\n    }\n}\n\nmodule.exports = Bar\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/bars/Bar.js","const Buffer = require('buffer')\nconst fs = require('fs')\nconst gametree = require('../gametree')\nconst helper = require('../helper')\n\nconst alpha = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\n// The default encoding and list of properties that should be interpreted as\n// being encoded by the file's CA[] property is defined in the SGF spec at\n// http://www.red-bean.com/sgf/properties.html#CA\n\nconst defaultEncoding = 'ISO-8859-1'\nconst encodedProperties = ['C', 'N', 'AN', 'BR', 'BT', 'CP', 'DT', 'EV', 'GN',\n                           'ON', 'OT', 'PB', 'PC', 'PW', 'RE', 'RO', 'RU', 'SO',\n                           'US', 'WR', 'WT', 'GC']\n\nexports.meta = {\n    name: 'Smart Game Format',\n    extensions: ['sgf']\n}\n\nexports.tokenize = function(contents) {\n    contents = helper.normalizeEndings(contents)\n\n    let tokens = []\n    let rules = {\n        ignore: /^\\s+/,\n        parenthesis: /^(\\(|\\))/,\n        semicolon: /^;/,\n        prop_ident: /^[A-Za-z]+/,\n        c_value_type: /^\\[([^\\\\\\]]|\\\\[^])*\\]/\n    }\n\n    while (contents.length > 0) {\n        let token = null\n        let length = 1\n\n        for (let type in rules) {\n            let matches = rules[type].exec(contents)\n            if (!matches) continue\n\n            let value = matches[0]\n            length = value.length\n            token = [type, value]\n\n            break\n        }\n\n        if (token && token[0] !== 'ignore') tokens.push(token)\n        contents = contents.substr(length)\n    }\n\n    return tokens\n}\n\nfunction _parseTokens(tokens, onProgress = helper.noop, encoding = defaultEncoding, start = [0], depth = 0) {\n    let iconv = require('iconv-lite')\n    let i = start[0]\n    let tree = gametree.new(), node, property, id\n\n    while (i < tokens.length) {\n        let [type, value] = tokens[i]\n\n        if (type === 'parenthesis' && value === '(') break\n        if (type === 'parenthesis' && value === ')') return tree\n\n        if (type === 'semicolon') {\n            node = {}\n            tree.nodes.push(node)\n        } else if (type === 'prop_ident') {\n            id = value.split('').filter(x => x.toUpperCase() === x).join('')\n\n            if (id !== '') {\n                if (!(id in node)) node[id] = []\n                property = node[id]\n            }\n        } else if (type === 'c_value_type') {\n            value = exports.unescapeString(value.substr(1, value.length - 2))\n\n            if (encoding !== null) {\n                if (id === 'CA' && value !== defaultEncoding && iconv.encodingExists(value)) {\n                    encoding = value\n\n                    // We may have already incorrectly parsed some values in this root node\n                    // already, so we have to go back and re-parse them now.\n\n                    for (let k in node) {\n                        if (encodedProperties.includes(k)) {\n                            node[k] = node[k].map(x => iconv.decode(Buffer.from(x, 'binary'), encoding))\n                        }\n                    }\n                } else if (encodedProperties.includes(id) && encoding !== defaultEncoding) {\n                    let decodedValue = iconv.decode(Buffer.from(value, 'binary'), encoding)\n                    value = decodedValue\n                }\n            }\n\n            property.push(value)\n        }\n\n        start[0] = ++i\n    }\n\n    while (i < tokens.length) {\n        let [type, value] = tokens[i]\n\n        if (type === 'parenthesis' && value === '(') {\n            start[0] = i + 1\n\n            let t = _parseTokens(tokens, onProgress, encoding, start, depth + Math.min(tree.subtrees.length, 1))\n\n            if (t.nodes.length > 0) {\n                t.parent = tree\n                tree.subtrees.push(t)\n                tree.current = 0\n            }\n\n            i = start[0]\n        } else if (type === 'parenthesis' && value === ')') {\n            start[0] = i\n            onProgress({progress: i / tokens.length})\n            break\n        }\n\n        i++\n    }\n\n    return tree\n}\n\nexports.parseTokens = function(tokens, onProgress, encoding = defaultEncoding) {\n    let tree = _parseTokens(tokens, onProgress, encoding)\n    tree.subtrees.forEach(subtree => subtree.parent = null)\n    return tree.subtrees\n}\n\nexports.parse = function(contents, onProgress, ignoreEncoding = false) {\n    let tokens = exports.tokenize(contents)\n\n    let encoding = ignoreEncoding ? null : defaultEncoding\n\n    if (!ignoreEncoding) {\n        let foundEncoding = false\n\n        for (let t of tokens) {\n            if (helper.vertexEquals(t, ['prop_ident', 'CA'])) {\n                foundEncoding = true\n                break\n            }\n        }\n\n        if (!foundEncoding) {\n            let jschardet = require('jschardet')\n            let detected = jschardet.detect(contents)\n\n            if (detected.confidence > 0.2) {\n                encoding = detected.encoding\n            }\n        }\n    }\n\n    return exports.parseTokens(tokens, onProgress, encoding)\n}\n\nexports.parseFile = function(filename, onProgress, ignoreEncoding = false) {\n}\n\nexports.string2dates = function(input) {\n    if (!input.match(/^(\\d{4}(-\\d{1,2}(-\\d{1,2})?)?(\\s*,\\s*(\\d{4}|(\\d{4}-)?\\d{1,2}(-\\d{1,2})?))*)?$/))\n        return null\n    if (input.trim() === '')\n        return []\n\n    let dates = input.split(',').map(x => x.trim().split('-'))\n\n    for (let i = 1; i < dates.length; i++) {\n        let date = dates[i]\n        let prev = dates[i - 1]\n\n        if (date[0].length !== 4) {\n            // No year\n\n            if (date.length === 1 && prev.length === 3) {\n                // Add month\n                date.unshift(prev[1])\n            }\n\n            // Add year\n            date.unshift(prev[0])\n        }\n    }\n\n    return dates.map(x => x.map(y => +y))\n}\n\nexports.dates2string = function(dates) {\n    if (dates.length === 0) return ''\n\n    let datesCopy = [dates[0].slice()]\n\n    for (let i = 1; i < dates.length; i++) {\n        let date = dates[i]\n        let prev = dates[i - 1]\n        let k = 0\n\n        for (let j = 0; j < date.length; j++) {\n            if (date[j] === prev[j] && k === j) k++\n            else break\n        }\n\n        datesCopy.push(date.slice(k))\n    }\n\n    return datesCopy.map(x =>\n        x.map(y => y > 9 ? '' + y : '0' + y).join('-')\n    ).join(',')\n}\n\nexports.point2vertex = function(point) {\n    if (point.length !== 2) return [-1, -1]\n    return point.split('').map(x => alpha.indexOf(x))\n}\n\nexports.vertex2point = function([x, y]) {\n    if (Math.min(x, y) < 0 || Math.max(x, y) >= alpha.length)\n        return ''\n    return alpha[x] + alpha[y]\n}\n\nexports.compressed2list = function(compressed) {\n    let colon = compressed.indexOf(':')\n    if (colon < 0) return [exports.point2vertex(compressed)]\n\n    let v1 = exports.point2vertex(compressed.slice(0, colon))\n    let v2 = exports.point2vertex(compressed.slice(colon + 1))\n    let list = []\n\n    for (let i = Math.min(v1[0], v2[0]); i <= Math.max(v1[0], v2[0]); i++) {\n        for (let j = Math.min(v1[1], v2[1]); j <= Math.max(v1[1], v2[1]); j++) {\n            list.push([i, j])\n        }\n    }\n\n    return list\n}\n\nexports.stringify = function(tree) {\n    if (Object.prototype.toString.call(tree) === '[object Array]') {\n        return exports.stringify({nodes: [], subtrees: tree})\n    }\n\n    let output = ''\n\n    for (let node of tree.nodes) {\n        output += ';'\n\n        for (let id in node) {\n            if (id.toUpperCase() !== id) continue\n\n            output += id + '[' + node[id].map(exports.escapeString).join('][') + ']'\n        }\n\n        output += helper.linebreak\n    }\n\n    for (let subtree of tree.subtrees) {\n        output += '(' + exports.stringify(subtree) + ')'\n    }\n\n    return output\n}\n\nexports.escapeString = function(input) {\n    return input.toString()\n        .replace(/\\\\/g, '\\\\\\\\')\n        .replace(/\\]/g, '\\\\]')\n        .replace(/\\n\\n+/g, '\\n\\n')\n        .replace(/\\n/g, helper.linebreak)\n}\n\nexports.unescapeString = function(input) {\n    let result = []\n    let inBackslash = false\n\n    input = helper.normalizeEndings(input)\n\n    for (let i = 0; i < input.length; i++) {\n        if (!inBackslash) {\n            if (input[i] !== '\\\\')\n                result.push(input[i])\n            else if (input[i] === '\\\\')\n                inBackslash = true\n        } else {\n            if (input[i] !== '\\n')\n                result.push(input[i])\n\n            inBackslash = false\n        }\n    }\n\n    return result.join('')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/fileformats/sgf.js","module.exports = {\n    from: x => x\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/shims/buffer.js","module.exports = {\n    encodingExists: () => false,\n    decode: x => x\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/shims/iconv-lite.js","module.exports = {\n    detect: () => ({\n        confidence: 1,\n        encoding: 'utf8'\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/shims/jschardet.js","module.exports = []\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/shims/empty.js","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nclass Drawer extends Component {\n    render({type, show, children}) {\n        return h('section', {\n            id: type,\n            class: classNames({\n                drawer: true,\n                show\n            })\n        }, children)\n    }\n}\n\nmodule.exports = Drawer\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/drawers/Drawer.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/events/events.js","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 19\n// module chunks = 0","const {sgf} = require('./fileformats')\n\nlet _shapes = null\nlet equals = v => w => w[0] === v[0] && w[1] === v[1]\n\nexports.getSymmetries = function([x, y]) {\n    let f = ([x, y]) => [[x, y], [-x, y], [x, -y], [-x, -y]]\n    return [...f([x, y]), ...f([y, x])]\n}\n\nexports.getBoardSymmetries = function(board, vertex) {\n    let [mx, my] = [board.width - 1, board.height - 1]\n    let mod = (x, m) => (x % m + m) % m\n\n    return exports.getSymmetries(vertex).map(([x, y]) => [mod(x, mx), mod(y, my)])\n}\n\nexports.readShapes = function(content) {\n    let tree = sgf.parse(content, () => {}, true)[0]\n    let result = []\n\n    for (let i = 0; i < tree.subtrees.length; i++) {\n        let node = tree.subtrees[i].nodes[0]\n        let anchors = node.MA.map(x => [...sgf.point2vertex(x), node.AB.includes(x) ? 1 : -1])\n        let vertices = ['AW', 'CR', 'AB']\n            .map((x, i) => (node[x] || []).map(y => [...sgf.point2vertex(y), i - 1]))\n            .reduce((acc, x) => [...acc, ...x], [])\n\n        let data = {}\n\n        if ('C' in node) {\n            for (let [key, value] of node.C[0].trim().split(', ').map(x => x.split(': '))) {\n                data[key] = value\n            }\n        }\n\n        result.push(Object.assign({\n            name: node.N[0],\n            anchors,\n            vertices\n        }, data))\n    }\n\n    return result\n}\n\nexports.cornerMatch = function(vertices, board) {\n    let hypotheses = Array(8).fill(true)\n    let hypothesesInvert = Array(8).fill(true)\n\n    for (let [x, y, sign] of vertices) {\n        let representatives = exports.getBoardSymmetries(board, [x, y])\n\n        for (let i = 0; i < hypotheses.length; i++) {\n            if (hypotheses[i] && board.get(representatives[i]) !== sign)\n                hypotheses[i] = false\n            if (hypothesesInvert[i] && board.get(representatives[i]) !== -sign)\n                hypothesesInvert[i] = false\n        }\n\n        if (!hypotheses.includes(true) && !hypothesesInvert.includes(true))\n            return null\n    }\n\n    let i = [...hypotheses, ...hypothesesInvert].indexOf(true)\n    return i < 8 ? [i, false] : [i - 8, true]\n}\n\nexports.shapeMatch = function(shape, board, vertex) {\n    if (!board.hasVertex(vertex)) return null\n\n    let sign = board.get(vertex)\n    if (sign === 0) return null\n    let equalsVertex = equals(vertex)\n\n    for (let anchor of shape.anchors) {\n        let hypotheses = Array(8).fill(true)\n        let i = 0\n\n        if (shape.size != null && (board.width !== board.height || board.width !== +shape.size))\n            continue\n\n        if (shape.type === 'corner' && !exports.getBoardSymmetries(board, anchor.slice(0, 2)).some(equalsVertex))\n            continue\n\n        // Hypothesize vertex === anchor\n\n        for (let [x, y, s] of shape.vertices) {\n            let diff = [x - anchor[0], y - anchor[1]]\n            let symm = exports.getSymmetries(diff)\n\n            for (let k = 0; k < symm.length; k++) {\n                if (!hypotheses[k]) continue\n                let w = [vertex[0] + symm[k][0], vertex[1] + symm[k][1]]\n\n                if (!board.hasVertex(w) || board.get(w) !== s * sign * anchor[2])\n                    hypotheses[k] = false\n            }\n\n            i = hypotheses.indexOf(true)\n            if (i < 0) break\n        }\n\n        if (i >= 0) return [i, sign !== anchor[2]]\n    }\n\n    return null\n}\n\nexports.getMoveInterpretation = function(board, vertex, {shapes = null} = {}) {\n    if (!board.hasVertex(vertex)) return 'Pass'\n\n    let sign = board.get(vertex)\n    let neighbors = board.getNeighbors(vertex)\n\n    // Check atari\n\n    if (neighbors.some(v => board.get(v) === -sign && board.getLiberties(v).length === 1))\n        return 'Atari'\n\n    // Check connection\n\n    let friendly = neighbors.filter(v => board.get(v) === sign)\n    if (friendly.length === neighbors.length) return 'Fill'\n    if (friendly.length >= 2) return 'Connect'\n\n    // Load shape library if needed\n\n    if (shapes == null) {\n        if (_shapes == null) {\n            _shapes = exports.readShapes(require('../../data/shapes.sgf'))\n        }\n\n        shapes = _shapes\n    }\n\n    // Match shape\n\n    for (let shape of shapes) {\n        if (exports.shapeMatch(shape, board, vertex))\n            return shape.name\n    }\n\n    // Determine position to edges\n\n    let equalsVertex = equals(vertex)\n\n    if (equalsVertex([(board.width - 1) / 2, (board.height - 1) / 2]))\n        return 'Tengen'\n\n    let diff = board.getCanonicalVertex(vertex).map(x => x + 1)\n\n    if (!equals(diff)([4, 4]) && board.getHandicapPlacement(9).some(equalsVertex))\n        return 'Hoshi'\n\n    if (diff[1] <= 6)\n        return diff.join('-') + ' point'\n\n    return null\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/boardmatcher.js","const {h, render} = require('preact')\nconst helper = require('./helper')\n\nlet hiddenStyle = {\n    opacity: 0,\n    pointerEvents: 'none'\n}\n\nlet fileInput = render(h('input', {\n    type: 'file',\n    style: hiddenStyle\n}), document.body)\n\nexports.showMessageBox = function(message, type = 'info', buttons = ['OK'], cancelId = 0) {\n    if (buttons.length <= 1) {\n        alert(message)\n        return 0\n    } else {\n        return confirm(message) ? 0 : cancelId\n    }\n}\n\nexports.showOpenDialog = function(options, callback) {\n    let clone = fileInput.cloneNode()\n    fileInput.parentNode.replaceChild(clone, fileInput)\n    fileInput = clone\n\n    fileInput.multiple = options.properties.includes('multiSelections')\n    fileInput.value = ''\n\n    fileInput.addEventListener('change', evt => {\n        callback({result: evt.currentTarget.files})\n    })\n\n    fileInput.click()\n}\n\nexports.showSaveDialog = function(options, callback) {\n    let {type, name, content} = options\n    let href = `data:${type};charset=utf-8,${encodeURIComponent(content)}`\n\n    let element = render(h('a', {\n        href,\n        style: hiddenStyle,\n        download: name\n    }), document.body)\n\n    element.click()\n    element.remove()\n}\n\nexports.showInputBox = function(message, onSubmit = helper.noop, onCancel = helper.noop) {\n    sabaki.setState({\n        inputBoxText: message,\n        showInputBox: true,\n        onInputBoxSubmit: onSubmit,\n        onInputBoxCancel: onCancel\n    })\n}\n\nexports.closeInputBox = function() {\n    let {onInputBoxCancel = helper.noop} = sabaki.state\n    sabaki.setState({showInputBox: false})\n    onInputBoxCancel()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/dialog.js","let equals = v => w => w[0] === v[0] && w[1] === v[1]\nlet equalsSign = (board, ...s) => v => s.includes(board.get(v))\n\nfunction getNeighbors([x, y]) {\n    return [[x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]]\n}\n\nfunction getChain(board, vertex, result = null, sign = null) {\n    if (result == null) result = [vertex]\n    if (sign == null) sign = board.get(vertex)\n\n    let neighbors = getNeighbors(vertex)\n\n    for (let i = 0; i < neighbors.length; i++) {\n        let v = neighbors[i]\n        if (board.get(v) !== sign || result.some(equals(v))) continue\n\n        result.push(v)\n        getChain(board, v, result, sign)\n    }\n\n    return result\n}\n\nfunction isPointChain(board, vertex) {\n    return !getNeighbors(vertex).some(equalsSign(board, board.get(vertex)))\n}\n\nfunction hasLiberties(board, vertex, visited = [], sign = null) {\n    if (sign == null) sign = board.get(vertex)\n\n    let neighbors = getNeighbors(vertex)\n    let friendlyNeighbors = []\n\n    for (let i = 0; i < neighbors.length; i++) {\n        let n = neighbors[i]\n        let s = board.get(n)\n\n        if (s === 0) {\n            return true\n        } else if (s === sign) {\n            friendlyNeighbors.push(n)\n        }\n    }\n\n    visited.push(vertex)\n\n    for (let i = 0; i < friendlyNeighbors.length; i++) {\n        let n = friendlyNeighbors[i]\n        if (visited.some(equals(n))) continue\n\n        if (hasLiberties(board, n, visited, sign)) return true\n    }\n\n    return false\n}\n\nfunction makePseudoMove(board, sign, vertex) {\n    let neighbors = getNeighbors(vertex)\n    let checkCapture = false\n    let checkMultipleDeadChains = false\n\n    if (neighbors.every(equalsSign(board, sign, undefined)))\n        return null\n\n    board.set(vertex, sign)\n\n    if (!hasLiberties(board, vertex)) {\n        if (!neighbors.some(equalsSign(board, -sign))) {\n            board.set(vertex, 0)\n            return null\n        } else if (isPointChain(board, vertex)) {\n            checkMultipleDeadChains = true\n        } else {\n            checkCapture = true\n        }\n    }\n\n    let dead = []\n    let deadChains = 0\n\n    for (let i = 0; i < neighbors.length; i++) {\n        let n = neighbors[i]\n        if (board.get(n) !== -sign || hasLiberties(board, n))\n            continue\n\n        let chain = getChain(board, n)\n        dead.push(...chain)\n        deadChains++\n\n        for (let j = 0; j < chain.length; j++) {\n            board.set(chain[j], 0)\n        }\n    }\n\n    if (checkMultipleDeadChains && deadChains <= 1) {\n        for (let j = 0; j < dead.length; j++) {\n            board.set(dead[j], -sign)\n        }\n\n        board.set(vertex, 0)\n        return null\n    }\n\n    if (checkCapture && dead.length === 0) {\n        board.set(vertex, 0)\n        return null\n    }\n\n    return dead\n}\n\nfunction fixHoles(board) {\n    for (let x = 0; x < board.width; x++) {\n        for (let y = 0; y < board.height; y++) {\n            let vertex = [x, y]\n            if (board.get(vertex) !== 0) continue\n\n            let neighbors = getNeighbors(vertex)\n            let sign = 0\n            let fix = true\n\n            for (let i = 1; i < neighbors.length; i++) {\n                let n = neighbors[i]\n                let s = board.get(n)\n\n                if (s != null && s !== sign) {\n                    if (sign === 0) {\n                        sign = s\n                    } else {\n                        fix = false\n                        break\n                    }\n                }\n            }\n\n            if (fix) board.set(vertex, sign)\n        }\n    }\n\n    return board\n}\n\nexports.guess = function(board, scoring = false, iterations = 50) {\n    let boardClone = board.clone()\n\n    if (scoring) {\n        let floating = exports.getFloatingStones(boardClone)\n        floating.forEach(v => boardClone.set(v, 0))\n    }\n\n    let map = exports.getProbabilityMap(boardClone, iterations)\n    let done = []\n    let result = []\n\n    for (let x = 0; x < board.width; x++) {\n        for (let y = 0; y < board.height; y++) {\n            let vertex = [x, y]\n            let sign = board.get(vertex)\n\n            if (sign === 0 || done.some(equals(vertex))) continue\n\n            let chain = getChain(board, vertex)\n            let probability = chain.map(([i, j]) => map[j][i]).reduce((sum, x) => sum + x) / chain.length\n            let newSign = probability < 0.5 ? -1 : probability > 0.5 ? 1 : 0\n\n            if (newSign === -sign) result.push(...chain)\n\n            done.push(vertex)\n        }\n    }\n\n    if (!scoring) return result\n\n    // Preserve life & death status of related chains\n\n    done.length = 0\n    let updatedResult = []\n\n    for (let vertex of result) {\n        if (done.some(equals(vertex))) continue\n\n        let related = board.getRelatedChains(vertex)\n        let deadProbability = related.filter(v => result.some(equals(v))).length / related.length\n\n        if (deadProbability > 0.5) {\n            updatedResult.push(...related)\n        }\n\n        done.push(...related)\n    }\n\n    return updatedResult\n}\n\nexports.getFloatingStones = function(board) {\n    let map = board.getAreaMap()\n    let done = []\n    let result = []\n    let isNegative = v => board.get(v) === -1\n    let isPositive = v => board.get(v) === 1\n    let markAsDone = v => done.push(v)\n\n    for (let i = 0; i < board.width; i++) {\n        for (let j = 0; j < board.height; j++) {\n            let vertex = [i, j]\n            if (map[j][i] !== 0 || done.some(equals(vertex))) continue\n\n            let posArea = board.getConnectedComponent(vertex, [0, -1])\n            let negArea = board.getConnectedComponent(vertex, [0, 1])\n            let posDead = posArea.filter(isNegative)\n            let negDead = negArea.filter(isPositive)\n            let posDiff = posArea.filter(v => !posDead.some(equals(v)) && !negArea.some(equals(v)))\n            let negDiff = negArea.filter(v => !negDead.some(equals(v)) && !posArea.some(equals(v)))\n\n            let sign = 0\n            let actualArea, actualDead\n\n            if (negDiff.length <= 1 && negDead.length <= posDead.length) {\n                sign--\n                actualArea = negArea\n                actualDead = negDead\n            }\n\n            if (posDiff.length <= 1 && posDead.length <= negDead.length) {\n                sign++\n                actualArea = posArea\n                actualDead = posDead\n            }\n\n            if (sign === 0) {\n                actualArea = getChain(board, vertex)\n                actualDead = []\n            }\n\n            actualArea.forEach(markAsDone)\n            result.push(...actualDead)\n        }\n    }\n\n    return result\n}\n\nexports.playTillEnd = function(board, sign, iterations = Infinity) {\n    board = board.clone()\n\n    let freeVertices = []\n    let illegalVertices = []\n\n    for (let x = 0; x < board.width; x++) {\n        for (let y = 0; y < board.height; y++) {\n            if (board.get([x, y]) !== 0) continue\n            freeVertices.push([x, y])\n        }\n    }\n\n    let finished = [false, false]\n\n    while (iterations > 0 && freeVertices.length > 0 && finished.includes(false)) {\n        let madeMove = false\n\n        while (freeVertices.length > 0) {\n            let randomIndex = Math.floor(Math.random() * freeVertices.length)\n            let vertex = freeVertices[randomIndex]\n            let freedVertices = makePseudoMove(board, sign, vertex, false)\n\n            freeVertices.splice(randomIndex, 1)\n\n            if (freedVertices != null) {\n                freeVertices.push(...freedVertices)\n\n                finished[-sign > 0 ? 0 : 1] = false\n                madeMove = true\n\n                break\n            } else {\n                illegalVertices.push(vertex)\n            }\n        }\n\n        finished[sign > 0 ? 0 : 1] = !madeMove\n\n        freeVertices.push(...illegalVertices)\n        illegalVertices.length = 0\n\n        sign = -sign\n        iterations--\n    }\n\n    return board\n}\n\nexports.getProbabilityMap = function(board, iterations) {\n    let pmap = [...Array(board.height)].map(_ => Array(board.width).fill(0))\n    let nmap = [...Array(board.height)].map(_ => Array(board.width).fill(0))\n    let result = [...Array(board.height)].map(_ => Array(board.width).fill(0.5))\n\n    for (let i = 0; i < iterations; i++) {\n        let sign = Math.sign(Math.random() - 0.5)\n        let areaMap = fixHoles(exports.playTillEnd(board, sign))\n\n        for (let x = 0; x < areaMap.width; x++) {\n            for (let y = 0; y < areaMap.height; y++) {\n                let s = areaMap.get([x, y])\n                if (s < 0) nmap[y][x]++\n                else if (s > 0) pmap[y][x]++\n            }\n        }\n    }\n\n    for (let x = 0; x < board.width; x++) {\n        for (let y = 0; y < board.height; y++) {\n            if (pmap[y][x] + nmap[y][x] === 0) continue\n            result[y][x] = pmap[y][x] / (pmap[y][x] + nmap[y][x])\n        }\n    }\n\n    return result\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/deadstones.js","const fs = require('fs')\nconst EventEmitter = require('events')\nconst {ipcRenderer, remote} = require('electron')\nconst {app, Menu} = remote\nconst {h, render, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst ThemeManager = require('./ThemeManager')\nconst MainView = require('./MainView')\nconst LeftSidebar = require('./LeftSidebar')\nconst Sidebar = require('./Sidebar')\nconst DrawerManager = require('./DrawerManager')\nconst InputBox = require('./InputBox')\nconst BusyScreen = require('./BusyScreen')\nconst InfoOverlay = require('./InfoOverlay')\n\nconst Board = require('../modules/board')\nconst boardmatcher = require('../modules/boardmatcher')\nconst deadstones = require('../modules/deadstones')\nconst dialog = require('../modules/dialog')\nconst fileformats = require('../modules/fileformats')\nconst gametree = require('../modules/gametree')\nconst gtp = require('../modules/gtp')\nconst helper = require('../modules/helper')\nconst setting = remote.require('./setting')\nconst {sgf} = fileformats\nconst sound = require('../modules/sound')\n\nclass App extends Component {\n    constructor() {\n        super()\n        window.sabaki = this\n\n        let emptyTree = gametree.new()\n        emptyTree.nodes.push({})\n\n        this.state = {\n            mode: 'play',\n            openDrawer: null,\n            busy: false,\n            fullScreen: false,\n            showMenuBar: null,\n            zoomFactor: null,\n\n            representedFilename: null,\n            gameTrees: [emptyTree],\n            treePosition: [emptyTree, 0],\n\n            // Bars\n\n            undoable: false,\n            undoText: 'Undo',\n            selectedTool: 'stone_1',\n            scoringMethod: null,\n            findText: '',\n            findVertex: null,\n            deadStones: [],\n            blockedGuesses: [],\n\n            // Goban\n\n            highlightVertices: [],\n            showCoordinates: null,\n            showMoveColorization: null,\n            showNextMoves: null,\n            showSiblings: null,\n            fuzzyStonePlacement: null,\n            animatedStonePlacement: null,\n            animatedVertex: null,\n\n            // Sidebar\n\n            consoleLog: [],\n            showConsole: setting.get('view.show_leftsidebar'),\n            leftSidebarWidth: setting.get('view.leftsidebar_width'),\n            showGameGraph: setting.get('view.show_graph'),\n            showCommentBox: setting.get('view.show_comments'),\n            sidebarWidth: setting.get('view.sidebar_width'),\n            graphGridSize: null,\n            graphNodeSize: null,\n\n            // Engines\n\n            engines: null,\n            attachedEngines: [null, null],\n            engineCommands: [[], []],\n            generatingMoves: false,\n\n            // Drawers\n\n            preferencesTab: 'general',\n\n            // Input Box\n\n            showInputBox: false,\n            inputBoxText: '',\n            onInputBoxSubmit: helper.noop,\n            onInputBoxCancel: helper.noop,\n\n            // Info Overlay\n\n            infoOverlayText: '',\n            showInfoOverlay: false\n        }\n\n        this.events = new EventEmitter()\n        this.appName = app.getName()\n        this.version = app.getVersion()\n        this.window = remote.getCurrentWindow()\n\n        this.treeHash = this.generateTreeHash()\n        this.attachedEngineControllers = [null, null]\n        this.engineBoards = [null, null]\n\n        // Expose submodules\n\n        this.modules = {Board, boardmatcher, deadstones, dialog,\n            fileformats, gametree, gtp, helper, setting, sound}\n\n        // Bind state to settings\n\n        setting.events.on('change', ({key}) => this.updateSettingState(key))\n        this.updateSettingState()\n    }\n\n    componentDidMount() {\n        window.addEventListener('contextmenu', evt => {\n            evt.preventDefault()\n        })\n\n        window.addEventListener('load', () => {\n            this.events.emit('ready')\n            this.window.show()\n        })\n\n        ipcRenderer.on('load-file', (evt, ...args) => {\n            setTimeout(() => this.loadFile(...args), setting.get('app.loadgame_delay'))\n        })\n\n        this.window.on('focus', () => {\n            if (setting.get('file.show_reload_warning')) {\n                this.askForReload()\n            }\n\n            ipcRenderer.send('build-menu', this.state.busy)\n        })\n\n        this.window.on('resize', () => {\n            clearTimeout(this.resizeId)\n\n            this.resizeId = setTimeout(() => {\n                if (!this.window.isMaximized() && !this.window.isMinimized() && !this.window.isFullScreen()) {\n                    let [width, height] = this.window.getContentSize()\n                    setting.set('window.width', width).set('window.height', height)\n                }\n            }, 1000)\n        })\n\n        // Handle main menu items\n\n        let menuData = require('../menu')\n\n        let handleMenuClicks = menu => {\n            for (let item of menu) {\n                if ('click' in item) {\n                    ipcRenderer.on(`menu-click-${item.id}`, () => {\n                        if (!this.state.showMenuBar) this.window.setMenuBarVisibility(false)\n                        dialog.closeInputBox()\n                        item.click()\n                    })\n                }\n\n                if ('submenu' in item) {\n                    handleMenuClicks(item.submenu)\n                }\n            }\n        }\n\n        handleMenuClicks(menuData)\n\n        // Handle mouse wheel\n\n        for (let el of document.querySelectorAll('#main main, #graph')) {\n            el.addEventListener('wheel', evt => {\n                evt.preventDefault()\n\n                if (this.residueDeltaY == null) this.residueDeltaY = 0\n                this.residueDeltaY += evt.deltaY\n\n                if (Math.abs(this.residueDeltaY) >= setting.get('game.navigation_sensitivity')) {\n                    this.goStep(Math.sign(this.residueDeltaY))\n                    this.residueDeltaY = 0\n                }\n            })\n        }\n\n        // Handle file drag & drop\n\n        document.body.addEventListener('dragover', evt => evt.preventDefault())\n        document.body.addEventListener('drop', evt => {\n            evt.preventDefault()\n\n            if (evt.dataTransfer.files.length === 0) return\n            this.loadFile(evt.dataTransfer.files[0])\n        })\n\n        // Handle escape key\n\n        document.addEventListener('keyup', evt => {\n            if (evt.keyCode === 27) {\n                // Escape\n\n                if (this.state.generatingMoves) {\n                    this.stopGeneratingMoves()\n                } else if (this.state.openDrawer != null) {\n                    this.closeDrawer()\n                } else if (this.state.mode !== 'play') {\n                    this.setMode('play')\n                } else if (this.state.fullScreen) {\n                    this.setState({fullScreen: false})\n                }\n            }\n        })\n\n        // Handle other keyboard shortcuts\n\n        document.addEventListener('keydown', evt => {\n            if (['input', 'textarea'].indexOf(document.activeElement.tagName.toLowerCase()) >= 0) {\n                return\n            }\n\n            if (evt.keyCode == 36) {\n                // Home\n                this.goToBeginning()\n            } else if (evt.keyCode == 35) {\n                // End\n                this.goToEnd()\n            } else if (evt.keyCode == 38) {\n                // Up\n                this.goStep(-1)\n            } else if (evt.keyCode == 40) {\n                // Down\n                this.goStep(1)\n            } else if (evt.keyCode == 37) {\n                // Left\n                this.goToSiblingVariation(-1)\n            } else if (evt.keyCode == 39) {\n                // Right\n                this.goToSiblingVariation(1)\n            }\n        })\n\n        // Handle window closing\n\n        window.addEventListener('beforeunload', evt => {\n            evt.returnValue = ' '\n        })\n\n        this.newFile()\n    }\n\n    componentDidUpdate(_, prevState = {}) {\n        // Update title\n\n        let {basename} = require('path')\n        let title = this.appName\n        let {representedFilename, gameTrees, treePosition: [tree, ]} = this.state\n\n        if (representedFilename)\n            title = basename(representedFilename)\n        if (gameTrees.length > 1)\n            title += ' — Game ' + (this.inferredState.gameIndex + 1)\n        if (representedFilename && process.platform != 'darwin')\n            title += ' — ' + this.appName\n\n        if (document.title !== title)\n            document.title = title\n\n        // Handle full screen & menu bar\n\n        if (prevState.fullScreen !== this.state.fullScreen) {\n            if (this.state.fullScreen) this.flashInfoOverlay('Press Esc to exit full screen mode')\n            this.window.setFullScreen(this.state.fullScreen)\n        }\n\n        if (prevState.showMenuBar !== this.state.showMenuBar) {\n            if (!this.state.showMenuBar) this.flashInfoOverlay('Press Alt to show menu bar')\n            this.window.setMenuBarVisibility(this.state.showMenuBar)\n            this.window.setAutoHideMenuBar(!this.state.showMenuBar)\n        }\n\n        // Handle sidebar showing/hiding\n\n        if (prevState.showLeftSidebar !== this.state.showLeftSidebar\n        || prevState.showSidebar !== this.state.showSidebar) {\n            let [width, height] = this.window.getContentSize()\n            let widthDiff = 0\n\n            if (prevState.showSidebar !== this.state.showSidebar) {\n                widthDiff += this.state.sidebarWidth * (this.state.showSidebar ? 1 : -1)\n            }\n\n            if (prevState.showLeftSidebar !== this.state.showLeftSidebar) {\n                widthDiff += this.state.leftSidebarWidth * (this.state.showLeftSidebar ? 1 : -1)\n            }\n\n            if (!this.window.isMaximized() && !this.window.isMinimized() && !this.window.isFullScreen()) {\n                this.window.setContentSize(width + widthDiff, height)\n            }\n        }\n\n        // Handle zoom factor\n\n        if (prevState.zoomFactor !== this.state.zoomFactor) {\n            this.window.webContents.setZoomFactor(this.state.zoomFactor)\n        }\n    }\n\n    updateSettingState(key = null) {\n        let data = {\n            'app.zoom_factor': 'zoomFactor',\n            'view.show_menubar': 'showMenuBar',\n            'view.show_coordinates': 'showCoordinates',\n            'view.show_move_colorization': 'showMoveColorization',\n            'view.show_next_moves': 'showNextMoves',\n            'view.show_siblings': 'showSiblings',\n            'view.fuzzy_stone_placement': 'fuzzyStonePlacement',\n            'view.animated_stone_placement': 'animatedStonePlacement',\n            'graph.grid_size': 'graphGridSize',\n            'graph.node_size': 'graphNodeSize',\n            'engines.list': 'engines',\n            'scoring.method': 'scoringMethod'\n        }\n\n        if (key == null) {\n            for (let k in data) this.updateSettingState(k)\n            return\n        }\n\n        if (key in data) {\n            ipcRenderer.send('build-menu', this.state.busy)\n            this.setState({[data[key]]: setting.get(key)})\n        }\n    }\n\n    // User Interface\n\n    setSidebarWidth(sidebarWidth) {\n        this.setState({sidebarWidth}, () => window.dispatchEvent(new Event('resize')))\n    }\n\n    setLeftSidebarWidth(leftSidebarWidth) {\n        this.setState({leftSidebarWidth}, () => window.dispatchEvent(new Event('resize')))\n    }\n\n    setMode(mode) {\n        let stateChange = {mode}\n\n        if (['scoring', 'estimator'].includes(mode)) {\n            // Guess dead stones\n\n            let {guess} = require('../modules/deadstones')\n            let {treePosition} = this.state\n            let iterations = setting.get('score.estimator_iterations')\n            let deadStones = guess(gametree.getBoard(...treePosition), mode === 'scoring', iterations)\n\n            Object.assign(stateChange, {deadStones})\n        }\n\n        this.setState(stateChange)\n        this.events.emit('modeChange')\n    }\n\n    openDrawer(drawer) {\n        this.setState({openDrawer: drawer})\n    }\n\n    closeDrawer() {\n        document.activeElement.blur()\n        this.openDrawer(null)\n    }\n\n    setBusy(busy) {\n        this.setState({busy})\n    }\n\n    showInfoOverlay(text) {\n        this.setState({\n            infoOverlayText: text,\n            showInfoOverlay: true\n        })\n    }\n\n    hideInfoOverlay() {\n        this.setState({showInfoOverlay: false})\n    }\n\n    flashInfoOverlay(text) {\n        this.showInfoOverlay(text)\n        setTimeout(() => this.hideInfoOverlay(), setting.get('infooverlay.duration'))\n    }\n\n    // File Management\n\n    getEmptyGameTree() {\n        let handicap = setting.get('game.default_handicap')\n        let size = setting.get('game.default_board_size').toString().split(':').map(x => +x)\n        let [width, height] = [size[0], size.slice(-1)[0]]\n        let handicapStones = new Board(width, height).getHandicapPlacement(handicap).map(sgf.vertex2point)\n\n        let sizeInfo = width === height ? width.toString() : `${width}:${height}`\n        let handicapInfo = handicapStones.length > 0 ? `HA[${handicap}]AB[${handicapStones.join('][')}]` : ''\n        let date = new Date()\n        let dateInfo = sgf.dates2string([[date.getFullYear(), date.getMonth() + 1, date.getDate()]])\n\n        return sgf.parse(`\n            (;GM[1]FF[4]CA[UTF-8]AP[${this.appName}:${this.version}]\n            KM[${setting.get('game.default_komi')}]\n            SZ[${sizeInfo}]DT[${dateInfo}]\n            ${handicapInfo})\n        `)[0]\n    }\n\n    newFile({playSound = false, showInfo = false, suppressAskForSave = false} = {}) {\n        if (!suppressAskForSave && !this.askForSave()) return\n\n        if (showInfo && this.state.openDrawer === 'info') this.closeDrawer()\n        this.setMode('play')\n\n        this.clearUndoPoint()\n        this.detachEngines()\n        this.setState(this.state, () => {\n            let emptyTree = this.getEmptyGameTree()\n\n            this.setState({\n                openDrawer: showInfo ? 'info' : null,\n                gameTrees: [emptyTree],\n                treePosition: [emptyTree, 0],\n                representedFilename: null\n            })\n\n            this.treeHash = this.generateTreeHash()\n            this.fileHash = this.generateFileHash()\n\n            if (playSound) sound.playNewGame()\n        })\n    }\n\n    loadFile(file = null, {suppressAskForSave = false} = {}) {\n        if (!suppressAskForSave && !this.askForSave()) return\n\n        if (!file) {\n            dialog.showOpenDialog({\n                properties: ['openFile'],\n                filters: [...fileformats.meta, {name: 'All Files', extensions: ['*']}]\n            }, ({result}) => {\n                if (result) file = result[0]\n                if (file) this.loadFile(file, {suppressAskForSave: true})\n            })\n\n            return\n        }\n\n        let {extname} = require('path')\n        let extension = extname(file.name).slice(1)\n\n        fs.readFile(file, (err, content) => {\n            this.loadContent(content, extension, {\n                suppressAskForSave: true,\n                callback: err => {\n                    if (err) return\n\n                    this.setState({representedFilename: file.name})\n                    this.fileHash = this.generateFileHash()\n\n                    if (setting.get('game.goto_end_after_loading')) {\n                        this.goToEnd()\n                    }\n                }\n            })\n        })\n    }\n\n    loadContent(content, extension, {suppressAskForSave = false, ignoreEncoding = false, callback = helper.noop} = {}) {\n        if (!suppressAskForSave && !this.askForSave()) return\n\n        this.setBusy(true)\n        if (this.state.openDrawer !== 'gamechooser') this.closeDrawer()\n        this.setMode('play')\n\n        setTimeout(() => {\n            let lastProgress = -1\n            let error = false\n            let gameTrees = []\n\n            try {\n                let fileFormatModule = fileformats.getModuleByExtension(extension)\n\n                gameTrees = fileFormatModule.parse(content, evt => {\n                    if (evt.progress - lastProgress < 0.1) return\n                    this.window.setProgressBar(evt.progress)\n                    lastProgress = evt.progress\n                }, ignoreEncoding)\n\n                if (gameTrees.length == 0) throw true\n            } catch (err) {\n                dialog.showMessageBox('This file is unreadable.', 'warning')\n                error = true\n            }\n\n            if (gameTrees.length != 0) {\n                this.clearUndoPoint()\n                this.detachEngines()\n                this.setState({\n                    representedFilename: null,\n                    gameTrees,\n                    treePosition: [gameTrees[0], 0]\n                })\n\n                this.treeHash = this.generateTreeHash()\n                this.fileHash = this.generateFileHash()\n            }\n\n            this.setBusy(false)\n\n            if (gameTrees.length > 1) {\n                setTimeout(() => {\n                    this.openDrawer('gamechooser')\n                }, setting.get('gamechooser.show_delay'))\n            }\n\n            this.window.setProgressBar(-1)\n            callback(error)\n\n            if (!error) this.events.emit('fileLoad')\n        }, setting.get('app.loadgame_delay'))\n    }\n\n    saveFile(filename = null) {\n        dialog.showSaveDialog({\n            type: 'application/x-go-sgf',\n            name: this.state.representedFilename || 'game.sgf',\n            content: this.getSGF()\n        })\n\n        this.treeHash = this.generateTreeHash()\n        this.fileHash = this.generateFileHash()\n\n        return true\n    }\n\n    getSGF() {\n        let {gameTrees} = this.state\n\n        for (let tree of gameTrees) {\n            Object.assign(tree.nodes[0], {\n                AP: [`${this.appName}:${this.version}`],\n                CA: ['UTF-8']\n            })\n        }\n\n        return sgf.stringify(gameTrees)\n    }\n\n    generateTreeHash() {\n        return this.state.gameTrees.map(tree => gametree.getHash(tree)).join('')\n    }\n\n    generateFileHash() {\n    }\n\n    askForSave() {\n        let hash = this.generateTreeHash()\n\n        if (hash !== this.treeHash) {\n            let answer = dialog.showMessageBox(\n                'Your changes will be lost if you close this file without saving. Do you want to continue?',\n                'warning',\n                ['Save', 'Don’t Save', 'Cancel'], 2\n            )\n\n            if (answer === 0) return true\n            else if (answer === 2) return false\n        }\n\n        return true\n    }\n\n    askForReload() {\n    }\n\n    // Playing\n\n    clickVertex(vertex, {button = 0, ctrlKey = false, x = 0, y = 0} = {}) {\n        this.closeDrawer()\n\n        let [tree, index] = this.state.treePosition\n        let board = gametree.getBoard(tree, index)\n        let node = tree.nodes[index]\n\n        if (typeof vertex == 'string') {\n            vertex = board.coord2vertex(vertex)\n        }\n\n        if (['play', 'autoplay'].includes(this.state.mode)) {\n            if (button === 0) {\n                if (board.get(vertex) === 0) {\n                    this.makeMove(vertex, {sendToEngine: true})\n                } else if (vertex in board.markups\n                && board.markups[vertex][0] === 'point'\n                && setting.get('edit.click_currentvertex_to_remove')) {\n                    this.removeNode(tree, index)\n                }\n            } else if (button === 2) {\n                if (vertex in board.markups && board.markups[vertex][0] === 'point') {\n                    this.openCommentMenu(tree, index, {x, y})\n                }\n            }\n        } else if (this.state.mode === 'edit') {\n            if (ctrlKey) {\n                // Add coordinates to comment\n\n                let coord = board.vertex2coord(vertex)\n                let commentText = node.C ? node.C[0] : ''\n\n                node.C = commentText !== '' ? [commentText.trim() + ' ' + coord] : [coord]\n                return\n            }\n\n            let tool = this.state.selectedTool\n\n            if (button === 2) {\n                // Right mouse click\n\n                if (['stone_1', 'stone_-1'].includes(tool)) {\n                    // Switch stone tool\n\n                    tool = tool === 'stone_1' ? 'stone_-1' : 'stone_1'\n                } else if (['number', 'label'].includes(tool)) {\n                    // Show label editing context menu\n\n                    let click = () => dialog.showInputBox('Enter label text', ({value}) => {\n                        this.useTool('label', vertex, value)\n                    })\n\n                    let template = [{label: '&Edit Label', click}]\n                    helper.popupMenu(template, x, y)\n\n                    return\n                }\n            }\n\n            if (['line', 'arrow'].includes(tool)) {\n                // Remember clicked vertex and pass as an argument the second time\n\n                if (!this.editVertexData || this.editVertexData[0] !== tool) {\n                    this.useTool(tool, vertex)\n                    this.editVertexData = [tool, vertex]\n                } else {\n                    this.useTool(tool, vertex, this.editVertexData[1])\n                    this.editVertexData = null\n                }\n            } else {\n                this.useTool(tool, vertex)\n                this.editVertexData = null\n            }\n        } else if (['scoring', 'estimator'].includes(this.state.mode)) {\n            if (button !== 0 || board.get(vertex) === 0) return\n\n            let {mode, deadStones} = this.state\n            let dead = deadStones.some(v => helper.vertexEquals(v, vertex))\n            let stones = mode === 'estimator' ? board.getChain(vertex) : board.getRelatedChains(vertex)\n\n            if (!dead) {\n                deadStones = [...deadStones, ...stones]\n            } else {\n                deadStones = deadStones.filter(v => !stones.some(w => helper.vertexEquals(v, w)))\n            }\n\n            this.setState({deadStones})\n        } else if (this.state.mode === 'find') {\n            if (button !== 0) return\n\n            if (helper.vertexEquals(this.state.findVertex || [-1, -1], vertex)) {\n                this.setState({findVertex: null})\n            } else {\n                this.setState({findVertex: vertex})\n                this.findMove(1, {vertex, text: this.state.findText})\n            }\n        } else if (this.state.mode === 'guess') {\n            if (button !== 0) return\n\n            let tp = gametree.navigate(...this.state.treePosition, 1)\n            if (!tp) return this.setMode('play')\n\n            let nextNode = tp[0].nodes[tp[1]]\n            if (!('B' in nextNode || 'W' in nextNode)) return this.setMode('play')\n\n            let nextVertex = sgf.point2vertex(nextNode['B' in nextNode ? 'B' : 'W'][0])\n            let board = gametree.getBoard(...this.state.treePosition)\n            if (!board.hasVertex(nextVertex)) return this.setMode('play')\n\n            if (helper.vertexEquals(vertex, nextVertex)) {\n                this.makeMove(vertex, {player: 'B' in nextNode ? 1 : -1})\n            } else {\n                if (board.get(vertex) !== 0\n                || this.state.blockedGuesses.some(v => helper.vertexEquals(v, vertex)))\n                    return\n\n                let blocked = []\n                let [, i] = vertex.map((x, i) => Math.abs(x - nextVertex[i]))\n                    .reduce(([max, i], x, j) => x > max ? [x, j] : [max, i], [-Infinity, -1])\n\n                for (let x = 0; x < board.width; x++) {\n                    for (let y = 0; y < board.height; y++) {\n                        let z = i === 0 ? x : y\n                        if (Math.abs(z - vertex[i]) < Math.abs(z - nextVertex[i]))\n                            blocked.push([x, y])\n                    }\n                }\n\n                let {blockedGuesses} = this.state\n                blockedGuesses.push(...blocked)\n                this.setState({blockedGuesses})\n            }\n        }\n\n        this.events.emit('vertexClick')\n    }\n\n    makeMove(vertex, {player = null, clearUndoPoint = true, sendToEngine = false} = {}) {\n        if (!['play', 'autoplay', 'guess'].includes(this.state.mode)) {\n            this.closeDrawer()\n            this.setMode('play')\n        }\n\n        let [tree, index] = this.state.treePosition\n        let board = gametree.getBoard(tree, index)\n\n        if (typeof vertex == 'string') {\n            vertex = board.coord2vertex(vertex)\n        }\n\n        let pass = !board.hasVertex(vertex)\n        if (!pass && board.get(vertex) !== 0) return\n\n        let prev = gametree.navigate(tree, index, -1)\n        if (!player) player = this.inferredState.currentPlayer\n        let color = player > 0 ? 'B' : 'W'\n        let capture = false, suicide = false, ko = false\n        let createNode = true\n\n        if (!pass) {\n            // Check for ko\n\n            if (prev && setting.get('game.show_ko_warning')) {\n                let hash = board.makeMove(player, vertex).getPositionHash()\n\n                ko = prev[0].nodes[prev[1]].board.getPositionHash() == hash\n\n                if (ko && dialog.showMessageBox(\n                    ['You are about to play a move which repeats a previous board position.',\n                    'This is invalid in some rulesets. Do you want to play anyway?'].join('\\n'),\n                    'info',\n                    ['Play Anyway', 'Don’t Play'], 1\n                ) != 0) return\n            }\n\n            let vertexNeighbors = board.getNeighbors(vertex)\n\n            // Check for suicide\n\n            capture = vertexNeighbors\n                .some(v => board.get(v) == -player && board.getLiberties(v).length == 1)\n\n            suicide = !capture\n            && vertexNeighbors.filter(v => board.get(v) == player)\n                .every(v => board.getLiberties(v).length == 1)\n            && vertexNeighbors.filter(v => board.get(v) == 0).length == 0\n\n            if (suicide && setting.get('game.show_suicide_warning')) {\n                if (dialog.showMessageBox(\n                    ['You are about to play a suicide move.',\n                    'This is invalid in some rulesets. Do you want to play anyway?'].join('\\n'),\n                    'info',\n                    ['Play Anyway', 'Don’t Play'], 1\n                ) != 0) return\n            }\n\n            // Animate board\n\n            this.setState({animatedVertex: vertex})\n        }\n\n        // Update data\n\n        let nextTreePosition\n\n        if (tree.subtrees.length === 0 && tree.nodes.length - 1 === index) {\n            // Append move\n\n            let node = {}\n            node[color] = [sgf.vertex2point(vertex)]\n            tree.nodes.push(node)\n\n            nextTreePosition = [tree, tree.nodes.length - 1]\n        } else {\n            if (index !== tree.nodes.length - 1) {\n                // Search for next move\n\n                let nextNode = tree.nodes[index + 1]\n                let moveExists = color in nextNode\n                    && helper.vertexEquals(sgf.point2vertex(nextNode[color][0]), vertex)\n\n                if (moveExists) {\n                    nextTreePosition = [tree, index + 1]\n                    createNode = false\n                }\n            } else {\n                // Search for variation\n\n                let variations = tree.subtrees.filter(subtree => {\n                    return subtree.nodes.length > 0\n                        && color in subtree.nodes[0]\n                        && helper.vertexEquals(sgf.point2vertex(subtree.nodes[0][color][0]), vertex)\n                })\n\n                if (variations.length > 0) {\n                    nextTreePosition = [variations[0], 0]\n                    createNode = false\n                }\n            }\n\n            if (createNode) {\n                // Create variation\n\n                let updateRoot = tree.parent == null\n                let splitted = gametree.split(tree, index)\n                let newTree = gametree.new()\n                let node = {[color]: [sgf.vertex2point(vertex)]}\n\n                newTree.nodes = [node]\n                newTree.parent = splitted\n\n                splitted.subtrees.push(newTree)\n                splitted.current = splitted.subtrees.length - 1\n\n                if (updateRoot) {\n                    let {gameTrees} = this.state\n                    gameTrees[gameTrees.indexOf(tree)] = splitted\n                }\n\n                nextTreePosition = [newTree, 0]\n            }\n        }\n\n        this.setCurrentTreePosition(...nextTreePosition)\n\n        // Play sounds\n\n        if (!pass) {\n            let delay = setting.get('sound.capture_delay_min')\n            delay += Math.floor(Math.random() * (setting.get('sound.capture_delay_max') - delay))\n\n            if (capture || suicide)\n                sound.playCapture(delay)\n\n            sound.playPachi()\n        } else {\n            sound.playPass()\n        }\n\n        // Clear undo point\n\n        if (createNode && clearUndoPoint) this.clearUndoPoint()\n\n        // Enter scoring mode after two consecutive passes\n\n        let enterScoring = false\n\n        if (pass && createNode && prev) {\n            let prevNode = tree.nodes[index]\n            let prevColor = color === 'B' ? 'W' : 'B'\n            let prevPass = prevColor in prevNode && prevNode[prevColor][0] === ''\n\n            if (prevPass) {\n                enterScoring = true\n                this.setMode('scoring')\n            }\n        }\n\n        // Emit event\n\n        this.events.emit('moveMake', {pass, capture, suicide, ko, enterScoring})\n\n        // Send command to engine\n\n        if (sendToEngine && this.attachedEngineControllers.some(x => x != null)) {\n            let passPlayer = pass ? player : null\n            setTimeout(() => this.startGeneratingMoves({passPlayer}), setting.get('gtp.move_delay'))\n        }\n    }\n\n    makeResign({player = null, setUndoPoint = true} = {}) {\n        let {rootTree, currentPlayer} = this.inferredState\n        if (player == null) player = currentPlayer\n        let color = player > 0 ? 'W' : 'B'\n        let rootNode = rootTree.nodes[0]\n\n        if (setUndoPoint) this.setUndoPoint('Undo Resignation')\n        rootNode.RE = [`${color}+Resign`]\n\n        this.makeMove([-1, -1], {player, clearUndoPoint: false})\n        this.makeMainVariation(...this.state.treePosition, {setUndoPoint: false})\n\n        this.events.emit('resign', {player})\n    }\n\n    useTool(tool, vertex, argument = null) {\n        let [tree, index] = this.state.treePosition\n        let {currentPlayer, gameIndex} = this.inferredState\n        let board = gametree.getBoard(tree, index)\n        let node = tree.nodes[index]\n\n        if (typeof vertex == 'string') {\n            vertex = board.coord2vertex(vertex)\n        }\n\n        let data = {\n            cross: 'MA',\n            triangle: 'TR',\n            circle: 'CR',\n            square: 'SQ',\n            number: 'LB',\n            label: 'LB'\n        }\n\n        if (['stone_-1', 'stone_1'].includes(tool)) {\n            if ('B' in node || 'W' in node || gametree.navigate(tree, index, 1)) {\n                // New variation needed\n\n                let updateRoot = tree.parent == null\n                let splitted = gametree.split(tree, index)\n\n                if (splitted != tree || splitted.subtrees.length != 0) {\n                    tree = gametree.new()\n                    tree.parent = splitted\n                    splitted.subtrees.push(tree)\n                }\n\n                node = {PL: currentPlayer > 0 ? ['B'] : ['W']}\n                index = tree.nodes.length\n                tree.nodes.push(node)\n\n                if (updateRoot) {\n                    let {gameTrees} = this.state\n                    gameTrees[gameIndex] = splitted\n                }\n            }\n\n            let sign = tool === 'stone_1' ? 1 : -1\n            let oldSign = board.get(vertex)\n            let properties = ['AW', 'AE', 'AB']\n            let point = sgf.vertex2point(vertex)\n\n            for (let prop of properties) {\n                if (!(prop in node)) continue\n\n                // Resolve compressed lists\n\n                if (node[prop].some(x => x.includes(':'))) {\n                    node[prop] = node[prop]\n                        .map(value => sgf.compressed2list(value).map(sgf.vertex2point))\n                        .reduce((list, x) => [...list, x])\n                }\n\n                // Remove residue\n\n                node[prop] = node[prop].filter(x => x !== point)\n                if (node[prop].length === 0) delete node[prop]\n            }\n\n            let prop = oldSign !== sign ? properties[sign + 1] : 'AE'\n\n            if (prop in node) node[prop].push(point)\n            else node[prop] = [point]\n        } else if (['line', 'arrow'].includes(tool)) {\n            let endVertex = argument\n\n            if (!endVertex || helper.vertexEquals(vertex, endVertex)) return\n\n            // Check whether to remove a line\n\n            let toDelete = board.lines.findIndex(x => helper.equals(x.slice(0, 2), [vertex, endVertex]))\n\n            if (toDelete === -1) {\n                toDelete = board.lines.findIndex(x => helper.equals(x.slice(0, 2), [endVertex, vertex]))\n\n                if (toDelete >= 0 && tool !== 'line' && board.lines[toDelete][2]) {\n                    // Do not delete after all\n                    toDelete = -1\n                }\n            }\n\n            // Mutate board first, then apply changes to actual game tree\n\n            if (toDelete >= 0) {\n                board.lines.splice(toDelete, 1)\n            } else {\n                board.lines.push([vertex, endVertex, tool === 'arrow'])\n            }\n\n            node.LN = []\n            node.AR = []\n\n            for (let [v1, v2, arrow] of board.lines) {\n                let [p1, p2] = [v1, v2].map(sgf.vertex2point)\n                if (p1 === p2) continue\n\n                node[arrow ? 'AR' : 'LN'].push([p1, p2].join(':'))\n            }\n\n            if (node.LN.length === 0) delete node.LN\n            if (node.AR.length === 0) delete node.AR\n        } else {\n            // Mutate board first, then apply changes to actual game tree\n\n            if (tool === 'number') {\n                if (vertex in board.markups && board.markups[vertex][0] === 'label') {\n                    delete board.markups[vertex]\n                } else {\n                    let number = !node.LB ? 1 : node.LB\n                        .map(x => parseFloat(x.substr(3)))\n                        .filter(x => !isNaN(x))\n                        .sort((a, b) => a - b)\n                        .filter((x, i, arr) => i === 0 || x !== arr[i - 1])\n                        .concat([null])\n                        .findIndex((x, i) => i + 1 !== x) + 1\n\n                    argument = number.toString()\n                    board.markups[vertex] = [tool, number.toString()]\n                }\n            } else if (tool === 'label') {\n                let label = argument\n\n                if (label != null && label.trim() === ''\n                || label == null && vertex in board.markups && board.markups[vertex][0] === 'label') {\n                    delete board.markups[vertex]\n                } else {\n                    if (label == null) {\n                        let alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n                        let letterIndex = Math.max(\n                            !node.LB ? 0 : node.LB\n                                .filter(x => x.length === 4)\n                                .map(x => alpha.indexOf(x[3]))\n                                .filter(x => x >= 0)\n                                .sort((a, b) => a - b)\n                                .filter((x, i, arr) => i === 0 || x !== arr[i - 1])\n                                .concat([null])\n                                .findIndex((x, i) => i !== x),\n                            !node.L ? 0 : node.L.length\n                        )\n\n                        label = alpha[Math.min(letterIndex, alpha.length - 1)]\n                        argument = label\n                    }\n\n                    board.markups[vertex] = [tool, label]\n                }\n            } else {\n                if (vertex in board.markups && board.markups[vertex][0] === tool) {\n                    delete board.markups[vertex]\n                } else {\n                    board.markups[vertex] = [tool, '']\n                }\n            }\n\n            delete node.L\n            for (let id in data) delete node[data[id]]\n\n            // Now apply changes to game tree\n\n            for (let x = 0; x < board.width; x++) {\n                for (let y = 0; y < board.height; y++) {\n                    let v = [x, y]\n                    if (!(v in board.markups)) continue\n\n                    let prop = data[board.markups[v][0]]\n                    let value = sgf.vertex2point(v)\n\n                    if (prop === 'LB')\n                        value += ':' + board.markups[v][1]\n\n                    if (prop in node) node[prop].push(value)\n                    else node[prop] = [value]\n                }\n            }\n        }\n\n        this.clearUndoPoint()\n        this.setCurrentTreePosition(tree, index)\n\n        this.events.emit('toolUse', {tool, vertex, argument})\n    }\n\n    // Undo Methods\n\n    setUndoPoint(undoText = 'Undo') {\n        let {treePosition: [tree, index]} = this.state\n        let rootTree = gametree.clone(gametree.getRoot(tree))\n        let level = gametree.getLevel(tree, index)\n\n        this.undoData = [rootTree, level]\n        this.setState({undoable: true, undoText})\n    }\n\n    clearUndoPoint() {\n        this.undoData = null\n        this.setState({undoable: false})\n    }\n\n    undo() {\n        if (!this.state.undoable || !this.undoData) return\n\n        this.setBusy(true)\n\n        setTimeout(() => {\n            let [undoRoot, undoLevel] = this.undoData\n            let {treePosition, gameTrees} = this.state\n\n            gameTrees[this.inferredState.gameIndex] = undoRoot\n            treePosition = gametree.navigate(undoRoot, 0, undoLevel)\n\n            this.setCurrentTreePosition(...treePosition)\n            this.clearUndoPoint()\n            this.setBusy(false)\n        }, setting.get('edit.undo_delay'))\n    }\n\n    // Navigation\n\n    setCurrentTreePosition(tree, index, {clearUndoPoint = true} = {}) {\n        if (['scoring', 'estimator'].includes(this.state.mode))\n            return\n\n        let t = tree\n        while (t.parent != null) {\n            t.parent.current = t.parent.subtrees.indexOf(t)\n            t = t.parent\n        }\n\n        if (clearUndoPoint && t !== gametree.getRoot(this.state.treePosition[0])) {\n            this.clearUndoPoint()\n        }\n\n        this.setState({\n            blockedGuesses: [],\n            highlightVertices: [],\n            treePosition: [tree, index]\n        })\n\n        this.events.emit('navigate')\n    }\n\n    goStep(step) {\n        let treePosition = gametree.navigate(...this.state.treePosition, step)\n        if (treePosition) this.setCurrentTreePosition(...treePosition)\n    }\n\n    goToMoveNumber(number) {\n        number = +number\n\n        if (isNaN(number)) return\n        if (number < 0) number = 0\n\n        let {treePosition} = this.state\n        let root = gametree.getRoot(...treePosition)\n\n        treePosition = gametree.navigate(root, 0, Math.round(number))\n\n        if (treePosition) this.setCurrentTreePosition(...treePosition)\n        else this.goToEnd()\n    }\n\n    goToNextFork() {\n        let [tree, index] = this.state.treePosition\n\n        if (index !== tree.nodes.length - 1) {\n            this.setCurrentTreePosition(tree, tree.nodes.length - 1)\n        } else if (tree.subtrees.length !== 0) {\n            let subtree = tree.subtrees[tree.current]\n            this.setCurrentTreePosition(subtree, subtree.nodes.length - 1)\n        }\n    }\n\n    goToPreviousFork() {\n        let [tree, index] = this.state.treePosition\n\n        if (tree.parent == null || tree.parent.nodes.length === 0) {\n            if (index != 0) this.setCurrentTreePosition(tree, 0)\n        } else {\n            this.setCurrentTreePosition(tree.parent, tree.parent.nodes.length - 1)\n        }\n    }\n\n    goToComment(step) {\n        let tp = this.state.treePosition\n\n        while (true) {\n            tp = gametree.navigate(...tp, step)\n            if (!tp) break\n\n            let node = tp[0].nodes[tp[1]]\n\n            if (setting.get('sgf.comment_properties').some(p => p in node))\n                break\n        }\n\n        if (tp) this.setCurrentTreePosition(...tp)\n    }\n\n    goToBeginning() {\n        this.setCurrentTreePosition(gametree.getRoot(...this.state.treePosition), 0)\n    }\n\n    goToEnd() {\n        let rootTree = gametree.getRoot(...this.state.treePosition)\n        let tp = gametree.navigate(rootTree, 0, gametree.getCurrentHeight(rootTree) - 1)\n        this.setCurrentTreePosition(...tp)\n    }\n\n    goToSiblingVariation(step) {\n        let [tree, index] = this.state.treePosition\n        if (!tree.parent) return\n\n        step = step < 0 ? -1 : 1\n\n        let mod = tree.parent.subtrees.length\n        let i = (tree.parent.current + mod + step) % mod\n\n        this.setCurrentTreePosition(tree.parent.subtrees[i], 0)\n    }\n\n    goToMainVariation() {\n        let tp = this.state.treePosition\n        let root = gametree.getRoot(...tp)\n\n        while (root.subtrees.length !== 0) {\n            root.current = 0\n            root = root.subtrees[0]\n        }\n\n        if (gametree.onMainTrack(...tp)) {\n            this.setCurrentTreePosition(...tp)\n        } else {\n            let [tree] = tp\n\n            while (!gametree.onMainTrack(tree)) {\n                tree = tree.parent\n            }\n\n            this.setCurrentTreePosition(tree, tree.nodes.length - 1)\n        }\n    }\n\n    goToSiblingGame(step) {\n        let {gameTrees, treePosition} = this.state\n        let [tree, ] = treePosition\n        let index = gameTrees.indexOf(gametree.getRoot(tree))\n        let newIndex = Math.max(0, Math.min(gameTrees.length - 1, index + step))\n\n        this.setCurrentTreePosition(gameTrees[newIndex], 0)\n    }\n\n    // Find Methods\n\n    findPosition(step, condition, callback = helper.noop) {\n        if (isNaN(step)) step = 1\n        else step = step >= 0 ? 1 : -1\n\n        this.setBusy(true)\n\n        setTimeout(() => {\n            let tp = this.state.treePosition\n            let iterator = gametree.makeHorizontalNavigator(...tp)\n\n            while (true) {\n                tp = step >= 0 ? iterator.next() : iterator.prev()\n\n                if (!tp) {\n                    let root = this.inferredState.rootTree\n\n                    if (step === 1) {\n                        tp = [root, 0]\n                    } else {\n                        let sections = gametree.getSection(root, gametree.getHeight(root) - 1)\n                        tp = sections[sections.length - 1]\n                    }\n\n                    iterator = gametree.makeHorizontalNavigator(...tp)\n                }\n\n                if (helper.vertexEquals(tp, this.state.treePosition) || condition(...tp))\n                    break\n            }\n\n            this.setCurrentTreePosition(...tp)\n            this.setBusy(false)\n            callback()\n        }, setting.get('find.delay'))\n    }\n\n    findHotspot(step, callback = helper.noop) {\n        this.findPosition(step, (tree, index) => 'HO' in tree.nodes[index], callback)\n    }\n\n    findMove(step, {vertex = null, text = ''}, callback = helper.noop) {\n        if (vertex == null && text.trim() === '') return\n        let point = vertex ? sgf.vertex2point(vertex) : null\n\n        this.findPosition(step, (tree, index) => {\n            let node = tree.nodes[index]\n            let cond = (prop, value) => prop in node\n                && node[prop][0].toLowerCase().includes(value.toLowerCase())\n\n            return (!point || ['B', 'W'].some(x => cond(x, point)))\n                && (!text || cond('C', text) || cond('N', text))\n        }, callback)\n    }\n\n    // Node Actions\n\n    getGameInfo(tree) {\n        let root = gametree.getRoot(tree)\n\n        let komi = gametree.getRootProperty(root, 'KM')\n        if (komi != null && !isNaN(komi)) komi = +komi\n        else komi = null\n\n        let size = gametree.getRootProperty(root, 'SZ')\n        if (size == null) {\n            size = [19, 19]\n        } else {\n            let s = size.toString().split(':')\n            size = [+s[0], +s[s.length - 1]]\n        }\n\n        let handicap = ~~gametree.getRootProperty(root, 'HA', 0)\n        handicap = Math.max(1, Math.min(9, handicap))\n        if (handicap === 1) handicap = 0\n\n        let playerNames = ['B', 'W'].map(x =>\n            gametree.getRootProperty(tree, `P${x}`) || gametree.getRootProperty(tree, `${x}T`)\n        )\n\n        let playerRanks = ['BR', 'WR'].map(x => gametree.getRootProperty(root, x))\n\n        return {\n            playerNames,\n            playerRanks,\n            blackName: playerNames[0],\n            blackRank: playerRanks[0],\n            whiteName: playerNames[1],\n            whiteRank: playerRanks[1],\n            gameName: gametree.getRootProperty(root, 'GN'),\n            eventName: gametree.getRootProperty(root, 'EV'),\n            date: gametree.getRootProperty(root, 'DT'),\n            result: gametree.getRootProperty(root, 'RE'),\n            komi,\n            handicap,\n            size\n        }\n    }\n\n    setGameInfo(tree, data) {\n        let root = gametree.getRoot(tree)\n        let node = root.nodes[0]\n\n        if ('size' in data) {\n            // Update board size\n\n            if (data.size) {\n                let value = data.size\n                value = value.map((x, i) => isNaN(x) || !x ? 19 : Math.min(25, Math.max(3, x)))\n\n                if (value[0] === value[1]) value = value[0]\n                else value = value.join(':')\n\n                setting.set('game.default_board_size', value)\n                node.SZ = [value]\n            } else {\n                delete node.SZ\n            }\n        }\n\n        let props = {\n            blackName: 'PB',\n            blackRank: 'BR',\n            whiteName: 'PW',\n            whiteRank: 'WR',\n            gameName: 'GN',\n            eventName: 'EV',\n            date: 'DT',\n            result: 'RE',\n            komi: 'KM',\n            handicap: 'HA'\n        }\n\n        for (let key in props) {\n            if (!(key in data)) continue\n\n            let value = data[key]\n\n            if (value && value.toString().trim() !== '') {\n                if (key === 'komi') {\n                    if (isNaN(value)) value = 0\n\n                    setting.set('game.default_komi', value)\n                } else if (key === 'handicap') {\n                    let board = gametree.getBoard(root, 0)\n                    let stones = board.getHandicapPlacement(+value)\n\n                    value = stones.length\n                    setting.set('game.default_handicap', value)\n\n                    if (value <= 1) {\n                        delete node[props[key]]\n                        delete node.AB\n                        continue\n                    }\n\n                    node.AB = stones.map(sgf.vertex2point)\n                }\n\n                node[props[key]] = [value]\n            } else {\n                delete node[props[key]]\n            }\n        }\n    }\n\n    getPlayer(tree, index) {\n        let node = tree.nodes[index]\n\n        return 'PL' in node ? (node.PL[0] == 'W' ? -1 : 1)\n            : 'B' in node || 'HA' in node && +node.HA[0] >= 1 ? -1\n            : 1\n    }\n\n    setPlayer(tree, index, sign) {\n        let node = tree.nodes[index]\n        let intendedSign = 'B' in node || 'HA' in node && +node.HA[0] >= 1 ? -1 : +('W' in node)\n\n        if (intendedSign === sign || sign === 0) {\n            delete node.PL\n        } else {\n            node.PL = [sign > 0 ? 'B' : 'W']\n        }\n\n        this.clearUndoPoint()\n    }\n\n    getComment(tree, index) {\n        let node = tree.nodes[index]\n\n        return {\n            title: 'N' in node ? node.N[0].trim() : null,\n            comment: 'C' in node ? node.C[0] : null,\n            hotspot: 'HO' in node,\n            moveAnnotation: 'BM' in node ? 'BM'\n                : 'TE' in node ? 'TE'\n                : 'DO' in node ? 'DO'\n                : 'IT' in node ? 'IT'\n                : null,\n            positionAnnotation: 'UC' in node ? 'UC'\n                : 'GW' in node ? 'GW'\n                : 'DM' in node ? 'DM'\n                : 'GB' in node ? 'GB'\n                : null\n        }\n    }\n\n    setComment(tree, index, data) {\n        let node = tree.nodes[index]\n\n        for (let [key, prop] of [['title', 'N'], ['comment', 'C']]) {\n            if (key in data) {\n                if (data[key] && data[key].trim() !== '') node[prop] = [data[key]]\n                else delete node[prop]\n            }\n        }\n\n        if ('hotspot' in data) {\n            if (data.hotspot) node.HO = [1]\n            else delete node.HO\n        }\n\n        let clearProperties = properties => properties.forEach(p => delete node[p])\n\n        if ('moveAnnotation' in data) {\n            let moveProps = {'BM': 1, 'DO': '', 'IT': '', 'TE': 1}\n\n            clearProperties(Object.keys(moveProps))\n\n            if (data.moveAnnotation != null)\n                node[data.moveAnnotation] = [moveProps[data.moveAnnotation]]\n        }\n\n        if ('positionAnnotation' in data) {\n            let positionProps = {'UC': 1, 'GW': 1, 'GB': 1, 'DM': 1}\n\n            clearProperties(Object.keys(positionProps))\n\n            if (data.positionAnnotation != null)\n                node[data.positionAnnotation] = [positionProps[data.positionAnnotation]]\n        }\n\n        this.clearUndoPoint()\n    }\n\n    copyVariation(tree, index) {\n        let clone = gametree.clone(tree)\n        if (index != 0) gametree.split(clone, index - 1)\n\n        this.copyVariationData = clone\n    }\n\n    cutVariation(tree, index, {setUndoPoint = true} = {}) {\n        if (setUndoPoint) this.setUndoPoint('Undo Cut Variation')\n\n        this.copyVariation(tree, index)\n        this.removeNode(tree, index, {\n            suppressConfirmation: true,\n            setUndoPoint: false\n        })\n    }\n\n    pasteVariation(tree, index, {setUndoPoint = true} = {}) {\n        if (this.copyVariationData == null) return\n\n        if (setUndoPoint) this.setUndoPoint('Undo Paste Variation')\n        this.closeDrawer()\n        this.setMode('play')\n\n        let updateRoot = !tree.parent\n        let oldLength = tree.nodes.length\n        let splitted = gametree.split(tree, index)\n        let copied = gametree.clone(this.copyVariationData)\n\n        copied.parent = splitted\n        splitted.subtrees.push(copied)\n\n        if (updateRoot) {\n            let {gameTrees} = this.state\n            gameTrees[this.inferredState.gameIndex] = splitted\n            this.setState({gameTrees})\n        }\n\n        if (splitted.subtrees.length === 1) {\n            gametree.reduce(splitted)\n            this.setCurrentTreePosition(splitted, oldLength)\n        } else {\n            this.setCurrentTreePosition(copied, 0)\n        }\n    }\n\n    flattenVariation(tree, index, {setUndoPoint = true} = {}) {\n        if (setUndoPoint) this.setUndoPoint('Undo Flatten')\n        this.closeDrawer()\n        this.setMode('play')\n\n        let {gameTrees} = this.state\n        let {rootTree, gameIndex} = this.inferredState\n        let board = gametree.getBoard(tree, index)\n        let rootNode = rootTree.nodes[0]\n        let inherit = ['BR', 'BT', 'DT', 'EV', 'GN', 'GC', 'PB', 'PW', 'RE', 'SO', 'WT', 'WR']\n\n        let clone = gametree.clone(tree)\n        if (index !== 0) gametree.split(clone, index - 1)\n        let node = clone.nodes[0]\n\n        node.AB = []\n        node.AW = []\n        delete node.AE\n        delete node.B\n        delete node.W\n\n        clone.parent = null\n        inherit.forEach(x => x in rootNode ? node[x] = rootNode[x] : null)\n\n        for (let x = 0; x < board.width; x++) {\n            for (let y = 0; y < board.height; y++) {\n                let sign = board.get([x, y])\n                if (sign == 0) continue\n\n                node[sign > 0 ? 'AB' : 'AW'].push(sgf.vertex2point([x, y]))\n            }\n        }\n\n        if (node.AB.length === 0) delete node.AB\n        if (node.AW.length === 0) delete node.AW\n\n        gameTrees[gameIndex] = clone\n        this.setState({gameTrees})\n        this.setCurrentTreePosition(clone, 0, {clearUndoPoint: false})\n    }\n\n    makeMainVariation(tree, index, {setUndoPoint = true} = {}) {\n        if (setUndoPoint) this.setUndoPoint('Restore Main Variation')\n        this.closeDrawer()\n        this.setMode('play')\n\n        let t = tree\n\n        while (t.parent != null) {\n            t.parent.subtrees.splice(t.parent.subtrees.indexOf(t), 1)\n            t.parent.subtrees.unshift(t)\n            t.parent.current = 0\n\n            t = t.parent\n        }\n\n        t = tree\n\n        while (t.subtrees.length !== 0) {\n            let [x] = t.subtrees.splice(t.current, 1)\n            t.subtrees.unshift(x)\n            t.current = 0\n\n            t = x\n        }\n\n        this.setCurrentTreePosition(tree, index)\n    }\n\n    shiftVariation(tree, index, step, {setUndoPoint = true} = {}) {\n        if (!tree.parent) return\n\n        if (setUndoPoint) this.setUndoPoint('Undo Shift Variation')\n        this.closeDrawer()\n        this.setMode('play')\n\n        let subtrees = tree.parent.subtrees\n        let m = subtrees.length\n        let i = subtrees.indexOf(tree)\n        let iNew = ((i + step) % m + m) % m\n\n        subtrees.splice(i, 1)\n        subtrees.splice(iNew, 0, tree)\n\n        this.setCurrentTreePosition(...this.state.treePosition)\n    }\n\n    removeNode(tree, index, {suppressConfirmation = false, setUndoPoint = true} = {}) {\n        if (!tree.parent && index === 0) {\n            dialog.showMessageBox('The root node cannot be removed.', 'warning')\n            return\n        }\n\n        if (suppressConfirmation !== true\n        && setting.get('edit.show_removenode_warning')\n        && dialog.showMessageBox(\n            'Do you really want to remove this node?',\n            'warning',\n            ['Remove Node', 'Cancel'], 1\n        ) === 1) return\n\n        if (setUndoPoint) this.setUndoPoint('Undo Remove Node')\n        this.closeDrawer()\n        this.setMode('play')\n\n        // Remove node\n\n        let prev = gametree.navigate(tree, index, -1)\n\n        if (index !== 0) {\n            tree.nodes.splice(index, tree.nodes.length)\n            tree.current = null\n            tree.subtrees.length = 0\n        } else {\n            let parent = tree.parent\n            let i = parent.subtrees.indexOf(tree)\n\n            parent.subtrees.splice(i, 1)\n            if (parent.current >= 1) parent.current--\n            gametree.reduce(parent)\n        }\n\n        if (!prev) prev = this.state.treePosition\n        this.setCurrentTreePosition(...prev)\n    }\n\n    removeOtherVariations(tree, index, {suppressConfirmation = false, setUndoPoint = true} = {}) {\n        if (suppressConfirmation !== true\n        && setting.get('edit.show_removeothervariations_warning')\n        && dialog.showMessageBox(\n            'Do you really want to remove all other variations?',\n            'warning',\n            ['Remove Variations', 'Cancel'], 1\n        ) == 1) return\n\n        // Save undo information\n\n        if (setUndoPoint) this.setUndoPoint('Undo Remove Other Variations')\n        this.closeDrawer()\n        this.setMode('play')\n\n        // Remove all subsequent variations\n\n        let t = tree\n\n        while (t.subtrees.length != 0) {\n            t.subtrees = [t.subtrees[t.current]]\n            t.current = 0\n\n            t = t.subtrees[0]\n        }\n\n        // Remove all precedent variations\n\n        t = tree\n\n        while (t.parent != null) {\n            t.parent.subtrees = [t]\n            t.parent.current = 0\n\n            t = t.parent\n        }\n\n        this.setCurrentTreePosition(tree, index)\n    }\n\n    // Menus\n\n    openNodeMenu(tree, index, options = {}) {\n        if (this.state.mode === 'scoring') return\n\n        let template = [\n            {\n                label: 'C&opy Variation',\n                click: () => this.copyVariation(tree, index)\n            },\n            {\n                label: 'C&ut Variation',\n                click: () => this.cutVariation(tree, index)\n            },\n            {\n                label: '&Paste Variation',\n                click: () => this.pasteVariation(tree, index)\n            },\n            {type: 'separator'},\n            {\n                label: 'Make &Main Variation',\n                click: () => this.makeMainVariation(tree, index)\n            },\n            {\n                label: \"Shift &Left\",\n                click: () => this.shiftVariation(tree, index, -1)\n            },\n            {\n                label: \"Shift Ri&ght\",\n                click: () => this.shiftVariation(tree, index, 1)\n            },\n            {type: 'separator'},\n            {\n                label: '&Flatten',\n                click: () => this.flattenVariation(tree, index)\n            },\n            {\n                label: '&Remove Node',\n                click: () => this.removeNode(tree, index)\n            },\n            {\n                label: 'Remove &Other Variations',\n                click: () => this.removeOtherVariations(tree, index)\n            }\n        ]\n\n        helper.popupMenu(template, options.x, options.y)\n    }\n\n    openCommentMenu(tree, index, options = {}) {\n        let node = tree.nodes[index]\n\n        let template = [\n            {\n                label: '&Clear Annotations',\n                click: () => {\n                    this.setComment(tree, index, {positionAnnotation: null, moveAnnotation: null})\n                }\n            },\n            {type: 'separator'},\n            {\n                label: 'Good for &Black',\n                type: 'checkbox',\n                data: {positionAnnotation: 'GB'}\n            },\n            {\n                label: '&Unclear Position',\n                type: 'checkbox',\n                data: {positionAnnotation: 'UC'}\n            },\n            {\n                label: '&Even Position',\n                type: 'checkbox',\n                data: {positionAnnotation: 'DM'}\n            },\n            {\n                label: 'Good for &White',\n                type: 'checkbox',\n                data: {positionAnnotation: 'GW'}\n            }\n        ]\n\n        if ('B' in node || 'W' in node) {\n            template.push(\n                {type: 'separator'},\n                {\n                    label: '&Good Move',\n                    type: 'checkbox',\n                    data: {moveAnnotation: 'TE'}\n                },\n                {\n                    label: '&Interesting Move',\n                    type: 'checkbox',\n                    data: {moveAnnotation: 'IT'}\n                },\n                {\n                    label: '&Doubtful Move',\n                    type: 'checkbox',\n                    data: {moveAnnotation: 'DO'}\n                },\n                {\n                    label: 'B&ad Move',\n                    type: 'checkbox',\n                    data: {moveAnnotation: 'BM'}\n                }\n            )\n        }\n\n        template.push(\n            {type: 'separator'},\n            {\n                label: '&Hotspot',\n                type: 'checkbox',\n                data: {hotspot: true}\n            }\n        )\n\n        for (let item of template) {\n            if (!('data' in item)) continue\n\n            let [key] = Object.keys(item.data)\n            let prop = key === 'hotspot' ? 'HO' : item.data[key]\n\n            item.checked = prop in node\n            if (item.checked) item.data[key] = null\n\n            item.click = () => this.setComment(tree, index, item.data)\n        }\n\n        helper.popupMenu(template, options.x, options.y)\n    }\n\n    // GTP Engines\n\n    attachEngines(...engines) {\n        let {engineCommands, attachedEngines} = this.state\n\n        if (helper.vertexEquals([...engines].reverse(), attachedEngines)) {\n            // Just swap engines\n\n            this.attachedEngineControllers.reverse()\n            this.engineBoards.reverse()\n\n            this.setState({\n                engineCommands: engineCommands.reverse(),\n                attachedEngines: engines\n            })\n\n            return\n        }\n\n        let command = name => new gtp.Command(null, name)\n\n        for (let i = 0; i < attachedEngines.length; i++) {\n            if (attachedEngines[i] != engines[i]) {\n                if (this.attachedEngineControllers[i]) this.attachedEngineControllers[i].stop()\n\n                try {\n                    let controller = engines[i] ? new gtp.Controller(engines[i]) : null\n                    this.attachedEngineControllers[i] = controller\n                    this.engineBoards[i] = null\n\n                    this.sendGTPCommand(controller, command('name'))\n                    this.sendGTPCommand(controller, command('version'))\n                    this.sendGTPCommand(controller, command('protocol_version'))\n                    this.sendGTPCommand(controller, command('list_commands'), ({response}) => {\n                        engineCommands[i] = response.content.split('\\n')\n                    })\n\n                    controller.on('stderr', ({content}) => {\n                        this.setState(({consoleLog}) => ({\n                            consoleLog: [...consoleLog, [\n                                i === 0 ? 1 : -1,\n                                controller.name,\n                                null,\n                                new gtp.Response(null, content, false, true)\n                            ]]\n                        }))\n                    })\n\n                    this.setState({engineCommands})\n                } catch (err) {\n                    this.attachedEngineControllers[i] = null\n                    engines[i] = null\n                }\n            }\n        }\n\n        this.setState({attachedEngines: engines})\n        this.syncEngines()\n    }\n\n    detachEngines() {\n    }\n\n    suspendEngines() {\n        for (let controller of this.attachedEngineControllers) {\n            if (controller != null) controller.stop()\n        }\n\n        this.engineBoards = [null, null]\n    }\n\n    sendGTPCommand(controller, command, callback = helper.noop) {\n    }\n\n    syncEngines({passPlayer = null} = {}) {\n    }\n\n    startGeneratingMoves({passPlayer = null, followUp = false} = {}) {\n    }\n\n    stopGeneratingMoves() {\n    }\n\n    // Render\n\n    render(_, state) {\n        // Calculate some inferred values\n\n        let rootTree = gametree.getRoot(...state.treePosition)\n        let scoreBoard, areaMap\n\n        if (['scoring', 'estimator'].includes(state.mode)) {\n            // Calculate area map\n\n            scoreBoard = gametree.getBoard(...state.treePosition).clone()\n\n            for (let vertex of state.deadStones) {\n                let sign = scoreBoard.get(vertex)\n                if (sign === 0) continue\n\n                scoreBoard.captures[sign > 0 ? 1 : 0]++\n                scoreBoard.set(vertex, 0)\n            }\n\n            areaMap = state.mode === 'estimator' ? scoreBoard.getAreaEstimateMap()\n                : scoreBoard.getAreaMap()\n        }\n\n        this.inferredState = {\n            showSidebar: state.showGameGraph || state.showCommentBox,\n            showLeftSidebar: state.showConsole,\n            rootTree,\n            gameIndex: state.gameTrees.indexOf(rootTree),\n            gameInfo: this.getGameInfo(rootTree),\n            currentPlayer: this.getPlayer(...state.treePosition),\n            scoreBoard,\n            areaMap\n        }\n\n        state = Object.assign(state, this.inferredState)\n\n        return h('section',\n            {\n                class: classNames({\n                    leftsidebar: state.showLeftSidebar,\n                    sidebar: state.showSidebar,\n                    [state.mode]: true\n                })\n            },\n\n            h(ThemeManager),\n            h(MainView, state),\n            h(LeftSidebar, state),\n            h(Sidebar, state),\n            h(DrawerManager, state),\n\n            h(InputBox, {\n                text: state.inputBoxText,\n                show: state.showInputBox,\n                onSubmit: state.onInputBoxSubmit,\n                onCancel: state.onInputBoxCancel\n            }),\n\n            h(BusyScreen, {show: state.busy}),\n            h(InfoOverlay, {text: state.infoOverlayText, show: state.showInfoOverlay})\n        )\n    }\n}\n\n// Render\n\nrender(h(App), document.body)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/App.js","/**\n * This is a modified version of marked v0.3.7 for Sabaki\n */\n\n/**\n * marked - a markdown parser\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n;(function() {\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: noop,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n  nptable: noop,\n  lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n  blockquote: /^( *>[^\\n]+(\\n(?!def)[^\\n]+)*\\n*)+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: /^ *(?:comment *(?:\\n|\\s*$)|closed *(?:\\n{2,}|\\s*$)|closing *(?:\\n{2,}|\\s*$))/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n  table: noop,\n  paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n  text: /^[^\\n]+/\n};\n\nblock.bullet = /(?:[*+-]|\\d+\\.)/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, 'gm')\n  (/bull/g, block.bullet)\n  ();\n\nblock.list = replace(block.list)\n  (/bull/g, block.bullet)\n  ('hr', '\\\\n+(?=\\\\1?(?:[-*_] *){3,}(?:\\\\n+|$))')\n  ('def', '\\\\n+(?=' + block.def.source + ')')\n  ();\n\nblock.blockquote = replace(block.blockquote)\n  ('def', block.def)\n  ();\n\nblock._tag = '(?!(?:'\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\n  + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|[^\\\\w\\\\s@]*@)\\\\b';\n\nblock.html = replace(block.html)\n  ('comment', /<!--[\\s\\S]*?-->/)\n  ('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)\n  ('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)\n  (/tag/g, block._tag)\n  ();\n\nblock.paragraph = replace(block.paragraph)\n  ('hr', block.hr)\n  ('heading', block.heading)\n  ('lheading', block.lheading)\n  ('blockquote', block.blockquote)\n  ('tag', '<' + block._tag)\n  ('def', block.def)\n  ();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,})[ \\.]*(\\S+)? *\\n([\\s\\S]*?)\\s*\\1 *(?:\\n+|$)/,\n  paragraph: /^/,\n  heading: /^ *(#{1,6}) +([^\\n]+?) *#* *(?:\\n+|$)/\n});\n\nblock.gfm.paragraph = replace(block.paragraph)\n  ('(?!', '(?!'\n    + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n    + block.list.source.replace('\\\\1', '\\\\3') + '|')\n  ();\n\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = merge({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top, bq) {\n  var src = src.replace(/^ +$/gm, '')\n    , next\n    , loose\n    , cap\n    , bull\n    , b\n    , item\n    , space\n    , i\n    , l;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, '');\n      this.tokens.push({\n        type: 'code',\n        text: !this.options.pedantic\n          ? cap.replace(/\\n+$/, '')\n          : cap\n      });\n      continue;\n    }\n\n    // fences (gfm)\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2],\n        text: cap[3] || ''\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i].split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2] === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top, true);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n\n      this.tokens.push({\n        type: 'list_start',\n        ordered: bull.length > 1\n      });\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        this.tokens.push({\n          type: loose\n            ? 'loose_item_start'\n            : 'list_item_start'\n        });\n\n        // Recurse.\n        this.token(item, false, bq);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if ((!bq && top) && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    }\n\n    // table (gfm)\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i]\n          .replace(/^ *\\| *| *\\| *$/g, '')\n          .split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: noop,\n  autolink: noop,\n  url: noop,\n  tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  em: /^\\b_((?:[^_]|__)+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n};\n\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n\ninline.link = replace(inline.link)\n  ('inside', inline._inside)\n  ('href', inline._href)\n  ();\n\ninline.reflink = replace(inline.reflink)\n  ('inside', inline._inside)\n  ();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal);\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: replace(inline.br)('{2,}', '*')(),\n  text: replace(inline.gfm.text)('{2,}', '*')()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer;\n  this.renderer.options = this.options;\n\n  if (!this.links) {\n    throw new\n      Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = ''\n    , link\n    , text\n    , href\n    , cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += cap[1];\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = cap[1].charAt(6) === ':'\n          ? this.mangle(cap[1].substring(7))\n          : this.mangle(cap[1]);\n        href = this.mangle('mailto:') + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (!this.inLink && (cap = this.rules.url.exec(src))) {\n      src = src.substring(cap[0].length);\n      text = escape(cap[1]);\n      href = text;\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      if (!this.inLink && /^<a /i.test(cap[0])) {\n        this.inLink = true;\n      } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.inLink = false;\n      }\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? this.options.sanitizer\n          ? this.options.sanitizer(cap[0])\n          : escape(cap[0])\n        : cap[0]\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.inLink = true;\n      out += this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      });\n      this.inLink = false;\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      this.inLink = true;\n      out += this.outputLink(cap, link);\n      this.inLink = false;\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2], true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      var helper = typeof require != 'undefined' ? require('./helper') : window.helper;\n      src = src.substring(cap[0].length);\n      out += this.renderer.text(helper.htmlify(escape(this.smartypants(cap[0]))));\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = escape(link.href)\n    , title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  if (!this.options.mangle) return text;\n  var out = ''\n    , l = text.length\n    , i = 0\n    , ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer(options) {\n  this.options = options || {};\n}\n\nRenderer.prototype.code = function(code, lang, escaped) {\n  if (this.options.highlight) {\n    var out = this.options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '\\n</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + this.options.langPrefix\n    + escape(lang, true)\n    + '\">'\n    + (escaped ? code : escape(code, true))\n    + '\\n</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw) {\n  return '<h'\n    + level\n    + ' id=\"'\n    + this.options.headerPrefix\n    + raw.toLowerCase().replace(/[^\\w]+/g, '-')\n    + '\">'\n    + text\n    + '</h'\n    + level\n    + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered) {\n  var type = ordered ? 'ol' : 'ul';\n  return '<' + type + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + '<tbody>\\n'\n    + body\n    + '</tbody>\\n'\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' style=\"text-align:' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return this.options.xhtml ? '<br/>' : '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  if (this.options.sanitize) {\n    try {\n      var prot = decodeURIComponent(unescape(href))\n        .replace(/[^\\w:]/g, '')\n        .toLowerCase();\n    } catch (e) {\n      return '';\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return '';\n    }\n  }\n  var out = '<a href=\"' + href + '\" class=\"external\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  return this.link(href, title, text);\n};\n\nRenderer.prototype.text = function(text) {\n  return text;\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer;\n  this.renderer = this.options.renderer;\n  this.renderer.options = this.options;\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options, renderer) {\n  var parser = new Parser(options, renderer);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token\n */\n\nParser.prototype.next = function() {\n  return this.token = this.tokens.pop();\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        this.token.text);\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped);\n    }\n    case 'table': {\n      var header = ''\n        , body = ''\n        , i\n        , row\n        , cell\n        , flags\n        , j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        flags = { header: true, align: this.token.align[i] };\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      var body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      var body = ''\n        , ordered = this.token.ordered;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered);\n    }\n    case 'list_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'loose_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'html': {\n      var html = !this.token.pre && !this.options.pedantic\n        ? this.inline.output(this.token.text)\n        : this.token.text;\n      return this.renderer.html(html);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n  }\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities \n  return html.replace(/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/g, function(_, n) {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nfunction replace(regex, opt) {\n  regex = regex.source;\n  opt = opt || '';\n  return function self(name, val) {\n    if (!name) return new RegExp(regex, opt);\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, '$1');\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1\n    , target\n    , key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n\n    var highlight = opt.highlight\n      , tokens\n      , pending\n      , i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt)\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      var out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occured:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.defaults = {\n  gfm: true,\n  tables: false,\n  breaks: true,\n  pedantic: false,\n  sanitize: true,\n  sanitizer: null,\n  mangle: true,\n  smartLists: true,\n  silent: false,\n  highlight: null,\n  langPrefix: 'lang-',\n  smartypants: true,\n  headerPrefix: 'commentsheader-',\n  renderer: new Renderer,\n  xhtml: true\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.parse = marked;\n\nif (typeof module !== 'undefined' && typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  this.marked = marked;\n}\n\n}).call(function() {\n  return this || (typeof window !== 'undefined' ? window : global);\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/marked.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","'use strict';\nmodule.exports = input => {\n\tconst el = document.createElement('textarea');\n\n\tel.value = input;\n\n\t// Prevent keyboard from showing on mobile\n\tel.setAttribute('readonly', '');\n\n\tel.style.contain = 'strict';\n\tel.style.position = 'absolute';\n\tel.style.left = '-9999px';\n\tel.style.fontSize = '12pt'; // Prevent zooming on iOS\n\n\tconst selection = document.getSelection();\n\tlet originalRange = false;\n\tif (selection.rangeCount > 0) {\n\t\toriginalRange = selection.getRangeAt(0);\n\t}\n\n\tdocument.body.appendChild(el);\n\tel.select();\n\n\t// Explicit selection workaround for iOS\n\tel.selectionStart = 0;\n\tel.selectionEnd = input.length;\n\n\tlet success = false;\n\ttry {\n\t\tsuccess = document.execCommand('copy');\n\t} catch (err) {}\n\n\tdocument.body.removeChild(el);\n\n\tif (originalRange) {\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(originalRange);\n\t}\n\n\treturn success;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/copy-text-to-clipboard/index.js","const EventEmitter = require('events')\nconst fs = require('fs')\nconst path = require('path')\nconst {app} = require('electron')\n\nlet settings = {}\n\nlet themesDict = null\n\nlet defaults = {\n    'app.startup_check_updates': true,\n    'app.startup_check_updates_delay': 3000,\n    'app.loadgame_delay': 100,\n    'app.hide_busy_delay': 200,\n    'app.zoom_factor': 1,\n    'autoplay.sec_per_move': 1,\n    'autoplay.max_sec_per_move': 99,\n    'autoscroll.max_interval': 200,\n    'autoscroll.min_interval': 50,\n    'autoscroll.diff': 10,\n    'cleanmarkup.cross': true,\n    'cleanmarkup.triangle': true,\n    'cleanmarkup.square': true,\n    'cleanmarkup.circle': true,\n    'cleanmarkup.line': true,\n    'cleanmarkup.arrow': true,\n    'cleanmarkup.label': true,\n    'cleanmarkup.comments': false,\n    'cleanmarkup.annotations': false,\n    'cleanmarkup.hotspots': false,\n    'comments.show_move_interpretation': true,\n    'console.blocked_commands': [\n        'boardsize', 'clear_board', 'play',\n        'genmove', 'undo', 'fixed_handicap',\n        'place_free_handicap', 'set_free_handicap',\n        'loadsgf', 'komi'\n    ],\n    'console.max_history_count': 100,\n    'debug.dev_tools': false,\n    'edit.click_currentvertex_to_remove': true,\n    'edit.show_removenode_warning': true,\n    'edit.show_removeothervariations_warning': true,\n    'edit.undo_delay': 100,\n    'engines.list': [],\n    'file.show_reload_warning': true,\n    'find.delay': 100,\n    'game.default_board_size': 19,\n    'game.default_komi': 6.5,\n    'game.default_handicap': 0,\n    'game.goto_end_after_loading': false,\n    'game.navigation_sensitivity': 40,\n    'game.show_ko_warning': true,\n    'game.show_suicide_warning': true,\n    'gamechooser.show_delay': 100,\n    'gamechooser.thumbnail_size': 153,\n    'graph.delay': 200,\n    'graph.edge_color': '#eee',\n    'graph.edge_inactive_color': '#777',\n    'graph.edge_size': 2,\n    'graph.edge_inactive_size': 1,\n    'graph.grid_size': 26,\n    'graph.node_active_color': '#f76047',\n    'graph.node_bookmark_color': '#c678dd',\n    'graph.node_color': '#eee',\n    'graph.node_inactive_color': '#777',\n    'graph.node_comment_color': '#6bb1ff',\n    'graph.node_inactive_bookmark_color': '#643d6f',\n    'graph.node_inactive_comment_color': '#365980',\n    'graph.node_size': 6,\n    'gtp.attach_delay': 300,\n    'gtp.move_delay': 300,\n    'score.estimator_iterations': 30,\n    'setting.overwrite.v0.16.0': ['console.blocked_commands', 'window.minheight'],\n    'setting.overwrite.v0.17.1': ['graph.collapse_tokens_count'],\n    'setting.overwrite.v0.19.0_1': ['window.minheight', 'graph.delay'],\n    'setting.overwrite.v0.19.1': ['app.startup_check_updates_delay'],\n    'setting.overwrite.v0.19.3': ['graph.grid_size', 'graph.node_size'],\n    'setting.overwrite.v0.30.0-beta': ['graph.delay', 'console.max_history_count', 'window.minheight', 'window.minwidth'],\n    'scoring.method': 'territory',\n    'sgf.comment_properties': ['C', 'N', 'UC', 'GW', 'DM', 'GB', 'BM', 'TE', 'DO', 'IT'],\n    'sound.capture_delay_max': 500,\n    'sound.capture_delay_min': 300,\n    'sound.enable': true,\n    'theme.custom_whitestones': null,\n    'theme.custom_blackstones': null,\n    'theme.custom_background': null,\n    'theme.current': null,\n    'view.properties_height': 50,\n    'view.properties_minheight': 20,\n    'view.animated_stone_placement': true,\n    'view.fuzzy_stone_placement': true,\n    'view.show_menubar': true,\n    'view.show_leftsidebar': false,\n    'view.show_comments': true,\n    'view.show_coordinates': false,\n    'view.show_graph': true,\n    'view.show_move_colorization': true,\n    'view.show_next_moves': true,\n    'view.show_siblings': true,\n    'view.leftsidebar_width': 250,\n    'view.leftsidebar_minwidth': 100,\n    'view.sidebar_width': 280,\n    'view.sidebar_minwidth': 100,\n    'infooverlay.duration': 2000,\n    'window.height': 604,\n    'window.minheight': 440,\n    'window.minwidth': 526,\n    'window.width': 564\n}\n\nexports.events = new EventEmitter()\nexports.events.setMaxListeners(100)\n\nexports.load = function() {\n    if (localStorage.settings != null) {\n        settings = JSON.parse(localStorage.settings)\n    } else {\n        settings = {}\n    }\n\n    // Load default settings\n\n    for (let key in defaults) {\n        if (key in settings) continue\n        settings[key] = defaults[key]\n    }\n\n    // Overwrite settings\n\n    for (let overwriteKey in settings) {\n        if (overwriteKey.indexOf('setting.overwrite.') != 0) continue\n\n        let overwrites = settings[overwriteKey]\n        if (!overwrites.length) continue\n\n        for (let i = 0; i < overwrites.length; i++) {\n            settings[overwrites[i]] = defaults[overwrites[i]]\n        }\n\n        settings[overwriteKey] = []\n    }\n\n    return exports.save()\n}\n\nexports.loadThemes = function() {\n    return {}\n}\n\nexports.save = function() {\n    localStorage.settings = JSON.stringify(settings)\n    return exports\n}\n\nexports.get = function(key) {\n    if (key in settings) return settings[key]\n    if (key in defaults) return defaults[key]\n    return null\n}\n\nexports.set = function(key, value) {\n    settings[key] = value\n    exports.save()\n    exports.events.emit('change', {key})\n    return exports\n}\n\nexports.getThemes = function() {\n    if (themesDict == null) exports.loadThemes()\n    return themesDict\n}\n\nexports.load()\n\n\n\n// WEBPACK FOOTER //\n// ./src/setting.js","const {h, render} = require('preact')\nconst classNames = require('classnames')\n\nfunction hide() {\n    document.getElementById('popupmenu-overlay').remove()\n}\n\nfunction show(velement, x, y) {\n    let element = render(velement, document.body).childNodes[0]\n\n    let {width, height} = element.getBoundingClientRect()\n    let {width: bodyWidth, height: bodyHeight} = document.body.getBoundingClientRect()\n\n    element.style.left = (x + width <= bodyWidth ? x : Math.max(0, x - width)) + 'px'\n    element.style.top = (y + height <= bodyHeight ? y : Math.max(0, y - height)) + 'px'\n}\n\nexports.buildFromTemplate = function(template) {\n    return {\n        popup: (_, {x, y}) => show(h('section',\n            {\n                id: 'popupmenu-overlay',\n                onClick: () => hide()\n            },\n\n            h('ul', {class: 'popupmenu'}, template.map(item =>\n                h('li', {\n                    class: classNames({\n                        checked: item.checked,\n                        [item.type]: item.type\n                    }),\n                    onClick: () => item.click && item.click()\n                }, item.label && item.label.replace(/&/g, ''))\n            ))\n        ), x, y)\n    }\n}\n\nrender(h('style', {}, `\n    #popupmenu-overlay {\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 1000;\n    }\n\n    .popupmenu {\n            position: absolute;\n            padding: 3px 0;\n            max-height: calc(100% - 6px);\n            max-width: 100%;\n            overflow: auto;\n            background: rgba(0, 0, 0, .9);\n            box-shadow: 0 5px 10px rgba(0, 0, 0, .5);\n            color: white;\n            list-style: none;\n        }\n        .popupmenu li:not(.separator) {\n            position: relative;\n            display: block;\n            height: 1em;\n            padding: 7px 30px;\n            line-height: 1em;\n        }\n        .popupmenu li.checked::before {\n            content: '';\n            position: absolute;\n            width: 1em;\n            height: 1em;\n            left: 9px;\n            top: 7px;\n            background: url('./node_modules/octicons/build/svg/check.svg') left top/contain no-repeat;\n            filter: invert(100%);\n            -webkit-filter: invert(100%);\n        }\n        .popupmenu li.separator {\n            height: 2px;\n            margin: 3px 0;\n            background: rgba(255, 255, 255, .3);\n        }\n        .popupmenu li:not(.separator):hover {\n            background-color: #0050C0;\n        }\n        .popupmenu li:not(.separator):active {\n            background-color: #0030A0;\n    }\n`), document.body)\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/shims/Menu.js","const {h, Component} = require('preact')\n\nconst Goban = require('./Goban')\nconst PlayBar = require('./bars/PlayBar')\nconst EditBar = require('./bars/EditBar')\nconst GuessBar = require('./bars/GuessBar')\nconst AutoplayBar = require('./bars/AutoplayBar')\nconst ScoringBar = require('./bars/ScoringBar')\nconst FindBar = require('./bars/FindBar')\n\nconst gametree = require('../modules/gametree')\n\nclass MainView extends Component {\n    constructor() {\n        super()\n\n        this.handleTogglePlayer = () => sabaki.setPlayer(...this.props.treePosition, -this.props.currentPlayer)\n\n        this.handleToolButtonClick = evt => {\n            sabaki.setState({selectedTool: evt.tool})\n        }\n\n        this.handleFindButtonClick = evt => sabaki.findMove(evt.step, {\n            vertex: this.props.findVertex,\n            text: this.props.findText\n        })\n\n        this.handleGobanResize = this.handleGobanResize.bind(this)\n        this.handleGobanVertexClick = this.handleGobanVertexClick.bind(this)\n        this.handleGobanLineDraw = this.handleGobanLineDraw.bind(this)\n    }\n\n    componentDidMount() {\n        // Pressing shift should show crosshair cursor on Goban in edit mode\n\n        document.addEventListener('keydown', evt => {\n            if (evt.keyCode !== 17) return\n\n            if (this.props.mode === 'edit') {\n                this.setState({gobanCrosshair: true})\n            }\n        })\n\n        document.addEventListener('keyup', evt => {\n            if (evt.keyCode !== 17) return\n\n            if (this.props.mode === 'edit') {\n                this.setState({gobanCrosshair: false})\n            }\n        })\n    }\n\n    handleGobanResize() {\n        /*  Because of board rendering issues, we want the width\n            and the height of `<main>` to be even */\n\n        if (this.mainElement == null) return\n\n        this.mainElement.style.width = ''\n        this.mainElement.style.height = ''\n\n        let {width, height} = window.getComputedStyle(this.mainElement)\n\n        width = parseFloat(width)\n        height = parseFloat(height)\n\n        if (width % 2 !== 0) width++\n        if (height % 2 !== 0) height++\n\n        this.setState({width, height})\n    }\n\n    handleGobanVertexClick(evt) {\n        sabaki.clickVertex(evt.vertex, evt)\n    }\n\n    handleGobanLineDraw(evt) {\n        let [v1, v2] = evt.line\n        sabaki.useTool(this.props.selectedTool, v1, v2)\n        sabaki.editVertexData = null\n    }\n\n    render({\n        mode,\n        treePosition,\n        rootTree,\n        currentPlayer,\n        gameInfo,\n        attachedEngines,\n\n        deadStones,\n        scoringMethod,\n        scoreBoard,\n        areaMap,\n        blockedGuesses,\n\n        highlightVertices,\n        showCoordinates,\n        showMoveColorization,\n        showNextMoves,\n        showSiblings,\n        fuzzyStonePlacement,\n        animatedStonePlacement,\n        animatedVertex,\n\n        undoable,\n        undoText,\n        selectedTool,\n        findText,\n        findVertex,\n\n        showLeftSidebar,\n        showSidebar,\n        sidebarWidth,\n        leftSidebarWidth\n    }, {\n        width,\n        height,\n        gobanCrosshair\n    }) {\n        let [tree, index] = treePosition\n        let board = gametree.getBoard(tree, index)\n        let node = tree.nodes[index]\n        let komi = +gametree.getRootProperty(rootTree, 'KM', 0)\n        let paintMap\n\n        if (['scoring', 'estimator'].includes(mode)) {\n            paintMap = areaMap\n        } else if (mode === 'guess') {\n            paintMap = [...Array(board.height)].map(_ => Array(board.width).fill(0))\n\n            for (let [x, y] of blockedGuesses) {\n                paintMap[y][x] = 1\n            }\n        }\n\n        return h('section',\n            {\n                id: 'main',\n                style: {\n                    left: showLeftSidebar ? leftSidebarWidth : null,\n                    right: showSidebar ? sidebarWidth : null\n                }\n            },\n\n            h('main',\n                {\n                    ref: el => this.mainElement = el,\n                    style: {width, height}\n                },\n\n                h(Goban, {\n                    board,\n                    highlightVertices: findVertex && mode === 'find' ? [findVertex]\n                        : highlightVertices,\n                    paintMap,\n                    dimmedStones: ['scoring', 'estimator'].includes(mode) ? deadStones : [],\n\n                    crosshair: gobanCrosshair,\n                    showCoordinates,\n                    showMoveColorization,\n                    showNextMoves: mode !== 'guess' && showNextMoves,\n                    showSiblings: mode !== 'guess' && showSiblings,\n                    fuzzyStonePlacement,\n                    animatedStonePlacement,\n                    animatedVertex,\n\n                    drawLineMode: mode === 'edit' && ['arrow', 'line'].includes(selectedTool)\n                        ? selectedTool : null,\n\n                    onBeforeResize: this.handleGobanResize,\n                    onVertexClick: this.handleGobanVertexClick,\n                    onLineDraw: this.handleGobanLineDraw\n                })\n            ),\n\n            h('section', {id: 'bar'},\n                h(PlayBar, {\n                    mode,\n                    attachedEngines,\n                    playerNames: gameInfo.playerNames,\n                    playerRanks: gameInfo.playerRanks,\n                    playerCaptures: board.captures,\n                    currentPlayer,\n                    showHotspot: 'HO' in node,\n                    undoable,\n                    undoText,\n                    onCurrentPlayerClick: this.handleTogglePlayer\n                }),\n\n                h(EditBar, {\n                    mode,\n                    selectedTool,\n                    onToolButtonClick: this.handleToolButtonClick\n                }),\n\n                h(GuessBar, {\n                    mode,\n                    treePosition\n                }),\n\n                h(AutoplayBar, {\n                    mode,\n                    treePosition\n                }),\n\n                h(ScoringBar, {\n                    type: 'scoring',\n                    mode,\n                    method: scoringMethod,\n                    scoreBoard,\n                    areaMap,\n                    komi\n                }, 'Please select dead stones.'),\n\n                h(ScoringBar, {\n                    type: 'estimator',\n                    mode,\n                    method: scoringMethod,\n                    scoreBoard,\n                    areaMap,\n                    komi\n                }, 'Toggle group status.'),\n\n                h(FindBar, {\n                    mode,\n                    findText,\n                    onButtonClick: this.handleFindButtonClick,\n                })\n            )\n        )\n    }\n}\n\nmodule.exports = MainView\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/MainView.js","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst helper = require('../modules/helper')\n\nconst alpha = 'ABCDEFGHJKLMNOPQRSTUVWXYZ'\nconst range = n => [...Array(n)].map((_, i) => i)\nconst random = n => Math.floor(Math.random() * n)\n\nclass GobanVertex extends Component {\n    shouldComponentUpdate({\n        sign,\n        hoshi,\n        shift,\n        highlight,\n        paint,\n        dimmed,\n        animate,\n        label,\n        markupType,\n        ghostTypes\n    }) {\n        return sign !== this.props.sign\n            || highlight !== this.props.highlight\n            || ghostTypes !== this.props.ghostTypes\n            || markupType !== this.props.markupType\n            || label !== this.props.label\n            || shift !== this.props.shift\n            || animate !== this.props.animate\n            || paint !== this.props.paint\n            || dimmed !== this.props.dimmed\n            || hoshi !== this.props.hoshi\n    }\n\n    render({\n        position: [x, y],\n        shift,\n        random,\n        sign,\n        highlight,\n        paint,\n        dimmed,\n        hoshi,\n        animate,\n        markupType,\n        label,\n        ghostTypes,\n\n        onMouseDown = helper.noop,\n        onMouseUp = helper.noop,\n        onMouseMove = helper.noop\n    }) {\n        let classes = {\n            [`pos_${x}-${y}`]: true,\n            [`shift_${shift}`]: true,\n            [`random_${random}`]: true,\n            [`sign_${sign}`]: true,\n            [`paint_${paint}`]: !!paint,\n            [markupType]: !!markupType,\n            dimmed,\n            hoshi,\n            animate,\n            smalllabel: label.length >= 3\n        }\n\n        for (let type of ghostTypes) {\n            classes[type] = true\n        }\n\n        return h('li',\n            {\n                'data-vertex': `${x}-${y}`,\n                class: classNames(classes),\n                onMouseDown,\n                onMouseUp,\n                onMouseMove\n            },\n\n            h('div', {class: 'stone'},\n                h('img', {src: './img/goban/blank.svg'}),\n                h('span', {title: label})\n            ),\n\n            h('div', {class: 'paint'}),\n\n            highlight && h('div', {class: 'highlight'})\n        )\n    }\n}\n\nclass GobanLine extends Component {\n    shouldComponentUpdate(nextProps) {\n        for (let i in nextProps)\n            if (nextProps[i] !== this.props[i]) return true\n\n        return false\n    }\n\n    render({v1, v2, type, temporary, showCoordinates, fieldSize}) {\n        if (helper.vertexEquals(v1, v2)) return\n\n        let [pos1, pos2] = [v1, v2].map(v => v.map(x => (showCoordinates ? x + 1 : x) * fieldSize))\n        let [dx, dy] = pos1.map((x, i) => pos2[i] - x)\n        let [left, top] = pos1.map((x, i) => (x + pos2[i] + fieldSize) / 2)\n\n        let angle = Math.atan2(dy, dx) * 180 / Math.PI\n        let length = Math.sqrt(dx * dx + dy * dy)\n\n        return h('hr',\n            {\n                class: classNames({[type]: true, temporary}),\n                style: {\n                    width: length,\n                    transform: `\n                        translate(${left - length / 2}px, ${top}px)\n                        rotate(${angle}deg)\n                    `\n                }\n            }\n        )\n    }\n}\n\nclass CoordX extends Component {\n    shouldComponentUpdate({rangeX}) {\n        return rangeX.length !== this.props.rangeX.length\n    }\n\n    render({rangeX}) {\n        return h('ol', {class: 'coordx'},\n            rangeX.map(i => h('li', {}, alpha[i]))\n        )\n    }\n}\n\nclass CoordY extends Component {\n    shouldComponentUpdate({rangeY}) {\n        return rangeY.length !== this.props.rangeY.length\n    }\n\n    render({rangeY}) {\n        return h('ol', {class: 'coordy'},\n            rangeY.map(i => h('li', {}, rangeY.length - i))\n        )\n    }\n}\n\nclass Goban extends Component {\n    constructor(props) {\n        super()\n\n        this.componentWillReceiveProps(props)\n\n        this.handleVertexMouseUp = this.handleVertexMouseUp.bind(this)\n        this.handleVertexMouseDown = this.handleVertexMouseDown.bind(this)\n        this.handleVertexMouseMove = this.handleVertexMouseMove.bind(this)\n    }\n\n    componentDidMount() {\n        document.addEventListener('mouseup', () => {\n            this.mouseDown = false\n\n            if (this.state.temporaryLine)\n                this.setState({temporaryLine: null})\n        })\n\n        // Measure CSS\n\n        let {borderLeftWidth, borderTopWidth, borderRightWidth, borderBottomWidth,\n            paddingLeft, paddingTop, paddingRight, paddingBottom} = window.getComputedStyle(this.element)\n\n        this.setState({\n            borderLeftWidth: parseFloat(borderLeftWidth),\n            borderTopWidth: parseFloat(borderTopWidth),\n            borderRightWidth: parseFloat(borderRightWidth),\n            borderBottomWidth: parseFloat(borderBottomWidth),\n            paddingLeft: parseFloat(paddingLeft),\n            paddingTop: parseFloat(paddingTop),\n            paddingRight: parseFloat(paddingRight),\n            paddingBottom: parseFloat(paddingBottom)\n        })\n\n        // Resize board when window is resizing\n\n        window.addEventListener('resize', () => {\n            this.resize()\n        })\n\n        this.resize()\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        for (let key in nextProps) {\n            if (['board', 'highlightVertices', 'dimmedStones', 'paintMap'].includes(key)) continue\n\n            if (nextProps[key] !== this.props[key])\n                return true\n        }\n\n        for (let key in nextState) {\n            if (nextState[key] !== this.state[key])\n                return true\n        }\n\n        return nextProps.board.getHash() !== this.props.board.getHash()\n            || !helper.equals(nextProps.highlightVertices, this.props.highlightVertices)\n            || !helper.equals(nextProps.dimmedStones, this.props.dimmedStones)\n            || !helper.equals(nextProps.paintMap, this.props.paintMap)\n    }\n\n    componentWillReceiveProps({board, animatedVertex}) {\n        let dim = board => [board.width, board.height]\n\n        if (!this.props || !helper.vertexEquals(dim(board), dim(this.props.board))) {\n            // Update state to accomodate new board size\n\n            let rangeX = range(board.width)\n            let rangeY = range(board.height)\n            let hoshis = board.getHandicapPlacement(9)\n\n            let shifts = rangeY.map(_ => rangeX.map(__ => random(9)))\n            this.readjustShifts(shifts)\n\n            this.setState({\n                rangeX,\n                rangeY,\n                hoshis,\n                randomizer: rangeY.map(_ => rangeX.map(__ => random(5))),\n                shifts\n            }, () => this.resize())\n        } else if (animatedVertex\n        && !(this.props.animatedVertex && helper.vertexEquals(animatedVertex, this.props.animatedVertex))) {\n            // Update shift\n\n            let [x, y] = animatedVertex\n            let {shifts} = this.state\n\n            shifts[y][x] = random(9)\n            this.readjustShifts(shifts, animatedVertex)\n\n            this.setState({shifts, animatedVertex})\n            setTimeout(() => this.setState({animatedVertex: null}), 200)\n        }\n    }\n\n    componentDidUpdate({showCoordinates}) {\n        if (showCoordinates !== this.props.showCoordinates) {\n            this.resize()\n        }\n    }\n\n    resize() {\n        if (!this.element || !this.element.parentElement) return\n\n        let {board, showCoordinates, onBeforeResize = helper.noop} = this.props\n        onBeforeResize()\n\n        let {width: outerWidth, height: outerHeight} = window.getComputedStyle(this.element.parentElement)\n        outerWidth = parseFloat(outerWidth)\n        outerHeight = parseFloat(outerHeight)\n\n        let boardWidth = board.width\n        let boardHeight = board.height\n\n        if (showCoordinates) {\n            boardWidth += 2\n            boardHeight += 2\n        }\n\n        let width = helper.floorEven(outerWidth\n            - this.state.paddingLeft - this.state.paddingRight\n            - this.state.borderLeftWidth - this.state.borderRightWidth)\n        let height = helper.floorEven(outerHeight\n            - this.state.paddingTop - this.state.paddingBottom\n            - this.state.borderTopWidth - this.state.borderBottomWidth)\n\n        let fieldSize = helper.floorEven(Math.min(width / boardWidth, height / boardHeight, 150))\n        let minX = fieldSize * boardWidth\n        let minY = fieldSize * boardHeight\n\n        this.setState({\n            width: minX + outerWidth - width,\n            height: minY + outerHeight - height,\n            marginLeft: -(minX + outerWidth - width) / 2,\n            marginTop: -(minY + outerHeight - height) / 2,\n            innerWidth: minX,\n            innerHeight: minY,\n            innerMarginLeft: -minX / 2,\n            innerMarginTop: -minY / 2,\n            fieldSize\n        })\n    }\n\n    readjustShifts(shifts, vertex = null) {\n        if (vertex == null) {\n            let movedVertices = []\n\n            for (let y = 0; y < shifts.length; y++) {\n                for (let x = 0; x < shifts[0].length; x++) {\n                    movedVertices.push(...this.readjustShifts(shifts, [x, y]))\n                }\n            }\n\n            return movedVertices\n        }\n\n        let [x, y] = vertex\n        let direction = shifts[y][x]\n\n        let data = [\n            // Left\n            [[1, 5, 8], [x - 1, y], [3, 7, 6]],\n            // Top\n            [[2, 5, 6], [x, y - 1], [4, 7, 8]],\n            // Right\n            [[3, 7, 6], [x + 1, y], [1, 5, 8]],\n            // Bottom\n            [[4, 7, 8], [x, y + 1], [2, 5, 6]],\n        ]\n\n        let movedVertices = []\n\n        for (let [directions, [qx, qy], removeShifts] of data) {\n            if (!directions.includes(direction)) continue\n\n            if (shifts[qy] && removeShifts.includes(shifts[qy][qx])) {\n                shifts[qy][qx] = 0\n                movedVertices.push([qx, qy])\n            }\n        }\n\n        return movedVertices\n    }\n\n    handleVertexMouseDown(evt) {\n        let {currentTarget} = evt\n\n        this.mouseDown = true\n        this.startVertex = currentTarget.dataset.vertex.split('-').map(x => +x)\n    }\n\n    handleVertexMouseUp(evt) {\n        if (!this.mouseDown) return\n\n        let {onVertexClick = helper.noop, onLineDraw = helper.noop} = this.props\n        let {currentTarget} = evt\n\n        this.mouseDown = false\n        evt.vertex = currentTarget.dataset.vertex.split('-').map(x => +x)\n        evt.line = this.state.temporaryLine\n\n        if (evt.x == null) evt.x = evt.clientX\n        if (evt.y == null) evt.y = evt.clientY\n\n        if (evt.line) {\n            onLineDraw(evt)\n        } else {\n            onVertexClick(evt)\n        }\n    }\n\n    handleVertexMouseMove(evt) {\n        let {drawLineMode, onVertexMouseMove = helper.noop} = this.props\n        let {currentTarget} = evt\n\n        onVertexMouseMove(Object.assign(evt, {\n            mouseDown: this.mouseDown,\n            startVertex: this.startVertex,\n            vertex: currentTarget.dataset.vertex.split('-').map(x => +x)\n        }))\n\n        if (!!drawLineMode && evt.mouseDown && evt.button === 0) {\n            let temporaryLine = [evt.startVertex, evt.vertex]\n\n            if (!helper.equals(temporaryLine, this.state.temporaryLine)) {\n                this.setState({temporaryLine})\n            }\n        }\n    }\n\n    render({\n        board,\n        paintMap,\n        highlightVertices = [],\n        dimmedStones = [],\n\n        crosshair = false,\n        showCoordinates = false,\n        showMoveColorization = true,\n        showNextMoves = true,\n        showSiblings = true,\n        fuzzyStonePlacement = true,\n        animatedStonePlacement = true,\n\n        drawLineMode = null\n    }, state) {\n        let {fieldSize, rangeY, rangeX, temporaryLine, animatedVertex} = state\n        let animatedVertices = animatedVertex\n            ? [animatedVertex, ...board.getNeighbors(animatedVertex)] : []\n        let drawTemporaryLine = !!drawLineMode && !!temporaryLine\n\n        return h('section',\n            {\n                ref: el => this.element = el,\n                id: 'goban',\n                class: classNames({\n                    goban: true,\n                    crosshair,\n                    coordinates: showCoordinates,\n                    movecolorization: showMoveColorization,\n                    variations: showNextMoves,\n                    siblings: showSiblings,\n                    fuzzy: fuzzyStonePlacement,\n                    animation: animatedStonePlacement\n                })\n            },\n\n            h('style', {}, `\n                #goban {\n                    font-size: ${fieldSize}px;\n                    width: ${state.width}px;\n                    height: ${state.height}px;\n                    margin-left: ${state.marginLeft}px;\n                    margin-top: ${state.marginTop}px;\n                }\n                #goban > div {\n                    width: ${state.innerWidth}px;\n                    height: ${state.innerHeight}px;\n                    margin-left: ${state.innerMarginLeft}px;\n                    margin-top: ${state.innerMarginTop}px;\n                }\n                #goban > div > ol > li {\n                    width: ${fieldSize}px;\n                    height: ${fieldSize}px;\n                }\n                #goban > div > ol:not(.coordy) {\n                    height: ${fieldSize}px;\n                    line-height: ${fieldSize}px;\n                    margin-left: ${showCoordinates ? fieldSize : 0}px;\n                }\n                #goban > div > ol.coordy {\n                    width: ${fieldSize}px;\n                    top: ${fieldSize}px;\n                    line-height: ${fieldSize}px;\n                }\n                #goban > div > ol.coordy:last-child {\n                    left: ${fieldSize * (board.width + 1)}px;\n                }\n            `),\n\n            h('div', {},\n                h(CoordY, {rangeY}),\n                h(CoordX, {rangeX}),\n\n                rangeY.map(y => h('ol', {class: 'row'}, rangeX.map(x => {\n                    let sign = board.get([x, y])\n                    let [markupType, label] = board.markups[[x, y]] || [null, '']\n                    let equalsVertex = v => helper.vertexEquals(v, [x, y])\n\n                    return h(GobanVertex, {\n                        position: [x, y],\n                        shift: this.state.shifts[y][x],\n                        random: this.state.randomizer[y][x],\n                        sign,\n                        paint: paintMap && paintMap[y] && paintMap[y][x],\n                        dimmed: dimmedStones.some(equalsVertex),\n                        highlight: highlightVertices.some(equalsVertex),\n                        hoshi: this.state.hoshis.some(equalsVertex),\n                        animate: animatedVertices.some(equalsVertex),\n                        smalllabel: label.length >= 3,\n                        markupType,\n                        label,\n                        ghostTypes: board.ghosts[[x, y]] || [],\n\n                        onMouseUp: this.handleVertexMouseUp,\n                        onMouseDown: this.handleVertexMouseDown,\n                        onMouseMove: this.handleVertexMouseMove\n                    })\n                }))),\n\n                h(CoordX, {rangeX}),\n                h(CoordY, {rangeY})\n            ),\n\n            // Draw lines & arrows\n\n            board.lines.map(([v1, v2, arrow]) => {\n                if (drawTemporaryLine) {\n                    if (helper.equals([v1, v2], temporaryLine)\n                    || (!arrow || drawLineMode === 'line')\n                    && helper.equals([v2, v1], temporaryLine)) {\n                        drawTemporaryLine = false\n                        return\n                    }\n                }\n\n                return h(GobanLine, {\n                    v1, v2, showCoordinates, fieldSize,\n                    type: arrow ? 'arrow' : 'line'\n                })\n            }),\n\n            drawTemporaryLine && h(GobanLine, {\n                temporary: true,\n                v1: temporaryLine[0], v2: temporaryLine[1],\n                showCoordinates, fieldSize,\n                type: drawLineMode\n            })\n        )\n    }\n}\n\nmodule.exports = Goban\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Goban.js","const {shell, clipboard, remote} = require('electron')\nconst {Menu} = require('electron').remote\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst helper = require('../../modules/helper')\nconst setting = remote.require('./setting')\n\nlet toggleSetting = key => setting.set(key, !setting.get(key))\n\nclass PlayBar extends Component {\n    constructor() {\n        super()\n\n        this.handleCurrentPlayerClick = () => this.props.onCurrentPlayerClick\n        this.handleUndoButtonClick = () => sabaki.undo()\n\n        this.handleMenuClick = () => {\n            let template = [\n                {\n                    label: `About ${sabaki.appName}…`,\n                    click: () => shell.openExternal('http://sabaki.yichuanshen.de')\n                },\n                {type: 'separator'},\n                {\n                    label: 'New File',\n                    click: () => sabaki.newFile({playSound: true, showInfo: true})\n                },\n                {\n                    label: 'Open File…',\n                    click: () => sabaki.loadFile()\n                },\n                {\n                    label: 'Download SGF',\n                    click: () => sabaki.saveFile(sabaki.state.representedFilename)\n                },\n                {\n                    label: 'Load SGF from Clipboard',\n                    click: () => {\n                        let content = clipboard.readText()\n                        if (content == null) return\n                        sabaki.loadContent(content, 'sgf', {ignoreEncoding: true})\n                    }\n                },\n                {\n                    label: 'Copy SGF to Clipboard',\n                    click: () => clipboard.writeText(sabaki.getSGF())\n                },\n                {type: 'separator'},\n                {\n                    label: 'Show &Coordinates',\n                    checked: setting.get('view.show_coordinates'),\n                    click: () => toggleSetting('view.show_coordinates')\n                },\n                {\n                    label: 'Show Move Colori&zation',\n                    checked: setting.get('view.show_move_colorization'),\n                    click: () => toggleSetting('view.show_move_colorization')\n                },\n                {\n                    label: 'Show &Next Moves',\n                    checked: setting.get('view.show_next_moves'),\n                    click: () => toggleSetting('view.show_next_moves')\n                },\n                {\n                    label: 'Show &Sibling Variations',\n                    checked: setting.get('view.show_siblings'),\n                    click: () => toggleSetting('view.show_siblings')\n                },\n                {\n                    label: '&Manage Games…',\n                    click: () => sabaki.openDrawer('gamechooser')\n                },\n                {type: 'separator'},\n                {\n                    label: '&Pass',\n                    click: () => sabaki.makeMove([-1, -1], {sendToEngine: true})\n                },\n                {\n                    label: '&Resign',\n                    click: () => sabaki.makeResign()\n                },\n                {type: 'separator'},\n                {\n                    label: 'Es&timate',\n                    click: () => sabaki.setMode('estimator')\n                },\n                {\n                    label: '&Score',\n                    click: () => sabaki.setMode('scoring')\n                },\n                {\n                    label: '&Edit',\n                    click: () => sabaki.setMode('edit')\n                },\n                {\n                    label: '&Find',\n                    click: () => sabaki.setMode('find')\n                },\n                {type: 'separator'},\n                {\n                    label: '&Info',\n                    click: () => sabaki.openDrawer('info')\n                }\n            ]\n\n            let {left, top} = this.menuButtonElement.getBoundingClientRect()\n            helper.popupMenu(template, left, top)\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.mode !== this.props.mode || nextProps.mode === 'play'\n    }\n\n    render({\n        mode,\n        attachedEngines,\n        playerNames,\n        playerRanks,\n        playerCaptures,\n        currentPlayer,\n        showHotspot,\n        undoable,\n        undoText,\n\n        onCurrentPlayerClick = helper.noop\n    }) {\n        let captureStyle = index => ({opacity: playerCaptures[index] === 0 ? 0 : .7})\n        let isEngine = Array(attachedEngines.length).fill(false)\n\n        attachedEngines.forEach((engine, i) => {\n            if (engine == null) return\n\n            playerNames[i] = engine.name\n            playerRanks[i] = 'Engine'\n            isEngine[i] = true\n        })\n\n        return h('header',\n            {\n                class: classNames({\n                    undoable,\n                    hotspot: showHotspot,\n                    current: mode === 'play'\n                })\n            },\n\n            h('span', {id: 'player_1'},\n                h('span', {class: 'captures', style: captureStyle(0)}, playerCaptures[0]), ' ',\n                h('span', {\n                    class: classNames('name', {engine: isEngine[0]}),\n                    title: playerRanks[0]\n                }, playerNames[0] || 'Black')\n            ),\n            h('span', {id: 'player_-1'},\n                h('span', {\n                    class: classNames('name', {engine: isEngine[1]}),\n                    title: playerRanks[1]\n                }, playerNames[1] || 'White'), ' ',\n                h('span', {class: 'captures', style: captureStyle(1)}, playerCaptures[1])\n            ),\n\n            h('img', {\n                src: `./img/ui/player_${currentPlayer}.svg`,\n                class: 'current-player',\n                height: 22,\n                title: 'Change Player',\n                onClick: onCurrentPlayerClick\n            }),\n\n            h('div', {class: 'hotspot', title: 'Hotspot'}),\n\n            h('a',\n                {\n                    class: 'undo',\n                    title: undoText,\n                    onClick: this.handleUndoButtonClick\n                },\n                h('img', {src: './node_modules/octicons/build/svg/mail-reply.svg', height: 21})\n            ),\n\n            h('a',\n                {\n                    ref: el => this.menuButtonElement = el,\n                    id: 'headermenu',\n                    onClick: this.handleMenuClick\n                },\n                h('img', {src: './node_modules/octicons/build/svg/three-bars.svg', height: 21})\n            )\n        )\n    }\n}\n\nmodule.exports = PlayBar\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/bars/PlayBar.js","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst Bar = require('./Bar')\nconst helper = require('../../modules/helper')\n\nclass EditBar extends Component {\n    constructor() {\n        super()\n\n        this.state = {\n            stoneTool: 1\n        }\n\n        this.handleToolButtonClick = this.handleToolButtonClick.bind(this)\n    }\n\n    componentWillReceiveProps({selectedTool}) {\n        if (selectedTool === this.props.selectedTool) return\n\n        if (selectedTool.indexOf('stone') === 0) {\n            this.setState({stoneTool: +selectedTool.replace('stone_', '')})\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.mode !== this.props.mode || nextProps.mode === 'edit'\n    }\n\n    handleToolButtonClick(evt) {\n        let {selectedTool, onToolButtonClick = helper.noop} = this.props\n\n        evt.tool = evt.currentTarget.dataset.id\n\n        if (evt.tool.indexOf('stone') === 0 && selectedTool.indexOf('stone') === 0) {\n            evt.tool = `stone_${-this.state.stoneTool}`\n            this.setState(({stoneTool}) => ({stoneTool: -stoneTool}))\n        }\n\n        onToolButtonClick(evt)\n    }\n\n    renderButton(title, toolId, selected = false) {\n        return h('li', {class: classNames({selected})},\n            h('a',\n                {\n                    title,\n                    href: '#',\n                    'data-id': toolId,\n                    onClick: this.handleToolButtonClick\n                },\n\n                h('img', {src: `./img/edit/${toolId}.svg`})\n            )\n        )\n    }\n\n    render({selectedTool}, {stoneTool}) {\n        let isSelected = ([, id]) => id.replace(/_-?1$/, '') === selectedTool.replace(/_-?1$/, '')\n\n        return h(Bar, Object.assign({type: 'edit'}, this.props),\n            h('ul', {},\n                [\n                    ['Stone Tool', `stone_${stoneTool}`],\n                    ['Cross Tool', 'cross'],\n                    ['Triangle Tool', 'triangle'],\n                    ['Square Tool', 'square'],\n                    ['Circle Tool', 'circle'],\n                    ['Line Tool', 'line'],\n                    ['Arrow Tool', 'arrow'],\n                    ['Label Tool', 'label'],\n                    ['Number Tool', 'number']\n                ].map(x =>\n                    this.renderButton(...x, isSelected(x))\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = EditBar\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/bars/EditBar.js","const {h, Component} = require('preact')\nconst Bar = require('./Bar')\nconst helper = require('../../modules/helper')\n\nclass ScoringBar extends Component {\n    constructor() {\n        super()\n\n        this.handleButtonClick = () => sabaki.openDrawer('score')\n    }\n\n    render({type, children, method, areaMap, scoreBoard, komi}) {\n        let score = scoreBoard ? scoreBoard.getScore(areaMap) : {area: [], territory: [], captures: []}\n        let result = method === 'area' ? score.area[0] - score.area[1] - komi\n            : score.territory[0] - score.territory[1] + score.captures[0] - score.captures[1] - komi\n        let resultString = result > 0 ? `B+${result}` : result < 0 ? `W+${-result}` : 'Draw'\n\n        return h(Bar, Object.assign({type}, this.props),\n            h('button',\n                {onClick: this.handleButtonClick},\n                'Details',\n\n                h('strong', {}, resultString)\n            ),\n\n            children\n        )\n    }\n}\n\nmodule.exports = ScoringBar\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/bars/ScoringBar.js","const {h, Component} = require('preact')\nconst Bar = require('./Bar')\nconst helper = require('../../modules/helper')\n\nclass FindBar extends Component {\n    constructor() {\n        super()\n\n        this.handleChange = evt => {\n            sabaki.setState({findText: evt.currentTarget.value})\n        }\n\n        this.handleButtonClick = evt => {\n            evt.preventDefault()\n\n            let step = evt.currentTarget.classList.contains('next') ? 1 : -1\n            let {onButtonClick = helper.noop} = this.props\n\n            evt.step = step\n            onButtonClick(evt)\n        }\n    }\n\n    render({findText}) {\n        return h(Bar, Object.assign({type: 'find'}, this.props),\n            h('form', {},\n                h('input', {\n                    type: 'text',\n                    placeholder: 'Find',\n                    value: findText,\n                    onInput: this.handleChange\n                }),\n\n                h('button', {class: 'next', onClick: this.handleButtonClick},\n                    h('img', {src: './node_modules/octicons/build/svg/chevron-down.svg', height: 20, alt: 'Next'})\n                ),\n                h('button', {class: 'prev', onClick: this.handleButtonClick},\n                    h('img', {src: './node_modules/octicons/build/svg/chevron-up.svg', height: 20, alt: 'Previous'})\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = FindBar\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/bars/FindBar.js","const Buffer = require('buffer')\nconst fs = require('fs')\nconst sgf = require('./sgf')\nconst gametree = require('../gametree')\nconst Board = require('../board')\n\nexports.meta = {\n    name: 'wBaduk NGF',\n    extensions: ['ngf']\n}\n\nexports.parse = function(content) {\n    let iconv = require('iconv-lite')\n    let jschardet = require('jschardet')\n\n    // NGF files have a huge amount of ASCII-looking text. To help\n    // the detector, we just send it the first few lines.\n\n    let rawlines = content.split('\\n')\n    let raw = rawlines.slice(0, 12).join()\n\n    let encoding = 'utf8'\n    let detected = jschardet.detect(raw)\n    if (detected.confidence > 0.2) {\n        encoding = detected.encoding\n    }\n\n    content = iconv.decode(Buffer.from(content, 'binary'), encoding)\n\n    let lines = content.split('\\n')\n\n    let tree = gametree.new()\n    let root = {}\n    tree.nodes.push(root)\n\n    root.CA = ['UTF-8']\n    root.FF = [4]\n    root.GM = [1]\n    root.SZ = [19]\n\n    // These array accesses might throw if out of range, that's fine.\n    // The caller will deal with the exception.\n\n    let boardsize = Math.floor(parseFloat(lines[1]))\n    let handicap = Math.floor(parseFloat(lines[5]))\n    let pw = lines[2].split(' ')[0]\n    let pb = lines[3].split(' ')[0]\n    let rawdate = lines[8].slice(0, 8)\n    let komi = Math.floor(parseFloat(lines[7]))\n\n    if (Number.isNaN(boardsize)) {\n        boardsize = 19\n    }\n    if (Number.isNaN(handicap)) {\n        handicap = 0\n    }\n    if (Number.isNaN(komi)) {\n        komi = 0\n    }\n\n    let line2 = lines[2].trim().split(' ')\n    if (line2.length > 1) {\n        let whiterank = line2[line2.length - 1]\n        whiterank = whiterank.replace('DP', 'p').replace('K', 'k').replace('D', 'd')\n        root.WR = [whiterank]\n    }\n\n    let line3 = lines[3].trim().split(' ')\n    if (line3.length > 1) {\n        let blackrank = line3[line3.length - 1]\n        blackrank = blackrank.replace('DP', 'p').replace('K', 'k').replace('D', 'd')\n        root.BR = [blackrank]\n    }\n\n    if (handicap === 0 && komi === Math.floor(komi)) {\n        komi += 0.5\n    }\n\n    let winner = ''\n    let margin = ''\n\n    if (lines[10].includes('resign')) {\n        margin = 'R'\n    }\n    if (lines[10].includes('time')) {\n        margin = 'T'\n    }\n    if (lines[10].includes('hite win') || lines[10].includes('lack lose')) {\n        winner = 'W'\n    }\n    if (lines[10].includes('lack win') || lines[10].includes('hite lose')) {\n        winner = 'B'\n    }\n    if (margin === '') {\n\n        let score = null\n        let strings = lines[10].split(' ')\n\n        // Try to find score by assuming any float found is the score.\n\n        for (let s of strings) {\n            let p = parseFloat(s)\n            if (Number.isNaN(p) === false) {\n                score = p\n            }\n        }\n\n        if (score !== null) {\n            margin = score.toString()\n        }\n    }\n\n    if (winner !== '') {\n        root.RE = [winner + '+' + margin]\n    }\n\n    root.SZ = [boardsize]\n\n    if (handicap >= 2) {\n        root.HA = [handicap]\n        root.AB = []\n\n        let tmp = new Board(boardsize, boardsize)       // Created solely for .getHandicapPlacement()\n\n        let points = tmp.getHandicapPlacement(handicap)\n\n        for (let p of points) {\n            let [x, y] = p\n            let s = sgf.vertex2point([x, y])\n            root.AB.push(s)\n        }\n    }\n\n    if (komi) {\n        root.KM = [komi]\n    }\n\n    if (rawdate.length === 8) {\n        let ok = true\n        for (let n = 0; n < 8; n++) {\n            let tmp = parseFloat(rawdate.charAt(n))\n            if (Number.isNaN(tmp)) {\n                ok = false\n            }\n        }\n        if (ok) {\n            let date = ''\n            date += rawdate.slice(0, 4)\n            date += '-' + rawdate.slice(4, 6)\n            date += '-' + rawdate.slice(6, 8)\n            root.DT = [date]\n        }\n    }\n\n    root.PW = [pw]\n    root.PB = [pb]\n\n    // We currently search for moves in all lines. Current files start moves at line 12.\n    // But some older files have less headers and start moves earlier.\n\n    for (let n = 0; n < lines.length; n++) {\n        let line = lines[n].trim()\n\n        if (line.length >= 7) {\n\n            if (line.slice(0, 2) === 'PM') {\n\n                let key = line.charAt(4)\n\n                if (key === 'B' || key === 'W') {\n\n                    // Coordinates are letters but with 'B' as the lowest.\n\n                    let x = line.charCodeAt(5) - 66\n                    let y = line.charCodeAt(6) - 66\n\n                    let val = sgf.vertex2point([x, y])\n\n                    let node = {}\n                    tree.nodes.push(node)\n                    node[key] = [val]\n                }\n            }\n        }\n    }\n\n    return [tree]\n}\n\nexports.parseFile = function(filename) {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/fileformats/ngf.js","const Buffer = require('buffer')\nconst fs = require('fs')\nconst sgf = require('./sgf')\nconst gametree = require('../gametree')\nconst Board = require('../board')\n\nexports.meta = {\n    name: 'Tygem GIB',\n    extensions: ['gib']\n}\n\nfunction makeResult(grlt, zipsu) {      // Arguments are expected to be numbers\n    // Given a game result type and a score, return a text result.\n\n    // The GRLT tag contains the type of result:\n    // 0: B+n   1: W+n   3: B+R   4: W+R   7: B+T   8: W+T\n\n    let easycases = {'3': 'B+R', '4': 'W+R', '7': 'B+T', '8': 'W+T'}\n\n    if (easycases[grlt] !== undefined) {\n        return easycases[grlt]\n    }\n\n    // If there is a score, the ZIPSU tag contains it (multiplied by 10).\n\n    if (grlt === 0 || grlt === 1) {\n        let winner = grlt === 0 ? 'B' : 'W'\n        let margin = (zipsu / 10).toString()\n        return winner + '+' + margin\n    }\n\n    // We couldn't work it out...\n\n    return ''\n}\n\nfunction getResult(line, grltRegex, zipsuRegex) {\n    // Takes a line and two regexes, the first finding the GRLT (game\n    // result type, e.g. 3 == B+R) and the second finding the score.\n\n    let result = ''\n    let match = grltRegex.exec(line)\n\n    if (match) {\n        let grlt = parseFloat(match[1])\n        match = zipsuRegex.exec(line)\n        if (match) {\n            let zipsu = parseFloat(match[1])\n            result = makeResult(grlt, zipsu)\n        }\n    }\n\n    return result\n}\n\nfunction parsePlayerName(raw) {\n    let name = ''\n    let rank = ''\n\n    // If there's exactly one opening bracket...\n\n    let foo = raw.split('(')\n    if (foo.length === 2) {\n        // And if the closing bracket is right at the end...\n\n        if (foo[1].indexOf(')') === foo[1].length - 1) {\n\n            // Then extract the rank...\n\n            name = foo[0].trim()\n            rank = foo[1].slice(0, foo[1].length - 1)\n        }\n    }\n\n    if (name === '') {\n        return [raw, '']\n    } else {\n        return [name, rank]\n    }\n}\n\nexports.parse = function(content) {\n    let iconv = require('iconv-lite')\n    let jschardet = require('jschardet')\n\n    let encoding = 'utf8'\n    let detected = jschardet.detect(content)\n    if (detected.confidence > 0.2) {\n        encoding = detected.encoding\n    }\n\n    content = iconv.decode(Buffer.from(content, 'binary'), encoding)\n\n    let lines = content.split('\\n')\n\n    let tree = gametree.new()\n    let root = {}\n    tree.nodes.push(root)\n\n    root.CA = ['UTF-8']\n    root.FF = [4]\n    root.GM = [1]\n    root.SZ = [19]\n\n    let node = root\n\n    let regex\n    let match\n\n    for (let n = 0; n < lines.length; n++) {\n        let line = lines[n].trim()\n\n        if (line.startsWith('\\\\[GAMEBLACKNAME=') && line.endsWith('\\\\]')) {\n\n            let s = line.slice(16, -2)\n            let [name, rank] = parsePlayerName(s)\n            if (name) {\n                root.PB = [name]\n            }\n            if (rank) {\n                root.BR = [rank]\n            }\n        } else if (line.startsWith('\\\\[GAMEWHITENAME=') && line.endsWith('\\\\]')) {\n            let s = line.slice(16, -2)\n            let [name, rank] = parsePlayerName(s)\n            if (name) {\n                root.PW = [name]\n            }\n            if (rank) {\n                root.WR = [rank]\n            }\n        } else if (line.startsWith('\\\\[GAMEINFOMAIN=')) {\n\n            if (root.RE === undefined) {\n                let result = getResult(line, /GRLT:(\\d+),/, /ZIPSU:(\\d+),/)\n                if (result !== '') {\n                    root.RE = [result]\n                }\n            }\n\n            if (root.KM === undefined) {\n                regex = /GONGJE:(\\d+),/\n                match = regex.exec(line)\n                if (match) {\n                    let komi = parseFloat(match[1]) / 10\n                    root.KM = [komi]\n                }\n            }\n        } else if (line.startsWith('\\\\[GAMETAG=')) {\n            if (root.DT === undefined) {\n                regex = /C(\\d\\d\\d\\d):(\\d\\d):(\\d\\d)/\n                match = regex.exec(line)\n                if (match) {\n                    root.DT = [match[1] + '-' + match[2] + '-' + match[3]]\n                }\n            }\n\n            if (root.RE === undefined) {\n                let result = getResult(line, /,W(\\d+),/, /,Z(\\d+),/)\n                if (result !== '') {\n                    root.RE = [result]\n                }\n            }\n\n            if (root.KM === undefined) {\n                regex = /,G(\\d+),/\n                match = regex.exec(line)\n                if (match) {\n                    let komi = parseFloat(match[1]) / 10\n                    root.KM = [komi]\n                }\n            }\n        } else if (line.slice(0, 3) === 'INI') {\n            let setup = line.split(' ')\n            let handicap = 0\n            let p = Math.floor(parseFloat(setup[3]))\n\n            if (Number.isNaN(p) === false) {\n                handicap = p\n            }\n\n            if (handicap >= 2 && handicap <= 9) {\n                root.HA = [handicap]\n                root.AB = []\n\n                let tmp = new Board()       // Created solely for .getHandicapPlacement()\n\n                let points = tmp.getHandicapPlacement(handicap)\n\n                for (let p of points) {\n                    let [x, y] = p\n                    let s = sgf.vertex2point([x, y])\n                    root.AB.push(s)\n                }\n            }\n        } else if (line.slice(0, 3) === 'STO') {\n            let elements = line.split(' ')\n\n            if (elements.length < 6) {\n                continue\n            }\n\n            let key\n\n            if (elements[3] === '1') {\n                key = 'B'\n            } else {\n                key = 'W'\n            }\n\n            let x = Math.floor(parseFloat(elements[4]))\n            let y = Math.floor(parseFloat(elements[5]))\n\n            if (Number.isNaN(x) || Number.isNaN(y)) {\n                continue\n            }\n\n            let val = sgf.vertex2point([x, y])\n\n            let node = {}\n            tree.nodes.push(node)\n            node[key] = [val]\n        }\n    }\n\n    return [tree]\n}\n\nexports.parseFile = function(filename) {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/fileformats/gib.js","const {remote} = require('electron')\nconst {h, Component} = require('preact')\n\nconst gametree = require('../modules/gametree')\nconst helper = require('../modules/helper')\nconst setting = remote.require('./setting')\n\nconst Slider = require('./Slider')\nconst GameGraph = require('./GameGraph')\nconst CommentBox = require('./CommentBox')\n\nlet sidebarMinWidth = setting.get('view.sidebar_minwidth')\nlet sidebarMinSplit = setting.get('view.properties_minheight')\n\nclass Sidebar extends Component {\n    constructor(props) {\n        super()\n\n        this.state = {\n            sidebarSplit: setting.get('view.properties_height'),\n            sidebarSplitTransition: true\n        }\n\n        this.handleGraphNodeClick = ({button, treePosition, x, y}) => {\n            if (button === 0) {\n                sabaki.setCurrentTreePosition(...treePosition)\n            } else {\n                sabaki.openNodeMenu(...treePosition, {x, y})\n            }\n        }\n\n        this.handleVerticalResizerMouseDown = ({button, x, y}) => {\n            if (button !== 0) return\n\n            this.oldSidebarWidth = this.props.sidebarWidth\n            this.oldMousePosition = [x, y]\n            this.verticalResizerMouseDown = true\n        }\n\n        this.handleHorizontalResizerMouseDown = ({button}) => {\n            if (button !== 0) return\n            this.horizontalResizerMouseDown = true\n        }\n\n        this.handleSliderChange = ({percent}) => {\n            let moveNumber = Math.round((this.state.treeHeight - 1) * percent)\n            sabaki.goToMoveNumber(moveNumber)\n        }\n\n        this.handleStartAutoscrolling = ({step}) => {\n            let minDelay = setting.get('autoscroll.min_interval')\n            let diff = setting.get('autoscroll.diff')\n\n            let scroll = (delay = null) => {\n                sabaki.goStep(step)\n\n                clearTimeout(this.autoscrollId)\n                this.autoscrollId = setTimeout(() => scroll(Math.max(minDelay, delay - diff)), delay)\n            }\n\n            scroll(setting.get('autoscroll.max_interval'))\n        }\n\n        this.handleStopAutoscrolling = () => {\n            clearTimeout(this.autoscrollId)\n        }\n\n        this.handleCommentInput = evt => {\n            sabaki.setComment(...this.props.treePosition, evt)\n        }\n\n        this.componentWillReceiveProps(props)\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return nextProps.showSidebar != this.props.showSidebar || nextProps.showSidebar\n    }\n\n    componentWillReceiveProps({treePosition, rootTree} = {}) {\n        // Update tree height\n\n        if (this.props && treePosition === this.props.treePosition) return\n        this.setState({treeHeight: gametree.getHeight(rootTree)})\n    }\n\n    componentDidMount() {\n        document.addEventListener('mouseup', () => {\n            if (this.verticalResizerMouseDown || this.horizontalResizerMouseDown) {\n                this.verticalResizerMouseDown = false\n                this.horizontalResizerMouseDown = false\n\n                setting.set('view.properties_height', this.state.sidebarSplit)\n                setting.set('view.sidebar_width', this.props.sidebarWidth)\n                this.setState({sidebarSplitTransition: false})\n                window.dispatchEvent(new Event('resize'))\n            }\n        })\n\n        document.addEventListener('mousemove', evt => {\n            if (this.verticalResizerMouseDown) {\n                evt.preventDefault()\n\n                let {sidebarWidth} = this.props\n                let diff = [evt.clientX, evt.clientY].map((x, i) => x - this.oldMousePosition[i])\n\n                sidebarWidth = Math.max(sidebarMinWidth, this.oldSidebarWidth - diff[0])\n                sabaki.setSidebarWidth(sidebarWidth)\n            } else if (this.horizontalResizerMouseDown) {\n                evt.preventDefault()\n\n                let sidebarSplit = Math.min(100 - sidebarMinSplit,\n                    Math.max(sidebarMinSplit, 100 - evt.clientY * 100 / this.element.offsetHeight))\n\n                this.setState({sidebarSplit, sidebarSplitTransition: false})\n            }\n        })\n    }\n\n    render({\n        mode,\n        treePosition,\n        rootTree,\n        showGameGraph,\n        showCommentBox,\n        sidebarWidth,\n\n        graphGridSize,\n        graphNodeSize\n    }, {\n        treeHeight,\n        sidebarSplit,\n        sidebarSplitTransition\n    }) {\n        let [tree, index] = treePosition\n        let node = tree.nodes[index]\n        let level = gametree.getLevel(tree, index)\n\n        return h('section',\n            {\n                ref: el => this.element = el,\n                id: 'sidebar',\n                style: {width: sidebarWidth}\n            },\n\n            h('div', {\n                class: 'verticalresizer',\n                onMouseDown: this.handleVerticalResizerMouseDown\n            }),\n\n            h(Slider, {\n                showSlider: showGameGraph,\n                text: level,\n                percent: (level / (treeHeight - 1)) * 100,\n                height: !showGameGraph ? 0 : !showCommentBox ? 100 : 100 - sidebarSplit,\n\n                onChange: this.handleSliderChange,\n                onStartAutoscrolling: this.handleStartAutoscrolling,\n                onStopAutoscrolling: this.handleStopAutoscrolling\n            }),\n\n            h(GameGraph, {\n                treePosition,\n                showGameGraph,\n                viewportWidth: sidebarWidth,\n                height: !showGameGraph ? 0 : !showCommentBox ? 100 : 100 - sidebarSplit,\n                gridSize: graphGridSize,\n                nodeSize: graphNodeSize,\n\n                onNodeClick: this.handleGraphNodeClick\n            }),\n\n            h(CommentBox, {\n                mode,\n                treePosition,\n                showCommentBox,\n                moveAnnotation: 'BM' in node ? [-1, node.BM[0]]\n                    : 'DO' in node ? [0, 1]\n                    : 'IT' in node ? [1, 1]\n                    : 'TE' in node ? [2, node.TE[0]]\n                    : [null, 1],\n                positionAnnotation: 'UC' in node ? [-2, node.UC[0]]\n                    : 'GW' in node ? [-1, node.GW[0]]\n                    : 'DM' in node ? [0, node.DM[0]]\n                    : 'GB' in node ? [1, node.GB[0]]\n                    : [null, 1],\n                title: 'N' in node ? node.N[0].trim() : '',\n                comment: 'C' in node ? node.C[0] : '',\n                height: !showCommentBox ? 0 : !showGameGraph ? 100 : sidebarSplit,\n                sidebarSplitTransition,\n\n                onResizerMouseDown: this.handleHorizontalResizerMouseDown,\n                onCommentInput: this.handleCommentInput\n            })\n        )\n    }\n}\n\nmodule.exports = Sidebar\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Sidebar.js","const {remote} = require('electron')\nconst {h, Component} = require('preact')\n\nconst helper = require('../modules/helper')\nconst setting = remote.require('./setting')\n\nclass Slider extends Component {\n    constructor() {\n        super()\n\n        this.handleSliderAreaMouseDown = evt => {\n            if (evt.button !== 0) return\n\n            this.sliderAreaMouseDown = true\n            document.dispatchEvent(new MouseEvent('mousemove', evt))\n        }\n\n        this.handleButtonMouseDown = evt => {\n            if (evt.button !== 0) return\n\n            let type = evt.currentTarget.className\n            let {onStartAutoscrolling = helper.noop} = this.props\n\n            this.buttonMouseDown = type\n            onStartAutoscrolling({step: type === 'prev' ? -1 : 1})\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('mouseup', () => {\n            this.sliderAreaMouseDown = false\n\n            if (this.buttonMouseDown != null) {\n                let type = this.buttonMouseDown\n                let {onStopAutoscrolling = helper.noop} = this.props\n\n                this.buttonMouseDown = null\n                onStopAutoscrolling({step: type === 'prev' ? -1 : 1})\n            }\n        })\n\n        document.addEventListener('mousemove', evt => {\n            if (!this.sliderAreaMouseDown) return\n\n            let {onChange = helper.noop} = this.props\n            let {offsetTop, offsetHeight} = this.slidingAreaElement\n            let percent = Math.min(1, Math.max(0, (evt.clientY - offsetTop) / offsetHeight))\n\n            onChange({percent})\n        })\n    }\n\n    shouldComponentUpdate({showSlider, height}) {\n        return showSlider && (height !== this.props.height\n            || this.sliderAreaMouseDown\n            || this.buttonMouseDown\n            || !this.dirty)\n    }\n\n    componentWillReceiveProps() {\n        // Debounce rendering\n\n        this.dirty = true\n\n        clearTimeout(this.renderId)\n        this.renderId = setTimeout(() => {\n            this.dirty = false\n            this.setState(this.state)\n        }, setting.get('graph.delay'))\n    }\n\n    render({height, text, percent}) {\n        return h('section', {id: 'slider', style: {height: height + '%'}},\n            h('a', {\n                href: '#',\n                class: 'prev',\n                onMouseDown: this.handleButtonMouseDown\n            }, '▲'),\n\n            h('a', {\n                href: '#',\n                class: 'next',\n                onMouseDown: this.handleButtonMouseDown\n            }, '▼'),\n\n            h('div',\n                {\n                    ref: el => this.slidingAreaElement = el,\n                    class: 'inner',\n                    onMouseDown: this.handleSliderAreaMouseDown\n                },\n\n                h('span', {style: {top: percent + '%'}}, text)\n            )\n        )\n    }\n}\n\nmodule.exports = Slider\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Slider.js","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst gametree = require('../modules/gametree')\nconst helper = require('../modules/helper')\nconst setting = remote.require('./setting')\n\nlet [delay, animationDuration, commentProperties,\nedgeColor, edgeInactiveColor, edgeSize, edgeInactiveSize,\nnodeColor, nodeInactiveColor, nodeActiveColor,\nnodeBookmarkColor, nodeCommentColor, \nnodeInactiveBookmarkColor, nodeInactiveCommentColor] = ['graph.delay', 'graph.animation_duration', 'sgf.comment_properties',\n    'graph.edge_color', 'graph.edge_inactive_color', 'graph.edge_size', 'graph.edge_inactive_size',\n    'graph.node_color', 'graph.node_inactive_color', 'graph.node_active_color',\n    'graph.node_bookmark_color', 'graph.node_comment_color', \n    'graph.node_inactive_bookmark_color', 'graph.node_inactive_comment_color'].map(x => setting.get(x))\n\nclass GameGraphNode extends Component {\n    constructor() {\n        super()\n\n        this.state = {\n            hover: false\n        }\n\n        this.handleMouseMove = evt => {\n            if (!this.element) return\n\n            let {clientX: x, clientY: y} = evt\n            let {position, mouseShift: [sx, sy], gridSize} = this.props\n            let mousePosition = [x + sx, y + sy]\n            let hover = false\n\n            if (mousePosition.every((x, i) => Math.ceil(position[i] - gridSize / 2) <= x\n            && x <= Math.floor(position[i] + gridSize / 2) - 1)) {\n                hover = true\n            }\n\n            if (hover !== this.state.hover) {\n                this.setState({hover})\n            }\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousemove', this.handleMouseMove)\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('mousemove', this.handleMouseMove)\n    }\n\n    shouldComponentUpdate({type, fill, nodeSize, gridSize}, {hover}) {\n        return type !== this.props.type\n            || fill !== this.props.fill\n            || nodeSize !== this.props.nodeSize\n            || gridSize !== this.props.gridSize\n            || hover !== this.state.hover\n    }\n\n    render({\n        position: [left, top],\n        type,\n        fill,\n        nodeSize\n    }, {\n        hover\n    }) {\n        return h('path', {\n            ref: el => this.element = el,\n            d: (() => {\n                let nodeSize2 = nodeSize * 2\n\n                if (type === 'square') {\n                    return `M ${left - nodeSize} ${top - nodeSize}\n                        h ${nodeSize2} v ${nodeSize2} h ${-nodeSize2} v ${-nodeSize2}`\n                } else if (type === 'circle') {\n                    return `M ${left} ${top} m ${-nodeSize} 0\n                        a ${nodeSize} ${nodeSize} 0 1 0 ${nodeSize2} 0\n                        a ${nodeSize} ${nodeSize} 0 1 0 ${-nodeSize2} 0`\n                } else if (type === 'diamond') {\n                    let diamondSide = Math.round(Math.sqrt(2) * nodeSize)\n\n                    return `M ${left} ${top - diamondSide}\n                        L ${left - diamondSide} ${top} L ${left} ${top + diamondSide}\n                        L ${left + diamondSide} ${top} L ${left} ${top - diamondSide}`\n                }\n\n                return ''\n            })(),\n\n            class: classNames({hover}),\n            fill\n        })\n    }\n}\n\nclass GameGraphEdge extends Component {\n    shouldComponentUpdate({positionAbove, positionBelow, current, length, gridSize}) {\n        return length !== this.props.length\n            || current !== this.props.current\n            || gridSize !== this.props.gridSize\n            || !helper.vertexEquals(positionAbove, this.props.positionAbove)\n            || !helper.vertexEquals(positionBelow, this.props.positionBelow)\n    }\n\n    render({\n        positionAbove: [left1, top1],\n        positionBelow: [left2, top2],\n        length,\n        gridSize,\n        current\n    }) {\n        let points\n\n        if (left1 === left2) {\n            points = `${left1},${top1} ${left1},${top2 + length}`\n        } else {\n            points = `${left1},${top1} ${left2 - gridSize},${top2 - gridSize}\n                ${left2},${top2} ${left2},${top2 + length}`\n        }\n\n        return h('polyline', {\n            points,\n            fill: 'none',\n            stroke: current ? edgeColor : edgeInactiveColor,\n            'stroke-width': current ? edgeSize : edgeInactiveSize\n        })\n    }\n}\n\nclass GameGraph extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            cameraPosition: [-props.gridSize, -props.gridSize],\n            viewportSize: [props.viewportWidth, props.height],\n            viewportPosition: [0, 0],\n            matrixDict: null\n        }\n\n        this.mousePosition = [-100, -100]\n        this.matrixDictHash = null\n        this.matrixDictCache = {}\n\n        this.handleNodeClick = this.handleNodeClick.bind(this)\n        this.handleGraphMouseDown = this.handleGraphMouseDown.bind(this)\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousemove', evt => {\n            if (!this.svgElement) return\n\n            let {clientX: x, clientY: y, movementX, movementY} = evt\n            let {cameraPosition: [cx, cy], viewportPosition: [vx, vy]} = this.state\n\n            if (this.mouseDown === 0) {\n                this.drag = true\n            } else {\n                ;[movementX, movementY] = [0, 0]\n                this.drag = false\n            }\n\n            this.mousePosition = [x - vx, y - vy]\n\n            if (this.drag) {\n                evt.preventDefault()\n                this.setState({cameraPosition: [cx - movementX, cy - movementY]})\n            }\n        })\n\n        document.addEventListener('mouseup', () => {\n            this.mouseDown = null\n        })\n\n        window.addEventListener('resize', () => {\n            clearTimeout(this.remeasureId)\n            this.remeasureId = setTimeout(() => this.remeasure(), 500)\n        })\n\n        this.remeasure()\n        this.componentWillReceiveProps()\n    }\n\n    shouldComponentUpdate({showGameGraph, height}) {\n        return height !== this.props.height || showGameGraph && !this.dirty\n    }\n\n    componentWillReceiveProps({treePosition} = {}) {\n        // Debounce rendering\n\n        if (treePosition === this.props.treePosition) return\n\n        this.dirty = true\n\n        clearTimeout(this.renderId)\n        this.renderId = setTimeout(() => this.updateCameraPosition(), delay)\n    }\n\n    componentDidUpdate({height, showGameGraph}) {\n        if (height !== this.props.height) {\n            setTimeout(() => this.remeasure(), 200)\n        }\n\n        if (showGameGraph !== this.props.showGameGraph) {\n            setTimeout(() => this.updateCameraPosition(), 200)\n        }\n    }\n\n    getMatrixDict(tree) {\n        let hash = gametree.getMatrixHash(tree)\n\n        if (hash !== this.matrixDictHash) {\n            this.matrixDictHash = hash\n            this.matrixDictCache = gametree.getMatrixDict(tree)\n        }\n\n        return this.matrixDictCache\n    }\n\n    updateCameraPosition() {\n        let {gridSize, treePosition: [tree, index]} = this.props\n        let id = tree.id + '-' + index\n\n        let [matrix, dict] = this.getMatrixDict(gametree.getRoot(tree))\n        let [x, y] = dict[id]\n        let [width, padding] = gametree.getMatrixWidth(y, matrix)\n\n        let relX = width === 1 ? 0 : 1 - 2 * (x - padding) / (width - 1)\n        let diff = (width - 1) * gridSize / 2\n        diff = Math.min(diff, this.state.viewportSize[0] / 2 - gridSize)\n\n        this.dirty = false\n\n        this.setState({\n            matrixDict: [matrix, dict],\n            cameraPosition: [\n                x * gridSize + relX * diff - this.state.viewportSize[0] / 2,\n                y * gridSize - this.state.viewportSize[1] / 2\n            ].map(z => Math.round(z))\n        })\n    }\n\n    remeasure() {\n        if (!this.props.showGameGraph) return\n\n        let {left, top, width, height} = this.element.getBoundingClientRect()\n        this.setState({viewportSize: [width, height], viewportPosition: [left, top]})\n    }\n\n    handleGraphMouseDown(evt) {\n        this.mouseDown = evt.button\n    }\n\n    handleNodeClick(evt) {\n        if (this.drag) {\n            this.drag = false\n            return\n        }\n\n        let {onNodeClick = helper.noop, gridSize} = this.props\n        let {matrixDict: [matrix, ], cameraPosition: [cx, cy]} = this.state\n        let [mx, my] = this.mousePosition\n        let [nearestX, nearestY] = [mx + cx, my + cy].map(z => Math.round(z / gridSize))\n\n        if (!matrix[nearestY] || !matrix[nearestY][nearestX]) return\n\n        evt.treePosition = matrix[nearestY][nearestX]\n        onNodeClick(evt)\n    }\n\n    renderNodes({\n        gridSize,\n        nodeSize\n    }, {\n        matrixDict: [matrix, dict],\n        cameraPosition: [cx, cy],\n        viewportSize: [width, height],\n        viewportPosition: [vx, vy]\n    }) {\n        let nodeColumns = []\n        let edges = []\n\n        let [minX, minY] = [cx, cy].map(z => Math.max(Math.ceil(z / gridSize) - 2, 0))\n        let [maxX, maxY] = [cx, cy].map((z, i) => (z + [width, height][i]) / gridSize + 2)\n        minY -= 3\n        maxY += 3\n\n        let doneTreeBones = []\n        let currentTracks = []\n        let notCurrentTracks = []\n\n        // Render only nodes that are visible\n\n        for (let x = minX; x <= maxX; x++) {\n            let column = []\n\n            for (let y = minY; y <= maxY; y++) {\n                if (matrix[y] == null || matrix[y][x] == null) continue\n\n                let [tree, index] = matrix[y][x]\n                let node = tree.nodes[index]\n                let onCurrentTrack\n\n                if (currentTracks.includes(tree.id)) {\n                    onCurrentTrack = true\n                } else if (notCurrentTracks.includes(tree.id)) {\n                    onCurrentTrack = false\n                } else {\n                    if (!tree.parent) {\n                        onCurrentTrack = true\n                        currentTracks.push(tree.id)\n                    } else if (currentTracks.includes(tree.parent.id)) {\n                        if (tree.parent.subtrees[tree.parent.current] !== tree) {\n                            onCurrentTrack = false\n                            notCurrentTracks.push(tree.id)\n                        } else {\n                            onCurrentTrack = true\n                            currentTracks.push(tree.id)\n                        }\n                    } else if (notCurrentTracks.includes(tree.parent.id)) {\n                        onCurrentTrack = false\n                        notCurrentTracks.push(tree.id)\n                    } else {\n                        onCurrentTrack = gametree.onCurrentTrack(tree)\n\n                        if (onCurrentTrack) currentTracks.push(tree.id)\n                        else notCurrentTracks.push(tree.id)\n                    }\n                }\n\n                // Render node\n\n                let fill = nodeColor\n                if (onCurrentTrack) {\n                    fill = helper.vertexEquals(this.props.treePosition, [tree, index]) ? nodeActiveColor\n                        : 'HO' in node ? nodeBookmarkColor\n                        : commentProperties.some(x => x in node) ? nodeCommentColor\n                        : nodeColor\n                } else {\n                    fill = 'HO' in node ? nodeInactiveBookmarkColor\n                        : commentProperties.some(x => x in node) ? nodeInactiveCommentColor\n                        : nodeInactiveColor\n                }\n\n                let left = x * gridSize\n                let top = y * gridSize\n\n                column.push(h(GameGraphNode, {\n                    key: y,\n                    mouseShift: [cx - vx, cy - vy],\n                    position: [left, top],\n                    type: 'B' in node && node.B[0] === '' || 'W' in node && node.W[0] === ''\n                        ? 'square' // Pass node\n                        : !('B' in node || 'W' in node)\n                        ? 'diamond' // Non-move node\n                        : 'circle', // Normal node\n                    fill,\n                    nodeSize,\n                    gridSize\n                }))\n\n                if (!doneTreeBones.includes(tree.id)) {\n                    // A *tree bone* denotes a straight edge through the whole tree\n\n                    let positionAbove, positionBelow\n\n                    if (index === 0 && tree.parent) {\n                        // Render precedent edge with tree bone\n\n                        let [prevTree, prevIndex] = gametree.navigate(tree, index, -1)\n                        let [px, py] = dict[prevTree.id + '-' + prevIndex]\n\n                        positionAbove = [px * gridSize, py * gridSize]\n                        positionBelow = [left, top]\n                    } else {\n                        // Render tree bone only\n\n                        let [sx, sy] = dict[tree.id + '-0']\n\n                        positionAbove = [sx * gridSize, sy * gridSize]\n                        positionBelow = positionAbove\n                    }\n\n                    if (positionAbove != null && positionBelow != null) {\n                        edges[!onCurrentTrack ? 'unshift' : 'push'](h(GameGraphEdge, {\n                            key: tree.id,\n                            positionAbove,\n                            positionBelow,\n                            length: (tree.nodes.length - 1) * gridSize,\n                            current: onCurrentTrack,\n                            gridSize\n                        }))\n\n                        doneTreeBones.push(tree.id)\n                    }\n                }\n\n                if (index === tree.nodes.length - 1) {\n                    // Render successor edges with subtree bones\n\n                    for (let subtree of tree.subtrees) {\n                        let current = onCurrentTrack && tree.subtrees[tree.current] === subtree\n                        let [nx, ny] = dict[subtree.id + '-0']\n\n                        edges[!current ? 'unshift' : 'push'](h(GameGraphEdge, {\n                            key: subtree.id,\n                            positionAbove: [left, top],\n                            positionBelow: [nx * gridSize, ny * gridSize],\n                            length: (subtree.nodes.length - 1) * gridSize,\n                            current,\n                            gridSize\n                        }))\n\n                        doneTreeBones.push(subtree.id)\n                    }\n                }\n            }\n\n            if (column.length > 0) nodeColumns.push(h('g', {key: x}, column))\n        }\n\n        return [h('g', {}, edges), h('g', {}, nodeColumns)]\n    }\n\n    render({\n        height,\n        treePosition,\n        showGameGraph\n    }, {\n        matrixDict,\n        viewportSize,\n        cameraPosition: [cx, cy]\n    }) {\n        return h('section',\n            {\n                ref: el => this.element = el,\n                id: 'graph'\n            },\n\n            h('style', {}, `\n                #graph {\n                    height: ${height}%;\n                }\n                #graph svg > * {\n                    transform: translate(${-cx}px, ${-cy}px);\n                }\n            `),\n\n            showGameGraph && matrixDict && viewportSize && h('svg',\n                {\n                    ref: el => this.svgElement = el,\n                    width: viewportSize[0],\n                    height: viewportSize[1],\n\n                    onClick: this.handleNodeClick,\n                    onContextMenu: this.handleNodeClick,\n                    onMouseDown: this.handleGraphMouseDown,\n                    onMouseUp: this.handleGraphMouseUp\n                },\n\n                this.renderNodes(this.props, this.state)\n            )\n        )\n    }\n}\n\nmodule.exports = GameGraph\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/GameGraph.js","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\nconst ContentDisplay = require('./ContentDisplay')\n\nconst boardmatcher = require('../modules/boardmatcher')\nconst gametree = require('../modules/gametree')\nconst helper = require('../modules/helper')\nconst setting = remote.require('./setting')\nconst {sgf} = require('../modules/fileformats')\nconst Board = require('../modules/board')\n\nclass CommentTitle extends Component {\n    constructor() {\n        super()\n\n        this.handleEditButtonClick = () => sabaki.setMode('edit')\n    }\n\n    shouldComponentUpdate({treePosition, moveAnnotation, positionAnnotation, title}) {\n        let [tree, index] = treePosition\n\n        return title !== this.props.title\n            // First node\n            || !tree.parent && index === 0\n            // Last node\n            || tree.subtrees.length === 0 && index === tree.nodes.length - 1\n            // Other data changed\n            || treePosition !== this.props.treePosition\n            || !helper.vertexEquals(moveAnnotation, this.props.moveAnnotation)\n            || !helper.vertexEquals(positionAnnotation, this.props.positionAnnotation)\n    }\n\n    getCurrentMoveInterpretation() {\n        let {treePosition: [tree, index], board} = this.props\n        let node = tree.nodes[index]\n\n        // Determine root node\n\n        if (!tree.parent && index === 0) {\n            let result = []\n\n            if ('EV' in node) result.push(node.EV[0])\n            if ('GN' in node) result.push(node.GN[0])\n\n            result = result.filter(x => x.trim() !== '').join(' — ')\n            if (result !== '')\n                return result\n\n            let today = new Date()\n            if (today.getDate() === 25 && today.getMonth() === 3)\n                return 'Happy Birthday, Sabaki!'\n        }\n\n        // Determine end of main variation and show game result\n\n        if (tree.subtrees.length === 0\n        && index === tree.nodes.length - 1\n        && gametree.onMainTrack(tree)) {\n            let rootNode = gametree.getRoot(tree).nodes[0]\n\n            if ('RE' in rootNode && rootNode.RE[0].trim() !== '')\n                return 'Result: ' + rootNode.RE[0]\n        }\n\n        // Determine capture\n\n        let ptp = gametree.navigate(tree, index, -1)\n\n        if (ptp) {\n            let prevBoard = ptp[0].nodes[ptp[1]].board || gametree.getBoard(...ptp)\n\n            if (!helper.vertexEquals(prevBoard.captures, board.captures))\n                return 'Take'\n        }\n\n        // Get current vertex\n\n        let vertex\n\n        if ('B' in node && node.B[0] !== '')\n            vertex = sgf.point2vertex(node.B[0])\n        else if ('W' in node && node.W[0] !== '')\n            vertex = sgf.point2vertex(node.W[0])\n        else if ('W' in node || 'B' in node)\n            return 'Pass'\n        else\n            return ''\n\n        return boardmatcher.getMoveInterpretation(board, vertex) || ''\n    }\n\n    render({\n        moveAnnotation: [ma, mv],\n        positionAnnotation: [pa, pv],\n        title\n    }) {\n        let moveData = {\n            '-1': ['Bad move', 'badmove'],\n            '0': ['Doubtful move', 'doubtfulmove'],\n            '1': ['Interesting move', 'interestingmove'],\n            '2': ['Good move', 'goodmove']\n        }\n\n        if (mv > 1) {\n            for (let s in moveData) {\n                moveData[s][0] = 'Very ' + moveData[s][0].toLowerCase()\n            }\n        }\n\n        let positionData = {\n            '-1': ['Good for white', 'white'],\n            '0': ['Even position', 'balance'],\n            '1': ['Good for black', 'black'],\n            '-2': ['Unclear position', 'unclear']\n        }\n\n        if (pv > 1) {\n            for (let s in positionData) {\n                positionData[s][0] = 'Very ' + positionData[s][0].toLowerCase()\n            }\n        }\n\n        let showMoveInterpretation = setting.get('comments.show_move_interpretation')\n\n        return h('p',\n            {\n                class: classNames({\n                    header: true,\n                    movestatus: ma !== null,\n                    positionstatus: pa !== null\n                })\n            },\n\n            h('img', {\n                width: 16,\n                height: 16,\n                class: 'positionstatus',\n                title: pa in positionData ? positionData[pa][0] : '',\n                src: pa in positionData ? `./img/ui/${positionData[pa][1]}.svg` : ''\n            }),\n\n            h('img', {\n                width: 16,\n                height: 16,\n                class: 'movestatus',\n                title: ma in moveData ? moveData[ma][0] : '',\n                src: ma in moveData ? `./img/ui/${moveData[ma][1]}.svg` : ''\n            }),\n\n            h('img', {\n                src: './node_modules/octicons/build/svg/pencil.svg',\n                class: 'edit-button',\n                title: 'Edit',\n                width: 16,\n                height: 16,\n                onClick: this.handleEditButtonClick\n            }),\n\n            h('span', {}, title !== '' ? title\n                : showMoveInterpretation ? this.getCurrentMoveInterpretation()\n                : '')\n        )\n    }\n}\n\nclass CommentText extends Component {\n    shouldComponentUpdate({board, comment}) {\n        return comment !== this.props.comment\n            || board.width !== this.props.board.width\n            || board.height !== this.props.board.height\n    }\n\n    render({board, comment}) {\n        return h('div', {\n            ref: el => this.element = el,\n            class: 'comment'\n        }, h(ContentDisplay, {\n            tag: 'div',\n            board,\n            dangerouslySetInnerHTML: {__html: helper.markdown(comment)}\n        }))\n    }\n}\n\nclass CommentBox extends Component {\n    constructor(props) {\n        super()\n\n        this.state = {\n            board: new Board()\n        }\n\n        this.handleCommentInput = () => {\n            let {onCommentInput = helper.noop} = this.props\n\n            onCommentInput({\n                title: this.titleInputElement.value,\n                comment: this.textareaElement.value\n            })\n        }\n\n        this.handleMenuButtonClick = () => {\n            let {left, bottom} = this.menuButtonElement.getBoundingClientRect()\n\n            sabaki.openCommentMenu(...this.props.treePosition, {\n                x: Math.round(left),\n                y: Math.round(bottom)\n            })\n        }\n    }\n\n    shouldComponentUpdate({showCommentBox, height}) {\n        return height !== this.props.height || showCommentBox && !this.dirty\n    }\n\n    componentWillReceiveProps({treePosition, mode}) {\n        if (mode === 'edit') return\n\n        // Debounce rendering\n\n        this.dirty = true\n\n        let treePositionChanged = treePosition !== this.props.treePosition\n\n        clearTimeout(this.updateId)\n        this.updateId = setTimeout(() => {\n            this.dirty = false\n\n            if (treePositionChanged) {\n                this.setState({\n                    board: gametree.getBoard(...this.props.treePosition)\n                })\n\n                if (this.props.mode === 'edit') {\n                    this.element.scrollTop = 0\n                    if (treePositionChanged) this.textareaElement.scrollTop = 0\n                }\n\n                this.element.scrollTop = 0\n            } else {\n                this.setState(this.state)\n            }\n        }, setting.get('graph.delay'))\n    }\n\n    render({\n        treePosition,\n        height,\n        sidebarSplitTransition,\n        moveAnnotation,\n        positionAnnotation,\n        title,\n        comment,\n\n        onResizerMouseDown = helper.noop,\n        onLinkClick = helper.noop,\n        onCoordinateMouseEnter = helper.noop,\n        onCoordinateMouseLeave = helper.noop\n    }, {\n        board\n    }) {\n        return h('section',\n            {\n                ref: el => this.element = el,\n                id: 'properties',\n                style: {\n                    transition: sidebarSplitTransition ? null : 'none',\n                    height: height + '%'\n                }\n            },\n\n            h('div', {\n                class: 'horizontalresizer',\n                onMouseDown: onResizerMouseDown\n            }),\n\n            h('div', {class: 'inner'},\n                h(CommentTitle, {\n                    board,\n                    treePosition,\n                    moveAnnotation,\n                    positionAnnotation,\n                    title\n                }),\n\n                h(CommentText, {\n                    board,\n                    comment,\n                    onLinkClick,\n                    onCoordinateMouseEnter,\n                    onCoordinateMouseLeave\n                })\n            ),\n\n            h('div', {class: 'edit'},\n                h('div', {class: 'header'},\n                    h('img', {\n                        ref: el => this.menuButtonElement = el,\n                        src: './node_modules/octicons/build/svg/chevron-down.svg',\n                        width: 16,\n                        height: 16,\n                        onClick: this.handleMenuButtonClick\n                    }),\n\n                    h('div', {},\n                        h('input', {\n                            ref: el => this.titleInputElement = el,\n                            type: 'text',\n                            name: 'title',\n                            value: title,\n                            placeholder: 'Title',\n                            onInput: this.handleCommentInput\n                        })\n                    )\n                ),\n\n                h('textarea', {\n                    ref: el => this.textareaElement = el,\n                    placeholder: 'Comment',\n                    value: comment,\n                    onInput: this.handleCommentInput\n                })\n            )\n        )\n    }\n}\n\nmodule.exports = CommentBox\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CommentBox.js","const {shell} = require('electron')\nconst {h, Component} = require('preact')\n\nconst gametree = require('../modules/gametree')\nconst helper = require('../modules/helper')\n\nclass ContentDisplay extends Component {\n    componentDidMount() {\n        this.componentDidUpdate()\n    }\n\n    componentDidUpdate() {\n        // Handle link clicks\n\n        for (let el of this.element.querySelectorAll('a')) {\n            el.addEventListener('click', evt => {\n                let linkElement = evt.currentTarget\n\n                if (linkElement.classList.contains('external')) {\n                    evt.preventDefault()\n                    shell.openExternal(linkElement.href)\n                } else if (linkElement.classList.contains('movenumber')) {\n                    evt.preventDefault()\n                    let moveNumber = +linkElement.innerText.slice(1)\n\n                    sabaki.setUndoPoint('Go Back')\n                    sabaki.goToMainVariation()\n                    sabaki.goToMoveNumber(moveNumber)\n                }\n            })\n        }\n\n        // Hover on coordinates\n\n        for (let el of this.element.querySelectorAll('.coord')) {\n            el.addEventListener('mouseenter', evt => {\n                let {board} = this.props\n                let vertex = board.coord2vertex(el.innerText)\n                sabaki.setState({highlightVertices: [vertex]})\n            })\n\n            el.addEventListener('mouseleave', evt => {\n                sabaki.setState({highlightVertices: []})\n            })\n        }\n    }\n\n    render({tag}) {\n        return h(tag, Object.assign({ref: el => this.element = el}, this.props))\n    }\n}\n\nmodule.exports = ContentDisplay\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ContentDisplay.js","module.exports = \"(;GM[1]AP[Sabaki:0.30.0]CA[UTF-8]SZ[19]\\n(;AB[dd][kc][qd]N[Low Chinese opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[kc][dd][qd]\\n)(;AB[dd][kd][qd]N[High Chinese opening]AE[so]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][ld][md][nd][od][pd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dd][kd][qd]\\n)(;AB[dd][pc][qe]N[Orthodox opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][re][se][af][bf][cf][df][ef][ff][gf][hf][if][jf][kf][lf][mf][nf][of][pf][qf][rf][sf]MA[pc][dd][qe]\\n)(;AB[cd][pc][qe]N[Orthodox opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][qc][rc][sc][ad][bd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][re][se][af][bf][cf][df][ef][ff][gf][hf][if][jf][kf][lf][mf][nf][of][pf][qf][rf][sf]MA[pc][cd][qe]\\n)(;AB[dc][nc][jd]AW[pd]N[Kobayashi opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][ec][fc][gc][hc][ic][jc][kc][lc][mc][oc][pc][qc][rc][sc][ad][bd][cd][dd][ed][fd][gd][hd][id][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dc][nc][jd][pd]\\n)(;AB[cd][nc][ic]AW[pd]N[Small Chinese opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][jc][kc][lc][mc][oc][pc][qc][rc][sc][ad][bd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[ic][nc][cd][pd]\\n)(;AB[cd][hc][nc]AW[pd]N[Micro Chinese opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][ic][jc][kc][lc][mc][oc][pc][qc][rc][sc][ad][bd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[hc][nc][cd][pd]\\n)(;AB[pd][jd][dd]N[Sanrensei opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dd][jd][pd]\\n)(;AB[dd][pd]N[Nirensei opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][dc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][oc][pc][qc][rc][sc][ad][bd][cd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][qd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][pe][qe][re][se]MA[dd][pd]\\n)(;AB[qd][pq][cp][pe]AW[dc][oc][qo]N[Shūsaku opening]C[size: 19, type: corner]CR[aa][ba][ca][da][ea][fa][ga][ha][ia][ja][ka][la][ma][na][oa][pa][qa][ra][sa][ab][bb][cb][db][eb][fb][gb][hb][ib][jb][kb][lb][mb][nb][ob][pb][qb][rb][sb][ac][bc][cc][ec][fc][gc][hc][ic][jc][kc][lc][mc][nc][pc][qc][rc][sc][ad][bd][cd][dd][ed][fd][gd][hd][id][jd][kd][ld][md][nd][od][pd][rd][sd][ae][be][ce][de][ee][fe][ge][he][ie][je][ke][le][me][ne][oe][qe][re][se][af][bf][cf][df][ef][ff][gf][hf][if][jf][kf][lf][mf][nf][of][pf][qf][rf][sf][ag][bg][cg][dg][eg][fg][gg][hg][ig][jg][kg][lg][mg][ng][og][pg][qg][rg][sg][ah][bh][ch][dh][eh][fh][gh][hh][ih][jh][kh][lh][mh][nh][oh][ph][qh][rh][sh][ai][bi][ci][di][ei][fi][gi][hi][ii][ji][ki][li][mi][ni][oi][pi][qi][ri][si][aj][bj][cj][dj][ej][fj][gj][hj][ij][jj][kj][lj][mj][nj][oj][pj][qj][rj][sj][ak][bk][ck][dk][ek][fk][gk][hk][ik][jk][kk][lk][mk][nk][ok][pk][qk][rk][sk][al][bl][cl][dl][el][fl][gl][hl][il][jl][kl][ll][ml][nl][ol][pl][ql][rl][sl][am][bm][cm][dm][em][fm][gm][hm][im][jm][km][lm][mm][nm][om][pm][qm][rm][sm][an][bn][cn][dn][en][fn][gn][hn][in][jn][kn][ln][mn][nn][on][pn][qn][rn][sn][ao][bo][co][do][eo][fo][go][ho][io][jo][ko][lo][mo][no][oo][po][ro][so][ap][bp][dp][ep][fp][gp][hp][ip][jp][kp][lp][mp][np][op][pp][qp][rp][sp][aq][bq][cq][dq][eq][fq][gq][hq][iq][jq][kq][lq][mq][nq][oq][qq][rq][sq][ar][br][cr][dr][er][fr][gr][hr][ir][jr][kr][lr][mr][nr][or][pr][qr][rr][sr][as][bs][cs][ds][es][fs][gs][hs][is][js][ks][ls][ms][ns][os][ps][qs][rs][ss]MA[dc][oc][qd][pe][qo][cp][pq]\\n)(;AE[oc][qd]AB[qc]N[3-3 point]C[type: corner]CR[qa][ra][sa][qb][rb][sb][rc][sc]MA[qc]\\n)(;AW[qd]AB[oc]N[Low approach]C[type: corner]CR[na][nb][nc][nd][ne][oa][ob][od][oe][pa][pb][pc][pd][pe][qa][qb][qc][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[oc]\\n)(;AW[pd]AB[nc]N[Low approach]C[type: corner]CR[ma][mb][mc][md][me][na][nb][nd][ne][oa][ob][oc][od][oe][pa][pb][pc][pe][qa][qb][qc][qd][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[nc]\\n)(;AW[qd]AB[od]N[High approach]C[type: corner]CR[na][nb][nc][nd][ne][oa][ob][oc][oe][pa][pb][pc][pd][pe][qa][qb][qc][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[od]\\n)(;AW[pd]AB[nd]N[High approach]C[type: corner]CR[ma][mb][mc][md][me][na][nb][nc][ne][oa][ob][oc][od][oe][pa][pb][pc][pe][qa][qb][qc][qd][qe][ra][rb][rc][rd][re][sa][sb][sc][sd][se]MA[nd]\\n)(;AB[oc][qd]N[Low enclosure]C[type: corner]CR[na][oa][pa][qa][ra][sa][nb][ob][pb][qb][rb][sb][nc][pc][qc][rc][sc][nd][od][pd][rd][sd][ne][oe][pe][qe][re][se]MA[oc][qd]\\n)(;AB[nc][pd]N[Low enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][oc][pc][qc][rc][sc][md][nd][od][qd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nc][pd]\\n)(;AB[od][qd]N[High enclosure]C[type: corner]CR[na][oa][pa][qa][ra][sa][nb][ob][pb][qb][rb][sb][nc][oc][pc][qc][rc][sc][nd][pd][rd][sd][ne][oe][pe][qe][re][se]MA[od][qd]\\n)(;AB[nd][pd]N[High enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][nc][oc][pc][qc][rc][sc][md][od][qd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nd][pd]\\n)(;AB[nc][qd]N[Low enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][oc][pc][qc][rc][sc][md][nd][od][pd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nc][qd]\\n)(;AB[mc][pd]N[Low enclosure]C[type: corner]CR[la][ma][na][oa][pa][qa][ra][sa][lb][mb][nb][ob][pb][qb][rb][sb][lc][nc][oc][pc][qc][rc][sc][ld][md][nd][od][qd][rd][sd][le][me][ne][oe][pe][qe][re][se]MA[mc][pd]\\n)(;AB[nd][qd]N[High enclosure]C[type: corner]CR[ma][na][oa][pa][qa][ra][sa][mb][nb][ob][pb][qb][rb][sb][mc][nc][oc][pc][qc][rc][sc][md][od][pd][rd][sd][me][ne][oe][pe][qe][re][se]MA[nd][qd]\\n)(;AB[md][pd]N[High enclosure]C[type: corner]CR[la][ma][na][oa][pa][qa][ra][sa][lb][mb][nb][ob][pb][qb][rb][sb][lc][mc][nc][oc][pc][qc][rc][sc][ld][nd][od][qd][rd][sd][le][me][ne][oe][pe][qe][re][se]MA[md][pd]\\n)(;AB[dd][de][ef][ff][fd]N[Mouth shape]CR[ec][ed][fe][ge]MA[dd][fd][de][ef][ff]\\n)(;AB[dd][de][fd][ff]N[Table shape]MA[dd][fd][de][ff]CR[ed][ee][fe][ge]\\n)(;AB[dd][ed][df][fg]N[Tippy table]CR[de][ee][ef][ff]MA[fg]\\n)(;AB[dd][ed][df][ef]N[Bamboo joint]MA[dd][ed][df][ef]CR[de][ee]\\n)(;AB[dd][de][fd][ge]N[Trapezium]CR[ed][gd][ee][fe][ff]MA[fd][ge]\\n)(;AB[dd][ce][ee][df]N[Diamond]MA[dd][ce][ee][df]CR[de]\\n)(;AB[dd][ee][fd]N[Tiger’s mouth]CR[ec][ed]MA[dd][fd][ee]\\n)(;AB[dd][de][ed]N[Empty triangle]MA[dd][ed][de]CR[ee]\\n)(;AB[dd][ed][ee]AW[de]N[Turn]MA[dd][ee]\\n)(;AB[dd][de]N[Stretch]MA[dd][de]\\n)(;AB[dd][ee]N[Diagonal]MA[dd][ee]CR[ed][de]\\n)(;AB[dd]AW[ed][cd]N[Wedge]CR[dc][de]MA[dd]\\n)(;AB[dd][ee]AW[ed]N[Hane]MA[dd][ee]CR[de]\\n)(;AB[dd][ee]AW[ed][de]N[Cut]MA[dd][ee]\\n)(;AB[dd][fd][ff][df]N[Square]MA[dd][fd][df][ff]CR[ee]\\n)(;AB[dd][fe][df][fg]N[Parallelogram]MA[dd][fe][df][fg]CR[ee][ef]\\n)(;AB[dd][df][fe]N[Dog’s head]MA[dd][fe][df]CR[ed][de][ee][ef]\\n)(;AB[dd][df][ge]N[Horse’s head]MA[dd][ge][df]CR[ed][de][ee][fe][ef]\\n)(;AB[dd]AW[ed]N[Attachment]CR[dc][ec][de][ee]MA[dd]\\n)(;AB[dd][fd]N[One-point jump]MA[dd][fd]CR[ed]\\n)(;AB[dd][fe][eg]N[Big bulge]MA[dd][fe][eg]CR[ee][ef]\\n)(;AB[dd][fe]N[Small knight]MA[dd][fe]CR[ed][ee]\\n)(;AB[dd][gd]N[Two-point jump]MA[dd][gd]CR[ed][fd]\\n)(;AB[dd][ge]N[Large knight]MA[dd][ge]CR[ed][fd][ee][fe]\\n)(;AB[dd]AW[ee]N[Shoulder hit]CR[cc][dc][ec][cd][ed][ce][de]MA[dd]\\n)(;AB[dd][ff]N[Diagonal jump]MA[dd][ff]CR[ed][de][ee][fe][ef]\\n))\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./data/shapes.sgf\n// module id = 42\n// module chunks = 0","const {h, Component} = require('preact')\nconst gametree = require('../modules/gametree')\n\nconst InfoDrawer = require('./drawers/InfoDrawer')\nconst ScoreDrawer = require('./drawers/ScoreDrawer')\nconst PreferencesDrawer = require('./drawers/PreferencesDrawer')\nconst GameChooserDrawer = require('./drawers/GameChooserDrawer')\nconst CleanMarkupDrawer = require('./drawers/CleanMarkupDrawer')\n\nclass DrawerManager extends Component {\n    constructor() {\n        super()\n\n        this.handleScoreSubmit = ({resultString}) => {\n            this.props.rootTree.nodes[0].RE = [resultString]\n            sabaki.closeDrawer()\n            setTimeout(() => sabaki.setMode('play'), 500)\n        }\n\n        this.handleGameSelect = ({selectedTree}) => {\n            sabaki.closeDrawer()\n            sabaki.setMode('play')\n            sabaki.setCurrentTreePosition(selectedTree, 0)\n        }\n\n        this.handleGameTreesChange = evt => {\n            let newGameTrees = evt.gameTrees\n            let {gameTrees, gameIndex, rootTree} = this.props\n\n            if (!newGameTrees.includes(rootTree)) {\n                if (newGameTrees.length === 0) {\n                    newGameTrees = [sabaki.getEmptyGameTree()]\n                }\n\n                let newIndex = Math.min(Math.max(gameIndex - 1, 0), newGameTrees.length - 1)\n                let newTreePosition = [newGameTrees[newIndex], 0]\n\n                sabaki.setCurrentTreePosition(...newTreePosition)\n            }\n\n            sabaki.setState({gameTrees: newGameTrees})\n        }\n    }\n\n    render({\n        mode,\n        openDrawer,\n        gameTrees,\n        gameIndex,\n        treePosition,\n        rootTree,\n\n        gameInfo,\n        currentPlayer,\n\n        scoringMethod,\n        scoreBoard,\n        areaMap,\n\n        engines,\n        attachedEngines,\n        graphGridSize,\n        preferencesTab\n    }) {\n        return h('section', {},\n            h(InfoDrawer, {\n                show: openDrawer === 'info',\n                engines: attachedEngines,\n                treePosition,\n                gameInfo,\n                currentPlayer\n            }),\n\n            h(PreferencesDrawer, {\n                show: openDrawer === 'preferences',\n                tab: preferencesTab,\n                engines,\n                graphGridSize\n            }),\n\n            h(GameChooserDrawer, {\n                show: openDrawer === 'gamechooser',\n                gameTrees,\n                gameIndex,\n\n                onItemClick: this.handleGameSelect,\n                onChange: this.handleGameTreesChange\n            }),\n\n            h(CleanMarkupDrawer, {\n                show: openDrawer === 'cleanmarkup',\n                treePosition\n            }),\n\n            h(ScoreDrawer, {\n                show: openDrawer === 'score',\n                estimating: mode === 'estimator',\n                areaMap,\n                board: scoreBoard,\n                method: scoringMethod,\n                komi: +gametree.getRootProperty(treePosition[0], 'KM', 0),\n\n                onSubmitButtonClick: this.handleScoreSubmit\n            })\n        )\n    }\n}\n\nmodule.exports = DrawerManager\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DrawerManager.js","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\nconst Pikaday = require('pikaday')\n\nconst Drawer = require('./Drawer')\n\nconst gametree = require('../../modules/gametree')\nconst helper = require('../../modules/helper')\nconst setting = remote.require('./setting')\nconst {sgf} = require('../../modules/fileformats')\n\nclass InfoDrawerItem extends Component {\n    render({title, children}) {\n        return h('li', {},\n            h('label', {},\n                h('span', {}, title + ':'),\n                children[0]\n            ),\n            children.slice(1)\n        )\n    }\n}\n\nclass InfoDrawer extends Component {\n    constructor() {\n        super()\n\n        this.handleSubmitButtonClick = evt => {\n            evt.preventDefault()\n\n            let [tree, index] = this.props.treePosition\n            let emptyTree = !tree.parent && tree.nodes.length === 1 && tree.subtrees.length === 0\n\n            let keys = ['blackName', 'blackRank', 'whiteName', 'whiteRank',\n                'gameName', 'eventName', 'date', 'result', 'komi']\n\n            let data = keys.reduce((acc, key) => {\n                acc[key] = Array.isArray(this.state[key])\n                    && this.state[key].every(x => x == null) ? null : this.state[key]\n                return acc\n            }, {})\n\n            if (emptyTree) {\n                data.handicap = this.state.handicap\n                data.size = this.state.size\n            }\n\n            sabaki.setGameInfo(this.props.treePosition[0], data)\n            sabaki.closeDrawer()\n            sabaki.attachEngines(...this.state.engines)\n\n            sabaki.setState(sabaki.state, () => {\n                let i = this.props.currentPlayer > 0 ? 0 : 1\n\n                if (sabaki.attachedEngineControllers[i] != null) {\n                    sabaki.startGeneratingMoves()\n                }\n            })\n        }\n\n        this.handleCancelButtonClick = evt => {\n            evt.preventDefault()\n            sabaki.closeDrawer()\n        }\n\n        this.handleBoardWidthFocus = () => {\n            this.combinedSizeFields = this.state.size[0] === this.state.size[1]\n        }\n\n        this.handleBoardWidthChange = evt => {\n            let {value} = evt.currentTarget\n            if (value === '') value = null\n\n            this.setState(({size: [, height]}) => ({\n                size: [value, this.combinedSizeFields ? value : height]\n            }))\n        }\n\n        this.handleBoardHeightChange = evt => {\n            let {value} = evt.currentTarget\n            if (value === '') value = null\n\n            this.setState(({size: [width, ]}) => ({size: [width, value]}))\n        }\n\n        this.handleSizeSwapButtonClick = () => {\n            this.setState(({size}) => ({size: size.reverse()}))\n        }\n\n        this.handleSwapPlayers = () => {\n            this.setState(({engines, blackName, blackRank, whiteName, whiteRank}) => ({\n                engines: (engines || [null, null]).reverse(),\n                blackName: whiteName,\n                whiteName: blackName,\n                blackRank: whiteRank,\n                whiteRank: blackRank\n            }))\n        }\n\n        this.handleDateInputChange = evt => {\n            this.setState({date: evt.currentTarget.value})\n            this.markDates()\n        }\n\n        this.handleDateInputFocus = () => {\n            this.pikaday.show()\n        }\n\n        this.handleDateInputBlur = () => {\n            setTimeout(() => {\n                if (!this.elementInPikaday(document.activeElement))\n                    this.pikaday.hide()\n            }, 50)\n        }\n\n        this.handleShowResultClick = () => {\n            this.setState({showResult: true})\n        }\n\n        this.handleInputChange = [\n            'blackRank', 'blackName',\n            'whiteRank', 'whiteName',\n            'gameName', 'eventName',\n            'komi', 'result', 'handicap'\n        ].reduce((acc, key) => {\n            acc[key] = ({currentTarget}) => {\n                this.setState({[key]: currentTarget.value === '' ? null : currentTarget.value})\n            }\n\n            return acc\n        }, {})\n\n        this.handleEngineMenuClick = [0, 1].map(index => evt => {\n            let engines = setting.get('engines.list')\n            let nameKey = ['blackName', 'whiteName'][index]\n            let autoName = this.state.engines[index] == null\n                ? this.state[nameKey] == null\n                : this.state[nameKey] === this.state.engines[index].name.trim()\n\n            let template = [\n                {\n                    label: 'Manual',\n                    type: 'checkbox',\n                    checked: this.state.engines[index] == null,\n                    click: () => {\n                        let {engines} = this.state\n                        if (engines[index] == null) return\n\n                        engines[index] = null\n\n                        this.setState({\n                            engines,\n                            [nameKey]: autoName ? null : this.state[nameKey]\n                        })\n                    }\n                },\n                {type: 'separator'},\n                ...engines.map(engine => ({\n                    label: engine.name.trim() || '(Unnamed Engine)',\n                    type: 'checkbox',\n                    checked: engine === this.state.engines[index],\n                    click: () => {\n                        let {engines} = this.state\n                        engines[index] = engine\n\n                        this.setState({\n                            engines,\n                            [nameKey]: autoName ? engine.name.trim() : this.state[nameKey]\n                        })\n                    }\n                })),\n                engines.length > 0 && {type: 'separator'},\n                {\n                    label: 'Manage Engines…',\n                    click: () => {\n                        sabaki.setState({preferencesTab: 'engines'})\n                        sabaki.openDrawer('preferences')\n                    }\n                }\n            ].filter(x => !!x)\n\n            let {left, bottom} = evt.currentTarget.getBoundingClientRect()\n\n            helper.popupMenu(template, left, bottom)\n        })\n    }\n\n    componentWillReceiveProps({gameInfo, engines, show}) {\n        if (!this.props.show && show) {\n            this.setState(Object.assign({}, gameInfo, {\n                engines: [...engines],\n                showResult: !gameInfo.result || gameInfo.result.trim() === ''\n            }))\n        }\n    }\n\n    componentDidMount() {\n        this.preparePikaday()\n    }\n\n    shouldComponentUpdate({show}) {\n        return show !== this.props.show || show\n    }\n\n    markDates() {\n        let dates = (sgf.string2dates(this.state.date || '') || []).filter(x => x.length === 3)\n\n        for (let el of this.pikaday.el.querySelectorAll('.pika-button')) {\n            let year = +el.dataset.pikaYear\n            let month = +el.dataset.pikaMonth\n            let day = +el.dataset.pikaDay\n\n            el.parentElement.classList.toggle('is-multi-selected', dates.some(d => {\n                return helper.shallowEquals(d, [year, month + 1, day])\n            }))\n        }\n    }\n\n    adjustPikadayPosition() {\n        let {left, top} = this.dateInputElement.getBoundingClientRect()\n        let {el} = this.pikaday\n        let {height} = el.getBoundingClientRect()\n\n        el.style.position = 'absolute'\n        el.style.left = Math.round(left) + 'px'\n        el.style.top = Math.round(top - height) + 'px'\n    }\n\n    elementInPikaday(element) {\n        while (element.parentElement) {\n            if (element === this.pikaday.el) return true\n            element = element.parentElement\n        }\n\n        return false\n    }\n\n    preparePikaday() {\n        this.pikaday = new Pikaday({\n            position: 'top left',\n            firstDay: 1,\n            yearRange: 6,\n            keyboardInput: false,\n\n            onOpen: () => {\n                if (!this.pikaday) return\n\n                let dates = (sgf.string2dates(this.state.date || '') || []).filter(x => x.length === 3)\n\n                if (dates.length > 0) {\n                    this.pikaday.setDate(dates[0].join('-'), true)\n                } else {\n                    this.pikaday.gotoToday()\n                }\n\n                this.adjustPikadayPosition()\n            },\n            onDraw: () => {\n                if (!this.pikaday || !this.pikaday.isVisible()) return\n\n                this.adjustPikadayPosition()\n                this.markDates()\n\n                this.dateInputElement.focus()\n            },\n            onSelect: date => {\n                if (!this.pikaday) return\n\n                let dates = sgf.string2dates(this.state.date || '') || []\n                date = [date.getFullYear(), date.getMonth() + 1, date.getDate()]\n\n                if (!dates.some(x => helper.shallowEquals(x, date))) {\n                    dates.push(date)\n                } else {\n                    dates = dates.filter(x => !helper.shallowEquals(x, date))\n                }\n\n                this.setState({date: sgf.dates2string(dates.sort(helper.lexicalCompare))})\n                this.markDates()\n            }\n        })\n\n        // Hack for removing keyboard input support of Pikaday\n        document.removeEventListener('keydown', this.pikaday._onKeyChange)\n\n        this.pikaday.hide()\n\n        document.body.appendChild(this.pikaday.el)\n        document.body.addEventListener('click', evt => {\n            if (this.pikaday.isVisible()\n            && document.activeElement !== this.dateInputElement\n            && evt.target !== this.dateInputElement\n            && !this.elementInPikaday(evt.target))\n                this.pikaday.hide()\n        })\n\n        window.addEventListener('resize', () => this.adjustPikadayPosition())\n    }\n\n    render({\n        treePosition,\n        currentPlayer,\n        show\n    }, {\n        showResult = false,\n        engines = [null, null],\n        blackName = null,\n        blackRank = null,\n        whiteName = null,\n        whiteRank = null,\n        gameName = null,\n        eventName = null,\n        date = null,\n        result = null,\n        komi = null,\n        handicap = 0,\n        size = [null, null]\n    }) {\n        let [tree, index] = treePosition\n        let emptyTree = !tree.parent && tree.nodes.length === 1 && tree.subtrees.length === 0\n\n        return h(Drawer,\n            {\n                type: 'info',\n                show\n            },\n\n            h('form', {},\n                h('section', {},\n                    h('span', {},\n                        false && h('img', {\n                            src: './node_modules/octicons/build/svg/chevron-down.svg',\n                            width: 16,\n                            height: 16,\n                            class: classNames({menu: true, active: engines[0] != null}),\n                            onClick: this.handleEngineMenuClick[0]\n                        }), ' ',\n\n                        h('input', {\n                            type: 'text',\n                            name: 'rank_1',\n                            placeholder: 'Rank',\n                            value: blackRank,\n                            onInput: this.handleInputChange.blackRank\n                        }),\n\n                        h('input', {\n                            type: 'text',\n                            name: 'name_1',\n                            placeholder: 'Black',\n                            value: blackName,\n                            onInput: this.handleInputChange.blackName\n                        })\n                    ),\n\n                    h('img', {\n                        class: 'current-player',\n                        src: `./img/ui/player_${currentPlayer}.svg`,\n                        height: 31,\n                        title: 'Swap',\n                        onClick: this.handleSwapPlayers\n                    }),\n\n                    h('span', {},\n                        h('input', {\n                            type: 'text',\n                            name: 'name_-1',\n                            placeholder: 'White',\n                            value: whiteName,\n                            onInput: this.handleInputChange.whiteName\n                        }),\n\n                        h('input', {\n                            type: 'text',\n                            name: 'rank_-1',\n                            placeholder: 'Rank',\n                            value: whiteRank,\n                            onInput: this.handleInputChange.whiteRank\n                        }), ' ',\n\n                        false && h('img', {\n                            src: './node_modules/octicons/build/svg/chevron-down.svg',\n                            width: 16,\n                            height: 16,\n                            class: classNames({menu: true, active: engines[1] != null}),\n                            onClick: this.handleEngineMenuClick[1]\n                        })\n                    )\n                ),\n\n                h('ul', {},\n                    h(InfoDrawerItem, {title: 'Name'},\n                        h('input', {\n                            type: 'text',\n                            placeholder: '(Unnamed)',\n                            value: gameName,\n                            onInput: this.handleInputChange.gameName\n                        })\n                    ),\n                    h(InfoDrawerItem, {title: 'Event'},\n                        h('input', {\n                            type: 'text',\n                            placeholder: 'None',\n                            value: eventName,\n                            onInput: this.handleInputChange.eventName\n                        })\n                    ),\n                    h(InfoDrawerItem, {title: 'Date'},\n                        h('input', {\n                            ref: el => this.dateInputElement = el,\n                            type: 'text',\n                            placeholder: 'None',\n                            value: date,\n\n                            onFocus: this.handleDateInputFocus,\n                            onBlur: this.handleDateInputBlur,\n                            onInput: this.handleDateInputChange\n                        })\n                    ),\n                    h(InfoDrawerItem, {title: 'Komi'},\n                        h('input', {\n                            type: 'number',\n                            name: 'komi',\n                            step: 0.5,\n                            placeholder: 0,\n                            value: komi == null ? '' : komi,\n                            onInput: this.handleInputChange.komi\n                        })\n                    ),\n                    h(InfoDrawerItem, {title: 'Result'},\n                        showResult \n                        ? h('input', {\n                            type: 'text',\n                            placeholder: 'None',\n                            value: result,\n                            onInput: this.handleInputChange.result\n                        })\n                        : h('button', {\n                            type: 'button',\n                            onClick: this.handleShowResultClick\n                        }, 'Show')\n                    ),\n                    h(InfoDrawerItem, {title: 'Handicap'},\n                        h('select',\n                            {\n                                selectedIndex: Math.max(0, handicap - 1),\n                                disabled: !emptyTree,\n                                onChange: this.handleInputChange.handicap\n                            },\n\n                            h('option', {value: 0}, 'No stones'),\n                            [...Array(8)].map((_, i) =>\n                                h('option', {value: i + 2}, (i + 2) + ' stones')\n                            )\n                        )\n                    ),\n                    h(InfoDrawerItem, {title: 'Board Size'},\n                        h('input', {\n                            type: 'number',\n                            name: 'size-width',\n                            placeholder: 19,\n                            max: 25,\n                            min: 3,\n                            value: size[0],\n                            disabled: !emptyTree,\n                            onFocus: this.handleBoardWidthFocus,\n                            onInput: this.handleBoardWidthChange\n                        }), ' ',\n\n                        h('span', {\n                            title: 'Swap',\n                            style: {cursor: emptyTree ? 'pointer': 'default'},\n                            onClick: !emptyTree ? helper.noop : this.handleSizeSwapButtonClick\n                        }, '×'), ' ',\n\n                        h('input', {\n                            type: 'number',\n                            name: 'size-height',\n                            placeholder: 19,\n                            max: 25,\n                            min: 3,\n                            value: size[1],\n                            disabled: !emptyTree,\n                            onInput: this.handleBoardHeightChange\n                        })\n                    )\n                ),\n\n                h('p', {},\n                    h('button', {type: 'submit', onClick: this.handleSubmitButtonClick}, 'OK'), ' ',\n                    h('button', {type: 'reset', onClick: this.handleCancelButtonClick}, 'Cancel')\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = InfoDrawer\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/drawers/InfoDrawer.js","/*!\n * Pikaday\n *\n * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    var moment;\n    if (typeof exports === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try { moment = require('moment'); } catch (e) {}\n        module.exports = factory(moment);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function (req)\n        {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try { moment = req(id); } catch (e) {}\n            return factory(moment);\n        });\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the toString function which gets passed a current date object and format\n        // and returns a string\n        toString: null,\n\n        // used to create date object from current input string\n        parse: null,\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the default flag for moment's strict date parsing\n        formatStrict: false,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // Week picker mode\n        pickWholeWeek: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // Render days of the calendar grid that fall in the next or previous month\n        showDaysInNextAndPreviousMonths: false,\n\n        // Allows user to select days that fall in the next or previous month\n        enableSelectionDaysInNextAndPreviousMonths: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // Blur field when date is selected\n        blurFieldOnSelect : true,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // events array\n        events: [],\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null,\n\n        // Enable keyboard input\n        keyboardInput: true\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        var arr = [];\n        var ariaSelected = 'false';\n        if (opts.isEmpty) {\n            if (opts.showDaysInNextAndPreviousMonths) {\n                arr.push('is-outside-current-month');\n\n                if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\n                    arr.push('is-selection-disabled');\n                }\n\n            } else {\n                return '<td class=\"is-empty\"></td>';\n            }\n        }\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n            ariaSelected = 'true';\n        }\n        if (opts.hasEvent) {\n            arr.push('has-event');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\n    {\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear, randId)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected=\"selected\"': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data, randId)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.blurFieldOnSelect && opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onKeyChange = function(e)\n        {\n            e = e || window.event;\n\n            if (self.isVisible()) {\n\n                switch(e.keyCode){\n                    case 13:\n                    case 27:\n                        if (opts.field) {\n                            opts.field.blur();\n                        }\n                        break;\n                    case 37:\n                        e.preventDefault();\n                        self.adjustDate('subtract', 1);\n                        break;\n                    case 38:\n                        self.adjustDate('subtract', 7);\n                        break;\n                    case 39:\n                        self.adjustDate('add', 1);\n                        break;\n                    case 40:\n                        self.adjustDate('add', 7);\n                        break;\n                }\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (opts.parse) {\n                date = opts.parse(opts.field.value, opts.format);\n            } else if (hasMoment) {\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n\n        if (opts.keyboardInput) {\n            addEvent(document, 'keydown', self._onKeyChange);\n        }\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            format = format || this._o.format;\n            if (!isDate(this._d)) {\n                return '';\n            }\n            if (this._o.toString) {\n              return this._o.toString(this._d, format);\n            }\n            if (hasMoment) {\n              return moment(this._d).format(format);\n            }\n            return this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustDate: function(sign, days) {\n\n            var day = this.getDate() || new Date();\n            var difference = parseInt(days)*24*60*60*1000;\n\n            var newDay;\n\n            if (sign === 'add') {\n                newDay = new Date(day.valueOf() + difference);\n            } else if (sign === 'subtract') {\n                newDay = new Date(day.valueOf() - difference);\n            }\n\n            this.setDate(newDay);\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.minDate = value;\n                this._o.minYear  = value.getFullYear();\n                this._o.minMonth = value.getMonth();\n            } else {\n                this._o.minDate = defaults.minDate;\n                this._o.minYear  = defaults.minYear;\n                this._o.minMonth = defaults.minMonth;\n                this._o.startRange = defaults.startRange;\n            }\n\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.maxDate = value;\n                this._o.maxYear = value.getFullYear();\n                this._o.maxMonth = value.getMonth();\n            } else {\n                this._o.maxDate = defaults.maxDate;\n                this._o.maxYear = defaults.maxYear;\n                this._o.maxMonth = defaults.maxMonth;\n                this._o.endRange = defaults.endRange;\n            }\n\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '',\n                randId;\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                this._o.onDraw(this);\n            }\n\n            if (opts.bound) {\n                // let the screen reader user know to use arrow keys\n                opts.field.setAttribute('aria-label', 'Use the arrow keys to pick a date');\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month, randId)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var previousMonth = month === 0 ? 11 : month - 1,\n                nextMonth = month === 11 ? 0 : month + 1,\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\n                yearOfNextMonth = month === 11 ? year + 1 : year,\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            var isWeekSelected = false;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n                    isEmpty = i < before || i >= (days + before),\n                    dayNumber = 1 + (i - before),\n                    monthNumber = month,\n                    yearNumber = year,\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day));\n\n                if (isEmpty) {\n                    if (i < before) {\n                        dayNumber = daysInPreviousMonth + dayNumber;\n                        monthNumber = previousMonth;\n                        yearNumber = yearOfPreviousMonth;\n                    } else {\n                        dayNumber = dayNumber - days;\n                        monthNumber = nextMonth;\n                        yearNumber = yearOfNextMonth;\n                    }\n                }\n\n                var dayConfig = {\n                        day: dayNumber,\n                        month: monthNumber,\n                        year: yearNumber,\n                        hasEvent: hasEvent,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange,\n                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n                        enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n                    };\n\n                if (opts.pickWholeWeek && isSelected) {\n                    isWeekSelected = true;\n                }\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n                    row = [];\n                    r = 0;\n                    isWeekSelected = false;\n                }\n            }\n            return renderTable(opts, data, randId);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this.isVisible()) {\n                this._v = true;\n                this.draw();\n                removeClass(this.el, 'is-hidden');\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            var opts = this._o;\n\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            if (opts.keyboardInput) {\n                removeEvent(document, 'keydown', this._onKeyChange);\n            }\n            if (opts.field) {\n                removeEvent(opts.field, 'change', this._onInputChange);\n                if (opts.bound) {\n                    removeEvent(opts.trigger, 'click', this._onInputClick);\n                    removeEvent(opts.trigger, 'focus', this._onInputFocus);\n                    removeEvent(opts.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/pikaday/pikaday.js","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 46;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/pikaday\n// module id = 46\n// module chunks = 0","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst Drawer = require('./Drawer')\n\nconst helper = require('../../modules/helper')\nconst setting = remote.require('./setting')\n\nclass ScoreRow extends Component {\n    render({method, score, komi, sign}) {\n        let index = sign > 0 ? 0 : 1\n\n        let total = method === 'area' ? score.area[index]\n            : score.territory[index] + score.captures[index]\n\n        if (sign < 0) total += komi\n\n        return h('tr', {},\n            h('th', {},\n                h('img', {\n                    src: `./img/goban/stone_${sign}.png`,\n                    alt: sign > 0 ? 'Black' : 'White',\n                    width: 24,\n                    height: 24\n                })\n            ),\n            h('td', {class: classNames({disabled: method === 'territory'})}, score.area[index]),\n            h('td', {class: classNames({disabled: method === 'area'})}, score.territory[index]),\n            h('td', {class: classNames({disabled: method === 'area'})}, score.captures[index]),\n            h('td', {}, sign < 0 ? komi : '-'),\n            h('td', {}, total)\n        )\n    }\n}\n\nclass ScoreDrawer extends Component {\n    constructor() {\n        super()\n\n        this.handleTerritoryButtonClick = () => setting.set('scoring.method', 'territory')\n        this.handleAreaButtonClick = () => setting.set('scoring.method', 'area')\n        this.handleCloseButtonClick = () => sabaki.closeDrawer()\n\n        this.handleSubmitButtonClick = evt => {\n            evt.preventDefault()\n\n            let {onSubmitButtonClick = helper.noop} = this.props\n            evt.resultString = this.resultString\n            onSubmitButtonClick(evt)\n        }\n    }\n\n    shouldComponentUpdate({areaMap}) {\n        return areaMap != null\n    }\n\n    render({show, estimating, method, areaMap, board, komi}) {\n        if (isNaN(komi)) komi = 0\n\n        let score = board ? board.getScore(areaMap) : {area: [], territory: [], captures: []}\n        let result = method === 'area' ? score.area[0] - score.area[1] - komi\n            : score.territory[0] - score.territory[1] + score.captures[0] - score.captures[1] - komi\n\n        this.resultString = result > 0 ? `B+${result}` : result < 0 ? `W+${-result}` : 'Draw'\n\n        return h(Drawer,\n            {\n                type: 'score',\n                show\n            },\n\n            h('h2', {}, 'Score'),\n\n            h('ul', {class: 'tabs'},\n                h('li', {class: classNames({current: method === 'area'})},\n                    h('a', {\n                        href: '#',\n                        onClick: this.handleAreaButtonClick\n                    }, 'Area')\n                ),\n                h('li', {class: classNames({current: method === 'territory'})},\n                    h('a', {\n                        href: '#',\n                        onClick: this.handleTerritoryButtonClick\n                    }, 'Territory')\n                )\n            ),\n\n            h('table', {},\n                h('thead', {}, h('tr', {},\n                    h('th'),\n                    h('th', {disabled: method === 'territory'}, 'Area'),\n                    h('th', {disabled: method === 'area'}, 'Territory'),\n                    h('th', {disabled: method === 'area'}, 'Captures'),\n                    h('th', {}, 'Komi'),\n                    h('th', {}, 'Total')\n                )),\n                h('tbody', {},\n                    h(ScoreRow, {method, score, komi, sign: 1}),\n                    h(ScoreRow, {method, score, komi, sign: -1})\n                )\n            ),\n\n            h('form', {},\n                h('p', {},\n                    'Result: ',\n                    h('span', {class: 'result'}, this.resultString), ' ',\n\n                    !estimating && h('button', {\n                        type: 'submit',\n                        onClick: this.handleSubmitButtonClick\n                    }, 'Update Result'), ' ',\n\n                    h('button', {\n                        type: 'reset',\n                        onClick: this.handleCloseButtonClick\n                    }, 'Close')\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = ScoreDrawer\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/drawers/ScoreDrawer.js","const {remote} = require('electron')\nconst {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst MiniGoban = require('../MiniGoban')\nconst Drawer = require('./Drawer')\n\nconst dialog = require('../../modules/dialog')\nconst fileformats = require('../../modules/fileformats')\nconst gametree = require('../../modules/gametree')\nconst helper = require('../../modules/helper')\nconst setting = remote.require('./setting')\nconst {sgf} = fileformats\n\nlet thumbnailSize = setting.get('gamechooser.thumbnail_size')\nlet itemMinWidth = thumbnailSize + 12 + 20\nlet itemHeight = 253 + 10 + 20\n\nlet getPreviewBoard = tree => {\n    let tp = gametree.navigate(tree, 0, 30)\n    if (!tp) tp = gametree.navigate(tree, 0, gametree.getCurrentHeight(tree) - 1)\n    return gametree.getBoard(...tp)\n}\n\nclass GameListItem extends Component {\n    constructor() {\n        super()\n\n        let events = ['Click', 'ContextMenu', 'DragStart', 'DragOver']\n\n        for (let name of events) {\n            this[`handle${name}`] = evt => {\n                let callback = this.props[`on${name}`]\n                evt.tree = this.props.tree\n                if (callback) callback(evt)\n            }\n        }\n    }\n\n    shouldComponentUpdate(nextProps) {\n        for (let i in nextProps)\n            if (nextProps[i] !== this.props[i]) return true\n\n        return false\n    }\n\n    render({tree, left, top, draggable, showThumbnail, insertBefore, insertAfter}) {\n        let gameInfo = sabaki.getGameInfo(tree)\n        let {gameName, eventName, blackName, blackRank, whiteName, whiteRank} = gameInfo\n        let name = gameName || eventName || ''\n\n        return h('li',\n            {\n                ref: el => this.element = el,\n                class: classNames({\n                    insertbefore: insertBefore,\n                    insertafter: insertAfter\n                }),\n                style: {left, top}\n            },\n\n            h('div',\n                {\n                    draggable,\n                    onClick: this.handleClick,\n                    onContextMenu: this.handleContextMenu,\n                    onDragStart: this.handleDragStart,\n                    onDragOver: this.handleDragOver\n                },\n\n                h('span', {title: name}, name),\n\n                h(MiniGoban, {\n                    board: getPreviewBoard(tree),\n                    maxSize: thumbnailSize,\n                    visible: showThumbnail\n                }),\n\n                h('span', {class: 'black', title: blackRank}, blackName || 'Black'),\n                h('span', {class: 'white', title: whiteRank}, whiteName || 'White')\n            )\n        )\n    }\n}\n\nclass GameChooserDrawer extends Component {\n    constructor() {\n        super()\n\n        this.itemElements = {}\n\n        this.state = {\n            scrollTop: 0,\n            insertBefore: -1,\n            animation: false,\n            filterText: ''\n        }\n\n        this.handleFilterTextChange = evt => this.setState({\n            filterText: evt.currentTarget.value.trim()\n        })\n\n        this.handleCloseButtonClick = () => sabaki.closeDrawer()\n\n        this.handleListScroll = evt => {\n            this.setState({scrollTop: evt.currentTarget.scrollTop})\n        }\n\n        this.handleItemContextMenu = evt => {\n            let template = [\n                {\n                    label: '&Remove Game',\n                    click: () => {\n                        if (dialog.showMessageBox(\n                            'Do you really want to remove this game permanently?',\n                            'warning',\n                            ['Remove Game', 'Cancel'], 1\n                        ) === 1) return\n\n                        let {gameTrees, onChange = helper.noop} = this.props\n                        let index = gameTrees.indexOf(evt.tree)\n\n                        onChange({gameTrees: gameTrees.filter((_, i) => i !== index)})\n                    }\n                },\n                {\n                    label: 'Remove &Other Games',\n                    click: () => {\n                        if (dialog.showMessageBox(\n                            'Do you really want to remove all other games permanently?',\n                            'warning',\n                            ['Remove Games', 'Cancel'], 1\n                        ) === 1) return\n\n                        let {onChange = helper.noop} = this.props\n                        onChange({gameTrees: [evt.tree]})\n                    }\n                }\n            ]\n\n            helper.popupMenu(template, evt.clientX, evt.clientY)\n        }\n\n        this.handleItemDragStart = evt => {\n            this.dragData = this.props.gameTrees.indexOf(evt.tree)\n        }\n\n        this.handleItemDragOver = evt => {\n            if (this.dragData == null) return\n\n            evt.preventDefault()\n\n            let element = evt.currentTarget\n            let index = this.props.gameTrees.indexOf(evt.tree)\n\n            let x = evt.clientX\n            let {left, width} = element.getBoundingClientRect()\n            let middle = left + width / 2\n\n            if (x <= middle - 10) {\n                this.setState({insertBefore: index})\n            } else if (x >= middle + 10) {\n                this.setState({insertBefore: index + 1})\n            }\n        }\n\n        this.handleItemDrop = evt => {\n            let {gameTrees, onChange = helper.noop} = this.props\n            let {insertBefore} = this.state\n            let newGameTrees = gameTrees.slice()\n\n            if (this.dragData == null || insertBefore < 0) return\n            if (insertBefore > this.dragData) insertBefore--\n\n            let [tree] = newGameTrees.splice(this.dragData, 1)\n            newGameTrees.splice(insertBefore, 0, tree)\n\n            this.dragData = null\n            this.setState({insertBefore: -1})\n\n            onChange({gameTrees: newGameTrees})\n        }\n\n        this.handleCancelDrag = () => {\n            this.dragData = null\n            this.setState({insertBefore: -1})\n        }\n\n        this.handleItemClick = evt => {\n            let {gameTrees} = this.props\n            let {onItemClick = helper.noop} = this.props\n            let index = gameTrees.indexOf(evt.tree)\n\n            evt.selectedTree = evt.tree\n            evt.selectedIndex = index\n\n            onItemClick(evt)\n        }\n\n        this.handleAddButtonClick = evt => {\n            let template = [\n                {\n                    label: 'Add &New Game',\n                    click: () => {\n                        let tree = sabaki.getEmptyGameTree()\n                        let {gameTrees, onChange = helper.noop} = this.props\n\n                        onChange({gameTrees: [...gameTrees, tree]})\n                    }\n                },\n                {\n                    label: 'Add &Existing Files…',\n                    click: () => {\n                        dialog.showOpenDialog({\n                            properties: ['openFile', 'multiSelections'],\n                            filters: [...fileformats.meta, {name: 'All Files', extensions: ['*']}]\n                        }, ({result}) => {\n                            let {onChange = helper.noop} = this.props\n\n                            sabaki.setBusy(true)\n\n                            if (result) {\n                                try {\n                                    for (let file of result) {\n                                        fileformats.parseFile(file, helper.noop, ({trees}) => {\n                                            onChange({gameTrees: [...this.props.gameTrees, ...trees]})\n                                        })\n                                    }\n                                } catch (err) {\n                                    dialog.showMessageBox('Some files are unreadable.', 'warning')\n                                }\n                            }\n\n                            sabaki.setBusy(false)\n                        })\n                    }\n                }\n            ]\n\n            let element = evt.currentTarget\n            let {left, bottom} = element.getBoundingClientRect()\n\n            helper.popupMenu(template, left, bottom)\n        }\n\n        this.handleSortButtonClick = evt => {\n            let natsort = require('natsort')\n\n            let template = [\n                {label: '&Black Player', property: 'PB'},\n                {label: '&White Player', property: 'PW'},\n                {label: 'Black R&ank', property: 'BR'},\n                {label: 'White Ran&k', property: 'WR'},\n                {label: 'Game &Name', property: 'GN'},\n                {label: 'Game &Event', property: 'EV'},\n                {label: '&Date', property: 'DT'},\n                {type: 'separator'},\n                {label: '&Reverse', property: '-1'}\n            ]\n\n            for (let item of template) {\n                let {property} = item\n                delete item.property\n\n                item.click = () => {\n                    sabaki.setBusy(true)\n\n                    let {gameTrees, onChange = helper.noop} = this.props\n\n                    // Stable sort\n\n                    gameTrees = gameTrees.map((x, i) => [x, i]).sort(([t1, i1], [t2, i2]) => {\n                        let s\n                        let [x1, x2] = property === '-1' ? [i2, i1]\n                            : [t1, t2].map(t => property in t.nodes[0] ? t.nodes[0][property][0] : '')\n\n                        if (['BR', 'WR'].includes(property)) {\n                            // Transform ranks\n\n                            [x1, x2] = [x1, x2]\n                            .map(x => (x.includes('k') ? -1 : x.includes('p') ? 10 : 1) * parseFloat(x))\n                            .map(x => isNaN(x) ? -Infinity : x)\n                        } else if (property === 'DT') {\n                            // Transform dates\n\n                            [x1, x2] = [x1, x2]\n                            .map(x => sgf.string2dates(x))\n                            .map(x => x ? sgf.dates2string(x.sort(helper.lexicalCompare)) : '')\n                        }\n\n                        if (['GN', 'EV'].includes(property)) {\n                            // Sort names\n\n                            s = natsort({insensitive: true})(x1, x2)\n                        } else {\n                            s = x1 < x2 ? -1 : +(x1 !== x2)\n                        }\n\n                        return s !== 0 ? s : i1 - i2\n                    }).map(x => x[0])\n\n                    onChange({gameTrees})\n                    sabaki.setBusy(false)\n                }\n            }\n\n            let element = evt.currentTarget\n            let {left, bottom} = element.getBoundingClientRect()\n\n            helper.popupMenu(template, left, bottom)\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener('resize', () => this.resize())\n\n        this.resize()\n        this.forceUpdate()\n    }\n\n    shouldComponentUpdate({show}, {animation}) {\n        return animation !== this.state.animation || show || show !== this.props.show\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.state.scrollTop !== prevState.scrollTop\n        && this.state.scrollTop !== this.gamesListElement.scrollTop) {\n            // Update scroll top\n\n            this.gamesListElement.scrollTop = this.state.scrollTop\n            this.setState({scrollTop: this.gamesListElement.scrollTop})\n        }\n\n        if (this.props.show && prevProps.gameTrees.length !== this.props.gameTrees.length) {\n            // Scroll down\n\n            this.gamesListElement.scrollTop = this.gamesListElement.scrollHeight\n            this.setState({scrollTop: this.gamesListElement.scrollTop})\n        }\n\n        if (!prevProps.show && this.props.show) {\n            // Scroll current list element into view\n\n            let index = this.shownGameTrees.findIndex(([, i]) => i === this.props.gameIndex)\n            let scrollTop = 0\n            if (index >= 0) scrollTop = this.getRowFromIndex(index) * itemHeight\n\n            this.gamesListElement.scrollTop = scrollTop\n            this.setState({scrollTop: this.gamesListElement.scrollTop})\n        }\n\n        if (prevProps.show !== this.props.show) {\n            // Animate\n\n            let gobanRect = document.getElementById('goban').getBoundingClientRect()\n            let drawerRect = document.getElementById('gamechooser').getBoundingClientRect()\n\n            let itemElement = this.itemElements[this.props.gameIndex]\n            let svgElement = itemElement != null ? itemElement.querySelector('svg') : null\n\n            if (itemElement != null && svgElement != null) {\n                let {width, height, left, top} = itemElement.querySelector('svg').getBoundingClientRect()\n\n                let miniGobanRect = {\n                    left: left - drawerRect.left,\n                    top: top - drawerRect.top,\n                    width,\n                    height\n                }\n\n                let direction = this.props.show ? 'reverse' : 'normal'\n\n                this.setState({animation: [miniGobanRect, gobanRect, direction]})\n                setTimeout(() => this.setState({animation: null}), 600)\n            }\n        }\n    }\n\n    resize() {\n        let innerWidth = this.gamesListElement.offsetWidth - 28\n        let height = this.gamesListElement.offsetHeight\n        let rowCount = Math.floor(innerWidth / itemMinWidth)\n\n        this.setState({innerWidth, height, rowCount})\n    }\n\n    getRowFromIndex(i) {\n        return (i - i % this.state.rowCount) / this.state.rowCount\n    }\n\n    render({\n        show,\n        gameTrees,\n        gameIndex\n    }, {\n        filterText,\n        animation,\n        scrollTop,\n        insertBefore,\n        rowCount,\n        innerWidth,\n        height\n    }) {\n        let itemWidth = Math.floor(innerWidth / rowCount)\n\n        this.shownGameTrees = gameTrees.map((tree, index) => {\n            return [tree, index]\n        }).filter(([tree]) => {\n            let gameInfo = sabaki.getGameInfo(tree)\n            let data = Object.keys(gameInfo).map(x => gameInfo[x])\n\n            return data.join(' ').toLowerCase().includes(filterText.toLowerCase())\n        })\n\n        return h('div', {onDrop: this.handleCancelDrag},\n            h('style', {}, `\n                #gamechooser .games-list .placeholder {\n                    height: ${(this.getRowFromIndex(this.shownGameTrees.length - 1) + 1) * itemHeight + 20}px;\n                }\n\n                #gamechooser .games-list li {\n                    width: ${itemWidth - 20}px;\n                }\n            `, animation && `\n                #gamechooser-animation {\n                    animation: gamechooser-animation .5s ${animation[2]} forwards;\n                }\n\n                @keyframes gamechooser-animation {\n                    from {\n                        transform: translate(${animation[0].left}px, ${animation[0].top}px);\n                        opacity: 1;\n                    }\n                    to {\n                        transform: translate(${animation[1].left}px, ${animation[1].top}px)\n                            scale(${animation[1].width / animation[0].width},\n                            ${animation[1].height / animation[0].height});\n                        opacity: 0;\n                    }\n                }\n            `),\n\n            h(Drawer,\n                {\n                    type: 'gamechooser',\n                    show\n                },\n\n                h('h2', {}, 'Manage Games'),\n\n                h('input', {\n                    type: 'search',\n                    name: 'filter',\n                    placeholder: 'Filter',\n                    value: filterText,\n                    onInput: this.handleFilterTextChange\n                }),\n\n                h('div',\n                    {\n                        ref: el => this.gamesListElement = el,\n                        class: 'games-list',\n\n                        onScroll: this.handleListScroll,\n                        onDrop: this.handleItemDrop\n                    },\n\n                    h('div', {class: 'placeholder'}),\n\n                    h('ol', {}, this.shownGameTrees.map(([tree, index], i) => {\n                        let row = this.getRowFromIndex(i)\n                        let itemTop = row * itemHeight + 10\n                        let itemLeft = (i - row * rowCount) * itemWidth + 10\n\n                        if (index !== gameIndex\n                        && (itemTop + itemHeight * 2 <= scrollTop || itemTop - itemHeight >= scrollTop + height))\n                            return\n\n                        return h(GameListItem, {\n                            ref: item => {\n                                if (item != null) this.itemElements[index] = item.element\n                            },\n                            key: tree.id,\n                            tree,\n                            top: itemTop,\n                            left: itemLeft,\n                            draggable: filterText === '',\n\n                            showThumbnail: index !== gameIndex || !animation,\n                            insertBefore: insertBefore === index,\n                            insertAfter: i === this.shownGameTrees.length - 1\n                                && insertBefore === index + 1,\n\n                            onClick: this.handleItemClick,\n                            onContextMenu: this.handleItemContextMenu,\n                            onDragStart: this.handleItemDragStart,\n                            onDragOver: this.handleItemDragOver\n                        })\n                    }))\n                ),\n\n                h('p', {},\n                    h('button', {\n                        type: 'button',\n                        class: 'dropdown',\n                        onClick: this.handleAddButtonClick\n                    }, 'Add'),\n\n                    h('button', {\n                        type: 'button',\n                        class: 'dropdown',\n                        onClick: this.handleSortButtonClick\n                    }, 'Sort By'),\n\n                    h('button', {\n                        type: 'button',\n                        onClick: this.handleCloseButtonClick\n                    }, 'Close')\n                )\n            ),\n\n            h('div',\n                {\n                    id: 'gamechooser-animation',\n                    style: !animation ? {\n                        opacity: 0,\n                        pointerEvents: 'none'\n                    } : {}\n                },\n\n                h(MiniGoban, {\n                    board: getPreviewBoard(gameTrees[gameIndex]),\n                    maxSize: thumbnailSize\n                })\n            )\n        )\n    }\n}\n\nmodule.exports = GameChooserDrawer\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/drawers/GameChooserDrawer.js","const {h, Component} = require('preact')\n\nconst range = n => [...Array(n)].map((_, i) => i)\n\nclass MiniGoban extends Component {\n    shouldComponentUpdate({board, maxSize, visible}) {\n        return visible !== this.props.visible\n            || maxSize !== this.props.maxSize\n            || board.getPositionHash() !== this.props.board.getPositionHash()\n    }\n\n    render({board, maxSize, visible = true}) {\n        let fieldSize = (maxSize - 1) / Math.max(board.width, board.height)\n        let radius = fieldSize / 2\n        let rangeX = range(board.width)\n        let rangeY = range(board.height)\n\n        return h('svg',\n            {\n                width: fieldSize * board.width + 1,\n                height: fieldSize * board.height + 1,\n                style: {visibility: visible ? 'visible' : 'hidden'}\n            },\n\n            // Draw hoshi points\n\n            board.getHandicapPlacement(9).map(([x, y]) =>\n                h('circle', {\n                    cx: x * fieldSize + radius + 1,\n                    cy: y * fieldSize + radius + 1,\n                    r: 2,\n                    fill: '#5E2E0C'\n                })\n            ),\n\n            // Draw shadows\n\n            rangeX.map(x =>\n                rangeY.map(y =>\n                    board.get([x, y]) !== 0 && h('circle', {\n                        cx: x * fieldSize + radius + 1,\n                        cy: y * fieldSize + radius + 2,\n                        r: radius,\n                        fill: 'rgba(0, 0, 0, .5)'\n                    })\n                )\n            ),\n\n            // Draw stones\n\n            rangeX.map(x =>\n                rangeY.map(y =>\n                    board.get([x, y]) !== 0 && h('circle', {\n                        cx: x * fieldSize + radius + 1,\n                        cy: y * fieldSize + radius + 1,\n                        r: radius,\n                        fill: board.get([x, y]) < 0 ? 'white' : 'black'\n                    })\n                )\n            )\n        )\n    }\n}\n\nmodule.exports = MiniGoban\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/MiniGoban.js","/*\n * natsort\n * https://github.com/bubkoo/natsort\n *\n * Copyright 2016 bubkoo\n * Released under the MIT license\n */\n\n(function () {\n\n    'use strict';\n\n    function natsort(options) {\n\n        options = options || {};\n\n        var GREATER = options.desc ? -1 : 1;\n        var SMALLER = -GREATER;\n\n        var ore = /^0/;\n        var sre = /\\s+/g;\n        var tre = /^\\s+|\\s+$/g;\n        // unicode\n        var ure = /[^\\x00-\\x80]/;\n        // hex\n        var hre = /^0x[0-9a-f]+$/i;\n        // numeric\n        // var nre = /(^([+\\-]?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?(?=\\D|\\s|$))|^0x[\\da-fA-F]+$|\\d+)/g;\n        var nre = /(0x[\\da-fA-F]+|(^[\\+\\-]?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?(?=\\D|\\s|$))|\\d+)/g;\n        // datetime\n        var dre = /(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/;\n\n\n        var normalize = options.insensitive ?\n            function (s) {\n                return lowerCase('' + s).replace(tre, '');\n            } :\n            function (s) {\n                return ('' + s).replace(tre, '');\n            };\n\n        function lowerCase(s) {\n            if (s.toLocaleLowerCase) {\n                return s.toLocaleLowerCase();\n            }\n            return s.toLowerCase();\n        }\n\n        function tokenize(s) {\n            return s.replace(nre, '\\0$1\\0')\n                .replace(/\\0$/, '')\n                .replace(/^\\0/, '')\n                .split('\\0');\n        }\n\n        function parse(s, l) {\n            // normalize spaces; find floats not starting with '0',\n            // string or 0 if not defined (Clint Priest)\n            return (!s.match(ore) || l === 1)\n                && parseFloat(s)\n                || s.replace(sre, ' ').replace(tre, '')\n                || 0;\n        }\n\n\n        return function (a, b) {\n\n            // trim pre-post whitespace\n            var x = normalize(a);\n            var y = normalize(b);\n\n            // return immediately if at least one of the values is empty.\n            // - empty string < any others\n            if (!x && !y) {\n                return 0;\n            }\n\n            if (!x && y) {\n                return SMALLER;\n            }\n\n            if (x && !y) {\n                return GREATER;\n            }\n\n\n            // tokenize: split numeric strings and default strings\n            var xArr = tokenize(x);\n            var yArr = tokenize(y);\n\n            // hex or date detection\n            var xD = parseInt(x.match(hre), 16) || (xArr.length !== 1 && Date.parse(x));\n            var yD = parseInt(y.match(hre), 16) || xD && y.match(dre) && Date.parse(y) || null;\n\n            // try and sort Hex codes or Dates\n            if (yD) {\n                if (xD < yD) {\n                    return SMALLER;\n                } else if (xD > yD) {\n                    return GREATER;\n                }\n            }\n\n            //console.log('x: ' + xArr.join('@'));\n            //console.log('y: ' + yArr.join('@'));\n\n            var xL = xArr.length;\n            var yL = yArr.length;\n\n            // handle numeric strings and default strings\n            for (var i = 0, l = Math.max(xL, yL); i < l; i++) {\n\n                var xF = parse(xArr[i] || '', xL);\n                var yF = parse(yArr[i] || '', yL);\n\n                //console.log('xF: ' + xF);\n                //console.log('yF: ' + yF);\n\n                // handle numeric vs string comparison\n                // - numeric < string - (Kyle Adams)\n                if (isNaN(xF) !== isNaN(yF)) {\n                    return isNaN(xF) ? GREATER : SMALLER;\n                }\n\n\n                // if unicode use locale comparison\n                if (ure.test(xF + yF) && xF.localeCompare) {\n                    var comp = xF.localeCompare(yF);\n\n                    if (comp > 0) {\n                        return GREATER;\n                    } else if (comp < 0) {\n                        return SMALLER;\n                    } else {\n                        if (i === l - 1) {\n                            return 0;\n                        } else {\n                            continue;\n                        }\n                    }\n                }\n\n                if (xF < yF) {\n                    return SMALLER;\n                } else if (xF > yF) {\n                    return GREATER;\n                }\n            }\n\n            return 0;\n        };\n    }\n\n\n    // exports\n    // -------\n\n    /*global module:true, define: true, window: true */\n\n    if (typeof exports === 'object' && typeof module === 'object') {\n        module.exports = natsort;\n    } else if (typeof define === 'function' && define.amd) {\n        define([], function () {\n            return natsort;\n        });\n    } else if (typeof exports === 'object') {\n        exports.natsort = natsort;\n    } else {\n        (typeof window !== 'undefined' ? window : this).natsort = natsort;\n    }\n\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/natsort/index.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nconst helper = require('../modules/helper')\n\nclass InputBox extends Component {\n    constructor() {\n        super()\n\n        this.state = {value: ''}\n\n        this.handleInput = evt => this.setState({value: evt.currentTarget.value})\n        this.stopPropagation = evt => evt.stopPropagation()\n\n        this.handleKeyUp = evt => {\n            if (!this.props.show) return\n\n            if (evt.keyCode === 27) {\n                // Escape\n\n                evt.stopPropagation()\n                this.cancel()\n            } else if (evt.keyCode == 13) {\n                // Enter\n\n                evt.stopPropagation()\n                sabaki.setState({showInputBox: false})\n\n                let {onSubmit = helper.noop} = this.props\n                onSubmit(this.state)\n            }\n        }\n\n        this.cancel = this.cancel.bind(this)\n    }\n\n    shouldComponentUpdate({show, text, onSubmit, onCancel}) {\n        return show !== this.props.show\n            || text !== this.props.text\n            || onSubmit !== this.props.onSubmit\n            || onCancel !== this.props.onCancel\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.show && !this.props.show) {\n            this.setState({value: ''})\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (!prevProps.show && this.props.show) {\n            this.inputElement.focus()\n        }\n    }\n\n    cancel() {\n        if (!this.props.show) return\n\n        if (document.activeElement === this.inputElement)\n            this.inputElement.blur()\n\n        let {onCancel = helper.noop} = this.props\n        sabaki.setState({showInputBox: false})\n        onCancel()\n    }\n\n    render({show, text}, {value}) {\n        return h('section',\n            {\n                id: 'input-box',\n                class: classNames({show}),\n\n                onClick: this.cancel\n            },\n\n            h('div', {class: 'inner', onClick: this.stopPropagation},\n                h('input', {\n                    ref: el => this.inputElement = el,\n                    type: 'text',\n                    name: 'input',\n                    value,\n                    placeholder: text,\n\n                    onInput: this.handleInput,\n                    onKeyUp: this.handleKeyUp,\n                    onBlur: this.cancel\n                })\n            )\n        )\n    }\n}\n\nmodule.exports = InputBox\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/InputBox.js","const {remote, ipcRenderer} = require('electron')\nconst {h, Component} = require('preact')\n\nconst setting = remote.require('./setting')\n\nclass BusyScreen extends Component {\n    componentWillReceiveProps({show}) {\n        if (show === this.props.show) return\n\n        clearTimeout(this.busyId)\n\n        if (show) {\n            ipcRenderer.send('build-menu', true)\n            this.setState({show: true})\n            document.activeElement.blur()\n        } else {\n            ipcRenderer.send('build-menu')\n            let delay = setting.get('app.hide_busy_delay')\n            this.busyId = setTimeout(() => this.setState({show: false}), delay)\n        }\n    }\n\n    render(_, {show}) {\n        return h('section', {\n            id: 'busy',\n            style: {display: show ? 'block' : 'none'}\n        })\n    }\n}\n\nmodule.exports = BusyScreen\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/BusyScreen.js","const {h, Component} = require('preact')\nconst classNames = require('classnames')\n\nclass InfoOverlay extends Component {\n    shouldComponentUpdate({text, show}) {\n        return text !== this.props.text || show !== this.props.show\n    }\n\n    render({text, show}) {\n        return h('section', {\n            id: 'info-overlay',\n            class: classNames({show})\n        }, text)\n    }\n}\n\nmodule.exports = InfoOverlay\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/InfoOverlay.js","let lastPachiIndex = -1\nlet lastCaptureIndex = -1\n\nlet captureSounds = Object.keys(new Int8Array(5)).map(x => new Audio(`./data/capture${x}.mp3`))\nlet pachiSounds = Object.keys(new Int8Array(5)).map(x => new Audio(`./data/${x}.mp3`))\n\nlet newGameSound = new Audio('./data/newgame.mp3')\nlet passSound = new Audio('./data/pass.mp3')\n\nexports.playPachi = function(delay = 0) {\n    let index = lastPachiIndex\n\n    while (index === lastPachiIndex) {\n        index = Math.floor(Math.random() * pachiSounds.length)\n    }\n\n    lastPachiIndex = index\n\n    setTimeout(() => pachiSounds[index].play(), delay)\n}\n\nexports.playCapture = function(delay = 0) {\n    let index = lastCaptureIndex\n\n    while (index === lastCaptureIndex) {\n        index = Math.floor(Math.random() * captureSounds.length)\n    }\n\n    lastCaptureIndex = index\n\n    setTimeout(() => captureSounds[index].play(), delay)\n}\n\nexports.playPass = function(delay = 0) {\n    setTimeout(() => passSound.play(), delay)\n}\n\nexports.playNewGame = function(delay = 0) {\n    setTimeout(() => newGameSound.play(), delay)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/sound.js"],"sourceRoot":""}